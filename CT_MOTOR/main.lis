                        .module main.c
                        .area text(rom, con, rel)
 0000                   .dbfile main.c
 0000                   .dbfile D:\chen\Core\FirmWare_CT\CT_MOTOR\main.c
 0000                   .dbfunc e InitialIO _InitialIO fV
                        .even
 0000           _InitialIO::
 0000                   .dbline -1
 0000                   .dbline 101
 0000           ; 
 0000           ; #include <iom128v.h>                                                                  
 0000           ; #include <macros.h>
 0000           ; #include <stdio.h>
 0000           ; 
 0000           ;  //20170703
 0000           ;  //适应新做的电机板,R2改为30K
 0000           ;  //20170716  开电机电源时要关模拟比较器中断（后级电容充电时约20ms，把总线电压下拉到约40V左右，正好是欠压中断的门槛），老主控板因为欠压门槛是28V，所以没事，老电机控制小板没事的原因暂不知，可能是后级电容充电比较慢。
 0000           ;  //20170719 电机断路档位最小为5mA，步进为10mA，电机动作时电机电压+3
 0000           ; #define  BB     0x12        //固件版本号
 0000           ; 
 0000           ; #define INT_EN                { SEI(); }
 0000           ; #define INT_DIS               { CLI(); }
 0000           ;  
 0000           ; //电机管脚定义
 0000           ; #define MT1_P1_Set()     (PORTG |= (1<<PORTG1))  
 0000           ; #define MT1_P1_Clr()     (PORTG &= ~(1<<PORTG1)) 
 0000           ; #define MT1_N1_Set()     (PORTG |= (1<<PORTG0))  
 0000           ; #define MT1_N1_Clr()     (PORTG &= ~(1<<PORTG0)) 
 0000           ; #define MT1_P2_Set()     (PORTD |= (1<<PORTD6))  
 0000           ; #define MT1_P2_Clr()     (PORTD &= ~(1<<PORTD6)) 
 0000           ; #define MT1_N2_Set()     (PORTD |= (1<<PORTD7))  
 0000           ; #define MT1_N2_Clr()     (PORTD &= ~(1<<PORTD7)) 
 0000           ; 
 0000           ; #define MT2_P1_Set()     (PORTA |= (1<<PORTA4))  
 0000           ; #define MT2_P1_Clr()     (PORTA &= ~(1<<PORTA4)) 
 0000           ; #define MT2_N1_Set()     (PORTA |= (1<<PORTA5))  
 0000           ; #define MT2_N1_Clr()     (PORTA &= ~(1<<PORTA5)) 
 0000           ; #define MT2_P2_Set()     (PORTA |= (1<<PORTA2))  
 0000           ; #define MT2_P2_Clr()     (PORTA &= ~(1<<PORTA2)) 
 0000           ; #define MT2_N2_Set()     (PORTA |= (1<<PORTA3))  
 0000           ; #define MT2_N2_Clr()     (PORTA &= ~(1<<PORTA3)) 
 0000           ; 
 0000           ; 
 0000           ; //开电机电源，先关模拟比较器中断，再开电机电源 ，再延时50ms(实际上开电源只需要20ms)，再清模拟比较器中断，再开模拟比较器中断
 0000           ; #define VM_OPEN        {ACSR&=0xf7;PORTA |= (1<<PORTA6);CheckMotor(50);ACSR|=0x10;ACSR|=0x08;}
 0000           ; //关电机电源
 0000           ; #define VM_Close()       (PORTA &= ~(1<<PORTA6)) 
 0000           ; 
 0000           ; //同时关二个电机
 0000           ; #define MOTORSTOP   {MT1_P2_Clr();MT1_N2_Clr();MT2_P2_Clr();MT2_N2_Clr();VM_Close();MT1_P1_Clr();MT1_N1_Clr();MT2_P1_Clr();MT2_N1_Clr();}
 0000           ; 
 0000           ; #define DELAY10 for(Tt=0;Tt<4;Tt++);
 0000           ; #define DELAY20 for(Tt=0;Tt<4;Tt++);
 0000           ; #define DELAY40 for(Tt=0;Tt<16;Tt++); 
 0000           ; #define DELAY50 for(Tt=0;Tt<21;Tt++); 
 0000           ; #define DELAY80 for(Tt=0;Tt<32;Tt++); 
 0000           ; #define DELAY89 for(Tt=0;Tt<36;Tt++); 
 0000           ; #define DELAY100 for(Tt=0;Tt<42;Tt++); 
 0000           ; #define DELAY170 for(Tt=0;Tt<72;Tt++);
 0000           ; #define DELAY268 for(Tt=0;Tt<113;Tt++);
 0000           ; #define DELAY397 for(Tt=0;Tt<165;Tt++);
 0000           ; #define DELAY400 for(Tt=0;Tt<168;Tt++);
 0000           ; #define DELAY500 for(Tt=0;Tt<210;Tt++);
 0000           ; 
 0000           ; union FIB
 0000           ; {
 0000           ;  float f;
 0000           ;  unsigned int i[2];
 0000           ;  unsigned char b[4];
 0000           ; }myFIB;
 0000           ; 
 0000           ; union MotorStatus
 0000           ; {
 0000           ;  unsigned int i;
 0000           ;  struct 
 0000           ;  { 
 0000           ;    unsigned int RUN:1;//bit0,电机运行状态，0：停止，1：运行
 0000           ;    unsigned int DIR:1;//bit1,电机运行方向，0：反转,收臂-调大(DIR_L)，1：正转,张臂-调小(DIR_H)
 0000           ;    unsigned int BrokenStop:1;//bit2, 断路停
 0000           ;    unsigned int CommandStop:1;//bit3,手动停
 0000           ;    unsigned int OverCurrent:1;//bit4,过流停
 0000           ;    unsigned int UnderVoltage:1;//bit5,欠压停
 0000           ;    unsigned int StartResult:2;//bit6-bit7,电机最近一次启动结果(0：正常上电启动，1：本电机同向运行，2：本电机反向运行，3：另一个电机正在运行)
 0000           ;    
 0000           ;    unsigned int ThisCurrent:8;//bit8-bit15 ,  电机当前或停止前最近一次电流
 0000           ;  }s;
 0000           ; }Motor1Status,Motor2Status;//电机状态
 0000           ; 
 0000           ; unsigned char Motor1Gear,Motor2Gear;// 电机过流档位
 0000           ; unsigned char Motor1Thr,Motor2Thr;//电机堵转过流阈值
 0000           ; unsigned char MotorIdelGear;//电机断路档位
 0000           ; unsigned char MotorIdelCur;// 电机断路电流
 0000           ; unsigned char R_dat; 
 0000           ; unsigned char IntFlag;
 0000           ; unsigned char Tt;
 0000           ; 
 0000           ; 
 0000           ; void InitialIO(void);
 0000           ; void Pwm_startup(unsigned char motor);
 0000           ; void Start(void);
 0000           ; unsigned char SampleADC(unsigned char ch);
 0000           ; void EEPROM_write(unsigned int Address,unsigned char Data);
 0000           ; unsigned char EEPROM_read(unsigned int Address);
 0000           ; void CheckMotor(unsigned int t);
 0000           ; void Gear2Thr(void);
 0000           ; void uart1_rx_isr(void);
 0000           ; void SendUart1(unsigned char dat);
 0000           ; 
 0000           ; void InitialIO(void)
 0000           ; {//1输出，0输入
 0000                   .dbline 102
 0000           ;  PORTA=0x00;
 0000 2224              clr R2
 0002 2BBA              out 0x1b,R2
 0004                   .dbline 103
 0004           ;  DDRA=0x7c;  
 0004 8CE7              ldi R24,124
 0006 8ABB              out 0x1a,R24
 0008                   .dbline 105
 0008           ; 
 0008           ;  PORTD=0x00; 
 0008 22BA              out 0x12,R2
 000A                   .dbline 106
 000A           ;  DDRD=0xc0; 
 000A 80EC              ldi R24,192
 000C 81BB              out 0x11,R24
 000E                   .dbline 108
 000E           ; 
 000E           ;  PORTG=0x00; 
 000E 20926500          sts 101,R2
 0012                   .dbline 109
 0012           ;  DDRG=0x03; 
 0012 83E0              ldi R24,3
 0014 80936400          sts 100,R24
 0018                   .dbline -2
 0018           L2:
 0018                   .dbline 0 ; func end
 0018 0895              ret
 001A                   .dbend
 001A                   .dbfunc e uart1_init _uart1_init fV
                        .even
 001A           _uart1_init::
 001A                   .dbline -1
 001A                   .dbline 119
 001A           ; }
 001A           ; 
 001A           ; 
 001A           ; //UART1 initialize
 001A           ; // desired baud rate:9600
 001A           ; // actual baud rate:9615 (0.2%)
 001A           ; // char size: 8 bit
 001A           ; // parity: Disabled
 001A           ; void uart1_init(void)
 001A           ; {
 001A                   .dbline 120
 001A           ;  UCSR1B = 0x00; //disable while setting baud rate
 001A 2224              clr R2
 001C 20929A00          sts 154,R2
 0020                   .dbline 121
 0020           ;  UCSR1A = 0x02;
 0020 82E0              ldi R24,2
 0022 80939B00          sts 155,R24
 0026                   .dbline 122
 0026           ;  UCSR1C = 0x06;
 0026 86E0              ldi R24,6
 0028 80939D00          sts 157,R24
 002C                   .dbline 123
 002C           ;  UBRR1L = 0x67; //set baud rate lo
 002C 87E6              ldi R24,103
 002E 80939900          sts 153,R24
 0032                   .dbline 124
 0032           ;  UBRR1H = 0x00; //set baud rate hi
 0032 20929800          sts 152,R2
 0036                   .dbline 125
 0036           ;  UCSR1B = 0x98;
 0036 88E9              ldi R24,152
 0038 80939A00          sts 154,R24
 003C                   .dbline -2
 003C           L3:
 003C                   .dbline 0 ; func end
 003C 0895              ret
 003E                   .dbend
                        .area vector(rom, abs)
                        .org 120
 0078 0C941F00          jmp _uart1_rx_isr
                        .area text(rom, con, rel)
 003E                   .dbfile D:\chen\Core\FirmWare_CT\CT_MOTOR\main.c
 003E                   .dbfunc e uart1_rx_isr _uart1_rx_isr fV
                        .even
 003E           _uart1_rx_isr::
 003E 2A92              st -y,R2
 0040 8A93              st -y,R24
 0042 2FB6              IN R2,63
 0044 2A92              st -y,R2
 0046                   .dbline -1
 0046                   .dbline 130
 0046           ; }
 0046           ; 
 0046           ; #pragma interrupt_handler uart1_rx_isr:iv_USART1_RXC
 0046           ; void uart1_rx_isr(void)//串口1接收中断
 0046           ; {
 0046                   .dbline 131
 0046           ;   R_dat=UDR1;
 0046 20909C00          lds R2,156
 004A 20920200          sts _R_dat,R2
 004E                   .dbline 132
 004E           ;   IntFlag=1;
 004E 81E0              ldi R24,1
 0050 80930100          sts _IntFlag,R24
 0054                   .dbline -2
 0054           L4:
 0054                   .dbline 0 ; func end
 0054 2990              ld R2,y+
 0056 2FBE              OUT 63,R2
 0058 8991              ld R24,y+
 005A 2990              ld R2,y+
 005C 1895              reti
 005E                   .dbend
 005E                   .dbfunc e SendUart1 _SendUart1 fV
 005E           ;            dat -> R16
                        .even
 005E           _SendUart1::
 005E                   .dbline -1
 005E                   .dbline 136
 005E           ; }
 005E           ; 
 005E           ; void SendUart1(unsigned char dat)
 005E           ; {
 005E           L6:
 005E                   .dbline 137
 005E           ;   while(!(UCSR1A&(1<<UDRE1)));   // 等待发送缓冲器为空
 005E           L7:
 005E                   .dbline 137
 005E 20909B00          lds R2,155
 0062 25FE              sbrs R2,5
 0064 FCCF              rjmp L6
 0066           X0:
 0066                   .dbline 138
 0066           ;   UDR1=dat;  
 0066 00939C00          sts 156,R16
 006A                   .dbline -2
 006A           L5:
 006A                   .dbline 0 ; func end
 006A 0895              ret
 006C                   .dbsym r dat 16 c
 006C                   .dbend
                        .area vector(rom, abs)
                        .org 116
 0074 0C943600          jmp _timer3_ovf_isr
                        .area text(rom, con, rel)
 006C                   .dbfile D:\chen\Core\FirmWare_CT\CT_MOTOR\main.c
 006C                   .dbfunc e timer3_ovf_isr _timer3_ovf_isr fV
                        .even
 006C           _timer3_ovf_isr::
 006C 2A92              st -y,R2
 006E 8A93              st -y,R24
 0070 9A93              st -y,R25
 0072 AA93              st -y,R26
 0074 EA93              st -y,R30
 0076 2FB6              IN R2,63
 0078 2A92              st -y,R2
 007A                   .dbline -1
 007A                   .dbline 144
 007A           ; }
 007A           ; 
 007A           ; 
 007A           ; #pragma interrupt_handler timer3_ovf_isr:iv_TIM3_OVF
 007A           ; void timer3_ovf_isr(void)//微调时用这个定时中断来自动关电机
 007A           ; {
 007A                   .dbline 145
 007A           ;       ETIMSK = 0x00; //Timer3中断关闭
 007A 2224              clr R2
 007C 20927D00          sts 125,R2
 0080                   .dbline 146
 0080           ;       TCCR3B = 0x00; //stop
 0080 20928A00          sts 138,R2
 0084                   .dbline 148
 0084           ;        
 0084           ;       MOTORSTOP  //关电机
 0084                   .dbline 148
 0084 9698              cbi 0x12,6
 0086                   .dbline 148
 0086 9798              cbi 0x12,7
 0088                   .dbline 148
 0088 DA98              cbi 0x1b,2
 008A                   .dbline 148
 008A DB98              cbi 0x1b,3
 008C                   .dbline 148
 008C DE98              cbi 0x1b,6
 008E                   .dbline 148
 008E 80916500          lds R24,101
 0092 8D7F              andi R24,253
 0094 80936500          sts 101,R24
 0098                   .dbline 148
 0098 80916500          lds R24,101
 009C 8E7F              andi R24,254
 009E 80936500          sts 101,R24
 00A2                   .dbline 148
 00A2 DC98              cbi 0x1b,4
 00A4                   .dbline 148
 00A4 DD98              cbi 0x1b,5
 00A6                   .dbline 148
 00A6                   .dbline 150
 00A6           ;               
 00A6           ;     if(Motor1Status.s.RUN==1)//收放电机正在运行
 00A6 80910B00          lds R24,_Motor1Status
 00AA 90910C00          lds R25,_Motor1Status+1
 00AE 8170              andi R24,1
 00B0 9070              andi R25,0
 00B2 8130              cpi R24,1
 00B4 E0E0              ldi R30,0
 00B6 9E07              cpc R25,R30
 00B8 71F4              brne L10
 00BA           X1:
 00BA                   .dbline 151
 00BA           ;       {
 00BA                   .dbline 152
 00BA           ;               Motor1Status.s.RUN=0;
 00BA 80910B00          lds R24,_Motor1Status
 00BE 90910C00          lds R25,_Motor1Status+1
 00C2 8E7F              andi R24,254
 00C4 90930C00          sts _Motor1Status+1,R25
 00C8 80930B00          sts _Motor1Status,R24
 00CC                   .dbline 153
 00CC           ;               Motor1Status.s.CommandStop=1;
 00CC 8860              ori R24,8
 00CE 90930C00          sts _Motor1Status+1,R25
 00D2 80930B00          sts _Motor1Status,R24
 00D6                   .dbline 154
 00D6           ;       }
 00D6           L10:
 00D6                   .dbline 156
 00D6           ;       
 00D6           ;       if(Motor2Status.s.RUN==1)//调节电机正在运行
 00D6 80910900          lds R24,_Motor2Status
 00DA 90910A00          lds R25,_Motor2Status+1
 00DE 8170              andi R24,1
 00E0 9070              andi R25,0
 00E2 8130              cpi R24,1
 00E4 E0E0              ldi R30,0
 00E6 9E07              cpc R25,R30
 00E8 71F4              brne L12
 00EA           X2:
 00EA                   .dbline 157
 00EA           ;       { 
 00EA                   .dbline 158
 00EA           ;               Motor2Status.s.RUN=0;
 00EA 80910900          lds R24,_Motor2Status
 00EE 90910A00          lds R25,_Motor2Status+1
 00F2 8E7F              andi R24,254
 00F4 90930A00          sts _Motor2Status+1,R25
 00F8 80930900          sts _Motor2Status,R24
 00FC                   .dbline 159
 00FC           ;               Motor2Status.s.CommandStop=1;
 00FC 8860              ori R24,8
 00FE 90930A00          sts _Motor2Status+1,R25
 0102 80930900          sts _Motor2Status,R24
 0106                   .dbline 160
 0106           ;       }            
 0106           L12:
 0106                   .dbline -2
 0106           L9:
 0106                   .dbline 0 ; func end
 0106 2990              ld R2,y+
 0108 2FBE              OUT 63,R2
 010A E991              ld R30,y+
 010C A991              ld R26,y+
 010E 9991              ld R25,y+
 0110 8991              ld R24,y+
 0112 2990              ld R2,y+
 0114 1895              reti
 0116                   .dbend
 0116                   .dbfunc e Pwm_startup _Pwm_startup fV
 0116           ;              c -> R20
 0116           ;              b -> R22
 0116           ;          motor -> R16
                        .even
 0116           _Pwm_startup::
 0116 4A93              st -y,R20
 0118 6A93              st -y,R22
 011A                   .dbline -1
 011A                   .dbline 165
 011A           ; }
 011A           ; 
 011A           ; 
 011A           ; void Pwm_startup(unsigned char motor)//电机软启动
 011A           ; {     unsigned char c,b;
 011A                   .dbline 167
 011A           ; 
 011A           ;       if(motor==1)
 011A 0130              cpi R16,1
 011C 09F0              breq X55
 011E 66C1              xjmp L15
 0120           X55:
 0120           X3:
 0120                   .dbline 168
 0120           ;       {  
 0120                   .dbline 169
 0120           ;          Motor1Status.s.RUN=1;
 0120 80910B00          lds R24,_Motor1Status
 0124 90910C00          lds R25,_Motor1Status+1
 0128 8160              ori R24,1
 012A 90930C00          sts _Motor1Status+1,R25
 012E 80930B00          sts _Motor1Status,R24
 0132                   .dbline 171
 0132           ;          
 0132           ;          if(Motor1Status.s.DIR==1)//正转
 0132 9695              lsr R25
 0134 8795              ror R24
 0136 8170              andi R24,1
 0138 9070              andi R25,0
 013A 8130              cpi R24,1
 013C E0E0              ldi R30,0
 013E 9E07              cpc R25,R30
 0140 09F0              breq X56
 0142 AAC0              xjmp L17
 0144           X56:
 0144           X4:
 0144                   .dbline 172
 0144           ;          { 
 0144                   .dbline 173
 0144           ;            MT1_N1_Clr();// 关上MOS管
 0144 80916500          lds R24,101
 0148 8E7F              andi R24,254
 014A 80936500          sts 101,R24
 014E                   .dbline 174
 014E           ;                DELAY500
 014E 2224              clr R2
 0150 20920000          sts _Tt,R2
 0154 05C0              xjmp L22
 0156           L19:
 0156                   .dbline 174
 0156           L20:
 0156                   .dbline 174
 0156 80910000          lds R24,_Tt
 015A 8F5F              subi R24,255    ; addi 1
 015C 80930000          sts _Tt,R24
 0160           L22:
 0160                   .dbline 174
 0160 80910000          lds R24,_Tt
 0164 823D              cpi R24,210
 0166 B8F3              brlo L19
 0168           X5:
 0168                   .dbline 175
 0168           ;                DELAY500
 0168 2224              clr R2
 016A 20920000          sts _Tt,R2
 016E 05C0              xjmp L26
 0170           L23:
 0170                   .dbline 175
 0170           L24:
 0170                   .dbline 175
 0170 80910000          lds R24,_Tt
 0174 8F5F              subi R24,255    ; addi 1
 0176 80930000          sts _Tt,R24
 017A           L26:
 017A                   .dbline 175
 017A 80910000          lds R24,_Tt
 017E 823D              cpi R24,210
 0180 B8F3              brlo L23
 0182           X6:
 0182                   .dbline 176
 0182           ;                MT1_N2_Clr();// 关下MOS管
 0182 9798              cbi 0x12,7
 0184                   .dbline 177
 0184           ;                DELAY500
 0184 2224              clr R2
 0186 20920000          sts _Tt,R2
 018A 05C0              xjmp L30
 018C           L27:
 018C                   .dbline 177
 018C           L28:
 018C                   .dbline 177
 018C 80910000          lds R24,_Tt
 0190 8F5F              subi R24,255    ; addi 1
 0192 80930000          sts _Tt,R24
 0196           L30:
 0196                   .dbline 177
 0196 80910000          lds R24,_Tt
 019A 823D              cpi R24,210
 019C B8F3              brlo L27
 019E           X7:
 019E                   .dbline 178
 019E           ;                DELAY500
 019E 2224              clr R2
 01A0 20920000          sts _Tt,R2
 01A4 05C0              xjmp L34
 01A6           L31:
 01A6                   .dbline 178
 01A6           L32:
 01A6                   .dbline 178
 01A6 80910000          lds R24,_Tt
 01AA 8F5F              subi R24,255    ; addi 1
 01AC 80930000          sts _Tt,R24
 01B0           L34:
 01B0                   .dbline 178
 01B0 80910000          lds R24,_Tt
 01B4 823D              cpi R24,210
 01B6 B8F3              brlo L31
 01B8           X8:
 01B8                   .dbline 180
 01B8           ;                
 01B8           ;            MT1_P1_Set();//打开上MOS管
 01B8 80916500          lds R24,101
 01BC 8260              ori R24,2
 01BE 80936500          sts 101,R24
 01C2                   .dbline 181
 01C2           ;                DELAY500
 01C2 2224              clr R2
 01C4 20920000          sts _Tt,R2
 01C8 05C0              xjmp L38
 01CA           L35:
 01CA                   .dbline 181
 01CA           L36:
 01CA                   .dbline 181
 01CA 80910000          lds R24,_Tt
 01CE 8F5F              subi R24,255    ; addi 1
 01D0 80930000          sts _Tt,R24
 01D4           L38:
 01D4                   .dbline 181
 01D4 80910000          lds R24,_Tt
 01D8 823D              cpi R24,210
 01DA B8F3              brlo L35
 01DC           X9:
 01DC                   .dbline 183
 01DC           ;                
 01DC           ;            for(b=0;b<30;b++)//3ms采用等占空比启动电机
 01DC 6627              clr R22
 01DE 1DC0              xjmp L42
 01E0           L39:
 01E0                   .dbline 184
 01E0           ;                {
 01E0                   .dbline 185
 01E0           ;                 MT1_P2_Clr();//关闭下MOs管 
 01E0 9698              cbi 0x12,6
 01E2                   .dbline 186
 01E2           ;                 DELAY100
 01E2 2224              clr R2
 01E4 20920000          sts _Tt,R2
 01E8 05C0              xjmp L46
 01EA           L43:
 01EA                   .dbline 186
 01EA           L44:
 01EA                   .dbline 186
 01EA 80910000          lds R24,_Tt
 01EE 8F5F              subi R24,255    ; addi 1
 01F0 80930000          sts _Tt,R24
 01F4           L46:
 01F4                   .dbline 186
 01F4 80910000          lds R24,_Tt
 01F8 8A32              cpi R24,42
 01FA B8F3              brlo L43
 01FC           X10:
 01FC                   .dbline 187
 01FC           ;                 MT1_P2_Set();//打开下MOS管
 01FC 969A              sbi 0x12,6
 01FE                   .dbline 188
 01FE           ;                 DELAY100
 01FE 2224              clr R2
 0200 20920000          sts _Tt,R2
 0204 05C0              xjmp L50
 0206           L47:
 0206                   .dbline 188
 0206           L48:
 0206                   .dbline 188
 0206 80910000          lds R24,_Tt
 020A 8F5F              subi R24,255    ; addi 1
 020C 80930000          sts _Tt,R24
 0210           L50:
 0210                   .dbline 188
 0210 80910000          lds R24,_Tt
 0214 8A32              cpi R24,42
 0216 B8F3              brlo L47
 0218           X11:
 0218                   .dbline 189
 0218           ;                }
 0218           L40:
 0218                   .dbline 183
 0218 6395              inc R22
 021A           L42:
 021A                   .dbline 183
 021A 6E31              cpi R22,30
 021C 08F3              brlo L39
 021E           X12:
 021E                   .dbline 191
 021E           ;  
 021E           ;        for(c=0;c<200;c++)//130ms采用降低占空比启动电机
 021E 4427              clr R20
 0220 37C0              xjmp L54
 0222           L51:
 0222                   .dbline 192
 0222           ;                {
 0222                   .dbline 193
 0222           ;              MT1_P2_Clr();//关闭下MOs管 
 0222 9698              cbi 0x12,6
 0224                   .dbline 195
 0224           ;                  
 0224           ;                  for(b=0;b<(200-c);b++)
 0224 6627              clr R22
 0226 0CC0              xjmp L58
 0228           L55:
 0228                   .dbline 196
 0228           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0228                   .dbline 196
 0228 0000              nop
 022A                   .dbline 196
 022A 0000              nop
 022C                   .dbline 196
 022C 0000              nop
 022E                   .dbline 196
 022E 0000              nop
 0230                   .dbline 196
 0230 0000              nop
 0232                   .dbline 196
 0232 0000              nop
 0234                   .dbline 196
 0234 0000              nop
 0236                   .dbline 196
 0236 0000              nop
 0238                   .dbline 196
 0238 0000              nop
 023A                   .dbline 196
 023A 0000              nop
 023C                   .dbline 196
 023C 0000              nop
 023E                   .dbline 196
 023E           L56:
 023E                   .dbline 195
 023E 6395              inc R22
 0240           L58:
 0240                   .dbline 195
 0240 242E              mov R2,R20
 0242 3324              clr R3
 0244 88EC              ldi R24,200
 0246 90E0              ldi R25,0
 0248 2C01              movw R4,R24
 024A 4218              sub R4,R2
 024C 5308              sbc R5,R3
 024E 262E              mov R2,R22
 0250 3324              clr R3
 0252 2414              cp R2,R4
 0254 3504              cpc R3,R5
 0256 44F3              brlt L55
 0258           X13:
 0258                   .dbline 198
 0258           ;                       
 0258           ;              if(Motor1Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 0258 20900B00          lds R2,_Motor1Status
 025C 30900C00          lds R3,_Motor1Status+1
 0260 25FC              sbrc R2,5
 0262 02C0              rjmp L59
 0264           X14:
 0264                   .dbline 199
 0264           ;                  {
 0264                   .dbline 200
 0264           ;                    MT1_P2_Set();//打开下MOS管
 0264 969A              sbi 0x12,6
 0266                   .dbline 201
 0266           ;                  }
 0266 01C0              xjmp L60
 0268           L59:
 0268                   .dbline 203
 0268           ;                  else 
 0268           ;                  {
 0268                   .dbline 204
 0268           ;                    MT1_P2_Clr();//关闭下MOs管 
 0268 9698              cbi 0x12,6
 026A                   .dbline 205
 026A           ;                  }
 026A           L60:
 026A                   .dbline 207
 026A           ;                  
 026A           ;              for(b=0;b<(c+50);b++)
 026A 6627              clr R22
 026C 0CC0              xjmp L64
 026E           L61:
 026E                   .dbline 208
 026E           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 026E                   .dbline 208
 026E 0000              nop
 0270                   .dbline 208
 0270 0000              nop
 0272                   .dbline 208
 0272 0000              nop
 0274                   .dbline 208
 0274 0000              nop
 0276                   .dbline 208
 0276 0000              nop
 0278                   .dbline 208
 0278 0000              nop
 027A                   .dbline 208
 027A 0000              nop
 027C                   .dbline 208
 027C 0000              nop
 027E                   .dbline 208
 027E 0000              nop
 0280                   .dbline 208
 0280 0000              nop
 0282                   .dbline 208
 0282 0000              nop
 0284                   .dbline 208
 0284           L62:
 0284                   .dbline 207
 0284 6395              inc R22
 0286           L64:
 0286                   .dbline 207
 0286 842F              mov R24,R20
 0288 8E5C              subi R24,206    ; addi 50
 028A 6817              cp R22,R24
 028C 80F3              brlo L61
 028E           X15:
 028E                   .dbline 209
 028E           ;                }      
 028E           L52:
 028E                   .dbline 191
 028E 4395              inc R20
 0290           L54:
 0290                   .dbline 191
 0290 483C              cpi R20,200
 0292 08F4              brsh X57
 0294 C6CF              xjmp L51
 0296           X57:
 0296           X16:
 0296                   .dbline 210
 0296           ;          }
 0296 02C2              xjmp L16
 0298           L17:
 0298                   .dbline 212
 0298           ;          else//反转
 0298           ;          {
 0298                   .dbline 213
 0298           ;             MT1_P1_Clr();// 关上MOS管
 0298 80916500          lds R24,101
 029C 8D7F              andi R24,253
 029E 80936500          sts 101,R24
 02A2                   .dbline 214
 02A2           ;                 DELAY500
 02A2 2224              clr R2
 02A4 20920000          sts _Tt,R2
 02A8 05C0              xjmp L68
 02AA           L65:
 02AA                   .dbline 214
 02AA           L66:
 02AA                   .dbline 214
 02AA 80910000          lds R24,_Tt
 02AE 8F5F              subi R24,255    ; addi 1
 02B0 80930000          sts _Tt,R24
 02B4           L68:
 02B4                   .dbline 214
 02B4 80910000          lds R24,_Tt
 02B8 823D              cpi R24,210
 02BA B8F3              brlo L65
 02BC           X17:
 02BC                   .dbline 215
 02BC           ;                 DELAY500
 02BC 2224              clr R2
 02BE 20920000          sts _Tt,R2
 02C2 05C0              xjmp L72
 02C4           L69:
 02C4                   .dbline 215
 02C4           L70:
 02C4                   .dbline 215
 02C4 80910000          lds R24,_Tt
 02C8 8F5F              subi R24,255    ; addi 1
 02CA 80930000          sts _Tt,R24
 02CE           L72:
 02CE                   .dbline 215
 02CE 80910000          lds R24,_Tt
 02D2 823D              cpi R24,210
 02D4 B8F3              brlo L69
 02D6           X18:
 02D6                   .dbline 216
 02D6           ;                 MT1_P2_Clr();// 关下MOS管
 02D6 9698              cbi 0x12,6
 02D8                   .dbline 217
 02D8           ;                 DELAY500
 02D8 2224              clr R2
 02DA 20920000          sts _Tt,R2
 02DE 05C0              xjmp L76
 02E0           L73:
 02E0                   .dbline 217
 02E0           L74:
 02E0                   .dbline 217
 02E0 80910000          lds R24,_Tt
 02E4 8F5F              subi R24,255    ; addi 1
 02E6 80930000          sts _Tt,R24
 02EA           L76:
 02EA                   .dbline 217
 02EA 80910000          lds R24,_Tt
 02EE 823D              cpi R24,210
 02F0 B8F3              brlo L73
 02F2           X19:
 02F2                   .dbline 218
 02F2           ;                 DELAY500
 02F2 2224              clr R2
 02F4 20920000          sts _Tt,R2
 02F8 05C0              xjmp L80
 02FA           L77:
 02FA                   .dbline 218
 02FA           L78:
 02FA                   .dbline 218
 02FA 80910000          lds R24,_Tt
 02FE 8F5F              subi R24,255    ; addi 1
 0300 80930000          sts _Tt,R24
 0304           L80:
 0304                   .dbline 218
 0304 80910000          lds R24,_Tt
 0308 823D              cpi R24,210
 030A B8F3              brlo L77
 030C           X20:
 030C                   .dbline 220
 030C           ;                
 030C           ;             MT1_N1_Set();//打开上MOS管
 030C 80916500          lds R24,101
 0310 8160              ori R24,1
 0312 80936500          sts 101,R24
 0316                   .dbline 221
 0316           ;                 DELAY500
 0316 2224              clr R2
 0318 20920000          sts _Tt,R2
 031C 05C0              xjmp L84
 031E           L81:
 031E                   .dbline 221
 031E           L82:
 031E                   .dbline 221
 031E 80910000          lds R24,_Tt
 0322 8F5F              subi R24,255    ; addi 1
 0324 80930000          sts _Tt,R24
 0328           L84:
 0328                   .dbline 221
 0328 80910000          lds R24,_Tt
 032C 823D              cpi R24,210
 032E B8F3              brlo L81
 0330           X21:
 0330                   .dbline 223
 0330           ;                
 0330           ;            for(b=0;b<30;b++)//3ms采用等占空比启动电机
 0330 6627              clr R22
 0332 1DC0              xjmp L88
 0334           L85:
 0334                   .dbline 224
 0334           ;                {
 0334                   .dbline 225
 0334           ;                 MT1_N2_Clr();//关闭下MOs管 
 0334 9798              cbi 0x12,7
 0336                   .dbline 226
 0336           ;                 DELAY100
 0336 2224              clr R2
 0338 20920000          sts _Tt,R2
 033C 05C0              xjmp L92
 033E           L89:
 033E                   .dbline 226
 033E           L90:
 033E                   .dbline 226
 033E 80910000          lds R24,_Tt
 0342 8F5F              subi R24,255    ; addi 1
 0344 80930000          sts _Tt,R24
 0348           L92:
 0348                   .dbline 226
 0348 80910000          lds R24,_Tt
 034C 8A32              cpi R24,42
 034E B8F3              brlo L89
 0350           X22:
 0350                   .dbline 227
 0350           ;                 MT1_N2_Set();//打开下MOS管
 0350 979A              sbi 0x12,7
 0352                   .dbline 228
 0352           ;                 DELAY100
 0352 2224              clr R2
 0354 20920000          sts _Tt,R2
 0358 05C0              xjmp L96
 035A           L93:
 035A                   .dbline 228
 035A           L94:
 035A                   .dbline 228
 035A 80910000          lds R24,_Tt
 035E 8F5F              subi R24,255    ; addi 1
 0360 80930000          sts _Tt,R24
 0364           L96:
 0364                   .dbline 228
 0364 80910000          lds R24,_Tt
 0368 8A32              cpi R24,42
 036A B8F3              brlo L93
 036C           X23:
 036C                   .dbline 229
 036C           ;                }
 036C           L86:
 036C                   .dbline 223
 036C 6395              inc R22
 036E           L88:
 036E                   .dbline 223
 036E 6E31              cpi R22,30
 0370 08F3              brlo L85
 0372           X24:
 0372                   .dbline 231
 0372           ;  
 0372           ;        for(c=0;c<200;c++)//130ms采用降低占空比启动电机
 0372 4427              clr R20
 0374 37C0              xjmp L100
 0376           L97:
 0376                   .dbline 232
 0376           ;                {
 0376                   .dbline 233
 0376           ;              MT1_N2_Clr();//关闭下MOs管 
 0376 9798              cbi 0x12,7
 0378                   .dbline 235
 0378           ;                  
 0378           ;                  for(b=0;b<(200-c);b++)
 0378 6627              clr R22
 037A 0CC0              xjmp L104
 037C           L101:
 037C                   .dbline 236
 037C           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 037C                   .dbline 236
 037C 0000              nop
 037E                   .dbline 236
 037E 0000              nop
 0380                   .dbline 236
 0380 0000              nop
 0382                   .dbline 236
 0382 0000              nop
 0384                   .dbline 236
 0384 0000              nop
 0386                   .dbline 236
 0386 0000              nop
 0388                   .dbline 236
 0388 0000              nop
 038A                   .dbline 236
 038A 0000              nop
 038C                   .dbline 236
 038C 0000              nop
 038E                   .dbline 236
 038E 0000              nop
 0390                   .dbline 236
 0390 0000              nop
 0392                   .dbline 236
 0392           L102:
 0392                   .dbline 235
 0392 6395              inc R22
 0394           L104:
 0394                   .dbline 235
 0394 242E              mov R2,R20
 0396 3324              clr R3
 0398 88EC              ldi R24,200
 039A 90E0              ldi R25,0
 039C 2C01              movw R4,R24
 039E 4218              sub R4,R2
 03A0 5308              sbc R5,R3
 03A2 262E              mov R2,R22
 03A4 3324              clr R3
 03A6 2414              cp R2,R4
 03A8 3504              cpc R3,R5
 03AA 44F3              brlt L101
 03AC           X25:
 03AC                   .dbline 238
 03AC           ;                       
 03AC           ;              if(Motor1Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 03AC 20900B00          lds R2,_Motor1Status
 03B0 30900C00          lds R3,_Motor1Status+1
 03B4 25FC              sbrc R2,5
 03B6 02C0              rjmp L105
 03B8           X26:
 03B8                   .dbline 239
 03B8           ;                  {
 03B8                   .dbline 240
 03B8           ;                    MT1_N2_Set();//打开下MOS管
 03B8 979A              sbi 0x12,7
 03BA                   .dbline 241
 03BA           ;                  }
 03BA 01C0              xjmp L106
 03BC           L105:
 03BC                   .dbline 243
 03BC           ;                  else 
 03BC           ;                  {
 03BC                   .dbline 244
 03BC           ;                    MT1_N2_Clr();//关闭下MOs管 
 03BC 9798              cbi 0x12,7
 03BE                   .dbline 245
 03BE           ;                  }
 03BE           L106:
 03BE                   .dbline 247
 03BE           ;                  
 03BE           ;              for(b=0;b<(c+50);b++)
 03BE 6627              clr R22
 03C0 0CC0              xjmp L110
 03C2           L107:
 03C2                   .dbline 248
 03C2           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 03C2                   .dbline 248
 03C2 0000              nop
 03C4                   .dbline 248
 03C4 0000              nop
 03C6                   .dbline 248
 03C6 0000              nop
 03C8                   .dbline 248
 03C8 0000              nop
 03CA                   .dbline 248
 03CA 0000              nop
 03CC                   .dbline 248
 03CC 0000              nop
 03CE                   .dbline 248
 03CE 0000              nop
 03D0                   .dbline 248
 03D0 0000              nop
 03D2                   .dbline 248
 03D2 0000              nop
 03D4                   .dbline 248
 03D4 0000              nop
 03D6                   .dbline 248
 03D6 0000              nop
 03D8                   .dbline 248
 03D8           L108:
 03D8                   .dbline 247
 03D8 6395              inc R22
 03DA           L110:
 03DA                   .dbline 247
 03DA 842F              mov R24,R20
 03DC 8E5C              subi R24,206    ; addi 50
 03DE 6817              cp R22,R24
 03E0 80F3              brlo L107
 03E2           X27:
 03E2                   .dbline 249
 03E2           ;                }      
 03E2           L98:
 03E2                   .dbline 231
 03E2 4395              inc R20
 03E4           L100:
 03E4                   .dbline 231
 03E4 483C              cpi R20,200
 03E6 08F4              brsh X58
 03E8 C6CF              xjmp L97
 03EA           X58:
 03EA           X28:
 03EA                   .dbline 250
 03EA           ;          }
 03EA                   .dbline 251
 03EA           ;       } 
 03EA 58C1              xjmp L16
 03EC           L15:
 03EC                   .dbline 252
 03EC           ;       else if(motor==2)
 03EC 0230              cpi R16,2
 03EE 09F0              breq X59
 03F0 55C1              xjmp L111
 03F2           X59:
 03F2           X29:
 03F2                   .dbline 253
 03F2           ;       {  
 03F2                   .dbline 254
 03F2           ;         Motor2Status.s.RUN=1;
 03F2 80910900          lds R24,_Motor2Status
 03F6 90910A00          lds R25,_Motor2Status+1
 03FA 8160              ori R24,1
 03FC 90930A00          sts _Motor2Status+1,R25
 0400 80930900          sts _Motor2Status,R24
 0404                   .dbline 256
 0404           ;         
 0404           ;         if(Motor2Status.s.DIR==1)//正转
 0404 9695              lsr R25
 0406 8795              ror R24
 0408 8170              andi R24,1
 040A 9070              andi R25,0
 040C 8130              cpi R24,1
 040E E0E0              ldi R30,0
 0410 9E07              cpc R25,R30
 0412 09F0              breq X60
 0414 A2C0              xjmp L113
 0416           X60:
 0416           X30:
 0416                   .dbline 257
 0416           ;          { 
 0416                   .dbline 258
 0416           ;            MT2_N1_Clr();// 关上MOS管
 0416 DD98              cbi 0x1b,5
 0418                   .dbline 259
 0418           ;                DELAY500
 0418 2224              clr R2
 041A 20920000          sts _Tt,R2
 041E 05C0              xjmp L118
 0420           L115:
 0420                   .dbline 259
 0420           L116:
 0420                   .dbline 259
 0420 80910000          lds R24,_Tt
 0424 8F5F              subi R24,255    ; addi 1
 0426 80930000          sts _Tt,R24
 042A           L118:
 042A                   .dbline 259
 042A 80910000          lds R24,_Tt
 042E 823D              cpi R24,210
 0430 B8F3              brlo L115
 0432           X31:
 0432                   .dbline 260
 0432           ;                DELAY500
 0432 2224              clr R2
 0434 20920000          sts _Tt,R2
 0438 05C0              xjmp L122
 043A           L119:
 043A                   .dbline 260
 043A           L120:
 043A                   .dbline 260
 043A 80910000          lds R24,_Tt
 043E 8F5F              subi R24,255    ; addi 1
 0440 80930000          sts _Tt,R24
 0444           L122:
 0444                   .dbline 260
 0444 80910000          lds R24,_Tt
 0448 823D              cpi R24,210
 044A B8F3              brlo L119
 044C           X32:
 044C                   .dbline 261
 044C           ;                MT2_N2_Clr();// 关下MOS管
 044C DB98              cbi 0x1b,3
 044E                   .dbline 262
 044E           ;                DELAY500
 044E 2224              clr R2
 0450 20920000          sts _Tt,R2
 0454 05C0              xjmp L126
 0456           L123:
 0456                   .dbline 262
 0456           L124:
 0456                   .dbline 262
 0456 80910000          lds R24,_Tt
 045A 8F5F              subi R24,255    ; addi 1
 045C 80930000          sts _Tt,R24
 0460           L126:
 0460                   .dbline 262
 0460 80910000          lds R24,_Tt
 0464 823D              cpi R24,210
 0466 B8F3              brlo L123
 0468           X33:
 0468                   .dbline 263
 0468           ;                DELAY500
 0468 2224              clr R2
 046A 20920000          sts _Tt,R2
 046E 05C0              xjmp L130
 0470           L127:
 0470                   .dbline 263
 0470           L128:
 0470                   .dbline 263
 0470 80910000          lds R24,_Tt
 0474 8F5F              subi R24,255    ; addi 1
 0476 80930000          sts _Tt,R24
 047A           L130:
 047A                   .dbline 263
 047A 80910000          lds R24,_Tt
 047E 823D              cpi R24,210
 0480 B8F3              brlo L127
 0482           X34:
 0482                   .dbline 265
 0482           ;                
 0482           ;            MT2_P1_Set();//打开上MOS管
 0482 DC9A              sbi 0x1b,4
 0484                   .dbline 266
 0484           ;                DELAY500
 0484 2224              clr R2
 0486 20920000          sts _Tt,R2
 048A 05C0              xjmp L134
 048C           L131:
 048C                   .dbline 266
 048C           L132:
 048C                   .dbline 266
 048C 80910000          lds R24,_Tt
 0490 8F5F              subi R24,255    ; addi 1
 0492 80930000          sts _Tt,R24
 0496           L134:
 0496                   .dbline 266
 0496 80910000          lds R24,_Tt
 049A 823D              cpi R24,210
 049C B8F3              brlo L131
 049E           X35:
 049E                   .dbline 268
 049E           ;                
 049E           ;            for(b=0;b<30;b++)//3ms采用等占空比启动电机
 049E 6627              clr R22
 04A0 1DC0              xjmp L138
 04A2           L135:
 04A2                   .dbline 269
 04A2           ;                {
 04A2                   .dbline 270
 04A2           ;                 MT2_P2_Clr();//关闭下MOs管 
 04A2 DA98              cbi 0x1b,2
 04A4                   .dbline 271
 04A4           ;                 DELAY100
 04A4 2224              clr R2
 04A6 20920000          sts _Tt,R2
 04AA 05C0              xjmp L142
 04AC           L139:
 04AC                   .dbline 271
 04AC           L140:
 04AC                   .dbline 271
 04AC 80910000          lds R24,_Tt
 04B0 8F5F              subi R24,255    ; addi 1
 04B2 80930000          sts _Tt,R24
 04B6           L142:
 04B6                   .dbline 271
 04B6 80910000          lds R24,_Tt
 04BA 8A32              cpi R24,42
 04BC B8F3              brlo L139
 04BE           X36:
 04BE                   .dbline 272
 04BE           ;                 MT2_P2_Set();//打开下MOS管
 04BE DA9A              sbi 0x1b,2
 04C0                   .dbline 273
 04C0           ;                 DELAY100
 04C0 2224              clr R2
 04C2 20920000          sts _Tt,R2
 04C6 05C0              xjmp L146
 04C8           L143:
 04C8                   .dbline 273
 04C8           L144:
 04C8                   .dbline 273
 04C8 80910000          lds R24,_Tt
 04CC 8F5F              subi R24,255    ; addi 1
 04CE 80930000          sts _Tt,R24
 04D2           L146:
 04D2                   .dbline 273
 04D2 80910000          lds R24,_Tt
 04D6 8A32              cpi R24,42
 04D8 B8F3              brlo L143
 04DA           X37:
 04DA                   .dbline 274
 04DA           ;                }
 04DA           L136:
 04DA                   .dbline 268
 04DA 6395              inc R22
 04DC           L138:
 04DC                   .dbline 268
 04DC 6E31              cpi R22,30
 04DE 08F3              brlo L135
 04E0           X38:
 04E0                   .dbline 276
 04E0           ;  
 04E0           ;        for(c=0;c<200;c++)//130ms采用降低占空比启动电机
 04E0 4427              clr R20
 04E2 37C0              xjmp L150
 04E4           L147:
 04E4                   .dbline 277
 04E4           ;                {
 04E4                   .dbline 278
 04E4           ;              MT2_P2_Clr();//关闭下MOs管 
 04E4 DA98              cbi 0x1b,2
 04E6                   .dbline 280
 04E6           ;                  
 04E6           ;                  for(b=0;b<(200-c);b++)
 04E6 6627              clr R22
 04E8 0CC0              xjmp L154
 04EA           L151:
 04EA                   .dbline 281
 04EA           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 04EA                   .dbline 281
 04EA 0000              nop
 04EC                   .dbline 281
 04EC 0000              nop
 04EE                   .dbline 281
 04EE 0000              nop
 04F0                   .dbline 281
 04F0 0000              nop
 04F2                   .dbline 281
 04F2 0000              nop
 04F4                   .dbline 281
 04F4 0000              nop
 04F6                   .dbline 281
 04F6 0000              nop
 04F8                   .dbline 281
 04F8 0000              nop
 04FA                   .dbline 281
 04FA 0000              nop
 04FC                   .dbline 281
 04FC 0000              nop
 04FE                   .dbline 281
 04FE 0000              nop
 0500                   .dbline 281
 0500           L152:
 0500                   .dbline 280
 0500 6395              inc R22
 0502           L154:
 0502                   .dbline 280
 0502 242E              mov R2,R20
 0504 3324              clr R3
 0506 88EC              ldi R24,200
 0508 90E0              ldi R25,0
 050A 2C01              movw R4,R24
 050C 4218              sub R4,R2
 050E 5308              sbc R5,R3
 0510 262E              mov R2,R22
 0512 3324              clr R3
 0514 2414              cp R2,R4
 0516 3504              cpc R3,R5
 0518 44F3              brlt L151
 051A           X39:
 051A                   .dbline 283
 051A           ;                       
 051A           ;              if(Motor2Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 051A 20900900          lds R2,_Motor2Status
 051E 30900A00          lds R3,_Motor2Status+1
 0522 25FC              sbrc R2,5
 0524 02C0              rjmp L155
 0526           X40:
 0526                   .dbline 284
 0526           ;                  {
 0526                   .dbline 285
 0526           ;                    MT2_P2_Set();//打开下MOS管
 0526 DA9A              sbi 0x1b,2
 0528                   .dbline 286
 0528           ;                  }
 0528 01C0              xjmp L156
 052A           L155:
 052A                   .dbline 288
 052A           ;                  else 
 052A           ;                  {
 052A                   .dbline 289
 052A           ;                    MT2_P2_Clr();//关闭下MOs管 
 052A DA98              cbi 0x1b,2
 052C                   .dbline 290
 052C           ;                  }
 052C           L156:
 052C                   .dbline 292
 052C           ;                  
 052C           ;              for(b=0;b<(c+50);b++)
 052C 6627              clr R22
 052E 0CC0              xjmp L160
 0530           L157:
 0530                   .dbline 293
 0530           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0530                   .dbline 293
 0530 0000              nop
 0532                   .dbline 293
 0532 0000              nop
 0534                   .dbline 293
 0534 0000              nop
 0536                   .dbline 293
 0536 0000              nop
 0538                   .dbline 293
 0538 0000              nop
 053A                   .dbline 293
 053A 0000              nop
 053C                   .dbline 293
 053C 0000              nop
 053E                   .dbline 293
 053E 0000              nop
 0540                   .dbline 293
 0540 0000              nop
 0542                   .dbline 293
 0542 0000              nop
 0544                   .dbline 293
 0544 0000              nop
 0546                   .dbline 293
 0546           L158:
 0546                   .dbline 292
 0546 6395              inc R22
 0548           L160:
 0548                   .dbline 292
 0548 842F              mov R24,R20
 054A 8E5C              subi R24,206    ; addi 50
 054C 6817              cp R22,R24
 054E 80F3              brlo L157
 0550           X41:
 0550                   .dbline 294
 0550           ;                }      
 0550           L148:
 0550                   .dbline 276
 0550 4395              inc R20
 0552           L150:
 0552                   .dbline 276
 0552 483C              cpi R20,200
 0554 08F4              brsh X61
 0556 C6CF              xjmp L147
 0558           X61:
 0558           X42:
 0558                   .dbline 295
 0558           ;          }
 0558 A1C0              xjmp L114
 055A           L113:
 055A                   .dbline 297
 055A           ;          else //反转
 055A           ;          {
 055A                   .dbline 298
 055A           ;             MT2_P1_Clr();// 关上MOS管
 055A DC98              cbi 0x1b,4
 055C                   .dbline 299
 055C           ;                 DELAY500
 055C 2224              clr R2
 055E 20920000          sts _Tt,R2
 0562 05C0              xjmp L164
 0564           L161:
 0564                   .dbline 299
 0564           L162:
 0564                   .dbline 299
 0564 80910000          lds R24,_Tt
 0568 8F5F              subi R24,255    ; addi 1
 056A 80930000          sts _Tt,R24
 056E           L164:
 056E                   .dbline 299
 056E 80910000          lds R24,_Tt
 0572 823D              cpi R24,210
 0574 B8F3              brlo L161
 0576           X43:
 0576                   .dbline 300
 0576           ;                 DELAY500
 0576 2224              clr R2
 0578 20920000          sts _Tt,R2
 057C 05C0              xjmp L168
 057E           L165:
 057E                   .dbline 300
 057E           L166:
 057E                   .dbline 300
 057E 80910000          lds R24,_Tt
 0582 8F5F              subi R24,255    ; addi 1
 0584 80930000          sts _Tt,R24
 0588           L168:
 0588                   .dbline 300
 0588 80910000          lds R24,_Tt
 058C 823D              cpi R24,210
 058E B8F3              brlo L165
 0590           X44:
 0590                   .dbline 301
 0590           ;                 MT2_P2_Clr();// 关下MOS管
 0590 DA98              cbi 0x1b,2
 0592                   .dbline 302
 0592           ;                 DELAY500
 0592 2224              clr R2
 0594 20920000          sts _Tt,R2
 0598 05C0              xjmp L172
 059A           L169:
 059A                   .dbline 302
 059A           L170:
 059A                   .dbline 302
 059A 80910000          lds R24,_Tt
 059E 8F5F              subi R24,255    ; addi 1
 05A0 80930000          sts _Tt,R24
 05A4           L172:
 05A4                   .dbline 302
 05A4 80910000          lds R24,_Tt
 05A8 823D              cpi R24,210
 05AA B8F3              brlo L169
 05AC           X45:
 05AC                   .dbline 303
 05AC           ;                 DELAY500
 05AC 2224              clr R2
 05AE 20920000          sts _Tt,R2
 05B2 05C0              xjmp L176
 05B4           L173:
 05B4                   .dbline 303
 05B4           L174:
 05B4                   .dbline 303
 05B4 80910000          lds R24,_Tt
 05B8 8F5F              subi R24,255    ; addi 1
 05BA 80930000          sts _Tt,R24
 05BE           L176:
 05BE                   .dbline 303
 05BE 80910000          lds R24,_Tt
 05C2 823D              cpi R24,210
 05C4 B8F3              brlo L173
 05C6           X46:
 05C6                   .dbline 305
 05C6           ;                
 05C6           ;             MT2_N1_Set();//打开上MOS管
 05C6 DD9A              sbi 0x1b,5
 05C8                   .dbline 306
 05C8           ;                 DELAY500
 05C8 2224              clr R2
 05CA 20920000          sts _Tt,R2
 05CE 05C0              xjmp L180
 05D0           L177:
 05D0                   .dbline 306
 05D0           L178:
 05D0                   .dbline 306
 05D0 80910000          lds R24,_Tt
 05D4 8F5F              subi R24,255    ; addi 1
 05D6 80930000          sts _Tt,R24
 05DA           L180:
 05DA                   .dbline 306
 05DA 80910000          lds R24,_Tt
 05DE 823D              cpi R24,210
 05E0 B8F3              brlo L177
 05E2           X47:
 05E2                   .dbline 308
 05E2           ;                
 05E2           ;            for(b=0;b<30;b++)//3ms采用等占空比启动电机
 05E2 6627              clr R22
 05E4 1DC0              xjmp L184
 05E6           L181:
 05E6                   .dbline 309
 05E6           ;                {
 05E6                   .dbline 310
 05E6           ;                 MT2_N2_Clr();//关闭下MOs管 
 05E6 DB98              cbi 0x1b,3
 05E8                   .dbline 311
 05E8           ;                 DELAY100
 05E8 2224              clr R2
 05EA 20920000          sts _Tt,R2
 05EE 05C0              xjmp L188
 05F0           L185:
 05F0                   .dbline 311
 05F0           L186:
 05F0                   .dbline 311
 05F0 80910000          lds R24,_Tt
 05F4 8F5F              subi R24,255    ; addi 1
 05F6 80930000          sts _Tt,R24
 05FA           L188:
 05FA                   .dbline 311
 05FA 80910000          lds R24,_Tt
 05FE 8A32              cpi R24,42
 0600 B8F3              brlo L185
 0602           X48:
 0602                   .dbline 312
 0602           ;                 MT2_N2_Set();//打开下MOS管
 0602 DB9A              sbi 0x1b,3
 0604                   .dbline 313
 0604           ;                 DELAY100
 0604 2224              clr R2
 0606 20920000          sts _Tt,R2
 060A 05C0              xjmp L192
 060C           L189:
 060C                   .dbline 313
 060C           L190:
 060C                   .dbline 313
 060C 80910000          lds R24,_Tt
 0610 8F5F              subi R24,255    ; addi 1
 0612 80930000          sts _Tt,R24
 0616           L192:
 0616                   .dbline 313
 0616 80910000          lds R24,_Tt
 061A 8A32              cpi R24,42
 061C B8F3              brlo L189
 061E           X49:
 061E                   .dbline 314
 061E           ;                }
 061E           L182:
 061E                   .dbline 308
 061E 6395              inc R22
 0620           L184:
 0620                   .dbline 308
 0620 6E31              cpi R22,30
 0622 08F3              brlo L181
 0624           X50:
 0624                   .dbline 316
 0624           ;  
 0624           ;        for(c=0;c<200;c++)//130ms采用降低占空比启动电机
 0624 4427              clr R20
 0626 37C0              xjmp L196
 0628           L193:
 0628                   .dbline 317
 0628           ;                {
 0628                   .dbline 318
 0628           ;              MT2_N2_Clr();//关闭下MOs管 
 0628 DB98              cbi 0x1b,3
 062A                   .dbline 320
 062A           ;                  
 062A           ;                  for(b=0;b<(200-c);b++)
 062A 6627              clr R22
 062C 0CC0              xjmp L200
 062E           L197:
 062E                   .dbline 321
 062E           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 062E                   .dbline 321
 062E 0000              nop
 0630                   .dbline 321
 0630 0000              nop
 0632                   .dbline 321
 0632 0000              nop
 0634                   .dbline 321
 0634 0000              nop
 0636                   .dbline 321
 0636 0000              nop
 0638                   .dbline 321
 0638 0000              nop
 063A                   .dbline 321
 063A 0000              nop
 063C                   .dbline 321
 063C 0000              nop
 063E                   .dbline 321
 063E 0000              nop
 0640                   .dbline 321
 0640 0000              nop
 0642                   .dbline 321
 0642 0000              nop
 0644                   .dbline 321
 0644           L198:
 0644                   .dbline 320
 0644 6395              inc R22
 0646           L200:
 0646                   .dbline 320
 0646 242E              mov R2,R20
 0648 3324              clr R3
 064A 88EC              ldi R24,200
 064C 90E0              ldi R25,0
 064E 2C01              movw R4,R24
 0650 4218              sub R4,R2
 0652 5308              sbc R5,R3
 0654 262E              mov R2,R22
 0656 3324              clr R3
 0658 2414              cp R2,R4
 065A 3504              cpc R3,R5
 065C 44F3              brlt L197
 065E           X51:
 065E                   .dbline 323
 065E           ;                       
 065E           ;              if(Motor2Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 065E 20900900          lds R2,_Motor2Status
 0662 30900A00          lds R3,_Motor2Status+1
 0666 25FC              sbrc R2,5
 0668 02C0              rjmp L201
 066A           X52:
 066A                   .dbline 324
 066A           ;                  {
 066A                   .dbline 325
 066A           ;                    MT2_N2_Set();//打开下MOS管
 066A DB9A              sbi 0x1b,3
 066C                   .dbline 326
 066C           ;                  }
 066C 01C0              xjmp L202
 066E           L201:
 066E                   .dbline 328
 066E           ;                  else 
 066E           ;                  {
 066E                   .dbline 329
 066E           ;                    MT2_N2_Clr();//关闭下MOs管 
 066E DB98              cbi 0x1b,3
 0670                   .dbline 330
 0670           ;                  }
 0670           L202:
 0670                   .dbline 332
 0670           ;                  
 0670           ;              for(b=0;b<(c+50);b++)
 0670 6627              clr R22
 0672 0CC0              xjmp L206
 0674           L203:
 0674                   .dbline 333
 0674           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0674                   .dbline 333
 0674 0000              nop
 0676                   .dbline 333
 0676 0000              nop
 0678                   .dbline 333
 0678 0000              nop
 067A                   .dbline 333
 067A 0000              nop
 067C                   .dbline 333
 067C 0000              nop
 067E                   .dbline 333
 067E 0000              nop
 0680                   .dbline 333
 0680 0000              nop
 0682                   .dbline 333
 0682 0000              nop
 0684                   .dbline 333
 0684 0000              nop
 0686                   .dbline 333
 0686 0000              nop
 0688                   .dbline 333
 0688 0000              nop
 068A                   .dbline 333
 068A           L204:
 068A                   .dbline 332
 068A 6395              inc R22
 068C           L206:
 068C                   .dbline 332
 068C 842F              mov R24,R20
 068E 8E5C              subi R24,206    ; addi 50
 0690 6817              cp R22,R24
 0692 80F3              brlo L203
 0694           X53:
 0694                   .dbline 334
 0694           ;                }      
 0694           L194:
 0694                   .dbline 316
 0694 4395              inc R20
 0696           L196:
 0696                   .dbline 316
 0696 483C              cpi R20,200
 0698 08F4              brsh X62
 069A C6CF              xjmp L193
 069C           X62:
 069C           X54:
 069C                   .dbline 335
 069C           ;          }
 069C           L114:
 069C                   .dbline 336
 069C           ;       }
 069C           L111:
 069C           L16:
 069C                   .dbline -2
 069C           L14:
 069C                   .dbline 0 ; func end
 069C 6991              ld R22,y+
 069E 4991              ld R20,y+
 06A0 0895              ret
 06A2                   .dbsym r c 20 c
 06A2                   .dbsym r b 22 c
 06A2                   .dbsym r motor 16 c
 06A2                   .dbend
 06A2                   .dbfunc e SampleADC _SampleADC fc
 06A2           ;           adcl -> y+0
 06A2           ;              c -> R10
 06A2           ;         ADdata -> R12,R13
 06A2           ;             ch -> R10
                        .even
 06A2           _SampleADC::
 06A2 0E940000          xcall push_xgsetF03C
 06A6 A02E              mov R10,R16
 06A8 2497              sbiw R28,4
 06AA                   .dbline -1
 06AA                   .dbline 342
 06AA           ;       
 06AA           ; }
 06AA           ; 
 06AA           ;    
 06AA           ; unsigned char SampleADC(unsigned char ch)//耗时约5ms，返回8位有效结果
 06AA           ; {     unsigned char c;
 06AA                   .dbline 346
 06AA           ;       unsigned long adcl;
 06AA           ;         unsigned int ADdata;
 06AA           ; 
 06AA           ;         ADMUX  = (0xc0+ch);//片内2.56V基准，选择单端输入通道 
 06AA 8A2D              mov R24,R10
 06AC 8054              subi R24,64    ; addi 192
 06AE 87B9              out 0x7,R24
 06B0                   .dbline 347
 06B0           ;         ADCSRA =0xC3;//ADC使能，ADC开始转换，ADC自动触发使能（连续转换模式），8分频 
 06B0 83EC              ldi R24,195
 06B2 86B9              out 0x6,R24
 06B4                   .dbline 350
 06B4           ;    
 06B4           ;         //第一次采样值不要
 06B4           ;         for(ADdata=0;ADdata<100;ADdata++);
 06B4 CC24              clr R12
 06B6 DD24              clr R13
 06B8 03C0              xjmp L211
 06BA           L208:
 06BA                   .dbline 350
 06BA           L209:
 06BA                   .dbline 350
 06BA C601              movw R24,R12
 06BC 0196              adiw R24,1
 06BE 6C01              movw R12,R24
 06C0           L211:
 06C0                   .dbline 350
 06C0 C601              movw R24,R12
 06C2 8436              cpi R24,100
 06C4 E0E0              ldi R30,0
 06C6 9E07              cpc R25,R30
 06C8 C0F3              brlo L208
 06CA           X63:
 06CA           L212:
 06CA                   .dbline 351
 06CA           ;         while((ADCSRA&0x40)==0x40);//等待转换完成
 06CA           L213:
 06CA                   .dbline 351
 06CA 86B1              in R24,0x6
 06CC 8074              andi R24,64
 06CE 8034              cpi R24,64
 06D0 E1F3              breq L212
 06D2           X64:
 06D2                   .dbline 352
 06D2           ;         ADdata=ADCL;
 06D2 C4B0              in R12,0x4
 06D4 DD24              clr R13
 06D6                   .dbline 353
 06D6           ;         ADdata=ADCH;  
 06D6 C5B0              in R12,0x5
 06D8 DD24              clr R13
 06DA                   .dbline 355
 06DA           ;   
 06DA           ;         adcl=0;
 06DA 80E0              ldi R24,0
 06DC 8883              std y+0,R24
 06DE 8983              std y+1,R24
 06E0 8A83              std y+2,R24
 06E2 8B83              std y+3,R24
 06E4                   .dbline 356
 06E4           ;         for(c=0;c<32;c++)//32次值取平均
 06E4 AA24              clr R10
 06E6 2CC0              xjmp L218
 06E8           L215:
 06E8                   .dbline 357
 06E8           ;         {
 06E8                   .dbline 358
 06E8           ;          ADCSRA = 0xC3;//ADC使能，ADC开始转换，ADC自动触发使能（连续转换模式），8分频 
 06E8 83EC              ldi R24,195
 06EA 86B9              out 0x6,R24
 06EC                   .dbline 359
 06EC           ;          for(ADdata=0;ADdata<100;ADdata++);
 06EC CC24              clr R12
 06EE DD24              clr R13
 06F0 03C0              xjmp L222
 06F2           L219:
 06F2                   .dbline 359
 06F2           L220:
 06F2                   .dbline 359
 06F2 C601              movw R24,R12
 06F4 0196              adiw R24,1
 06F6 6C01              movw R12,R24
 06F8           L222:
 06F8                   .dbline 359
 06F8 C601              movw R24,R12
 06FA 8436              cpi R24,100
 06FC E0E0              ldi R30,0
 06FE 9E07              cpc R25,R30
 0700 C0F3              brlo L219
 0702           X65:
 0702           L223:
 0702                   .dbline 360
 0702           ;          while((ADCSRA&0x40)==0x40);//等待转换完成    
 0702           L224:
 0702                   .dbline 360
 0702 86B1              in R24,0x6
 0704 8074              andi R24,64
 0706 8034              cpi R24,64
 0708 E1F3              breq L223
 070A           X66:
 070A                   .dbline 361
 070A           ;          ADdata=ADCL;   
 070A C4B0              in R12,0x4
 070C DD24              clr R13
 070E                   .dbline 362
 070E           ;          ADdata|=(ADCH<<8);
 070E 25B0              in R2,0x5
 0710 3324              clr R3
 0712 322C              mov R3,R2
 0714 2224              clr R2
 0716 C228              or R12,R2
 0718 D328              or R13,R3
 071A                   .dbline 363
 071A           ;          ADdata&=0x03ff;//10位有效转换结果
 071A C601              movw R24,R12
 071C 9370              andi R25,3
 071E 6C01              movw R12,R24
 0720                   .dbline 364
 0720           ;          adcl+=ADdata;
 0720 1C01              movw R2,R24
 0722 4424              clr R4
 0724 5524              clr R5
 0726 6880              ldd R6,y+0
 0728 7980              ldd R7,y+1
 072A 8A80              ldd R8,y+2
 072C 9B80              ldd R9,y+3
 072E 620C              add R6,R2
 0730 731C              adc R7,R3
 0732 841C              adc R8,R4
 0734 951C              adc R9,R5
 0736 6882              std y+0,R6
 0738 7982              std y+1,R7
 073A 8A82              std y+2,R8
 073C 9B82              std y+3,R9
 073E                   .dbline 365
 073E           ;         }
 073E           L216:
 073E                   .dbline 356
 073E A394              inc R10
 0740           L218:
 0740                   .dbline 356
 0740 8A2D              mov R24,R10
 0742 8032              cpi R24,32
 0744 88F2              brlo L215
 0746           X67:
 0746                   .dbline 367
 0746           ; 
 0746           ;         adcl>>=7;//除以32，再除以4，相当于8位AD
 0746 87E0              ldi R24,7
 0748 90E0              ldi R25,0
 074A 0881              ldd R16,y+0
 074C 1981              ldd R17,y+1
 074E 2A81              ldd R18,y+2
 0750 3B81              ldd R19,y+3
 0752 8A93              st -y,R24
 0754 0E940000          xcall lsr32
 0758 0883              std y+0,R16
 075A 1983              std y+1,R17
 075C 2A83              std y+2,R18
 075E 3B83              std y+3,R19
 0760                   .dbline 368
 0760           ;         return (adcl&0x000000ff);//取8位有效位
 0760 4FEF              ldi R20,255
 0762 50E0              ldi R21,0
 0764 60E0              ldi R22,0
 0766 70E0              ldi R23,0
 0768 2880              ldd R2,y+0
 076A 3980              ldd R3,y+1
 076C 4A80              ldd R4,y+2
 076E 5B80              ldd R5,y+3
 0770 2422              and R2,R20
 0772 3522              and R3,R21
 0774 4622              and R4,R22
 0776 5722              and R5,R23
 0778 022D              mov R16,R2
 077A                   .dbline -2
 077A           L207:
 077A                   .dbline 0 ; func end
 077A 2496              adiw R28,4
 077C 0C940000          xjmp pop_xgsetF03C
 0780                   .dbsym l adcl 0 l
 0780                   .dbsym r c 10 c
 0780                   .dbsym r ADdata 12 i
 0780                   .dbsym r ch 10 c
 0780                   .dbend
 0780                   .dbfunc e CheckMotor _CheckMotor fV
 0780           ;              n -> R12,R13
 0780           ;              f -> y+0
 0780           ;              a -> R12
 0780           ;              t -> R10,R11
                        .even
 0780           _CheckMotor::
 0780 0E940000          xcall push_xgsetF03C
 0784 5801              movw R10,R16
 0786 2497              sbiw R28,4
 0788                   .dbline -1
 0788                   .dbline 372
 0788           ; }
 0788           ; 
 0788           ; void CheckMotor(unsigned int t)//电机不转时耗时5us，最大定时8388ms，参数t为定时时间，单位ms
 0788           ; {   //电机电流单片机采样管脚上，没开电机时约70mV，开电机后空载时约80mV，于是下文需要把这个零位减掉。 
 0788                   .dbline 376
 0788           ;     float f;
 0788           ;       unsigned char a;
 0788           ;     unsigned int n;
 0788           ;     TCCR1B = 0x00; //stop
 0788 2224              clr R2
 078A 2EBC              out 0x2e,R2
 078C                   .dbline 377
 078C           ;       if(t>8388)
 078C 84EC              ldi R24,8388
 078E 90E2              ldi R25,32
 0790 8A15              cp R24,R10
 0792 9B05              cpc R25,R11
 0794 08F4              brsh L227
 0796           X68:
 0796                   .dbline 378
 0796           ;          t=8388;
 0796 5C01              movw R10,R24
 0798           L227:
 0798                   .dbline 379
 0798           ;       f=t;
 0798 8501              movw R16,R10
 079A 0E940000          xcall uint2fp
 079E 0883              std y+0,R16
 07A0 1983              std y+1,R17
 07A2 2A83              std y+2,R18
 07A4 3B83              std y+3,R19
 07A6                   .dbline 380
 07A6           ;       f*=7.8125;
 07A6 00E0              ldi R16,<L229
 07A8 10E0              ldi R17,>L229
 07AA 0E940000          xcall elpm32
 07AE CE01              movw R24,R28
 07B0 9A93              st -y,R25
 07B2 8A93              st -y,R24
 07B4 0E940000          xcall fpmule1
 07B8 0883              std y+0,R16
 07BA 1983              std y+1,R17
 07BC 2A83              std y+2,R18
 07BE 3B83              std y+3,R19
 07C0                   .dbline 381
 07C0           ;       n=f;
 07C0 0881              ldd R16,y+0
 07C2 1981              ldd R17,y+1
 07C4 2A81              ldd R18,y+2
 07C6 3B81              ldd R19,y+3
 07C8 0E940000          xcall fpint
 07CC 6801              movw R12,R16
 07CE                   .dbline 382
 07CE           ;     TCNT1 = 65535-n;  
 07CE 1601              movw R2,R12
 07D0 4424              clr R4
 07D2 5524              clr R5
 07D4 4FEF              ldi R20,255
 07D6 5FEF              ldi R21,255
 07D8 60E0              ldi R22,0
 07DA 70E0              ldi R23,0
 07DC 4219              sub R20,R2
 07DE 5309              sbc R21,R3
 07E0 6409              sbc R22,R4
 07E2 7509              sbc R23,R5
 07E4 5DBD              out 0x2d,R21
 07E6 4CBD              out 0x2c,R20
 07E8                   .dbline 383
 07E8           ;       TIFR |= 0x04; //清定时器1中断标志 
 07E8 86B7              in R24,0x36
 07EA 8460              ori R24,4
 07EC 86BF              out 0x36,R24
 07EE                   .dbline 384
 07EE           ;       TCCR1B = 0x05; //1024分频
 07EE 85E0              ldi R24,5
 07F0 8EBD              out 0x2e,R24
 07F2 1DC1              xjmp L231
 07F4           L230:
 07F4                   .dbline 387
 07F4           ;       
 07F4           ;    while((TIFR&0x04)==0x00)//定时中断到来前一直采样监测电流
 07F4           ;    {   
 07F4                   .dbline 388
 07F4           ;     if( Motor1Status.s.RUN==1 )//收放电机运行时才实时检测电流，否则电流保存最后一次的测试值
 07F4 80910B00          lds R24,_Motor1Status
 07F8 90910C00          lds R25,_Motor1Status+1
 07FC 8170              andi R24,1
 07FE 9070              andi R25,0
 0800 8130              cpi R24,1
 0802 E0E0              ldi R30,0
 0804 9E07              cpc R25,R30
 0806 09F0              breq X79
 0808 81C0              xjmp L233
 080A           X79:
 080A           X69:
 080A                   .dbline 389
 080A           ;     {
 080A                   .dbline 390
 080A           ;         a=SampleADC(0);
 080A 0027              clr R16
 080C 4ADF              xcall _SampleADC
 080E C02E              mov R12,R16
 0810                   .dbline 391
 0810           ;         if(a>5){a-=5;}// 减掉硬件零位，每个数字量代表10mV，单片机的ADC采样偏小，于是在这儿只抵消50m即可。
 0810 85E0              ldi R24,5
 0812 8017              cp R24,R16
 0814 20F4              brsh L235
 0816           X70:
 0816                   .dbline 391
 0816                   .dbline 391
 0816 8C2D              mov R24,R12
 0818 8550              subi R24,5
 081A C82E              mov R12,R24
 081C                   .dbline 391
 081C 01C0              xjmp L236
 081E           L235:
 081E                   .dbline 392
 081E           ;         else{a=0;}
 081E                   .dbline 392
 081E CC24              clr R12
 0820                   .dbline 392
 0820           L236:
 0820                   .dbline 394
 0820           ;         
 0820           ;       if(a>Motor1Thr)//过流关电机
 0820 20900600          lds R2,_Motor1Thr
 0824 3324              clr R3
 0826 4C2C              mov R4,R12
 0828 5524              clr R5
 082A 2414              cp R2,R4
 082C 3504              cpc R3,R5
 082E 04F5              brge L237
 0830           X71:
 0830                   .dbline 395
 0830           ;       {
 0830                   .dbline 396
 0830           ;          MOTORSTOP//关电机   
 0830                   .dbline 396
 0830 9698              cbi 0x12,6
 0832                   .dbline 396
 0832 9798              cbi 0x12,7
 0834                   .dbline 396
 0834 DA98              cbi 0x1b,2
 0836                   .dbline 396
 0836 DB98              cbi 0x1b,3
 0838                   .dbline 396
 0838 DE98              cbi 0x1b,6
 083A                   .dbline 396
 083A 80916500          lds R24,101
 083E 8D7F              andi R24,253
 0840 80936500          sts 101,R24
 0844                   .dbline 396
 0844 80916500          lds R24,101
 0848 8E7F              andi R24,254
 084A 80936500          sts 101,R24
 084E                   .dbline 396
 084E DC98              cbi 0x1b,4
 0850                   .dbline 396
 0850 DD98              cbi 0x1b,5
 0852                   .dbline 396
 0852                   .dbline 397
 0852           ;        Motor1Status.s.OverCurrent=1;//过流状态置1，表示电机上次停止原因为过流停
 0852 80910B00          lds R24,_Motor1Status
 0856 90910C00          lds R25,_Motor1Status+1
 085A 8061              ori R24,16
 085C 90930C00          sts _Motor1Status+1,R25
 0860 80930B00          sts _Motor1Status,R24
 0864                   .dbline 398
 0864           ;          Motor1Status.s.RUN=0;//停止状态
 0864 8E7F              andi R24,254
 0866 90930C00          sts _Motor1Status+1,R25
 086A 80930B00          sts _Motor1Status,R24
 086E                   .dbline 399
 086E           ;         }
 086E 23C0              xjmp L238
 0870           L237:
 0870                   .dbline 400
 0870           ;         else if(a<MotorIdelCur)//断路关电机 
 0870 20900300          lds R2,_MotorIdelCur
 0874 C214              cp R12,R2
 0876 F8F4              brsh L239
 0878           X72:
 0878                   .dbline 401
 0878           ;         {   
 0878                   .dbline 402
 0878           ;          MOTORSTOP//关电机
 0878                   .dbline 402
 0878 9698              cbi 0x12,6
 087A                   .dbline 402
 087A 9798              cbi 0x12,7
 087C                   .dbline 402
 087C DA98              cbi 0x1b,2
 087E                   .dbline 402
 087E DB98              cbi 0x1b,3
 0880                   .dbline 402
 0880 DE98              cbi 0x1b,6
 0882                   .dbline 402
 0882 80916500          lds R24,101
 0886 8D7F              andi R24,253
 0888 80936500          sts 101,R24
 088C                   .dbline 402
 088C 80916500          lds R24,101
 0890 8E7F              andi R24,254
 0892 80936500          sts 101,R24
 0896                   .dbline 402
 0896 DC98              cbi 0x1b,4
 0898                   .dbline 402
 0898 DD98              cbi 0x1b,5
 089A                   .dbline 402
 089A                   .dbline 403
 089A           ;        Motor1Status.s.BrokenStop=1;//断路状态置1，表示电机上次停止原因为断路停
 089A 80910B00          lds R24,_Motor1Status
 089E 90910C00          lds R25,_Motor1Status+1
 08A2 8460              ori R24,4
 08A4 90930C00          sts _Motor1Status+1,R25
 08A8 80930B00          sts _Motor1Status,R24
 08AC                   .dbline 404
 08AC           ;          Motor1Status.s.RUN=0;//停止状态
 08AC 8E7F              andi R24,254
 08AE 90930C00          sts _Motor1Status+1,R25
 08B2 80930B00          sts _Motor1Status,R24
 08B6                   .dbline 405
 08B6           ;         }
 08B6           L239:
 08B6           L238:
 08B6                   .dbline 407
 08B6           ;         
 08B6           ;         f=a;
 08B6 0C2D              mov R16,R12
 08B8 1127              clr R17
 08BA 0E940000          xcall int2fp
 08BE 0883              std y+0,R16
 08C0 1983              std y+1,R17
 08C2 2A83              std y+2,R18
 08C4 3B83              std y+3,R19
 08C6                   .dbline 408
 08C6           ;         f*=1.087;//按采样电阻1.2欧，放大倍数7.667，8位AD，2.56V参考计算
 08C6 00E0              ldi R16,<L241
 08C8 10E0              ldi R17,>L241
 08CA 0E940000          xcall elpm32
 08CE CE01              movw R24,R28
 08D0 9A93              st -y,R25
 08D2 8A93              st -y,R24
 08D4 0E940000          xcall fpmule1
 08D8 0883              std y+0,R16
 08DA 1983              std y+1,R17
 08DC 2A83              std y+2,R18
 08DE 3B83              std y+3,R19
 08E0                   .dbline 409
 08E0           ;         Motor1Status.s.ThisCurrent=f;
 08E0 0881              ldd R16,y+0
 08E2 1981              ldd R17,y+1
 08E4 2A81              ldd R18,y+2
 08E6 3B81              ldd R19,y+3
 08E8 0E940000          xcall fpint
 08EC C801              movw R24,R16
 08EE 9070              andi R25,0
 08F0 982F              mov R25,R24
 08F2 8827              clr R24
 08F4 8070              andi R24,0
 08F6 E0910B00          lds R30,_Motor1Status
 08FA F0910C00          lds R31,_Motor1Status+1
 08FE F070              andi R31,0
 0900 E82B              or R30,R24
 0902 F92B              or R31,R25
 0904 F0930C00          sts _Motor1Status+1,R31
 0908 E0930B00          sts _Motor1Status,R30
 090C                   .dbline 410
 090C           ;     }
 090C           L233:
 090C                   .dbline 412
 090C           ;    
 090C           ;     if( Motor2Status.s.RUN==1 )//调节电机运行时才实时检测电流，否则电流保存最后一次的测试值
 090C 80910900          lds R24,_Motor2Status
 0910 90910A00          lds R25,_Motor2Status+1
 0914 8170              andi R24,1
 0916 9070              andi R25,0
 0918 8130              cpi R24,1
 091A E0E0              ldi R30,0
 091C 9E07              cpc R25,R30
 091E 09F0              breq X80
 0920 81C0              xjmp L242
 0922           X80:
 0922           X73:
 0922                   .dbline 413
 0922           ;     {
 0922                   .dbline 414
 0922           ;        a=SampleADC(1);        
 0922 01E0              ldi R16,1
 0924 BEDE              xcall _SampleADC
 0926 C02E              mov R12,R16
 0928                   .dbline 415
 0928           ;        if(a>5){a-=5;}// 减掉硬件零位，每个数字量代表10mV，单片机的ADC采样偏小，于是在这儿只抵消50m即可。
 0928 85E0              ldi R24,5
 092A 8017              cp R24,R16
 092C 20F4              brsh L244
 092E           X74:
 092E                   .dbline 415
 092E                   .dbline 415
 092E 8C2D              mov R24,R12
 0930 8550              subi R24,5
 0932 C82E              mov R12,R24
 0934                   .dbline 415
 0934 01C0              xjmp L245
 0936           L244:
 0936                   .dbline 416
 0936           ;         else{a=0;}
 0936                   .dbline 416
 0936 CC24              clr R12
 0938                   .dbline 416
 0938           L245:
 0938                   .dbline 418
 0938           ;         
 0938           ;      if(a>Motor2Thr)//过流关电机
 0938 20900500          lds R2,_Motor2Thr
 093C 3324              clr R3
 093E 4C2C              mov R4,R12
 0940 5524              clr R5
 0942 2414              cp R2,R4
 0944 3504              cpc R3,R5
 0946 04F5              brge L246
 0948           X75:
 0948                   .dbline 419
 0948           ;      {
 0948                   .dbline 420
 0948           ;          MOTORSTOP//关电机
 0948                   .dbline 420
 0948 9698              cbi 0x12,6
 094A                   .dbline 420
 094A 9798              cbi 0x12,7
 094C                   .dbline 420
 094C DA98              cbi 0x1b,2
 094E                   .dbline 420
 094E DB98              cbi 0x1b,3
 0950                   .dbline 420
 0950 DE98              cbi 0x1b,6
 0952                   .dbline 420
 0952 80916500          lds R24,101
 0956 8D7F              andi R24,253
 0958 80936500          sts 101,R24
 095C                   .dbline 420
 095C 80916500          lds R24,101
 0960 8E7F              andi R24,254
 0962 80936500          sts 101,R24
 0966                   .dbline 420
 0966 DC98              cbi 0x1b,4
 0968                   .dbline 420
 0968 DD98              cbi 0x1b,5
 096A                   .dbline 420
 096A                   .dbline 421
 096A           ;        Motor2Status.s.OverCurrent=1;//过流状态置1，表示电机上次停止原因为过流停
 096A 80910900          lds R24,_Motor2Status
 096E 90910A00          lds R25,_Motor2Status+1
 0972 8061              ori R24,16
 0974 90930A00          sts _Motor2Status+1,R25
 0978 80930900          sts _Motor2Status,R24
 097C                   .dbline 422
 097C           ;          Motor2Status.s.RUN=0;//停止状态
 097C 8E7F              andi R24,254
 097E 90930A00          sts _Motor2Status+1,R25
 0982 80930900          sts _Motor2Status,R24
 0986                   .dbline 423
 0986           ;        } 
 0986 23C0              xjmp L247
 0988           L246:
 0988                   .dbline 424
 0988           ;        else if(a<MotorIdelCur) //断路关电机，电流小于xx mA认为是断路
 0988 20900300          lds R2,_MotorIdelCur
 098C C214              cp R12,R2
 098E F8F4              brsh L248
 0990           X76:
 0990                   .dbline 425
 0990           ;        {
 0990                   .dbline 426
 0990           ;          MOTORSTOP//关电机
 0990                   .dbline 426
 0990 9698              cbi 0x12,6
 0992                   .dbline 426
 0992 9798              cbi 0x12,7
 0994                   .dbline 426
 0994 DA98              cbi 0x1b,2
 0996                   .dbline 426
 0996 DB98              cbi 0x1b,3
 0998                   .dbline 426
 0998 DE98              cbi 0x1b,6
 099A                   .dbline 426
 099A 80916500          lds R24,101
 099E 8D7F              andi R24,253
 09A0 80936500          sts 101,R24
 09A4                   .dbline 426
 09A4 80916500          lds R24,101
 09A8 8E7F              andi R24,254
 09AA 80936500          sts 101,R24
 09AE                   .dbline 426
 09AE DC98              cbi 0x1b,4
 09B0                   .dbline 426
 09B0 DD98              cbi 0x1b,5
 09B2                   .dbline 426
 09B2                   .dbline 427
 09B2           ;        Motor2Status.s.BrokenStop=1;//断路状态置1，表示电机上次停止原因为断路停
 09B2 80910900          lds R24,_Motor2Status
 09B6 90910A00          lds R25,_Motor2Status+1
 09BA 8460              ori R24,4
 09BC 90930A00          sts _Motor2Status+1,R25
 09C0 80930900          sts _Motor2Status,R24
 09C4                   .dbline 428
 09C4           ;          Motor2Status.s.RUN=0;//停止状态
 09C4 8E7F              andi R24,254
 09C6 90930A00          sts _Motor2Status+1,R25
 09CA 80930900          sts _Motor2Status,R24
 09CE                   .dbline 429
 09CE           ;        }
 09CE           L248:
 09CE           L247:
 09CE                   .dbline 431
 09CE           ; 
 09CE           ;         f=a;
 09CE 0C2D              mov R16,R12
 09D0 1127              clr R17
 09D2 0E940000          xcall int2fp
 09D6 0883              std y+0,R16
 09D8 1983              std y+1,R17
 09DA 2A83              std y+2,R18
 09DC 3B83              std y+3,R19
 09DE                   .dbline 432
 09DE           ;         f*=1.087;//按采样电阻1.2欧，放大倍数7.667，8位AD，2.56V参考计算
 09DE 00E0              ldi R16,<L241
 09E0 10E0              ldi R17,>L241
 09E2 0E940000          xcall elpm32
 09E6 CE01              movw R24,R28
 09E8 9A93              st -y,R25
 09EA 8A93              st -y,R24
 09EC 0E940000          xcall fpmule1
 09F0 0883              std y+0,R16
 09F2 1983              std y+1,R17
 09F4 2A83              std y+2,R18
 09F6 3B83              std y+3,R19
 09F8                   .dbline 433
 09F8           ;         Motor2Status.s.ThisCurrent=f;
 09F8 0881              ldd R16,y+0
 09FA 1981              ldd R17,y+1
 09FC 2A81              ldd R18,y+2
 09FE 3B81              ldd R19,y+3
 0A00 0E940000          xcall fpint
 0A04 C801              movw R24,R16
 0A06 9070              andi R25,0
 0A08 982F              mov R25,R24
 0A0A 8827              clr R24
 0A0C 8070              andi R24,0
 0A0E E0910900          lds R30,_Motor2Status
 0A12 F0910A00          lds R31,_Motor2Status+1
 0A16 F070              andi R31,0
 0A18 E82B              or R30,R24
 0A1A F92B              or R31,R25
 0A1C F0930A00          sts _Motor2Status+1,R31
 0A20 E0930900          sts _Motor2Status,R30
 0A24                   .dbline 434
 0A24           ;     }
 0A24           L242:
 0A24                   .dbline 436
 0A24           ; 
 0A24           ;     if(t==0){break;}//不定时则检测一次电机状态后直接跳出
 0A24 AA20              tst R10
 0A26 19F4              brne L250
 0A28 BB20              tst R11
 0A2A 09F4              brne L250
 0A2C           X77:
 0A2C                   .dbline 436
 0A2C                   .dbline 436
 0A2C 03C0              xjmp L232
 0A2E           L250:
 0A2E                   .dbline 437
 0A2E           ;    } 
 0A2E           L231:
 0A2E                   .dbline 386
 0A2E 26B6              in R2,0x36
 0A30 22FE              sbrs R2,2
 0A32 E0CE              rjmp L230
 0A34           X78:
 0A34           L232:
 0A34                   .dbline 439
 0A34           ;    
 0A34           ;    TCCR1B = 0x00; //stop
 0A34 2224              clr R2
 0A36 2EBC              out 0x2e,R2
 0A38                   .dbline -2
 0A38           L226:
 0A38                   .dbline 0 ; func end
 0A38 2496              adiw R28,4
 0A3A 0C940000          xjmp pop_xgsetF03C
 0A3E                   .dbsym r n 12 i
 0A3E                   .dbsym l f 0 D
 0A3E                   .dbsym r a 12 c
 0A3E                   .dbsym r t 10 i
 0A3E                   .dbend
 0A3E                   .dbfunc e Start _Start fV
                        .even
 0A3E           _Start::
 0A3E                   .dbline -1
 0A3E                   .dbline 444
 0A3E           ; }
 0A3E           ; 
 0A3E           ; 
 0A3E           ; void Start(void)
 0A3E           ; {
 0A3E                   .dbline 445
 0A3E           ;  InitialIO();
 0A3E E0DA              xcall _InitialIO
 0A40                   .dbline 446
 0A40           ;  uart1_init();
 0A40 ECDA              xcall _uart1_init
 0A42                   .dbline 448
 0A42           ;  
 0A42           ;  MOTORSTOP//关电机
 0A42                   .dbline 448
 0A42 9698              cbi 0x12,6
 0A44                   .dbline 448
 0A44 9798              cbi 0x12,7
 0A46                   .dbline 448
 0A46 DA98              cbi 0x1b,2
 0A48                   .dbline 448
 0A48 DB98              cbi 0x1b,3
 0A4A                   .dbline 448
 0A4A DE98              cbi 0x1b,6
 0A4C                   .dbline 448
 0A4C 80916500          lds R24,101
 0A50 8D7F              andi R24,253
 0A52 80936500          sts 101,R24
 0A56                   .dbline 448
 0A56 80916500          lds R24,101
 0A5A 8E7F              andi R24,254
 0A5C 80936500          sts 101,R24
 0A60                   .dbline 448
 0A60 DC98              cbi 0x1b,4
 0A62                   .dbline 448
 0A62 DD98              cbi 0x1b,5
 0A64                   .dbline 448
 0A64                   .dbline 450
 0A64           ;  
 0A64           ;  Motor1Status.s.RUN=0; 
 0A64 80910B00          lds R24,_Motor1Status
 0A68 90910C00          lds R25,_Motor1Status+1
 0A6C 8E7F              andi R24,254
 0A6E 90930C00          sts _Motor1Status+1,R25
 0A72 80930B00          sts _Motor1Status,R24
 0A76                   .dbline 451
 0A76           ;  Motor1Status.s.DIR=0;
 0A76 8D7F              andi R24,253
 0A78 90930C00          sts _Motor1Status+1,R25
 0A7C 80930B00          sts _Motor1Status,R24
 0A80                   .dbline 452
 0A80           ;  Motor1Status.s.BrokenStop=0;
 0A80 8B7F              andi R24,251
 0A82 90930C00          sts _Motor1Status+1,R25
 0A86 80930B00          sts _Motor1Status,R24
 0A8A                   .dbline 453
 0A8A           ;  Motor1Status.s.CommandStop=0;
 0A8A 877F              andi R24,247
 0A8C 90930C00          sts _Motor1Status+1,R25
 0A90 80930B00          sts _Motor1Status,R24
 0A94                   .dbline 454
 0A94           ;  Motor1Status.s.OverCurrent=0;
 0A94 8F7E              andi R24,239
 0A96 90930C00          sts _Motor1Status+1,R25
 0A9A 80930B00          sts _Motor1Status,R24
 0A9E                   .dbline 455
 0A9E           ;  Motor1Status.s.UnderVoltage=0;
 0A9E 8F7D              andi R24,223
 0AA0 90930C00          sts _Motor1Status+1,R25
 0AA4 80930B00          sts _Motor1Status,R24
 0AA8                   .dbline 456
 0AA8           ;  Motor1Status.s.StartResult=0;
 0AA8 8F73              andi R24,63
 0AAA 90930C00          sts _Motor1Status+1,R25
 0AAE 80930B00          sts _Motor1Status,R24
 0AB2                   .dbline 457
 0AB2           ;  Motor1Status.s.ThisCurrent=0;
 0AB2 9070              andi R25,0
 0AB4 90930C00          sts _Motor1Status+1,R25
 0AB8 80930B00          sts _Motor1Status,R24
 0ABC                   .dbline 459
 0ABC           ;  
 0ABC           ;  Motor2Status.s.RUN=0; 
 0ABC 80910900          lds R24,_Motor2Status
 0AC0 90910A00          lds R25,_Motor2Status+1
 0AC4 8E7F              andi R24,254
 0AC6 90930A00          sts _Motor2Status+1,R25
 0ACA 80930900          sts _Motor2Status,R24
 0ACE                   .dbline 460
 0ACE           ;  Motor2Status.s.DIR=0;
 0ACE 8D7F              andi R24,253
 0AD0 90930A00          sts _Motor2Status+1,R25
 0AD4 80930900          sts _Motor2Status,R24
 0AD8                   .dbline 461
 0AD8           ;  Motor2Status.s.BrokenStop=0;
 0AD8 8B7F              andi R24,251
 0ADA 90930A00          sts _Motor2Status+1,R25
 0ADE 80930900          sts _Motor2Status,R24
 0AE2                   .dbline 462
 0AE2           ;  Motor2Status.s.CommandStop=0;
 0AE2 877F              andi R24,247
 0AE4 90930A00          sts _Motor2Status+1,R25
 0AE8 80930900          sts _Motor2Status,R24
 0AEC                   .dbline 463
 0AEC           ;  Motor2Status.s.OverCurrent=0;
 0AEC 8F7E              andi R24,239
 0AEE 90930A00          sts _Motor2Status+1,R25
 0AF2 80930900          sts _Motor2Status,R24
 0AF6                   .dbline 464
 0AF6           ;  Motor2Status.s.UnderVoltage=0;
 0AF6 8F7D              andi R24,223
 0AF8 90930A00          sts _Motor2Status+1,R25
 0AFC 80930900          sts _Motor2Status,R24
 0B00                   .dbline 465
 0B00           ;  Motor2Status.s.StartResult=0;
 0B00 8F73              andi R24,63
 0B02 90930A00          sts _Motor2Status+1,R25
 0B06 80930900          sts _Motor2Status,R24
 0B0A                   .dbline 466
 0B0A           ;  Motor2Status.s.ThisCurrent=0;
 0B0A 9070              andi R25,0
 0B0C 90930A00          sts _Motor2Status+1,R25
 0B10 80930900          sts _Motor2Status,R24
 0B14                   .dbline 468
 0B14           ;  
 0B14           ;  IntFlag=0;//无接收帧中断
 0B14 2224              clr R2
 0B16 20920100          sts _IntFlag,R2
 0B1A                   .dbline 470
 0B1A           ;  
 0B1A           ;  ACSR|=0x10;//清模拟比较器中断标志
 0B1A 449A              sbi 0x8,4
 0B1C                   .dbline 471
 0B1C           ;  ACSR&=0xf7;//关模拟比较器中断
 0B1C 88B1              in R24,0x8
 0B1E 877F              andi R24,247
 0B20 88B9              out 0x8,R24
 0B22                   .dbline 472
 0B22           ;  ACSR|=0x40;//ACBG置位，模拟比较器正级接内部能隙基准1.23V
 0B22 469A              sbi 0x8,6
 0B24                   .dbline 473
 0B24           ;  ACSR|=0x03;//开模拟比较器,AIN1连到比较器负极，0:比较器输出变化即中断，1：保留，2：下降沿中断，3:上升沿中断   
 0B24 88B1              in R24,0x8
 0B26 8360              ori R24,3
 0B28 88B9              out 0x8,R24
 0B2A                   .dbline 474
 0B2A           ;  ACSR|=0x08;//开模拟比较器中断，任何时候都要进行欠压监测      
 0B2A 439A              sbi 0x8,3
 0B2C                   .dbline 475
 0B2C           ;  ACSR|=0x10;//清模拟比较器中断标志    
 0B2C 449A              sbi 0x8,4
 0B2E                   .dbline 477
 0B2E           ;       
 0B2E           ;  INT_EN
 0B2E                   .dbline 477
 0B2E 7894              sei
 0B30                   .dbline 477
 0B30                   .dbline -2
 0B30           L252:
 0B30                   .dbline 0 ; func end
 0B30 0895              ret
 0B32                   .dbend
 0B32                   .dbfunc e Gear2Thr _Gear2Thr fV
                        .even
 0B32           _Gear2Thr::
 0B32                   .dbline -1
 0B32                   .dbline 481
 0B32           ; }
 0B32           ; 
 0B32           ; void Gear2Thr(void)
 0B32           ; {
 0B32                   .dbline 484
 0B32           ;   //按采样电阻1.2欧，放大倍数7.667，8位AD，2.56V参考计算，每个采样字表示1.087mA
 0B32           ; //将电机过流档位换算为数字量，方便中断函数中进行比较运算
 0B32           ;   if(Motor1Gear<1) {Motor1Gear=1;}//堵转电流最小为1档
 0B32 80910800          lds R24,_Motor1Gear
 0B36 8130              cpi R24,1
 0B38 18F4              brsh L254
 0B3A           X81:
 0B3A                   .dbline 484
 0B3A                   .dbline 484
 0B3A 81E0              ldi R24,1
 0B3C 80930800          sts _Motor1Gear,R24
 0B40                   .dbline 484
 0B40           L254:
 0B40                   .dbline 485
 0B40           ;   if(Motor1Gear>6) {Motor1Gear=6;}//堵转电流最大为6档
 0B40 86E0              ldi R24,6
 0B42 20900800          lds R2,_Motor1Gear
 0B46 8215              cp R24,R2
 0B48 10F4              brsh L256
 0B4A           X82:
 0B4A                   .dbline 485
 0B4A                   .dbline 485
 0B4A 80930800          sts _Motor1Gear,R24
 0B4E                   .dbline 485
 0B4E           L256:
 0B4E                   .dbline 486
 0B4E           ;   if(Motor2Gear<1) {Motor2Gear=1;}//堵转电流最小为1档
 0B4E 80910700          lds R24,_Motor2Gear
 0B52 8130              cpi R24,1
 0B54 18F4              brsh L258
 0B56           X83:
 0B56                   .dbline 486
 0B56                   .dbline 486
 0B56 81E0              ldi R24,1
 0B58 80930700          sts _Motor2Gear,R24
 0B5C                   .dbline 486
 0B5C           L258:
 0B5C                   .dbline 487
 0B5C           ;   if(Motor2Gear>6) {Motor2Gear=6;}//堵转电流最大为6档
 0B5C 86E0              ldi R24,6
 0B5E 20900700          lds R2,_Motor2Gear
 0B62 8215              cp R24,R2
 0B64 10F4              brsh L260
 0B66           X84:
 0B66                   .dbline 487
 0B66                   .dbline 487
 0B66 80930700          sts _Motor2Gear,R24
 0B6A                   .dbline 487
 0B6A           L260:
 0B6A                   .dbline 489
 0B6A           ;   //第1档从100mA起步，每档差值30mA,第6档约250mA
 0B6A           ;   Motor1Thr= 108+ (Motor1Gear-1)*27;
 0B6A 10910800          lds R17,_Motor1Gear
 0B6E 0BE1              ldi R16,27
 0B70 0103              mulsu R16,R17
 0B72 802D              mov R24,R0
 0B74 8B51              subi R24,27
 0B76 8459              subi R24,148    ; addi 108
 0B78 80930600          sts _Motor1Thr,R24
 0B7C                   .dbline 490
 0B7C           ;   Motor2Thr= 108+ (Motor2Gear-1)*27;
 0B7C 10910700          lds R17,_Motor2Gear
 0B80 0103              mulsu R16,R17
 0B82 802D              mov R24,R0
 0B84 8B51              subi R24,27
 0B86 8459              subi R24,148    ; addi 108
 0B88 80930500          sts _Motor2Thr,R24
 0B8C                   .dbline 492
 0B8C           ;   
 0B8C           ;   if(MotorIdelGear<1){MotorIdelGear=1;}//电机断路电流最小1档
 0B8C 80910400          lds R24,_MotorIdelGear
 0B90 8130              cpi R24,1
 0B92 18F4              brsh L262
 0B94           X85:
 0B94                   .dbline 492
 0B94                   .dbline 492
 0B94 81E0              ldi R24,1
 0B96 80930400          sts _MotorIdelGear,R24
 0B9A                   .dbline 492
 0B9A           L262:
 0B9A                   .dbline 493
 0B9A           ;   if(MotorIdelGear>6){MotorIdelGear=6;}//电机断路电流最大6档
 0B9A 86E0              ldi R24,6
 0B9C 20900400          lds R2,_MotorIdelGear
 0BA0 8215              cp R24,R2
 0BA2 10F4              brsh L264
 0BA4           X86:
 0BA4                   .dbline 493
 0BA4                   .dbline 493
 0BA4 80930400          sts _MotorIdelGear,R24
 0BA8                   .dbline 493
 0BA8           L264:
 0BA8                   .dbline 495
 0BA8           ;   //从5mA起步，最大55mA
 0BA8           ;   MotorIdelCur=(MotorIdelGear-1)*11+4;
 0BA8 10910400          lds R17,_MotorIdelGear
 0BAC 0BE0              ldi R16,11
 0BAE 0103              mulsu R16,R17
 0BB0 802D              mov R24,R0
 0BB2 8B50              subi R24,11
 0BB4 8C5F              subi R24,252    ; addi 4
 0BB6 80930300          sts _MotorIdelCur,R24
 0BBA                   .dbline -2
 0BBA           L253:
 0BBA                   .dbline 0 ; func end
 0BBA 0895              ret
 0BBC                   .dbend
 0BBC                   .dbfunc e main _main fV
 0BBC           ;              f -> y+4
 0BBC           ;              i -> R10
 0BBC           ;              l -> y+0
 0BBC           ;              j -> R12,R13
                        .even
 0BBC           _main::
 0BBC 2897              sbiw R28,8
 0BBE                   .dbline -1
 0BBE                   .dbline 500
 0BBE           ;   
 0BBE           ; }
 0BBE           ; 
 0BBE           ; void main(void)
 0BBE           ; { 
 0BBE                   .dbline 506
 0BBE           ;   unsigned char i;
 0BBE           ;   unsigned int j;
 0BBE           ;   unsigned long l;
 0BBE           ;   float f;
 0BBE           ;  
 0BBE           ;       for(l=0;l<1000;l++)
 0BBE 80E0              ldi R24,0
 0BC0 8883              std y+0,R24
 0BC2 8983              std y+1,R24
 0BC4 8A83              std y+2,R24
 0BC6 8B83              std y+3,R24
 0BC8 1BC0              xjmp L270
 0BCA           L267:
 0BCA                   .dbline 507
 0BCA           ;       {
 0BCA                   .dbline 508
 0BCA           ;               for(j=0;j<1000;j++);
 0BCA CC24              clr R12
 0BCC DD24              clr R13
 0BCE 03C0              xjmp L274
 0BD0           L271:
 0BD0                   .dbline 508
 0BD0           L272:
 0BD0                   .dbline 508
 0BD0 C601              movw R24,R12
 0BD2 0196              adiw R24,1
 0BD4 6C01              movw R12,R24
 0BD6           L274:
 0BD6                   .dbline 508
 0BD6 C601              movw R24,R12
 0BD8 883E              cpi R24,232
 0BDA E3E0              ldi R30,3
 0BDC 9E07              cpc R25,R30
 0BDE C0F3              brlo L271
 0BE0           X87:
 0BE0                   .dbline 509
 0BE0           ;       }
 0BE0           L268:
 0BE0                   .dbline 506
 0BE0 41E0              ldi R20,1
 0BE2 50E0              ldi R21,0
 0BE4 60E0              ldi R22,0
 0BE6 70E0              ldi R23,0
 0BE8 2880              ldd R2,y+0
 0BEA 3980              ldd R3,y+1
 0BEC 4A80              ldd R4,y+2
 0BEE 5B80              ldd R5,y+3
 0BF0 240E              add R2,R20
 0BF2 351E              adc R3,R21
 0BF4 461E              adc R4,R22
 0BF6 571E              adc R5,R23
 0BF8 2882              std y+0,R2
 0BFA 3982              std y+1,R3
 0BFC 4A82              std y+2,R4
 0BFE 5B82              std y+3,R5
 0C00           L270:
 0C00                   .dbline 506
 0C00 48EE              ldi R20,232
 0C02 53E0              ldi R21,3
 0C04 60E0              ldi R22,0
 0C06 70E0              ldi R23,0
 0C08 2880              ldd R2,y+0
 0C0A 3980              ldd R3,y+1
 0C0C 4A80              ldd R4,y+2
 0C0E 5B80              ldd R5,y+3
 0C10 2416              cp R2,R20
 0C12 3506              cpc R3,R21
 0C14 4606              cpc R4,R22
 0C16 5706              cpc R5,R23
 0C18 C0F2              brlo L267
 0C1A           X88:
 0C1A                   .dbline 511
 0C1A           ; 
 0C1A           ;       Start();
 0C1A 11DF              xcall _Start
 0C1C                   .dbline 513
 0C1C           ; 
 0C1C           ;       CheckMotor(50); 
 0C1C 02E3              ldi R16,50
 0C1E 10E0              ldi R17,0
 0C20 AFDD              xcall _CheckMotor
 0C22                   .dbline 515
 0C22           ; 
 0C22           ;       Motor1Gear=EEPROM_read(0);
 0C22 0027              clr R16
 0C24 1127              clr R17
 0C26 CFD3              xcall _EEPROM_read
 0C28 00930800          sts _Motor1Gear,R16
 0C2C                   .dbline 516
 0C2C           ;       Motor2Gear=EEPROM_read(1);
 0C2C 01E0              ldi R16,1
 0C2E 10E0              ldi R17,0
 0C30 CAD3              xcall _EEPROM_read
 0C32 00930700          sts _Motor2Gear,R16
 0C36                   .dbline 517
 0C36           ;       MotorIdelCur=EEPROM_read(2);
 0C36 02E0              ldi R16,2
 0C38 10E0              ldi R17,0
 0C3A C5D3              xcall _EEPROM_read
 0C3C A02E              mov R10,R16
 0C3E A0920300          sts _MotorIdelCur,R10
 0C42                   .dbline 518
 0C42           ;       Gear2Thr();//档位转换为阈值
 0C42 77DF              xcall _Gear2Thr
 0C44 67C3              xjmp L276
 0C46           L275:
 0C46                   .dbline 522
 0C46           ;   
 0C46           ; 
 0C46           ;       while(1)
 0C46           ;       { 
 0C46                   .dbline 523
 0C46           ;               CheckMotor(0);//实时进行电机过流检测
 0C46 0027              clr R16
 0C48 1127              clr R17
 0C4A 9ADD              xcall _CheckMotor
 0C4C                   .dbline 525
 0C4C           ; 
 0C4C           ;               if(IntFlag==1)//接收到了正常命令帧
 0C4C 80910100          lds R24,_IntFlag
 0C50 8130              cpi R24,1
 0C52 09F0              breq X138
 0C54 5FC3              xjmp L278
 0C56           X138:
 0C56           X89:
 0C56                   .dbline 526
 0C56           ;               {
 0C56                   .dbline 527
 0C56           ;                               switch(R_dat&0xf0)
 0C56 80910200          lds R24,_R_dat
 0C5A 9927              clr R25
 0C5C 807F              andi R24,240
 0C5E 9070              andi R25,0
 0C60 5C01              movw R10,R24
 0C62 8037              cpi R24,112
 0C64 E0E0              ldi R30,0
 0C66 9E07              cpc R25,R30
 0C68 09F4              brne X139
 0C6A 4BC1              xjmp L313
 0C6C           X139:
 0C6C           X90:
 0C6C 80E7              ldi R24,112
 0C6E 90E0              ldi R25,0
 0C70 8A15              cp R24,R10
 0C72 9B05              cpc R25,R11
 0C74 8CF0              brlt L357
 0C76           X91:
 0C76           L356:
 0C76 C501              movw R24,R10
 0C78 8033              cpi R24,48
 0C7A E0E0              ldi R30,0
 0C7C 9E07              cpc R25,R30
 0C7E 39F1              breq L284
 0C80           X92:
 0C80 8033              cpi R24,48
 0C82 E0E0              ldi R30,0
 0C84 9E07              cpc R25,R30
 0C86 0CF4              brge X140
 0C88 42C3              xjmp L281
 0C8A           X140:
 0C8A           X93:
 0C8A           L358:
 0C8A C501              movw R24,R10
 0C8C 8036              cpi R24,96
 0C8E E0E0              ldi R30,0
 0C90 9E07              cpc R25,R30
 0C92 09F4              brne X141
 0C94 54C0              xjmp L289
 0C96           X141:
 0C96           X94:
 0C96 3BC3              xjmp L281
 0C98           L357:
 0C98 C501              movw R24,R10
 0C9A 8039              cpi R24,144
 0C9C E0E0              ldi R30,0
 0C9E 9E07              cpc R25,R30
 0CA0 09F4              brne X142
 0CA2 24C3              xjmp L353
 0CA4           X142:
 0CA4           X95:
 0CA4 80E9              ldi R24,144
 0CA6 90E0              ldi R25,0
 0CA8 8A15              cp R24,R10
 0CAA 9B05              cpc R25,R11
 0CAC 3CF0              brlt L360
 0CAE           X96:
 0CAE           L359:
 0CAE C501              movw R24,R10
 0CB0 8038              cpi R24,128
 0CB2 E0E0              ldi R30,0
 0CB4 9E07              cpc R25,R30
 0CB6 09F4              brne X143
 0CB8 3EC2              xjmp L336
 0CBA           X143:
 0CBA           X97:
 0CBA 29C3              xjmp L281
 0CBC           L360:
 0CBC C501              movw R24,R10
 0CBE 803D              cpi R24,208
 0CC0 E0E0              ldi R30,0
 0CC2 9E07              cpc R25,R30
 0CC4 09F0              breq L283
 0CC6           X98:
 0CC6 23C3              xjmp L281
 0CC8           L283:
 0CC8                   .dbline 530
 0CC8           ;                               {               
 0CC8           ;                                   case 0xd0://读版本号
 0CC8           ;                                          SendUart1(BB);  
 0CC8 02E1              ldi R16,18
 0CCA C9D9              xcall _SendUart1
 0CCC                   .dbline 531
 0CCC           ;                                       break;          
 0CCC 20C3              xjmp L281
 0CCE           L284:
 0CCE                   .dbline 534
 0CCE           ;                                        
 0CCE           ;                                       case 0x30:// 采样电机电压,R7取30k时，最大能测得约88V
 0CCE           ;                                               f=SampleADC(2);
 0CCE 02E0              ldi R16,2
 0CD0 E8DC              xcall _SampleADC
 0CD2 1127              clr R17
 0CD4 0E940000          xcall int2fp
 0CD8 0C83              std y+4,R16
 0CDA 1D83              std y+5,R17
 0CDC 2E83              std y+6,R18
 0CDE 3F83              std y+7,R19
 0CE0                   .dbline 535
 0CE0           ;                                               f=f*0.34333;//按内部参考2.56V，8位AD采样，分压电阻分别是1M和30K来计算                                   
 0CE0 00E0              ldi R16,<L285
 0CE2 10E0              ldi R17,>L285
 0CE4 0E940000          xcall elpm32
 0CE8 CE01              movw R24,R28
 0CEA 0496              adiw R24,4
 0CEC 9A93              st -y,R25
 0CEE 8A93              st -y,R24
 0CF0 0E940000          xcall fpmule1
 0CF4 0C83              std y+4,R16
 0CF6 1D83              std y+5,R17
 0CF8 2E83              std y+6,R18
 0CFA 3F83              std y+7,R19
 0CFC                   .dbline 536
 0CFC           ;                                               i=f;
 0CFC 0C81              ldd R16,y+4
 0CFE 1D81              ldd R17,y+5
 0D00 2E81              ldd R18,y+6
 0D02 3F81              ldd R19,y+7
 0D04 0E940000          xcall fpint
 0D08 A02E              mov R10,R16
 0D0A                   .dbline 537
 0D0A           ;                                                if( (Motor1Status.s.RUN==1) || (Motor2Status.s.RUN==1) )
 0D0A 80910B00          lds R24,_Motor1Status
 0D0E 90910C00          lds R25,_Motor1Status+1
 0D12 8170              andi R24,1
 0D14 9070              andi R25,0
 0D16 8130              cpi R24,1
 0D18 E0E0              ldi R30,0
 0D1A 9E07              cpc R25,R30
 0D1C 51F0              breq L288
 0D1E           X99:
 0D1E 80910900          lds R24,_Motor2Status
 0D22 90910A00          lds R25,_Motor2Status+1
 0D26 8170              andi R24,1
 0D28 9070              andi R25,0
 0D2A 8130              cpi R24,1
 0D2C E0E0              ldi R30,0
 0D2E 9E07              cpc R25,R30
 0D30 19F4              brne L286
 0D32           X100:
 0D32           L288:
 0D32                   .dbline 538
 0D32           ;                                                {
 0D32                   .dbline 539
 0D32           ;                                                 i+=3;//为了用户看起来好看些
 0D32 8A2D              mov R24,R10
 0D34 8D5F              subi R24,253    ; addi 3
 0D36 A82E              mov R10,R24
 0D38                   .dbline 540
 0D38           ;                                                }
 0D38           L286:
 0D38                   .dbline 541
 0D38           ;                                               SendUart1(i);   
 0D38 0A2D              mov R16,R10
 0D3A 91D9              xcall _SendUart1
 0D3C                   .dbline 542
 0D3C           ;                                               break;
 0D3C E8C2              xjmp L281
 0D3E           L289:
 0D3E                   .dbline 545
 0D3E           ; 
 0D3E           ;                                       case 0x60:  //收放电机 
 0D3E           ;                                               if( !(((R_dat)==0x61)  || ((R_dat)==0x62) ) )//既不是正转，也不是反转，则立即返回且不响应上位机
 0D3E E0900200          lds R14,_R_dat
 0D42 8E2D              mov R24,R14
 0D44 8136              cpi R24,97
 0D46 19F0              breq L290
 0D48           X101:
 0D48 8236              cpi R24,98
 0D4A 09F0              breq L290
 0D4C           X102:
 0D4C                   .dbline 546
 0D4C           ;                                                       break;
 0D4C E0C2              xjmp L281
 0D4E           L290:
 0D4E                   .dbline 548
 0D4E           ; 
 0D4E           ;                                               if( Motor2Status.s.RUN==1 )//调节电机正在运行
 0D4E 80910900          lds R24,_Motor2Status
 0D52 90910A00          lds R25,_Motor2Status+1
 0D56 8170              andi R24,1
 0D58 9070              andi R25,0
 0D5A 8130              cpi R24,1
 0D5C E0E0              ldi R30,0
 0D5E 9E07              cpc R25,R30
 0D60 51F4              brne L292
 0D62           X103:
 0D62                   .dbline 549
 0D62           ;                                               {
 0D62                   .dbline 550
 0D62           ;                                                       Motor1Status.s.StartResult=3;//另一电机正在运行
 0D62 80910B00          lds R24,_Motor1Status
 0D66 90910C00          lds R25,_Motor1Status+1
 0D6A 806C              ori R24,192
 0D6C 90930C00          sts _Motor1Status+1,R25
 0D70 80930B00          sts _Motor1Status,R24
 0D74                   .dbline 551
 0D74           ;                                               }
 0D74 B6C0              xjmp L293
 0D76           L292:
 0D76                   .dbline 552
 0D76           ;                                               else if((Motor1Status.s.RUN==1)&&(Motor1Status.s.DIR==1))//收放电机正在正转
 0D76 E0900B00          lds R14,_Motor1Status
 0D7A F0900C00          lds R15,_Motor1Status+1
 0D7E C701              movw R24,R14
 0D80 8170              andi R24,1
 0D82 9070              andi R25,0
 0D84 8130              cpi R24,1
 0D86 E0E0              ldi R30,0
 0D88 9E07              cpc R25,R30
 0D8A 29F5              brne L294
 0D8C           X104:
 0D8C C701              movw R24,R14
 0D8E 9695              lsr R25
 0D90 8795              ror R24
 0D92 8170              andi R24,1
 0D94 9070              andi R25,0
 0D96 8130              cpi R24,1
 0D98 E0E0              ldi R30,0
 0D9A 9E07              cpc R25,R30
 0D9C E1F4              brne L294
 0D9E           X105:
 0D9E                   .dbline 553
 0D9E           ;                                               {
 0D9E                   .dbline 554
 0D9E           ;                                                 if(R_dat==0x61)
 0D9E 80910200          lds R24,_R_dat
 0DA2 8136              cpi R24,97
 0DA4 41F4              brne L296
 0DA6           X106:
 0DA6                   .dbline 555
 0DA6           ;                                                 {
 0DA6                   .dbline 556
 0DA6           ;                                                   Motor1Status.s.StartResult=1;//本电机正在同向运行
 0DA6 C701              movw R24,R14
 0DA8 8F73              andi R24,63
 0DAA 8064              ori R24,64
 0DAC 90930C00          sts _Motor1Status+1,R25
 0DB0 80930B00          sts _Motor1Status,R24
 0DB4                   .dbline 557
 0DB4           ;                                                 }
 0DB4 96C0              xjmp L295
 0DB6           L296:
 0DB6                   .dbline 558
 0DB6           ;                                                 else if(R_dat==0x62)
 0DB6 80910200          lds R24,_R_dat
 0DBA 8236              cpi R24,98
 0DBC 09F0              breq X144
 0DBE 91C0              xjmp L295
 0DC0           X144:
 0DC0           X107:
 0DC0                   .dbline 559
 0DC0           ;                                                 {
 0DC0                   .dbline 560
 0DC0           ;                                                  Motor1Status.s.StartResult=2;//本电机正在反向运行
 0DC0 80910B00          lds R24,_Motor1Status
 0DC4 90910C00          lds R25,_Motor1Status+1
 0DC8 8F73              andi R24,63
 0DCA 8068              ori R24,128
 0DCC 90930C00          sts _Motor1Status+1,R25
 0DD0 80930B00          sts _Motor1Status,R24
 0DD4                   .dbline 561
 0DD4           ;                                                 }
 0DD4                   .dbline 563
 0DD4           ; 
 0DD4           ;                                               }
 0DD4 86C0              xjmp L295
 0DD6           L294:
 0DD6                   .dbline 564
 0DD6           ;                                               else if((Motor1Status.s.RUN==1)&&(Motor1Status.s.DIR==0))//收放电机正在反转
 0DD6 E0900B00          lds R14,_Motor1Status
 0DDA F0900C00          lds R15,_Motor1Status+1
 0DDE C701              movw R24,R14
 0DE0 8170              andi R24,1
 0DE2 9070              andi R25,0
 0DE4 8130              cpi R24,1
 0DE6 E0E0              ldi R30,0
 0DE8 9E07              cpc R25,R30
 0DEA F1F4              brne L300
 0DEC           X108:
 0DEC E1FC              sbrc R14,1
 0DEE 1CC0              rjmp L300
 0DF0           X109:
 0DF0                   .dbline 565
 0DF0           ;                                               {
 0DF0                   .dbline 566
 0DF0           ;                                                 if(R_dat==0x61)
 0DF0 80910200          lds R24,_R_dat
 0DF4 8136              cpi R24,97
 0DF6 41F4              brne L302
 0DF8           X110:
 0DF8                   .dbline 567
 0DF8           ;                                                 {
 0DF8                   .dbline 568
 0DF8           ;                                                  Motor1Status.s.StartResult=2;//本电机正在反向运行 
 0DF8 C701              movw R24,R14
 0DFA 8F73              andi R24,63
 0DFC 8068              ori R24,128
 0DFE 90930C00          sts _Motor1Status+1,R25
 0E02 80930B00          sts _Motor1Status,R24
 0E06                   .dbline 569
 0E06           ;                                                 }
 0E06 6DC0              xjmp L301
 0E08           L302:
 0E08                   .dbline 570
 0E08           ;                                                 else if(R_dat==0x62)
 0E08 80910200          lds R24,_R_dat
 0E0C 8236              cpi R24,98
 0E0E 09F0              breq X145
 0E10 68C0              xjmp L301
 0E12           X145:
 0E12           X111:
 0E12                   .dbline 571
 0E12           ;                                                 {
 0E12                   .dbline 572
 0E12           ;                                                  Motor1Status.s.StartResult=1;//本电机正在同向运行
 0E12 80910B00          lds R24,_Motor1Status
 0E16 90910C00          lds R25,_Motor1Status+1
 0E1A 8F73              andi R24,63
 0E1C 8064              ori R24,64
 0E1E 90930C00          sts _Motor1Status+1,R25
 0E22 80930B00          sts _Motor1Status,R24
 0E26                   .dbline 573
 0E26           ;                                                 }
 0E26                   .dbline 574
 0E26           ;                                               }
 0E26 5DC0              xjmp L301
 0E28           L300:
 0E28                   .dbline 576
 0E28           ;                                               else //二个电机都是停止状态，按命令要求启动电机，约1.5秒后反馈上位机
 0E28           ;                                               {  
 0E28                   .dbline 578
 0E28           ;                                                       //全部电机状态置初值，上一次停止原因全部清除
 0E28           ;                                                       Motor1Status.s.BrokenStop=0;
 0E28 80910B00          lds R24,_Motor1Status
 0E2C 90910C00          lds R25,_Motor1Status+1
 0E30 8B7F              andi R24,251
 0E32 90930C00          sts _Motor1Status+1,R25
 0E36 80930B00          sts _Motor1Status,R24
 0E3A                   .dbline 579
 0E3A           ;                                                       Motor1Status.s.CommandStop=0;
 0E3A 877F              andi R24,247
 0E3C 90930C00          sts _Motor1Status+1,R25
 0E40 80930B00          sts _Motor1Status,R24
 0E44                   .dbline 580
 0E44           ;                                                       Motor1Status.s.OverCurrent=0;
 0E44 8F7E              andi R24,239
 0E46 90930C00          sts _Motor1Status+1,R25
 0E4A 80930B00          sts _Motor1Status,R24
 0E4E                   .dbline 581
 0E4E           ;                                                       Motor1Status.s.UnderVoltage=0;
 0E4E 8F7D              andi R24,223
 0E50 90930C00          sts _Motor1Status+1,R25
 0E54 80930B00          sts _Motor1Status,R24
 0E58                   .dbline 582
 0E58           ;                                                       Motor1Status.s.StartResult=0;//正常启动
 0E58 8F73              andi R24,63
 0E5A 90930C00          sts _Motor1Status+1,R25
 0E5E 80930B00          sts _Motor1Status,R24
 0E62                   .dbline 584
 0E62           ; 
 0E62           ;                                                       if((R_dat)==0x61)//张开命令
 0E62 80910200          lds R24,_R_dat
 0E66 8136              cpi R24,97
 0E68 51F4              brne L306
 0E6A           X112:
 0E6A                   .dbline 585
 0E6A           ;                                                       { 
 0E6A                   .dbline 587
 0E6A           ;                                                                 //张臂，正转
 0E6A           ;                                                               Motor1Status.s.DIR=1;
 0E6A 80910B00          lds R24,_Motor1Status
 0E6E 90910C00          lds R25,_Motor1Status+1
 0E72 8260              ori R24,2
 0E74 90930C00          sts _Motor1Status+1,R25
 0E78 80930B00          sts _Motor1Status,R24
 0E7C                   .dbline 588
 0E7C           ;                                                       }
 0E7C 0EC0              xjmp L307
 0E7E           L306:
 0E7E                   .dbline 589
 0E7E           ;                                                       else if((R_dat)==0x62)          
 0E7E 80910200          lds R24,_R_dat
 0E82 8236              cpi R24,98
 0E84 09F0              breq X146
 0E86 47C2              xjmp L266
 0E88           X146:
 0E88           X113:
 0E88                   .dbline 590
 0E88           ;                                                       { 
 0E88                   .dbline 592
 0E88           ;                                                                //收臂，反转
 0E88           ;                                                               Motor1Status.s.DIR=0;
 0E88 80910B00          lds R24,_Motor1Status
 0E8C 90910C00          lds R25,_Motor1Status+1
 0E90 8D7F              andi R24,253
 0E92 90930C00          sts _Motor1Status+1,R25
 0E96 80930B00          sts _Motor1Status,R24
 0E9A                   .dbline 593
 0E9A           ;                                                       }
 0E9A                   .dbline 595
 0E9A           ;                                                       else
 0E9A           ;                                                       {
 0E9A                   .dbline 596
 0E9A           ;                                                               return;//20170609
 0E9A           L309:
 0E9A           L307:
 0E9A                   .dbline 599
 0E9A           ;                                                       }
 0E9A           ; 
 0E9A           ;                                                       VM_OPEN//开电机电源
 0E9A                   .dbline 599
 0E9A 88B1              in R24,0x8
 0E9C 877F              andi R24,247
 0E9E 88B9              out 0x8,R24
 0EA0                   .dbline 599
 0EA0 DE9A              sbi 0x1b,6
 0EA2                   .dbline 599
 0EA2 02E3              ldi R16,50
 0EA4 10E0              ldi R17,0
 0EA6 6CDC              xcall _CheckMotor
 0EA8                   .dbline 599
 0EA8 449A              sbi 0x8,4
 0EAA                   .dbline 599
 0EAA 439A              sbi 0x8,3
 0EAC                   .dbline 599
 0EAC                   .dbline 601
 0EAC           ; 
 0EAC           ;                                                       CheckMotor(500);//开电机电源后需等待半秒让大功率二极管电压稳定
 0EAC 04EF              ldi R16,500
 0EAE 11E0              ldi R17,1
 0EB0 67DC              xcall _CheckMotor
 0EB2                   .dbline 604
 0EB2           ; 
 0EB2           ; 
 0EB2           ;                                                       TCCR1B = 0x00; //stop
 0EB2 2224              clr R2
 0EB4 2EBC              out 0x2e,R2
 0EB6                   .dbline 605
 0EB6           ;                                                       TCNT1 = 61629;   //定时500ms
 0EB6 8DEB              ldi R24,61629
 0EB8 90EF              ldi R25,240
 0EBA 9DBD              out 0x2d,R25
 0EBC 8CBD              out 0x2c,R24
 0EBE                   .dbline 606
 0EBE           ;                                                       TIFR|=0x04; //清定时器1中断标志
 0EBE 86B7              in R24,0x36
 0EC0 8460              ori R24,4
 0EC2 86BF              out 0x36,R24
 0EC4                   .dbline 607
 0EC4           ;                                                       TCCR1B = 0x05; //1024分频
 0EC4 85E0              ldi R24,5
 0EC6 8EBD              out 0x2e,R24
 0EC8                   .dbline 608
 0EC8           ;                                                       TIFR|=0x04; //清定时器1中断标志
 0EC8 86B7              in R24,0x36
 0ECA 8460              ori R24,4
 0ECC 86BF              out 0x36,R24
 0ECE                   .dbline 609
 0ECE           ;                                                       Pwm_startup(1);//PWM启动,电机启动前期500ms内不进行电流检查，但有欠压监测                
 0ECE 01E0              ldi R16,1
 0ED0 22D9              xcall _Pwm_startup
 0ED2           L310:
 0ED2                   .dbline 610
 0ED2           ;                                                       while((TIFR&0x04)==0x00); //等待500ms定时到，期间可能有欠压中断发生
 0ED2           L311:
 0ED2                   .dbline 610
 0ED2 26B6              in R2,0x36
 0ED4 22FE              sbrs R2,2
 0ED6 FDCF              rjmp L310
 0ED8           X114:
 0ED8                   .dbline 611
 0ED8           ;                                                       TCCR1B = 0x00; //stop
 0ED8 2224              clr R2
 0EDA 2EBC              out 0x2e,R2
 0EDC                   .dbline 613
 0EDC           ; 
 0EDC           ;                                                       CheckMotor(500);//延时保证总线电压稳定          
 0EDC 04EF              ldi R16,500
 0EDE 11E0              ldi R17,1
 0EE0 4FDC              xcall _CheckMotor
 0EE2                   .dbline 614
 0EE2           ;                                               }
 0EE2           L301:
 0EE2           L295:
 0EE2           L293:
 0EE2                   .dbline 617
 0EE2           ;                        
 0EE2           ;                                   //返回2字节电机状态
 0EE2           ;                                               SendUart1(Motor1Status.i); CheckMotor(2);
 0EE2 00910B00          lds R16,_Motor1Status
 0EE6 10910C00          lds R17,_Motor1Status+1
 0EEA B9D8              xcall _SendUart1
 0EEC                   .dbline 617
 0EEC 02E0              ldi R16,2
 0EEE 10E0              ldi R17,0
 0EF0 47DC              xcall _CheckMotor
 0EF2                   .dbline 618
 0EF2           ;                                               SendUart1(Motor1Status.i>>8);
 0EF2 00910B00          lds R16,_Motor1Status
 0EF6 10910C00          lds R17,_Motor1Status+1
 0EFA 012F              mov R16,R17
 0EFC 1127              clr R17
 0EFE AFD8              xcall _SendUart1
 0F00                   .dbline 620
 0F00           ; 
 0F00           ;                                               break;
 0F00 06C2              xjmp L281
 0F02           L313:
 0F02                   .dbline 623
 0F02           ; 
 0F02           ;                                       case 0x70://调节电机   
 0F02           ;                                               if( ((R_dat)<0x71)  || ((R_dat)>0x7c)  )//既不是调大，也不是调小，也不微调大，也不是微调小，则立即返回且不响应上位机
 0F02 E0900200          lds R14,_R_dat
 0F06 8E2D              mov R24,R14
 0F08 8137              cpi R24,113
 0F0A 18F0              brlo L316
 0F0C           X115:
 0F0C 8CE7              ldi R24,124
 0F0E 8E15              cp R24,R14
 0F10 08F4              brsh L314
 0F12           X116:
 0F12           L316:
 0F12                   .dbline 624
 0F12           ;                                               break;
 0F12 FDC1              xjmp L281
 0F14           L314:
 0F14                   .dbline 626
 0F14           ; 
 0F14           ;                                               i=R_dat%2;
 0F14 12E0              ldi R17,2
 0F16 00910200          lds R16,_R_dat
 0F1A 0E940000          xcall mod8u
 0F1E A02E              mov R10,R16
 0F20                   .dbline 628
 0F20           ;                                               
 0F20           ;                                               if(Motor1Status.s.RUN==1)//收放电机正在运行
 0F20 80910B00          lds R24,_Motor1Status
 0F24 90910C00          lds R25,_Motor1Status+1
 0F28 8170              andi R24,1
 0F2A 9070              andi R25,0
 0F2C 8130              cpi R24,1
 0F2E E0E0              ldi R30,0
 0F30 9E07              cpc R25,R30
 0F32 51F4              brne L317
 0F34           X117:
 0F34                   .dbline 629
 0F34           ;                                               {
 0F34                   .dbline 630
 0F34           ;                                                       Motor2Status.s.StartResult=3;//另一电机正在运行
 0F34 80910900          lds R24,_Motor2Status
 0F38 90910A00          lds R25,_Motor2Status+1
 0F3C 806C              ori R24,192
 0F3E 90930A00          sts _Motor2Status+1,R25
 0F42 80930900          sts _Motor2Status,R24
 0F46                   .dbline 631
 0F46           ;                                               }
 0F46 A5C0              xjmp L318
 0F48           L317:
 0F48                   .dbline 632
 0F48           ;                                               else if((Motor2Status.s.RUN==1)&&(Motor2Status.s.DIR==1))//调节电机正在正转
 0F48 E0900900          lds R14,_Motor2Status
 0F4C F0900A00          lds R15,_Motor2Status+1
 0F50 C701              movw R24,R14
 0F52 8170              andi R24,1
 0F54 9070              andi R25,0
 0F56 8130              cpi R24,1
 0F58 E0E0              ldi R30,0
 0F5A 9E07              cpc R25,R30
 0F5C F1F4              brne L319
 0F5E           X118:
 0F5E C701              movw R24,R14
 0F60 9695              lsr R25
 0F62 8795              ror R24
 0F64 8170              andi R24,1
 0F66 9070              andi R25,0
 0F68 8130              cpi R24,1
 0F6A E0E0              ldi R30,0
 0F6C 9E07              cpc R25,R30
 0F6E A9F4              brne L319
 0F70           X119:
 0F70                   .dbline 633
 0F70           ;                                               {
 0F70                   .dbline 634
 0F70           ;                                                 if(i==0)//偶数命令，正转
 0F70 AA20              tst R10
 0F72 41F4              brne L321
 0F74           X120:
 0F74                   .dbline 635
 0F74           ;                                                 {
 0F74                   .dbline 636
 0F74           ;                                                  Motor2Status.s.StartResult=1;//本电机正在同向运行
 0F74 C701              movw R24,R14
 0F76 8F73              andi R24,63
 0F78 8064              ori R24,64
 0F7A 90930A00          sts _Motor2Status+1,R25
 0F7E 80930900          sts _Motor2Status,R24
 0F82                   .dbline 637
 0F82           ;                                                 }
 0F82 87C0              xjmp L320
 0F84           L321:
 0F84                   .dbline 639
 0F84           ;                                                 else//奇数命令，反转
 0F84           ;                                                 {
 0F84                   .dbline 640
 0F84           ;                                                  Motor2Status.s.StartResult=2;//本电机正在反向运行
 0F84 80910900          lds R24,_Motor2Status
 0F88 90910A00          lds R25,_Motor2Status+1
 0F8C 8F73              andi R24,63
 0F8E 8068              ori R24,128
 0F90 90930A00          sts _Motor2Status+1,R25
 0F94 80930900          sts _Motor2Status,R24
 0F98                   .dbline 641
 0F98           ;                                                 }
 0F98                   .dbline 642
 0F98           ;                                               }
 0F98 7CC0              xjmp L320
 0F9A           L319:
 0F9A                   .dbline 643
 0F9A           ;                                               else if((Motor2Status.s.RUN==1)&&(Motor2Status.s.DIR==0))//调节电机正在反转
 0F9A E0900900          lds R14,_Motor2Status
 0F9E F0900A00          lds R15,_Motor2Status+1
 0FA2 C701              movw R24,R14
 0FA4 8170              andi R24,1
 0FA6 9070              andi R25,0
 0FA8 8130              cpi R24,1
 0FAA E0E0              ldi R30,0
 0FAC 9E07              cpc R25,R30
 0FAE B9F4              brne L323
 0FB0           X121:
 0FB0 E1FC              sbrc R14,1
 0FB2 15C0              rjmp L323
 0FB4           X122:
 0FB4                   .dbline 644
 0FB4           ;                                               {
 0FB4                   .dbline 645
 0FB4           ;                                                 if(i==0)//偶数命令，正转
 0FB4 AA20              tst R10
 0FB6 41F4              brne L325
 0FB8           X123:
 0FB8                   .dbline 646
 0FB8           ;                                                 {
 0FB8                   .dbline 647
 0FB8           ;                                                  Motor2Status.s.StartResult=2;//本电机正在反向运行
 0FB8 C701              movw R24,R14
 0FBA 8F73              andi R24,63
 0FBC 8068              ori R24,128
 0FBE 90930A00          sts _Motor2Status+1,R25
 0FC2 80930900          sts _Motor2Status,R24
 0FC6                   .dbline 648
 0FC6           ;                                                 }
 0FC6 65C0              xjmp L324
 0FC8           L325:
 0FC8                   .dbline 650
 0FC8           ;                                                 else//奇数命令，反转
 0FC8           ;                                                 {
 0FC8                   .dbline 651
 0FC8           ;                                                  Motor2Status.s.StartResult=1;//本电机正在同向运行
 0FC8 80910900          lds R24,_Motor2Status
 0FCC 90910A00          lds R25,_Motor2Status+1
 0FD0 8F73              andi R24,63
 0FD2 8064              ori R24,64
 0FD4 90930A00          sts _Motor2Status+1,R25
 0FD8 80930900          sts _Motor2Status,R24
 0FDC                   .dbline 652
 0FDC           ;                                                 }
 0FDC                   .dbline 653
 0FDC           ;                                               }                                       
 0FDC 5AC0              xjmp L324
 0FDE           L323:
 0FDE                   .dbline 655
 0FDE           ;                                               else //二个电机都是停止状态，按命令要求启动电机，约1.5秒后反馈上位机
 0FDE           ;                                               {  
 0FDE                   .dbline 657
 0FDE           ;                                                       //全部电机状态置初值，上一次停止原因全部清除
 0FDE           ;                                                       Motor2Status.s.BrokenStop=0;
 0FDE 80910900          lds R24,_Motor2Status
 0FE2 90910A00          lds R25,_Motor2Status+1
 0FE6 8B7F              andi R24,251
 0FE8 90930A00          sts _Motor2Status+1,R25
 0FEC 80930900          sts _Motor2Status,R24
 0FF0                   .dbline 658
 0FF0           ;                                                       Motor2Status.s.CommandStop=0;
 0FF0 877F              andi R24,247
 0FF2 90930A00          sts _Motor2Status+1,R25
 0FF6 80930900          sts _Motor2Status,R24
 0FFA                   .dbline 659
 0FFA           ;                                                       Motor2Status.s.OverCurrent=0;
 0FFA 8F7E              andi R24,239
 0FFC 90930A00          sts _Motor2Status+1,R25
 1000 80930900          sts _Motor2Status,R24
 1004                   .dbline 660
 1004           ;                                                       Motor2Status.s.UnderVoltage=0;
 1004 8F7D              andi R24,223
 1006 90930A00          sts _Motor2Status+1,R25
 100A 80930900          sts _Motor2Status,R24
 100E                   .dbline 661
 100E           ;                                                       Motor2Status.s.StartResult=0;//正常启动
 100E 8F73              andi R24,63
 1010 90930A00          sts _Motor2Status+1,R25
 1014 80930900          sts _Motor2Status,R24
 1018                   .dbline 663
 1018           ; 
 1018           ;                                                       if( i==1 )//奇数命令，调大
 1018 8A2D              mov R24,R10
 101A 8130              cpi R24,1
 101C 51F4              brne L327
 101E           X124:
 101E                   .dbline 664
 101E           ;                                                       { 
 101E                   .dbline 666
 101E           ;                                                               //反转
 101E           ;                                                               Motor2Status.s.DIR=0;
 101E 80910900          lds R24,_Motor2Status
 1022 90910A00          lds R25,_Motor2Status+1
 1026 8D7F              andi R24,253
 1028 90930A00          sts _Motor2Status+1,R25
 102C 80930900          sts _Motor2Status,R24
 1030                   .dbline 667
 1030           ;                                                       }
 1030 0CC0              xjmp L328
 1032           L327:
 1032                   .dbline 668
 1032           ;                                                       else if( i==0 )    //偶数命令，调小
 1032 AA20              tst R10
 1034 09F0              breq X147
 1036 6FC1              xjmp L266
 1038           X147:
 1038           X125:
 1038                   .dbline 669
 1038           ;                                                       { 
 1038                   .dbline 671
 1038           ;                                                               //正转
 1038           ;                                                               Motor2Status.s.DIR=1;
 1038 80910900          lds R24,_Motor2Status
 103C 90910A00          lds R25,_Motor2Status+1
 1040 8260              ori R24,2
 1042 90930A00          sts _Motor2Status+1,R25
 1046 80930900          sts _Motor2Status,R24
 104A                   .dbline 672
 104A           ;                                                       }
 104A                   .dbline 674
 104A           ;                                                       else
 104A           ;                                                       {
 104A                   .dbline 675
 104A           ;                                                               return;//20170609
 104A           L330:
 104A           L328:
 104A                   .dbline 678
 104A           ;                                                       }
 104A           ; 
 104A           ;                                                       VM_OPEN//开电机电源
 104A                   .dbline 678
 104A 88B1              in R24,0x8
 104C 877F              andi R24,247
 104E 88B9              out 0x8,R24
 1050                   .dbline 678
 1050 DE9A              sbi 0x1b,6
 1052                   .dbline 678
 1052 02E3              ldi R16,50
 1054 10E0              ldi R17,0
 1056 94DB              xcall _CheckMotor
 1058                   .dbline 678
 1058 449A              sbi 0x8,4
 105A                   .dbline 678
 105A 439A              sbi 0x8,3
 105C                   .dbline 678
 105C                   .dbline 680
 105C           ; 
 105C           ;                                                       CheckMotor(500);//开电机电源后需等待半秒让大功率二极管电压稳定
 105C 04EF              ldi R16,500
 105E 11E0              ldi R17,1
 1060 8FDB              xcall _CheckMotor
 1062                   .dbline 683
 1062           ; 
 1062           ; 
 1062           ;                                                       TCCR1B = 0x00; //stop
 1062 2224              clr R2
 1064 2EBC              out 0x2e,R2
 1066                   .dbline 684
 1066           ;                                                       TCNT1 = 61629;   //定时500ms
 1066 8DEB              ldi R24,61629
 1068 90EF              ldi R25,240
 106A 9DBD              out 0x2d,R25
 106C 8CBD              out 0x2c,R24
 106E                   .dbline 685
 106E           ;                                                       TIFR|=0x04; //清定时器1中断标志
 106E 86B7              in R24,0x36
 1070 8460              ori R24,4
 1072 86BF              out 0x36,R24
 1074                   .dbline 686
 1074           ;                                                       TCCR1B = 0x05; //1024分频
 1074 85E0              ldi R24,5
 1076 8EBD              out 0x2e,R24
 1078                   .dbline 687
 1078           ;                                                       TIFR|=0x04; //清定时器1中断标志
 1078 86B7              in R24,0x36
 107A 8460              ori R24,4
 107C 86BF              out 0x36,R24
 107E                   .dbline 688
 107E           ;                                                       Pwm_startup(2);//PWM启动，电机启动前期500ms内不进行电流检查，但有欠压监测                                       
 107E 02E0              ldi R16,2
 1080 4AD8              xcall _Pwm_startup
 1082           L331:
 1082                   .dbline 689
 1082           ;                                                       while((TIFR&0x04)==0x00); //等待500ms定时到，期间可能有欠压中断发生
 1082           L332:
 1082                   .dbline 689
 1082 26B6              in R2,0x36
 1084 22FE              sbrs R2,2
 1086 FDCF              rjmp L331
 1088           X126:
 1088                   .dbline 690
 1088           ;                                                       TCCR1B = 0x00; //stop
 1088 2224              clr R2
 108A 2EBC              out 0x2e,R2
 108C                   .dbline 692
 108C           ; 
 108C           ;                                                       CheckMotor(500);//延时保证总线电压稳定                   
 108C 04EF              ldi R16,500
 108E 11E0              ldi R17,1
 1090 77DB              xcall _CheckMotor
 1092                   .dbline 693
 1092           ;                                               }
 1092           L324:
 1092           L320:
 1092           L318:
 1092                   .dbline 696
 1092           ;                                               
 1092           ;                                               //返回2字节电机状态
 1092           ;                                               SendUart1(Motor2Status.i); CheckMotor(2);
 1092 00910900          lds R16,_Motor2Status
 1096 10910A00          lds R17,_Motor2Status+1
 109A 0E942F00          xcall _SendUart1
 109E                   .dbline 696
 109E 02E0              ldi R16,2
 10A0 10E0              ldi R17,0
 10A2 6EDB              xcall _CheckMotor
 10A4                   .dbline 697
 10A4           ;                                               SendUart1(Motor2Status.i>>8);
 10A4 00910900          lds R16,_Motor2Status
 10A8 10910A00          lds R17,_Motor2Status+1
 10AC 012F              mov R16,R17
 10AE 1127              clr R17
 10B0 0E942F00          xcall _SendUart1
 10B4                   .dbline 699
 10B4           ;                                                       
 10B4           ;                                               if(R_dat>0x72)//微调，需要定时，定时到后自动停止
 10B4 82E7              ldi R24,114
 10B6 20900200          lds R2,_R_dat
 10BA 8215              cp R24,R2
 10BC 08F0              brlo X148
 10BE 27C1              xjmp L281
 10C0           X148:
 10C0           X127:
 10C0                   .dbline 700
 10C0           ;                                               {
 10C0                   .dbline 701
 10C0           ;                                                       ETIFR=0x04;//清Timer3溢出中断标志
 10C0 84E0              ldi R24,4
 10C2 80937C00          sts 124,R24
 10C6                   .dbline 702
 10C6           ;                                                       ETIMSK = 0x04; //Timer3溢出中断使能，其它中断关闭
 10C6 80937D00          sts 125,R24
 10CA                   .dbline 703
 10CA           ;                                                       TCCR3B = 0x00;
 10CA 2224              clr R2
 10CC 20928A00          sts 138,R2
 10D0                   .dbline 705
 10D0           ; 
 10D0           ;                                                       j=(R_dat-0x72+1)/2;
 10D0 22E0              ldi R18,2
 10D2 30E0              ldi R19,0
 10D4 00910200          lds R16,_R_dat
 10D8 1127              clr R17
 10DA 0257              subi R16,114
 10DC 1040              sbci R17,0
 10DE 0F5F              subi R16,255  ; offset = 1
 10E0 1F4F              sbci R17,255
 10E2 0E940000          xcall div16s
 10E6 6801              movw R12,R16
 10E8                   .dbline 706
 10E8           ;                                                       j+=1;// 为了上位机软件能看到电流变化 ，每档都多加一秒
 10E8 C601              movw R24,R12
 10EA 0196              adiw R24,1
 10EC                   .dbline 707
 10EC           ;                                                       j=j*7812;
 10EC 04E8              ldi R16,7812
 10EE 1EE1              ldi R17,30
 10F0 9C01              movw R18,R24
 10F2 0E940000          xcall empy16s
 10F6 6801              movw R12,R16
 10F8                   .dbline 708
 10F8           ;                                                       j=65536-j;
 10F8 1601              movw R2,R12
 10FA 4424              clr R4
 10FC 5524              clr R5
 10FE 40E0              ldi R20,0
 1100 50E0              ldi R21,0
 1102 61E0              ldi R22,1
 1104 70E0              ldi R23,0
 1106 4219              sub R20,R2
 1108 5309              sbc R21,R3
 110A 6409              sbc R22,R4
 110C 7509              sbc R23,R5
 110E                   .dbline 709
 110E           ;                                                       j+=1;
 110E CA01              movw R24,R20
 1110 0196              adiw R24,1
 1112 6C01              movw R12,R24
 1114                   .dbline 711
 1114           ; 
 1114           ;                                                       TCNT3H = j>>8;  //最小1秒，最多5秒
 1114 1C01              movw R2,R24
 1116 232C              mov R2,R3
 1118 3324              clr R3
 111A 20928900          sts 137,R2
 111E                   .dbline 712
 111E           ;                                                       TCNT3L = j;
 111E C0928800          sts 136,R12
 1122                   .dbline 714
 1122           ; 
 1122           ;                                                       TCCR3A = 0x00;
 1122 2224              clr R2
 1124 20928B00          sts 139,R2
 1128                   .dbline 715
 1128           ;                                                       TCCR3B = 0x05; //8M时钟，1024分频，定时1秒
 1128 85E0              ldi R24,5
 112A 80938A00          sts 138,R24
 112E                   .dbline 716
 112E           ;                                                       ETIFR=0x04;//清Timer3溢出中断标志
 112E 84E0              ldi R24,4
 1130 80937C00          sts 124,R24
 1134                   .dbline 717
 1134           ;                                               } 
 1134                   .dbline 718
 1134           ;                                               break;
 1134 ECC0              xjmp L281
 1136           L336:
 1136                   .dbline 721
 1136           ; 
 1136           ;                                       case 0x80://电机相关
 1136           ;                                               if(R_dat==0x80)//只开电机电源，不开电机
 1136 80910200          lds R24,_R_dat
 113A 8038              cpi R24,128
 113C 69F4              brne L337
 113E           X128:
 113E                   .dbline 722
 113E           ;                                               {                                                                
 113E                   .dbline 723
 113E           ;                                                       VM_OPEN//开电机电源
 113E                   .dbline 723
 113E 88B1              in R24,0x8
 1140 877F              andi R24,247
 1142 88B9              out 0x8,R24
 1144                   .dbline 723
 1144 DE9A              sbi 0x1b,6
 1146                   .dbline 723
 1146 02E3              ldi R16,50
 1148 10E0              ldi R17,0
 114A 1ADB              xcall _CheckMotor
 114C                   .dbline 723
 114C 449A              sbi 0x8,4
 114E                   .dbline 723
 114E 439A              sbi 0x8,3
 1150                   .dbline 723
 1150                   .dbline 724
 1150           ;                                                   SendUart1(0); 
 1150 0027              clr R16
 1152 0E942F00          xcall _SendUart1
 1156                   .dbline 725
 1156           ;                                               }         
 1156 DBC0              xjmp L281
 1158           L337:
 1158                   .dbline 726
 1158           ;                                               else if(R_dat==0x81)//获取电机状态      
 1158 80910200          lds R24,_R_dat
 115C 8138              cpi R24,129
 115E 49F5              brne L339
 1160           X129:
 1160                   .dbline 727
 1160           ;                                               { 
 1160                   .dbline 728
 1160           ;                                                       CheckMotor(2); 
 1160 02E0              ldi R16,2
 1162 10E0              ldi R17,0
 1164 0DDB              xcall _CheckMotor
 1166                   .dbline 730
 1166           ;                                                       //返回2字节电机状态
 1166           ;                                                    SendUart1(Motor1Status.i); 
 1166 00910B00          lds R16,_Motor1Status
 116A 10910C00          lds R17,_Motor1Status+1
 116E 0E942F00          xcall _SendUart1
 1172                   .dbline 731
 1172           ;                                                        CheckMotor(2); 
 1172 02E0              ldi R16,2
 1174 10E0              ldi R17,0
 1176 04DB              xcall _CheckMotor
 1178                   .dbline 732
 1178           ;                                                    SendUart1(Motor1Status.i>>8); 
 1178 00910B00          lds R16,_Motor1Status
 117C 10910C00          lds R17,_Motor1Status+1
 1180 012F              mov R16,R17
 1182 1127              clr R17
 1184 0E942F00          xcall _SendUart1
 1188                   .dbline 733
 1188           ;                                                        CheckMotor(2); 
 1188 02E0              ldi R16,2
 118A 10E0              ldi R17,0
 118C F9DA              xcall _CheckMotor
 118E                   .dbline 735
 118E           ;                                                       //返回2字节电机状态
 118E           ;                                                   SendUart1(Motor2Status.i);  
 118E 00910900          lds R16,_Motor2Status
 1192 10910A00          lds R17,_Motor2Status+1
 1196 0E942F00          xcall _SendUart1
 119A                   .dbline 736
 119A           ;                                                       CheckMotor(2); 
 119A 02E0              ldi R16,2
 119C 10E0              ldi R17,0
 119E F0DA              xcall _CheckMotor
 11A0                   .dbline 737
 11A0           ;                                                   SendUart1(Motor2Status.i>>8); 
 11A0 00910900          lds R16,_Motor2Status
 11A4 10910A00          lds R17,_Motor2Status+1
 11A8 012F              mov R16,R17
 11AA 1127              clr R17
 11AC 0E942F00          xcall _SendUart1
 11B0                   .dbline 738
 11B0           ;                                               }         
 11B0 AEC0              xjmp L281
 11B2           L339:
 11B2                   .dbline 739
 11B2           ;                                               else if(R_dat==0x82)//电机停止，同时停止二个电机
 11B2 80910200          lds R24,_R_dat
 11B6 8238              cpi R24,130
 11B8 09F0              breq X149
 11BA 48C0              xjmp L341
 11BC           X149:
 11BC           X130:
 11BC                   .dbline 740
 11BC           ;                                               {        
 11BC                   .dbline 741
 11BC           ;                                                   MOTORSTOP  //关电机
 11BC                   .dbline 741
 11BC 9698              cbi 0x12,6
 11BE                   .dbline 741
 11BE 9798              cbi 0x12,7
 11C0                   .dbline 741
 11C0 DA98              cbi 0x1b,2
 11C2                   .dbline 741
 11C2 DB98              cbi 0x1b,3
 11C4                   .dbline 741
 11C4 DE98              cbi 0x1b,6
 11C6                   .dbline 741
 11C6 80916500          lds R24,101
 11CA 8D7F              andi R24,253
 11CC 80936500          sts 101,R24
 11D0                   .dbline 741
 11D0 80916500          lds R24,101
 11D4 8E7F              andi R24,254
 11D6 80936500          sts 101,R24
 11DA                   .dbline 741
 11DA DC98              cbi 0x1b,4
 11DC                   .dbline 741
 11DC DD98              cbi 0x1b,5
 11DE                   .dbline 741
 11DE                   .dbline 742
 11DE           ;                                                       if(Motor1Status.s.RUN==1)//收放电机正在运行
 11DE 80910B00          lds R24,_Motor1Status
 11E2 90910C00          lds R25,_Motor1Status+1
 11E6 8170              andi R24,1
 11E8 9070              andi R25,0
 11EA 8130              cpi R24,1
 11EC E0E0              ldi R30,0
 11EE 9E07              cpc R25,R30
 11F0 71F4              brne L343
 11F2           X131:
 11F2                   .dbline 743
 11F2           ;                                                       {
 11F2                   .dbline 744
 11F2           ;                                                           Motor1Status.s.RUN=0;
 11F2 80910B00          lds R24,_Motor1Status
 11F6 90910C00          lds R25,_Motor1Status+1
 11FA 8E7F              andi R24,254
 11FC 90930C00          sts _Motor1Status+1,R25
 1200 80930B00          sts _Motor1Status,R24
 1204                   .dbline 745
 1204           ;                                                               Motor1Status.s.CommandStop=1;
 1204 8860              ori R24,8
 1206 90930C00          sts _Motor1Status+1,R25
 120A 80930B00          sts _Motor1Status,R24
 120E                   .dbline 746
 120E           ;                                                       }
 120E           L343:
 120E                   .dbline 747
 120E           ;                                                       if(Motor2Status.s.RUN==1)//调节电机正在运行
 120E 80910900          lds R24,_Motor2Status
 1212 90910A00          lds R25,_Motor2Status+1
 1216 8170              andi R24,1
 1218 9070              andi R25,0
 121A 8130              cpi R24,1
 121C E0E0              ldi R30,0
 121E 9E07              cpc R25,R30
 1220 71F4              brne L345
 1222           X132:
 1222                   .dbline 748
 1222           ;                                                       { 
 1222                   .dbline 749
 1222           ;                                                           Motor2Status.s.RUN=0;
 1222 80910900          lds R24,_Motor2Status
 1226 90910A00          lds R25,_Motor2Status+1
 122A 8E7F              andi R24,254
 122C 90930A00          sts _Motor2Status+1,R25
 1230 80930900          sts _Motor2Status,R24
 1234                   .dbline 750
 1234           ;                                                               Motor2Status.s.CommandStop=1;
 1234 8860              ori R24,8
 1236 90930A00          sts _Motor2Status+1,R25
 123A 80930900          sts _Motor2Status,R24
 123E                   .dbline 751
 123E           ;                                                       }
 123E           L345:
 123E                   .dbline 753
 123E           ;                                                       
 123E           ;                                                       CheckMotor(180);//让总线稳定后再回发
 123E 04EB              ldi R16,180
 1240 10E0              ldi R17,0
 1242 9EDA              xcall _CheckMotor
 1244                   .dbline 754
 1244           ;                                                       SendUart1(0);  
 1244 0027              clr R16
 1246 0E942F00          xcall _SendUart1
 124A                   .dbline 755
 124A           ;                                               }
 124A 61C0              xjmp L281
 124C           L341:
 124C                   .dbline 756
 124C           ;                                               else if(R_dat==0x83)//读取电机堵转电流档位和断路档位
 124C 80910200          lds R24,_R_dat
 1250 8338              cpi R24,131
 1252 41F5              brne L347
 1254           X133:
 1254                   .dbline 757
 1254           ;                                               {
 1254                   .dbline 758
 1254           ;                                                       Motor1Gear=EEPROM_read(0);//收放电机
 1254 0027              clr R16
 1256 1127              clr R17
 1258 B6D0              xcall _EEPROM_read
 125A C02E              mov R12,R16
 125C C0920800          sts _Motor1Gear,R12
 1260                   .dbline 759
 1260           ;                                                       Motor2Gear=EEPROM_read(1);//调节电机
 1260 01E0              ldi R16,1
 1262 10E0              ldi R17,0
 1264 B0D0              xcall _EEPROM_read
 1266 C02E              mov R12,R16
 1268 C0920700          sts _Motor2Gear,R12
 126C                   .dbline 760
 126C           ;                                                       MotorIdelGear=EEPROM_read(2); //电机断路
 126C 02E0              ldi R16,2
 126E 10E0              ldi R17,0
 1270 AAD0              xcall _EEPROM_read
 1272 C02E              mov R12,R16
 1274 C0920400          sts _MotorIdelGear,R12
 1278                   .dbline 761
 1278           ;                                                       Gear2Thr();
 1278 5CDC              xcall _Gear2Thr
 127A                   .dbline 763
 127A           ; 
 127A           ;                                                       i=Motor2Gear;    
 127A A0900700          lds R10,_Motor2Gear
 127E                   .dbline 764
 127E           ;                                                       i<<=4;
 127E 8A2D              mov R24,R10
 1280 8F70              andi R24,#0x0F
 1282 8295              swap R24
 1284 A82E              mov R10,R24
 1286                   .dbline 765
 1286           ;                                                       i|=Motor1Gear; 
 1286 20900800          lds R2,_Motor1Gear
 128A A228              or R10,R2
 128C                   .dbline 766
 128C           ;                                                       SendUart1(i); 
 128C 0A2D              mov R16,R10
 128E 0E942F00          xcall _SendUart1
 1292                   .dbline 767
 1292           ;                                                       CheckMotor(2);
 1292 02E0              ldi R16,2
 1294 10E0              ldi R17,0
 1296 74DA              xcall _CheckMotor
 1298                   .dbline 768
 1298           ;                                                       i=MotorIdelGear;
 1298 A0900400          lds R10,_MotorIdelGear
 129C                   .dbline 769
 129C           ;                                                       SendUart1(i); 
 129C 0A2D              mov R16,R10
 129E 0E942F00          xcall _SendUart1
 12A2                   .dbline 770
 12A2           ;                                               }       
 12A2 35C0              xjmp L281
 12A4           L347:
 12A4                   .dbline 771
 12A4           ;                                               else if(R_dat>0x89)//0x8a~0x8f,设置调节电机过流堵转档位
 12A4 89E8              ldi R24,137
 12A6 20900200          lds R2,_R_dat
 12AA 8215              cp R24,R2
 12AC 68F4              brsh L349
 12AE           X134:
 12AE                   .dbline 772
 12AE           ;                                               {
 12AE                   .dbline 773
 12AE           ;                                                   Motor2Gear=R_dat-0x89;//对应1~6档 
 12AE 822D              mov R24,R2
 12B0 8958              subi R24,137
 12B2 80930700          sts _Motor2Gear,R24
 12B6                   .dbline 774
 12B6           ;                                                       EEPROM_write(1,Motor2Gear);
 12B6 282F              mov R18,R24
 12B8 01E0              ldi R16,1
 12BA 10E0              ldi R17,0
 12BC 7CD0              xcall _EEPROM_write
 12BE                   .dbline 775
 12BE           ;                                                       Gear2Thr();
 12BE 39DC              xcall _Gear2Thr
 12C0                   .dbline 776
 12C0           ;                                                       SendUart1(0); 
 12C0 0027              clr R16
 12C2 0E942F00          xcall _SendUart1
 12C6                   .dbline 777
 12C6           ;                                               }       
 12C6 23C0              xjmp L281
 12C8           L349:
 12C8                   .dbline 778
 12C8           ;                                               else if(R_dat>0x83)//0x84~0x89,设置收放电机堵转档位
 12C8 83E8              ldi R24,131
 12CA 20900200          lds R2,_R_dat
 12CE 8215              cp R24,R2
 12D0 F0F4              brsh L281
 12D2           X135:
 12D2                   .dbline 779
 12D2           ;                                               {
 12D2                   .dbline 780
 12D2           ;                                                   Motor1Gear=R_dat-0x83;//对应1~6档 
 12D2 822D              mov R24,R2
 12D4 8358              subi R24,131
 12D6 80930800          sts _Motor1Gear,R24
 12DA                   .dbline 781
 12DA           ;                                                       EEPROM_write(0,Motor1Gear);
 12DA 282F              mov R18,R24
 12DC 0027              clr R16
 12DE 1127              clr R17
 12E0 6AD0              xcall _EEPROM_write
 12E2                   .dbline 782
 12E2           ;                                                       Gear2Thr();
 12E2 27DC              xcall _Gear2Thr
 12E4                   .dbline 783
 12E4           ;                                                       SendUart1(0); 
 12E4 0027              clr R16
 12E6 0E942F00          xcall _SendUart1
 12EA                   .dbline 784
 12EA           ;                                               }         
 12EA                   .dbline 785
 12EA           ;                                               break;
 12EA 11C0              xjmp L281
 12EC           L353:
 12EC                   .dbline 788
 12EC           ; 
 12EC           ;                                       case 0x90: 
 12EC           ;                                               if(R_dat>0x99)//0x9a~0x99，设置电机断路电流档位
 12EC 89E9              ldi R24,153
 12EE 20900200          lds R2,_R_dat
 12F2 8215              cp R24,R2
 12F4 60F4              brsh L281
 12F6           X136:
 12F6                   .dbline 789
 12F6           ;                                               {
 12F6                   .dbline 790
 12F6           ;                                                       MotorIdelGear=R_dat-0x99;
 12F6 822D              mov R24,R2
 12F8 8959              subi R24,153
 12FA 80930400          sts _MotorIdelGear,R24
 12FE                   .dbline 791
 12FE           ;                                                       EEPROM_write(2,MotorIdelGear);  
 12FE 282F              mov R18,R24
 1300 02E0              ldi R16,2
 1302 10E0              ldi R17,0
 1304 58D0              xcall _EEPROM_write
 1306                   .dbline 792
 1306           ;                                                       Gear2Thr(); 
 1306 15DC              xcall _Gear2Thr
 1308                   .dbline 793
 1308           ;                                                       SendUart1(0);  
 1308 0027              clr R16
 130A 0E942F00          xcall _SendUart1
 130E                   .dbline 794
 130E           ;                                               }                               
 130E                   .dbline 795
 130E           ;                                               break;
 130E                   .dbline 798
 130E           ; 
 130E           ;                                       default: 
 130E           ;                                               break;  
 130E           L281:
 130E                   .dbline 800
 130E           ;                               }
 130E           ;                       IntFlag=0;
 130E 2224              clr R2
 1310 20920100          sts _IntFlag,R2
 1314                   .dbline 801
 1314           ;               }  
 1314           L278:
 1314                   .dbline 802
 1314           ;       }
 1314           L276:
 1314                   .dbline 521
 1314 98CC              xjmp L275
 1316           X137:
 1316                   .dbline -2
 1316           L266:
 1316                   .dbline 0 ; func end
 1316 2896              adiw R28,8
 1318 0895              ret
 131A                   .dbsym l f 4 D
 131A                   .dbsym r i 10 c
 131A                   .dbsym l l 0 l
 131A                   .dbsym r j 12 i
 131A                   .dbend
                        .area vector(rom, abs)
                        .org 92
 005C 0C948D09          jmp _E_comp
                        .area text(rom, con, rel)
 131A                   .dbfile D:\chen\Core\FirmWare_CT\CT_MOTOR\main.c
 131A                   .dbfunc e E_comp _E_comp fV
                        .even
 131A           _E_comp::
 131A 8A93              st -y,R24
 131C 9A93              st -y,R25
 131E AA93              st -y,R26
 1320 EA93              st -y,R30
 1322 8FB7              IN R24,63
 1324 8A93              st -y,R24
 1326                   .dbline -1
 1326                   .dbline 807
 1326           ; }
 1326           ; 
 1326           ; #pragma interrupt_handler E_comp:24
 1326           ; void E_comp(void)  //模拟比较器中断,总线电压被拉低到42.23V后，立即停电机(R2要改成30k)
 1326           ; {   
 1326                   .dbline 808
 1326           ;   MOTORSTOP  //关电机 
 1326                   .dbline 808
 1326 9698              cbi 0x12,6
 1328                   .dbline 808
 1328 9798              cbi 0x12,7
 132A                   .dbline 808
 132A DA98              cbi 0x1b,2
 132C                   .dbline 808
 132C DB98              cbi 0x1b,3
 132E                   .dbline 808
 132E DE98              cbi 0x1b,6
 1330                   .dbline 808
 1330 80916500          lds R24,101
 1334 8D7F              andi R24,253
 1336 80936500          sts 101,R24
 133A                   .dbline 808
 133A 80916500          lds R24,101
 133E 8E7F              andi R24,254
 1340 80936500          sts 101,R24
 1344                   .dbline 808
 1344 DC98              cbi 0x1b,4
 1346                   .dbline 808
 1346 DD98              cbi 0x1b,5
 1348                   .dbline 808
 1348                   .dbline 809
 1348           ;   if(Motor1Status.s.RUN==1)//收放电机欠压堵转
 1348 80910B00          lds R24,_Motor1Status
 134C 90910C00          lds R25,_Motor1Status+1
 1350 8170              andi R24,1
 1352 9070              andi R25,0
 1354 8130              cpi R24,1
 1356 E0E0              ldi R30,0
 1358 9E07              cpc R25,R30
 135A 71F4              brne L362
 135C           X150:
 135C                   .dbline 810
 135C           ;    {
 135C                   .dbline 811
 135C           ;        Motor1Status.s.UnderVoltage=1;
 135C 80910B00          lds R24,_Motor1Status
 1360 90910C00          lds R25,_Motor1Status+1
 1364 8062              ori R24,32
 1366 90930C00          sts _Motor1Status+1,R25
 136A 80930B00          sts _Motor1Status,R24
 136E                   .dbline 812
 136E           ;        Motor1Status.s.RUN=0;//停止状态
 136E 8E7F              andi R24,254
 1370 90930C00          sts _Motor1Status+1,R25
 1374 80930B00          sts _Motor1Status,R24
 1378                   .dbline 813
 1378           ;    }
 1378           L362:
 1378                   .dbline 814
 1378           ;   if(Motor2Status.s.RUN==1)//调节电机欠压堵转
 1378 80910900          lds R24,_Motor2Status
 137C 90910A00          lds R25,_Motor2Status+1
 1380 8170              andi R24,1
 1382 9070              andi R25,0
 1384 8130              cpi R24,1
 1386 E0E0              ldi R30,0
 1388 9E07              cpc R25,R30
 138A 71F4              brne L364
 138C           X151:
 138C                   .dbline 815
 138C           ;    { 
 138C                   .dbline 816
 138C           ;        Motor2Status.s.UnderVoltage=1;
 138C 80910900          lds R24,_Motor2Status
 1390 90910A00          lds R25,_Motor2Status+1
 1394 8062              ori R24,32
 1396 90930A00          sts _Motor2Status+1,R25
 139A 80930900          sts _Motor2Status,R24
 139E                   .dbline 817
 139E           ;        Motor2Status.s.RUN=0;//停止状态
 139E 8E7F              andi R24,254
 13A0 90930A00          sts _Motor2Status+1,R25
 13A4 80930900          sts _Motor2Status,R24
 13A8                   .dbline 818
 13A8           ;    }   
 13A8           L364:
 13A8                   .dbline -2
 13A8           L361:
 13A8                   .dbline 0 ; func end
 13A8 8991              ld R24,y+
 13AA 8FBF              OUT 63,R24
 13AC E991              ld R30,y+
 13AE A991              ld R26,y+
 13B0 9991              ld R25,y+
 13B2 8991              ld R24,y+
 13B4 1895              reti
 13B6                   .dbend
 13B6                   .dbfunc e EEPROM_write _EEPROM_write fV
 13B6           ;           Data -> R18
 13B6           ;        Address -> R16,R17
                        .even
 13B6           _EEPROM_write::
 13B6                   .dbline -1
 13B6                   .dbline 823
 13B6           ; }
 13B6           ; 
 13B6           ; 
 13B6           ; void EEPROM_write(unsigned int Address,unsigned char Data)    //内部EEPROM写
 13B6           ; {//时钟频率为1MHz，典型的EEPROM字节写耗时约8.5ms
 13B6           L367:
 13B6                   .dbline 824
 13B6           ;     while(EECR&0x02);                   // 等待上一次写操作结束
 13B6           L368:
 13B6                   .dbline 824
 13B6 E199              sbic 0x1c,1
 13B8 FECF              rjmp L367
 13BA           X152:
 13BA                   .dbline 825
 13BA           ;     EEAR=Address;
 13BA 1FBB              out 0x1f,R17
 13BC 0EBB              out 0x1e,R16
 13BE                   .dbline 826
 13BE           ;     EEDR=Data;                                // 设置地址和数据寄存器
 13BE 2DBB              out 0x1d,R18
 13C0                   .dbline 827
 13C0           ;     EECR|=0x04;                         //置位EEMWE
 13C0 E29A              sbi 0x1c,2
 13C2                   .dbline 828
 13C2           ;     EECR|=0x02;                         //置位EEWE 以启动写操作
 13C2 E19A              sbi 0x1c,1
 13C4                   .dbline -2
 13C4           L366:
 13C4                   .dbline 0 ; func end
 13C4 0895              ret
 13C6                   .dbsym r Data 18 c
 13C6                   .dbsym r Address 16 i
 13C6                   .dbend
 13C6                   .dbfunc e EEPROM_read _EEPROM_read fc
 13C6           ;        Address -> R16,R17
                        .even
 13C6           _EEPROM_read::
 13C6                   .dbline -1
 13C6                   .dbline 832
 13C6           ; }
 13C6           ; 
 13C6           ; unsigned char EEPROM_read(unsigned int Address)                               //内部EEPROM读
 13C6           ; {
 13C6           L371:
 13C6                   .dbline 833
 13C6           ;     while(EECR&0x02);                                 //等待上一次操作结束
 13C6           L372:
 13C6                   .dbline 833
 13C6 E199              sbic 0x1c,1
 13C8 FECF              rjmp L371
 13CA           X153:
 13CA                   .dbline 834
 13CA           ;     EEAR = Address;                     //设置地址寄存器                                              
 13CA 1FBB              out 0x1f,R17
 13CC 0EBB              out 0x1e,R16
 13CE                   .dbline 835
 13CE           ;       EECR|=0x01;                                     //设置EERE 以启动读操作
 13CE E09A              sbi 0x1c,0
 13D0                   .dbline 836
 13D0           ;     return EEDR;                              //自数据寄存器返回数据
 13D0 0DB3              in R16,0x1d
 13D2                   .dbline -2
 13D2           L370:
 13D2                   .dbline 0 ; func end
 13D2 0895              ret
 13D4                   .dbsym r Address 16 i
 13D4                   .dbend
                        .area bss(ram, con, rel)
 0000                   .dbfile D:\chen\Core\FirmWare_CT\CT_MOTOR\main.c
 0000           _Tt::
 0000                   .blkb 1
 0001                   .dbsym e Tt _Tt c
 0001           _IntFlag::
 0001                   .blkb 1
 0002                   .dbsym e IntFlag _IntFlag c
 0002           _R_dat::
 0002                   .blkb 1
 0003                   .dbsym e R_dat _R_dat c
 0003           _MotorIdelCur::
 0003                   .blkb 1
 0004                   .dbsym e MotorIdelCur _MotorIdelCur c
 0004           _MotorIdelGear::
 0004                   .blkb 1
 0005                   .dbsym e MotorIdelGear _MotorIdelGear c
 0005           _Motor2Thr::
 0005                   .blkb 1
 0006                   .dbsym e Motor2Thr _Motor2Thr c
 0006           _Motor1Thr::
 0006                   .blkb 1
 0007                   .dbsym e Motor1Thr _Motor1Thr c
 0007           _Motor2Gear::
 0007                   .blkb 1
 0008                   .dbsym e Motor2Gear _Motor2Gear c
 0008           _Motor1Gear::
 0008                   .blkb 1
 0009                   .dbsym e Motor1Gear _Motor1Gear c
 0009           _Motor2Status::
 0009                   .blkb 2
 000B                   .dbstruct 0 2 .1
 000B                   .dbfield 0 RUN F[0:1]
 000B                   .dbfield 0 DIR F[1:1]
 000B                   .dbfield 0 BrokenStop F[2:1]
 000B                   .dbfield 0 CommandStop F[3:1]
 000B                   .dbfield 0 OverCurrent F[4:1]
 000B                   .dbfield 0 UnderVoltage F[5:1]
 000B                   .dbfield 0 StartResult F[6:2]
 000B                   .dbfield 0 ThisCurrent F[8:8]
 000B                   .dbend
 000B                   .dbunion 0 2 MotorStatus
 000B                   .dbfield 0 i i
 000B                   .dbfield 0 s S[.1]
 000B                   .dbend
 000B                   .dbsym e Motor2Status _Motor2Status S[MotorStatus]
 000B           _Motor1Status::
 000B                   .blkb 2
 000D                   .dbsym e Motor1Status _Motor1Status S[MotorStatus]
 000D           _myFIB::
 000D                   .blkb 4
 0011                   .dbunion 0 4 FIB
 0011                   .dbfield 0 f D
 0011                   .dbfield 0 i A[4:2]i
 0011                   .dbfield 0 b A[4:4]c
 0011                   .dbend
 0011                   .dbsym e myFIB _myFIB S[FIB]
                        .area lit(rom, con, rel)
 0000           L285:
 0000 F3C8AF3E          .word 0xc8f3,0x3eaf
 0004           L241:
 0004 D1228B3F          .word 0x22d1,0x3f8b
 0008           L229:
 0008 0000FA40          .word 0x0,0x40fa
 000C           ; }    
 000C           ; 
 000C           ;  
