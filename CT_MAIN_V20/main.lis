                        .module main.c
                        .area text(rom, con, rel)
 0000                   .dbfile main.c
                        .area vector(rom, abs)
                        .org 4
 0004 0C940000          jmp _int0_isr
                        .area text(rom, con, rel)
 0000                   .dbfile main.c
 0000                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 0000                   .dbfunc e int0_isr _int0_isr fV
                        .even
 0000           _int0_isr::
 0000 2A92              st -y,R2
 0002 3A92              st -y,R3
 0004 8A93              st -y,R24
 0006 9A93              st -y,R25
 0008 AA93              st -y,R26
 000A EA93              st -y,R30
 000C FA93              st -y,R31
 000E 2FB6              IN R2,63
 0010 2A92              st -y,R2
 0012                   .dbline -1
 0012                   .dbline 175
 0012           ;  /**************************************************
 0012           ; CTZK
 0012           ; //20161110 增加了全部采样的CRC16校验
 0012           ; //20161113 改进了流量数据中时间和相位由无符号短整型转为浮点数时的转换方法，以防上位机软件出现相位超大值
 0012           ; //20161224 将电机断流判断值由26mA改为13mA，因为目前调节电机工作时空载电流值仅为23~28mA，升级版本为V4.0
 0012           ; //20161229 修改收张电机的本电机同向和反向判断，修改调节电机的电机方向控制（与原来相反）
 0012           ; //20170308 流量采样增加校验帧，升级版本为V4.2
 0012           ; //20170607 电机断路电流由原来的13mA改为26mA 升级版本为V4.3
 0012           ; //20170608 改动电机过流档位并把最大档位提升到250mA，升级版本为V4.4
 0012           ; //20170609 加入调节电机微调功能，升级版本为V4.5
 0012           ; //20170613 增加电机断路电流上位机可设定(共6档)，增加调节电机微调时间由电机命令中自带参数，改上传电流由数字量为工程量（单位mA），堵转电流上传改为档位，版本升为V4.6
 0012           ; //20170614 上传的电缆电压也改为工程量，全部采样增加电缆电压
 0012           ; //20170622  为适应新高压电机驱动的电路板而改进一些功能，版本回退到V1.0
 0012           ; **************************************************/
 0012           ; #include <iom128v.h>                                                                  
 0012           ; #include <macros.h>
 0012           ; #include <stdio.h>
 0012           ; 
 0012           ;  
 0012           ; #define Debug 1
 0012           ; #define  BB     0x10        //固件版本号
 0012           ; 
 0012           ; 
 0012           ; #define M1_L    PORTD&=0xef;
 0012           ; #define M1_H    PORTD|=0x10;
 0012           ; #define M2_L    PORTD&=0xdf;
 0012           ; #define M2_H    PORTD|=0x20;
 0012           ; 
 0012           ;  
 0012           ; //收放电机管脚定义和控制项
 0012           ; #define DIR1_PIN    ((PINA&0x04)>>2)
 0012           ; #define PWM1_PIN    ((PINA&0x02)>>1)
 0012           ; #define BREAKE1_PIN (PINA&0x01)
 0012           ; 
 0012           ; #define DIR1_H      {DDRA|=0x04;PORTA|=0x04;}
 0012           ; #define PWM1_H      {DDRA|=0x02;PORTA|=0x02;}
 0012           ; #define BREAKE1_H   {DDRA|=0x01;PORTA|=0x01;}
 0012           ; 
 0012           ; #define DIR1_L      {DDRA|=0x04;PORTA&=0xfb;}
 0012           ; #define PWM1_L      {DDRA|=0x02;PORTA&=0xFD;}
 0012           ; #define BREAKE1_L   {DDRA|=0x01;PORTA&=0xFE;}
 0012           ; 
 0012           ; //调节电机管脚定义和控制项
 0012           ; #define PWM2_PIN    ((PINF&0x04)>>2)
 0012           ; #define BREAKE2_PIN ((PINF&0x02)>>1)
 0012           ; #define DIR2_PIN    (PINF&0x01)
 0012           ; 
 0012           ; #define PWM2_H      {DDRF|=0x04;PORTF|=0x04;}
 0012           ; #define BREAKE2_H   {DDRF|=0x02;PORTF|=0x02;}
 0012           ; #define DIR2_H      {DDRF|=0x01;PORTF|=0x01;}
 0012           ; 
 0012           ; #define PWM2_L      {DDRF|=0x04;PORTF&=0xfb;}
 0012           ; #define BREAKE2_L   {DDRF|=0x02;PORTF&=0xFD;}
 0012           ; #define DIR2_L      {DDRF|=0x01;PORTF&=0xFE;}
 0012           ; 
 0012           ; //收放电机正在正转
 0012           ; #define Motor1Run_P ((PWM1_PIN==0) && (DIR1_PIN==1))
 0012           ; //收放电机正在反转
 0012           ; #define Motor1Run_N ((PWM1_PIN==1) && (DIR1_PIN==0))  
 0012           ; //调节电机正在正转 
 0012           ; #define Motor2Run_P ((PWM2_PIN==0) && (DIR2_PIN==1))
 0012           ; //调节电机正在反转
 0012           ; #define Motor2Run_N ((PWM2_PIN==1) && (DIR2_PIN==0)) 
 0012           ; 
 0012           ; #define PIN_MANINT    (PIND & 0x01)
 0012           ; 
 0012           ; #define MANINT_CLR    { EIFR|=0x01; }
 0012           ; #define MANINT_EN             { EIMSK |= 0x01; }
 0012           ; #define MANINT_DIS    { EIMSK &= 0xFE; }
 0012           ; 
 0012           ; #define INT_EN                        { SEI(); }
 0012           ; #define INT_DIS               { CLI(); }
 0012           ; 
 0012           ; 
 0012           ; //电机电源
 0012           ; #define VM_H        {BREAKE1_H}{BREAKE2_H}{DDRB|=0x80;PORTB|=0x80;}
 0012           ; 
 0012           ; //同时关二个电机
 0012           ; #define MOTORSTOP   {BREAKE1_H}{BREAKE2_H}{DDRB|=0x80;PORTB&=0x7f;}{DIR1_L}{PWM1_L}{DIR2_L}{PWM2_L}
 0012           ; 
 0012           ; #define DELAY10 for(Tt=0;Tt<4;Tt++);
 0012           ; #define DELAY20 for(Tt=0;Tt<4;Tt++);
 0012           ; #define DELAY40 for(Tt=0;Tt<16;Tt++); 
 0012           ; #define DELAY50 for(Tt=0;Tt<21;Tt++); 
 0012           ; #define DELAY80 for(Tt=0;Tt<32;Tt++); 
 0012           ; #define DELAY89 for(Tt=0;Tt<36;Tt++); 
 0012           ; #define DELAY100 for(Tt=0;Tt<42;Tt++); 
 0012           ; #define DELAY170 for(Tt=0;Tt<72;Tt++);
 0012           ; #define DELAY268 for(Tt=0;Tt<113;Tt++);
 0012           ; #define DELAY397 for(Tt=0;Tt<165;Tt++);
 0012           ; #define DELAY400 for(Tt=0;Tt<168;Tt++);
 0012           ; 
 0012           ; union FIB
 0012           ; {
 0012           ;  float f;
 0012           ;  unsigned int i[2];
 0012           ;  unsigned char b[4];
 0012           ; }myFIB;
 0012           ; 
 0012           ; union MotorStatus
 0012           ; {
 0012           ;  unsigned int i;
 0012           ;  struct 
 0012           ;  { 
 0012           ;    unsigned int RUN:1;//bit0,电机运行状态，0：停止，1：运行
 0012           ;    unsigned int DIR:1;//bit1,电机运行方向，0：反转,收臂-调大(DIR_L)，1：正转,张臂-调小(DIR_H)
 0012           ;    unsigned int BrokenStop:1;//bit2, 断路停
 0012           ;    unsigned int CommandStop:1;//bit3,手动停
 0012           ;    unsigned int OverCurrent:1;//bit4,过流停
 0012           ;    unsigned int UnderVoltage:1;//bit5,欠压停
 0012           ;    unsigned int StartResult:2;//bit6-bit7,电机最近一次启动结果(0：正常上电启动，1：本电机同向运行，2：本电机反向运行，3：另一个电机正在运行)
 0012           ;    
 0012           ;    unsigned int ThisCurrent:8;//bit8-bit15 ,  电机当前或停止前最近一次电流
 0012           ;  }s;
 0012           ; }Motor1Status,Motor2Status;//电机状态
 0012           ; 
 0012           ; unsigned char Motor1Gear,Motor2Gear;// 电机过流档位
 0012           ; unsigned char Motor1Thr,Motor2Thr;//电机堵转过流阈值
 0012           ; unsigned char MotorIdelGear;//电机断路档位
 0012           ; unsigned char MotorIdelCur;// 电机断路电流
 0012           ;  
 0012           ; unsigned char TPSCn,TPSBuf[4];
 0012           ; 
 0012           ; unsigned char T_Flag;
 0012           ; 
 0012           ; unsigned int Timer0Counter;//定时器0超过4ms时的计数
 0012           ; 
 0012           ; unsigned char Uart0RxData[74];//串口接收数据缓存
 0012           ; unsigned char Uart0RxCounter;
 0012           ; 
 0012           ; unsigned char Rx[18];//解码接收9位共18个半位
 0012           ; int  T_dat,R_dat;//曼码发送数据
 0012           ; unsigned char T_com;//曼码发送命令
 0012           ; 
 0012           ; unsigned char TimeOutFlag;//发送超时标志
 0012           ; 
 0012           ; unsigned char T_dat_buf[22];//曼码发送缓冲 
 0012           ; 
 0012           ; unsigned int DataFlag;//下发标定系数开始标志
 0012           ; unsigned char Int_count;
 0012           ; unsigned char IntFlag;//接收帧状态
 0012           ; 
 0012           ; unsigned int Tt,k;
 0012           ; unsigned int T2cn;
 0012           ; unsigned char coeffdata[320];
 0012           ; 
 0012           ; unsigned char Uart0TxData[74];//串口发送数据缓存
 0012           ; 
 0012           ; unsigned char EEPAdd;//接收系数存放地址索引
 0012           ; unsigned int coeff_len,coeff_count;//接收系数长度，接收系数计数
 0012           ; unsigned int CompCounter;
 0012           ; 
 0012           ; unsigned int bf;
 0012           ; 
 0012           ; unsigned long lfib;//短整型转浮点数时用的临时变量
 0012           ; unsigned char crc16hi,crc16lo,crc16array[18];
 0012           ; 
 0012           ; void InitialIO(void);
 0012           ; void init_USART0(void);
 0012           ; void SendUart0_2(unsigned char len,unsigned int s);
 0012           ; void SendUart0_3(unsigned char len,unsigned int s,unsigned char cn);
 0012           ; void Pwm_startup(unsigned char motor);
 0012           ; void Start(void);
 0012           ; void SendManchester(void); 
 0012           ; unsigned char SampleADC(unsigned char ch);
 0012           ; void EEPROM_write(unsigned int Address,unsigned char Data);
 0012           ; unsigned char EEPROM_read(unsigned int Address);
 0012           ; void CheckMotor(unsigned int t);
 0012           ; void crc16(unsigned char r_data[],unsigned int length);
 0012           ; void Gear2Thr(void);
 0012           ; void int0_isr(void);
 0012           ; 
 0012           ; #pragma interrupt_handler int0_isr:iv_INT0
 0012           ; void int0_isr(void)//外部中断0
 0012           ; { 
 0012                   .dbline 178
 0012           ;    //SREG&=0x7f;//关总中断
 0012           ;    //EIMSK&=0xFe;//关INT0  
 0012           ;    TCCR2 = 0x00; //stop
 0012 2224              clr R2
 0014 25BC              out 0x25,R2
 0016                   .dbline 180
 0016           ;    
 0016           ;       INT_DIS
 0016                   .dbline 180
 0016 F894              cli
 0018                   .dbline 180
 0018                   .dbline 181
 0018           ;       MANINT_DIS
 0018                   .dbline 181
 0018 89B7              in R24,0x39
 001A 8E7F              andi R24,254
 001C 89BF              out 0x39,R24
 001E                   .dbline 181
 001E                   .dbline 189
 001E           ;    
 001E           ;    #if Debug 
 001E           ;   // PORTD&=0xf7;
 001E           ;    //PORTD|=0x08;
 001E           ;   // PORTD&=0xf7;
 001E           ;    #endif
 001E           ;   
 001E           ;   DELAY10
 001E 3324              clr R3
 0020 3092B001          sts _Tt+1,R3
 0024 2092AF01          sts _Tt,R2
 0028 09C0              xjmp L6
 002A           L3:
 002A                   .dbline 189
 002A           L4:
 002A                   .dbline 189
 002A 8091AF01          lds R24,_Tt
 002E 9091B001          lds R25,_Tt+1
 0032 0196              adiw R24,1
 0034 9093B001          sts _Tt+1,R25
 0038 8093AF01          sts _Tt,R24
 003C           L6:
 003C                   .dbline 189
 003C 8091AF01          lds R24,_Tt
 0040 9091B001          lds R25,_Tt+1
 0044 8430              cpi R24,4
 0046 E0E0              ldi R30,0
 0048 9E07              cpc R25,R30
 004A 78F3              brlo L3
 004C           X0:
 004C                   .dbline 190
 004C           ;   EIFR|=0x01;//清INT0中断标志 
 004C 88B7              in R24,0x38
 004E 8160              ori R24,1
 0050 88BF              out 0x38,R24
 0052                   .dbline 191
 0052           ;   if((PIND&0x01)==0x00)//高脉冲不足10us则直接跳出
 0052 8099              sbic 0x10,0
 0054 01C0              rjmp L7
 0056           X1:
 0056                   .dbline 192
 0056           ;   {
 0056                   .dbline 193
 0056           ;    goto End;
 0056 C0C1              xjmp L9
 0058           L7:
 0058                   .dbline 196
 0058           ;   }
 0058           ;    
 0058           ;    TCNT2 = 0x00;  
 0058 2224              clr R2
 005A 24BC              out 0x24,R2
 005C                   .dbline 197
 005C           ;    TCCR2 = 0x03; //64分频,8M时钟，每个CLOCK耗时8us，最大定时2048us，每周期10个计数
 005C 83E0              ldi R24,3
 005E 85BD              out 0x25,R24
 0060 29C0              xjmp L11
 0062           L10:
 0062                   .dbline 200
 0062           ;    
 0062           ;    while(1)
 0062           ;    {
 0062                   .dbline 201
 0062           ;      T2cn=TCNT2;
 0062 24B4              in R2,0x24
 0064 3324              clr R3
 0066 3092AC01          sts _T2cn+1,R3
 006A 2092AB01          sts _T2cn,R2
 006E                   .dbline 202
 006E           ;         if(T2cn>80)//设计值最多7个周期，在此多给一个周期，则超过8个周期还没来上升沿中断到来就直接跳出
 006E 80E5              ldi R24,80
 0070 90E0              ldi R25,0
 0072 8215              cp R24,R2
 0074 9305              cpc R25,R3
 0076 08F4              brsh L13
 0078           X2:
 0078                   .dbline 203
 0078           ;         {
 0078                   .dbline 204
 0078           ;           goto End;
 0078 AFC1              xjmp L9
 007A           L13:
 007A                   .dbline 206
 007A           ;         }
 007A           ;      if((PIND&0x01)==0x00)
 007A 8099              sbic 0x10,0
 007C 1BC0              rjmp L15
 007E           X3:
 007E                   .dbline 207
 007E           ;        {
 007E                   .dbline 208
 007E           ;          DELAY20
 007E 2224              clr R2
 0080 3324              clr R3
 0082 3092B001          sts _Tt+1,R3
 0086 2092AF01          sts _Tt,R2
 008A 09C0              xjmp L20
 008C           L17:
 008C                   .dbline 208
 008C           L18:
 008C                   .dbline 208
 008C 8091AF01          lds R24,_Tt
 0090 9091B001          lds R25,_Tt+1
 0094 0196              adiw R24,1
 0096 9093B001          sts _Tt+1,R25
 009A 8093AF01          sts _Tt,R24
 009E           L20:
 009E                   .dbline 208
 009E 8091AF01          lds R24,_Tt
 00A2 9091B001          lds R25,_Tt+1
 00A6 8430              cpi R24,4
 00A8 E0E0              ldi R30,0
 00AA 9E07              cpc R25,R30
 00AC 78F3              brlo L17
 00AE           X4:
 00AE                   .dbline 209
 00AE           ;          if((PIND&0x01)==0x00)
 00AE 8099              sbic 0x10,0
 00B0 01C0              rjmp L21
 00B2           X5:
 00B2                   .dbline 210
 00B2           ;           {
 00B2                   .dbline 211
 00B2           ;             break;
 00B2 31C0              xjmp L24
 00B4           L21:
 00B4                   .dbline 213
 00B4           ;           }
 00B4           ;        }
 00B4           L15:
 00B4                   .dbline 214
 00B4           ;    }
 00B4           L11:
 00B4                   .dbline 199
 00B4 D6CF              xjmp L10
 00B6           L23:
 00B6                   .dbline 221
 00B6           ;    
 00B6           ;    #if Debug 
 00B6           ;    //PORTD&=0xf7;
 00B6           ;    #endif                
 00B6           ;     //开始判断同步头  
 00B6           ;       while(1)//还没有上升沿到来,死等
 00B6           ;       {
 00B6                   .dbline 222
 00B6           ;         T2cn=TCNT2;
 00B6 24B4              in R2,0x24
 00B8 3324              clr R3
 00BA 3092AC01          sts _T2cn+1,R3
 00BE 2092AB01          sts _T2cn,R2
 00C2                   .dbline 223
 00C2           ;         if(T2cn>80)//设计值最多7个周期，在此多给一个周期，则超过8个周期还没来上升沿中断到来就直接跳出
 00C2 80E5              ldi R24,80
 00C4 90E0              ldi R25,0
 00C6 8215              cp R24,R2
 00C8 9305              cpc R25,R3
 00CA 08F4              brsh L26
 00CC           X6:
 00CC                   .dbline 224
 00CC           ;         {
 00CC                   .dbline 225
 00CC           ;           goto End;
 00CC 85C1              xjmp L9
 00CE           L26:
 00CE                   .dbline 227
 00CE           ;         }
 00CE           ;         if((EIFR&0x01)==0x01)
 00CE 88B7              in R24,0x38
 00D0 8170              andi R24,1
 00D2 8130              cpi R24,1
 00D4 01F5              brne L28
 00D6           X7:
 00D6                   .dbline 228
 00D6           ;         {
 00D6                   .dbline 229
 00D6           ;          DELAY10
 00D6 2224              clr R2
 00D8 3324              clr R3
 00DA 3092B001          sts _Tt+1,R3
 00DE 2092AF01          sts _Tt,R2
 00E2 09C0              xjmp L33
 00E4           L30:
 00E4                   .dbline 229
 00E4           L31:
 00E4                   .dbline 229
 00E4 8091AF01          lds R24,_Tt
 00E8 9091B001          lds R25,_Tt+1
 00EC 0196              adiw R24,1
 00EE 9093B001          sts _Tt+1,R25
 00F2 8093AF01          sts _Tt,R24
 00F6           L33:
 00F6                   .dbline 229
 00F6 8091AF01          lds R24,_Tt
 00FA 9091B001          lds R25,_Tt+1
 00FE 8430              cpi R24,4
 0100 E0E0              ldi R30,0
 0102 9E07              cpc R25,R30
 0104 78F3              brlo L30
 0106           X8:
 0106                   .dbline 230
 0106           ;          EIFR|=0x01;//清INT0中断标志 
 0106 88B7              in R24,0x38
 0108 8160              ori R24,1
 010A 88BF              out 0x38,R24
 010C                   .dbline 231
 010C           ;          if((PIND&0x01)==0x01)//高脉冲维持了10us，则认为是下一个有效上升沿到来
 010C 80B3              in R24,0x10
 010E 8170              andi R24,1
 0110 8130              cpi R24,1
 0112 09F4              brne L34
 0114           X9:
 0114                   .dbline 232
 0114           ;            {
 0114                   .dbline 233
 0114           ;            break;
 0114 01C0              xjmp L25
 0116           L34:
 0116                   .dbline 235
 0116           ;                }
 0116           ;         }  
 0116           L28:
 0116                   .dbline 236
 0116           ;       }
 0116           L24:
 0116                   .dbline 220
 0116 CFCF              xjmp L23
 0118           L25:
 0118                   .dbline 237
 0118           ;       T2cn=TCNT2;
 0118 24B4              in R2,0x24
 011A 3324              clr R3
 011C 3092AC01          sts _T2cn+1,R3
 0120 2092AB01          sts _T2cn,R2
 0124                   .dbline 238
 0124           ;       TCNT2=0;
 0124 2224              clr R2
 0126 24BC              out 0x24,R2
 0128                   .dbline 239
 0128           ;       if((T2cn<60)||(T2cn>80))//同步头本应是7个周期，但收到的结果为6~8个周期内都认可
 0128 2090AB01          lds R2,_T2cn
 012C 3090AC01          lds R3,_T2cn+1
 0130 C101              movw R24,R2
 0132 8C33              cpi R24,60
 0134 E0E0              ldi R30,0
 0136 9E07              cpc R25,R30
 0138 28F0              brlo L38
 013A           X10:
 013A 80E5              ldi R24,80
 013C 90E0              ldi R25,0
 013E 8215              cp R24,R2
 0140 9305              cpc R25,R3
 0142 08F4              brsh L36
 0144           X11:
 0144           L38:
 0144                   .dbline 240
 0144           ;       {
 0144                   .dbline 241
 0144           ;        goto End;//没有收到正确的同步头，直接跳出
 0144 49C1              xjmp L9
 0146           L36:
 0146           L39:
 0146                   .dbline 247
 0146           ;       }
 0146           ; #if Debug 
 0146           ;  //  PORTD|=0x08;
 0146           ;    #endif
 0146           ; Start:        //同步头解码正确，下面开始接收9位数据位 //按位从高到低接收数据位，8位数据加1位校验共9位                         
 0146           ;   for(Int_count=9;Int_count>0;Int_count--)
 0146 89E0              ldi R24,9
 0148 8093B201          sts _Int_count,R24
 014C A6C0              xjmp L43
 014E           L44:
 014E                   .dbline 250
 014E           ;   {   
 014E           ;    while(1)
 014E           ;    {
 014E                   .dbline 251
 014E           ;      T2cn=TCNT2;
 014E 24B4              in R2,0x24
 0150 3324              clr R3
 0152 3092AC01          sts _T2cn+1,R3
 0156 2092AB01          sts _T2cn,R2
 015A                   .dbline 252
 015A           ;         if(T2cn>80)//设计值最多7个周期，在此多给一个周期，则超过8个周期还没来上升沿中断到来就直接跳出
 015A 80E5              ldi R24,80
 015C 90E0              ldi R25,0
 015E 8215              cp R24,R2
 0160 9305              cpc R25,R3
 0162 08F4              brsh L47
 0164           X12:
 0164                   .dbline 253
 0164           ;         {
 0164                   .dbline 254
 0164           ;           goto End;
 0164 39C1              xjmp L9
 0166           L47:
 0166                   .dbline 256
 0166           ;         }
 0166           ;      if((PIND&0x01)==0x00)
 0166 8099              sbic 0x10,0
 0168 1BC0              rjmp L49
 016A           X13:
 016A                   .dbline 257
 016A           ;        {
 016A                   .dbline 258
 016A           ;          DELAY20
 016A 2224              clr R2
 016C 3324              clr R3
 016E 3092B001          sts _Tt+1,R3
 0172 2092AF01          sts _Tt,R2
 0176 09C0              xjmp L54
 0178           L51:
 0178                   .dbline 258
 0178           L52:
 0178                   .dbline 258
 0178 8091AF01          lds R24,_Tt
 017C 9091B001          lds R25,_Tt+1
 0180 0196              adiw R24,1
 0182 9093B001          sts _Tt+1,R25
 0186 8093AF01          sts _Tt,R24
 018A           L54:
 018A                   .dbline 258
 018A 8091AF01          lds R24,_Tt
 018E 9091B001          lds R25,_Tt+1
 0192 8430              cpi R24,4
 0194 E0E0              ldi R30,0
 0196 9E07              cpc R25,R30
 0198 78F3              brlo L51
 019A           X14:
 019A                   .dbline 259
 019A           ;          if((PIND&0x01)==0x00)
 019A 8099              sbic 0x10,0
 019C 01C0              rjmp L55
 019E           X15:
 019E                   .dbline 260
 019E           ;           {
 019E                   .dbline 261
 019E           ;             break;
 019E 31C0              xjmp L58
 01A0           L55:
 01A0                   .dbline 263
 01A0           ;           }
 01A0           ;        }
 01A0           L49:
 01A0                   .dbline 264
 01A0           ;    } 
 01A0           L45:
 01A0                   .dbline 249
 01A0 D6CF              xjmp L44
 01A2           L57:
 01A2                   .dbline 266
 01A2           ;    while(1)//还没有上升沿到来,死等
 01A2           ;       {
 01A2                   .dbline 267
 01A2           ;         T2cn=TCNT2;
 01A2 24B4              in R2,0x24
 01A4 3324              clr R3
 01A6 3092AC01          sts _T2cn+1,R3
 01AA 2092AB01          sts _T2cn,R2
 01AE                   .dbline 268
 01AE           ;         if(T2cn>80)//设计值最多7个周期，在此多给一个周期，则超过8个周期还没来上升沿中断到来就直接跳出
 01AE 80E5              ldi R24,80
 01B0 90E0              ldi R25,0
 01B2 8215              cp R24,R2
 01B4 9305              cpc R25,R3
 01B6 08F4              brsh L60
 01B8           X16:
 01B8                   .dbline 269
 01B8           ;         {
 01B8                   .dbline 270
 01B8           ;           goto End;
 01B8 0FC1              xjmp L9
 01BA           L60:
 01BA                   .dbline 272
 01BA           ;         }
 01BA           ;         if((EIFR&0x01)==0x01)
 01BA 88B7              in R24,0x38
 01BC 8170              andi R24,1
 01BE 8130              cpi R24,1
 01C0 01F5              brne L62
 01C2           X17:
 01C2                   .dbline 273
 01C2           ;         {
 01C2                   .dbline 274
 01C2           ;          DELAY10
 01C2 2224              clr R2
 01C4 3324              clr R3
 01C6 3092B001          sts _Tt+1,R3
 01CA 2092AF01          sts _Tt,R2
 01CE 09C0              xjmp L67
 01D0           L64:
 01D0                   .dbline 274
 01D0           L65:
 01D0                   .dbline 274
 01D0 8091AF01          lds R24,_Tt
 01D4 9091B001          lds R25,_Tt+1
 01D8 0196              adiw R24,1
 01DA 9093B001          sts _Tt+1,R25
 01DE 8093AF01          sts _Tt,R24
 01E2           L67:
 01E2                   .dbline 274
 01E2 8091AF01          lds R24,_Tt
 01E6 9091B001          lds R25,_Tt+1
 01EA 8430              cpi R24,4
 01EC E0E0              ldi R30,0
 01EE 9E07              cpc R25,R30
 01F0 78F3              brlo L64
 01F2           X18:
 01F2                   .dbline 275
 01F2           ;          EIFR|=0x01;//清INT0中断标志 
 01F2 88B7              in R24,0x38
 01F4 8160              ori R24,1
 01F6 88BF              out 0x38,R24
 01F8                   .dbline 276
 01F8           ;          if((PIND&0x01)==0x01)//高脉冲维持了10us，则认为是下一个有效上升沿到来
 01F8 80B3              in R24,0x10
 01FA 8170              andi R24,1
 01FC 8130              cpi R24,1
 01FE 09F4              brne L68
 0200           X19:
 0200                   .dbline 277
 0200           ;            {
 0200                   .dbline 278
 0200           ;            break;
 0200 01C0              xjmp L59
 0202           L68:
 0202                   .dbline 280
 0202           ;                }
 0202           ;         }  
 0202           L62:
 0202                   .dbline 281
 0202           ;       }
 0202           L58:
 0202                   .dbline 265
 0202 CFCF              xjmp L57
 0204           L59:
 0204                   .dbline 282
 0204           ;       T2cn=TCNT2;
 0204 24B4              in R2,0x24
 0206 3324              clr R3
 0208 3092AC01          sts _T2cn+1,R3
 020C 2092AB01          sts _T2cn,R2
 0210                   .dbline 283
 0210           ;       TCNT2=0;
 0210 2224              clr R2
 0212 24BC              out 0x24,R2
 0214                   .dbline 284
 0214           ;       if(T2cn<20)//数据位最小是3位，可放宽到2位
 0214 8091AB01          lds R24,_T2cn
 0218 9091AC01          lds R25,_T2cn+1
 021C 8431              cpi R24,20
 021E E0E0              ldi R30,0
 0220 9E07              cpc R25,R30
 0222 20F4              brsh L70
 0224           X20:
 0224                   .dbline 285
 0224           ;       {
 0224                   .dbline 286
 0224           ;        IntFlag=3;//接收数据位不完整
 0224 83E0              ldi R24,3
 0226 8093B101          sts _IntFlag,R24
 022A                   .dbline 287
 022A           ;        goto End;//数据位来得太早，退出
 022A D6C0              xjmp L9
 022C           L70:
 022C                   .dbline 289
 022C           ;       }
 022C           ;       else if(T2cn<40)//数据位1本应是3个周期，在此我们认为2~4个周期都是可以的
 022C 8091AB01          lds R24,_T2cn
 0230 9091AC01          lds R25,_T2cn+1
 0234 8832              cpi R24,40
 0236 E0E0              ldi R30,0
 0238 9E07              cpc R25,R30
 023A 50F4              brsh L72
 023C           X21:
 023C                   .dbline 290
 023C           ;       {
 023C                   .dbline 291
 023C           ;        Rx[Int_count]=1;
 023C 80E0              ldi R24,<_Rx
 023E 90E0              ldi R25,>_Rx
 0240 E091B201          lds R30,_Int_count
 0244 FF27              clr R31
 0246 E80F              add R30,R24
 0248 F91F              adc R31,R25
 024A 81E0              ldi R24,1
 024C 8083              std z+0,R24
 024E                   .dbline 292
 024E           ;       }
 024E 20C0              xjmp L73
 0250           L72:
 0250                   .dbline 293
 0250           ;       else if(T2cn<60)//数据位0本应是5个周期，在此我们认为4~6个周期都是可以的
 0250 8091AB01          lds R24,_T2cn
 0254 9091AC01          lds R25,_T2cn+1
 0258 8C33              cpi R24,60
 025A E0E0              ldi R30,0
 025C 9E07              cpc R25,R30
 025E 50F4              brsh L74
 0260           X22:
 0260                   .dbline 294
 0260           ;       {
 0260                   .dbline 295
 0260           ;        Rx[Int_count]=0;
 0260 80E0              ldi R24,<_Rx
 0262 90E0              ldi R25,>_Rx
 0264 E091B201          lds R30,_Int_count
 0268 FF27              clr R31
 026A E80F              add R30,R24
 026C F91F              adc R31,R25
 026E 2224              clr R2
 0270 2082              std z+0,R2
 0272                   .dbline 296
 0272           ;       }
 0272 0EC0              xjmp L75
 0274           L74:
 0274                   .dbline 297
 0274           ;       else if(T2cn<=80)//同步位本应是7周期，在此我们认为6~8周期都是可以的
 0274 80E5              ldi R24,80
 0276 90E0              ldi R25,0
 0278 2090AB01          lds R2,_T2cn
 027C 3090AC01          lds R3,_T2cn+1
 0280 8215              cp R24,R2
 0282 9305              cpc R25,R3
 0284 08F0              brlo L76
 0286           X23:
 0286                   .dbline 298
 0286           ;       {
 0286                   .dbline 299
 0286           ;        goto Start;//在接收数据位时收到了同步位，跳到数据位解码起始位处
 0286 5FCF              xjmp L39
 0288           L76:
 0288                   .dbline 302
 0288           ;       }
 0288           ;       else 
 0288           ;       {
 0288                   .dbline 303
 0288           ;        IntFlag=3;//接收数据位不完整
 0288 83E0              ldi R24,3
 028A 8093B101          sts _IntFlag,R24
 028E                   .dbline 304
 028E           ;        goto End;//数据位来得太迟，退出
 028E A4C0              xjmp L9
 0290           L75:
 0290           L73:
 0290                   .dbline 306
 0290           ;       }
 0290           ;   }   
 0290           L41:
 0290                   .dbline 247
 0290 8091B201          lds R24,_Int_count
 0294 8150              subi R24,1
 0296 8093B201          sts _Int_count,R24
 029A           L43:
 029A                   .dbline 247
 029A 80E0              ldi R24,0
 029C 2090B201          lds R2,_Int_count
 02A0 8215              cp R24,R2
 02A2 08F4              brsh X35
 02A4 7DCF              xjmp L45
 02A6           X35:
 02A6           X24:
 02A6                   .dbline 308
 02A6           ;       
 02A6           ;     R_dat=0;
 02A6 2224              clr R2
 02A8 3324              clr R3
 02AA 3092CE01          sts _R_dat+1,R3
 02AE 2092CD01          sts _R_dat,R2
 02B2                   .dbline 309
 02B2           ;     if(Rx[2])
 02B2 2090D301          lds R2,_Rx+2
 02B6 2220              tst R2
 02B8 49F0              breq L78
 02BA           X25:
 02BA                   .dbline 310
 02BA           ;           R_dat|=0x01;
 02BA 8091CD01          lds R24,_R_dat
 02BE 9091CE01          lds R25,_R_dat+1
 02C2 8160              ori R24,1
 02C4 9093CE01          sts _R_dat+1,R25
 02C8 8093CD01          sts _R_dat,R24
 02CC           L78:
 02CC                   .dbline 311
 02CC           ;     if(Rx[3])
 02CC 2090D401          lds R2,_Rx+3
 02D0 2220              tst R2
 02D2 49F0              breq L81
 02D4           X26:
 02D4                   .dbline 312
 02D4           ;           R_dat|=0x02;
 02D4 8091CD01          lds R24,_R_dat
 02D8 9091CE01          lds R25,_R_dat+1
 02DC 8260              ori R24,2
 02DE 9093CE01          sts _R_dat+1,R25
 02E2 8093CD01          sts _R_dat,R24
 02E6           L81:
 02E6                   .dbline 313
 02E6           ;     if(Rx[4])
 02E6 2090D501          lds R2,_Rx+4
 02EA 2220              tst R2
 02EC 49F0              breq L84
 02EE           X27:
 02EE                   .dbline 314
 02EE           ;           R_dat|=0x04;
 02EE 8091CD01          lds R24,_R_dat
 02F2 9091CE01          lds R25,_R_dat+1
 02F6 8460              ori R24,4
 02F8 9093CE01          sts _R_dat+1,R25
 02FC 8093CD01          sts _R_dat,R24
 0300           L84:
 0300                   .dbline 315
 0300           ;     if(Rx[5])
 0300 2090D601          lds R2,_Rx+5
 0304 2220              tst R2
 0306 49F0              breq L87
 0308           X28:
 0308                   .dbline 316
 0308           ;           R_dat|=0x08;
 0308 8091CD01          lds R24,_R_dat
 030C 9091CE01          lds R25,_R_dat+1
 0310 8860              ori R24,8
 0312 9093CE01          sts _R_dat+1,R25
 0316 8093CD01          sts _R_dat,R24
 031A           L87:
 031A                   .dbline 317
 031A           ;     if(Rx[6])
 031A 2090D701          lds R2,_Rx+6
 031E 2220              tst R2
 0320 49F0              breq L90
 0322           X29:
 0322                   .dbline 318
 0322           ;           R_dat|=0x10;
 0322 8091CD01          lds R24,_R_dat
 0326 9091CE01          lds R25,_R_dat+1
 032A 8061              ori R24,16
 032C 9093CE01          sts _R_dat+1,R25
 0330 8093CD01          sts _R_dat,R24
 0334           L90:
 0334                   .dbline 319
 0334           ;     if(Rx[7])
 0334 2090D801          lds R2,_Rx+7
 0338 2220              tst R2
 033A 49F0              breq L93
 033C           X30:
 033C                   .dbline 320
 033C           ;           R_dat|=0x20;
 033C 8091CD01          lds R24,_R_dat
 0340 9091CE01          lds R25,_R_dat+1
 0344 8062              ori R24,32
 0346 9093CE01          sts _R_dat+1,R25
 034A 8093CD01          sts _R_dat,R24
 034E           L93:
 034E                   .dbline 321
 034E           ;     if(Rx[8])
 034E 2090D901          lds R2,_Rx+8
 0352 2220              tst R2
 0354 49F0              breq L96
 0356           X31:
 0356                   .dbline 322
 0356           ;           R_dat|=0x40;
 0356 8091CD01          lds R24,_R_dat
 035A 9091CE01          lds R25,_R_dat+1
 035E 8064              ori R24,64
 0360 9093CE01          sts _R_dat+1,R25
 0364 8093CD01          sts _R_dat,R24
 0368           L96:
 0368                   .dbline 323
 0368           ;     if(Rx[9])
 0368 2090DA01          lds R2,_Rx+9
 036C 2220              tst R2
 036E 49F0              breq L99
 0370           X32:
 0370                   .dbline 324
 0370           ;           R_dat|=0x80;
 0370 8091CD01          lds R24,_R_dat
 0374 9091CE01          lds R25,_R_dat+1
 0378 8068              ori R24,128
 037A 9093CE01          sts _R_dat+1,R25
 037E 8093CD01          sts _R_dat,R24
 0382           L99:
 0382                   .dbline 326
 0382           ;       
 0382           ;       Rx[0]=1;  
 0382 81E0              ldi R24,1
 0384 8093D101          sts _Rx,R24
 0388                   .dbline 327
 0388           ;       for(Int_count=2;Int_count<10;Int_count++)  
 0388 82E0              ldi R24,2
 038A 8093B201          sts _Int_count,R24
 038E 12C0              xjmp L105
 0390           L102:
 0390                   .dbline 328
 0390           ;        Rx[0]^=Rx[Int_count];  
 0390 80E0              ldi R24,<_Rx
 0392 90E0              ldi R25,>_Rx
 0394 E091B201          lds R30,_Int_count
 0398 FF27              clr R31
 039A E80F              add R30,R24
 039C F91F              adc R31,R25
 039E 2080              ldd R2,z+0
 03A0 3090D101          lds R3,_Rx
 03A4 3224              eor R3,R2
 03A6 3092D101          sts _Rx,R3
 03AA           L103:
 03AA                   .dbline 327
 03AA 8091B201          lds R24,_Int_count
 03AE 8F5F              subi R24,255    ; addi 1
 03B0 8093B201          sts _Int_count,R24
 03B4           L105:
 03B4                   .dbline 327
 03B4 8091B201          lds R24,_Int_count
 03B8 8A30              cpi R24,10
 03BA 50F3              brlo L102
 03BC           X33:
 03BC                   .dbline 330
 03BC           ;          
 03BC           ;       if(Rx[0]==Rx[1])
 03BC 2090D201          lds R2,_Rx+1
 03C0 3090D101          lds R3,_Rx
 03C4 3214              cp R3,R2
 03C6 21F4              brne L106
 03C8           X34:
 03C8                   .dbline 331
 03C8           ;        {
 03C8                   .dbline 332
 03C8           ;                IntFlag=1;//接收帧正常 
 03C8 81E0              ldi R24,1
 03CA 8093B101          sts _IntFlag,R24
 03CE                   .dbline 333
 03CE           ;        }
 03CE 0AC0              xjmp L109
 03D0           L106:
 03D0                   .dbline 335
 03D0           ;       else           
 03D0           ;        {
 03D0                   .dbline 336
 03D0           ;                IntFlag=2;//接收帧校验错
 03D0 82E0              ldi R24,2
 03D2 8093B101          sts _IntFlag,R24
 03D6                   .dbline 337
 03D6           ;        }
 03D6                   .dbline 341
 03D6           ;    #if Debug 
 03D6           ;    //PORTD&=0xf7;
 03D6           ;    #endif  
 03D6           ;    goto End1;//只要接收到正常的同步头，不管校验位是对是错，都暂时不开放INT0中断
 03D6 06C0              xjmp L109
 03D8           L9:
 03D8                   .dbline 348
 03D8           ;      
 03D8           ; End:
 03D8           ;               //EIFR|=0x01;//清INT0中断标志 
 03D8           ;               //EICRA|=0x0c; //INT0上升沿触发 
 03D8           ;               //EIMSK|=0x01;//使能INT0中断 
 03D8           ;       
 03D8           ;               MANINT_CLR
 03D8                   .dbline 348
 03D8 88B7              in R24,0x38
 03DA 8160              ori R24,1
 03DC 88BF              out 0x38,R24
 03DE                   .dbline 348
 03DE                   .dbline 349
 03DE           ;               MANINT_EN
 03DE                   .dbline 349
 03DE 89B7              in R24,0x39
 03E0 8160              ori R24,1
 03E2 89BF              out 0x39,R24
 03E4                   .dbline 349
 03E4           L109:
 03E4                   .dbline 351
 03E4           ; End1:
 03E4           ;    TCCR2 = 0x00; //stop
 03E4 2224              clr R2
 03E6 25BC              out 0x25,R2
 03E8                   .dbline 353
 03E8           ;     //SREG|=0x80;//总中断使能;  
 03E8           ;    INT_EN
 03E8                   .dbline 353
 03E8 7894              sei
 03EA                   .dbline 353
 03EA                   .dbline -2
 03EA           L2:
 03EA                   .dbline 0 ; func end
 03EA 2990              ld R2,y+
 03EC 2FBE              OUT 63,R2
 03EE F991              ld R31,y+
 03F0 E991              ld R30,y+
 03F2 A991              ld R26,y+
 03F4 9991              ld R25,y+
 03F6 8991              ld R24,y+
 03F8 3990              ld R3,y+
 03FA 2990              ld R2,y+
 03FC 1895              reti
 03FE                   .dbend
 03FE                   .dbfunc e InitialIO _InitialIO fV
                        .even
 03FE           _InitialIO::
 03FE                   .dbline -1
 03FE                   .dbline 357
 03FE           ; }
 03FE           ; 
 03FE           ; void InitialIO(void)
 03FE           ; {//1输出，0输入
 03FE                   .dbline 358
 03FE           ;  PORTA=0x00;
 03FE 2224              clr R2
 0400 2BBA              out 0x1b,R2
 0402                   .dbline 359
 0402           ;  DDRA=0x07; //PA0=BREAKE1 PA1=PWM1 PA2=DIR1
 0402 87E0              ldi R24,7
 0404 8ABB              out 0x1a,R24
 0406                   .dbline 361
 0406           ; 
 0406           ;  PORTB=0x00; 
 0406 28BA              out 0x18,R2
 0408                   .dbline 362
 0408           ;  DDRB=0x80; //PB7=VM_CTRL
 0408 80E8              ldi R24,128
 040A 87BB              out 0x17,R24
 040C                   .dbline 364
 040C           ;  
 040C           ;  PORTC=0x00;
 040C 25BA              out 0x15,R2
 040E                   .dbline 365
 040E           ;  DDRC=0x00; 
 040E 24BA              out 0x14,R2
 0410                   .dbline 367
 0410           ;  
 0410           ;  PORTD=0x00; 
 0410 22BA              out 0x12,R2
 0412                   .dbline 368
 0412           ;  DDRD=0x38;//PD4=M2 PD5=M1 TX1=0
 0412 88E3              ldi R24,56
 0414 81BB              out 0x11,R24
 0416                   .dbline 370
 0416           ;  
 0416           ;  PORTE=0x00; 
 0416 23B8              out 0x3,R2
 0418                   .dbline 371
 0418           ;  DDRE=0x00;
 0418 22B8              out 0x2,R2
 041A                   .dbline 373
 041A           ;  
 041A           ;  PORTF=0x00; 
 041A 20926200          sts 98,R2
 041E                   .dbline 374
 041E           ;  DDRF=0x07;//PF0=DIR2 PF1=BREAKE2 PF2=PWM2
 041E 87E0              ldi R24,7
 0420 80936100          sts 97,R24
 0424                   .dbline 376
 0424           ;  
 0424           ;  PORTG=0x00; 
 0424 20926500          sts 101,R2
 0428                   .dbline 377
 0428           ;  DDRG=0x00; 
 0428 20926400          sts 100,R2
 042C                   .dbline -2
 042C           L110:
 042C                   .dbline 0 ; func end
 042C 0895              ret
 042E                   .dbend
 042E                   .dbfunc e uart1_init _uart1_init fV
                        .even
 042E           _uart1_init::
 042E                   .dbline -1
 042E                   .dbline 387
 042E           ; }
 042E           ; 
 042E           ; 
 042E           ; //UART1 initialize
 042E           ; // desired baud rate: 57600
 042E           ; // actual: baud rate:58824 (2.1%)
 042E           ; // char size: 8 bit
 042E           ; // parity: Disabled
 042E           ; void uart1_init(void)
 042E           ; {
 042E                   .dbline 388
 042E           ;  UCSR1B = 0x00; //disable while setting baud rate
 042E 2224              clr R2
 0430 20929A00          sts 154,R2
 0434                   .dbline 389
 0434           ;  UCSR1A = 0x02;
 0434 82E0              ldi R24,2
 0436 80939B00          sts 155,R24
 043A                   .dbline 390
 043A           ;  UCSR1C = 0x06;
 043A 86E0              ldi R24,6
 043C 80939D00          sts 157,R24
 0440                   .dbline 391
 0440           ;  UBRR1L = 0x10; //set baud rate lo 57600
 0440 80E1              ldi R24,16
 0442 80939900          sts 153,R24
 0446                   .dbline 392
 0446           ;  UBRR1H = 0x00; //set baud rate hi
 0446 20929800          sts 152,R2
 044A                   .dbline 393
 044A           ;  UCSR1B = 0x90;//使能接收和接收中断，不使能发送
 044A 80E9              ldi R24,144
 044C 80939A00          sts 154,R24
 0450                   .dbline -2
 0450           L111:
 0450                   .dbline 0 ; func end
 0450 0895              ret
 0452                   .dbend
                        .area vector(rom, abs)
                        .org 120
 0078 0C942902          jmp _uart1_rx_isr
                        .area text(rom, con, rel)
 0452                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 0452                   .dbfunc e uart1_rx_isr _uart1_rx_isr fV
                        .even
 0452           _uart1_rx_isr::
 0452 2A92              st -y,R2
 0454 8A93              st -y,R24
 0456 9A93              st -y,R25
 0458 EA93              st -y,R30
 045A FA93              st -y,R31
 045C 2FB6              IN R2,63
 045E 2A92              st -y,R2
 0460                   .dbline -1
 0460                   .dbline 398
 0460           ; }
 0460           ; 
 0460           ; #pragma interrupt_handler uart1_rx_isr:iv_USART1_RXC
 0460           ; void uart1_rx_isr(void)//串口1接收中断
 0460           ; {
 0460                   .dbline 399
 0460           ;  if(TPSCn<4)
 0460 80913502          lds R24,_TPSCn
 0464 8430              cpi R24,4
 0466 80F4              brsh L113
 0468           X36:
 0468                   .dbline 400
 0468           ;  {
 0468                   .dbline 401
 0468           ;   TPSBuf[TPSCn]=UDR1;
 0468 80E0              ldi R24,<_TPSBuf
 046A 90E0              ldi R25,>_TPSBuf
 046C E0913502          lds R30,_TPSCn
 0470 FF27              clr R31
 0472 E80F              add R30,R24
 0474 F91F              adc R31,R25
 0476 20909C00          lds R2,156
 047A 2082              std z+0,R2
 047C                   .dbline 402
 047C           ;   TPSCn++;
 047C 80913502          lds R24,_TPSCn
 0480 8F5F              subi R24,255    ; addi 1
 0482 80933502          sts _TPSCn,R24
 0486                   .dbline 403
 0486           ;  }
 0486 05C0              xjmp L114
 0488           L113:
 0488                   .dbline 405
 0488           ;  else
 0488           ;  {
 0488                   .dbline 406
 0488           ;   UCSR1B&=0x7f;//关串口1接收中断
 0488 80919A00          lds R24,154
 048C 8F77              andi R24,127
 048E 80939A00          sts 154,R24
 0492                   .dbline 407
 0492           ;  }
 0492           L114:
 0492                   .dbline -2
 0492           L112:
 0492                   .dbline 0 ; func end
 0492 2990              ld R2,y+
 0494 2FBE              OUT 63,R2
 0496 F991              ld R31,y+
 0498 E991              ld R30,y+
 049A 9991              ld R25,y+
 049C 8991              ld R24,y+
 049E 2990              ld R2,y+
 04A0 1895              reti
 04A2                   .dbend
 04A2                   .dbfunc e SendTPS _SendTPS fV
 04A2           ;              t -> R20
 04A2           ;             PD -> y+0
 04A2           ;              i -> R22
 04A2           ;              b -> R10
                        .even
 04A2           _SendTPS::
 04A2 0E940000          xcall push_xgsetF00C
 04A6 A02E              mov R10,R16
 04A8 2A97              sbiw R28,10
 04AA                   .dbline -1
 04AA                   .dbline 411
 04AA           ; }
 04AA           ; 
 04AA           ; void SendTPS(unsigned char b)
 04AA           ; {
 04AA                   .dbline 415
 04AA           ;  unsigned char t,i;
 04AA           ;  unsigned char PD[10];
 04AA           ;  
 04AA           ;  TPSCn=0;
 04AA 2224              clr R2
 04AC 20923502          sts _TPSCn,R2
 04B0                   .dbline 420
 04B0           ;  
 04B0           ;  //while(!(UCSR1A&(1<<UDRE1)));   // 等待发送缓冲器为空
 04B0           ;  //UDR1=b; 
 04B0           ;  
 04B0           ;  DDRD|=0x08;//TX1设为IO输出
 04B0 8B9A              sbi 0x11,3
 04B2                   .dbline 421
 04B2           ;  t=PIND;
 04B2 40B3              in R20,0x10
 04B4                   .dbline 422
 04B4           ;  for(i=0;i<8;i++)
 04B4 6627              clr R22
 04B6 1BC0              xjmp L119
 04B8           L116:
 04B8                   .dbline 423
 04B8           ;  {
 04B8                   .dbline 424
 04B8           ;   if(((b>>i)&0x01)==0x00)//反相发送
 04B8 0A2D              mov R16,R10
 04BA 162F              mov R17,R22
 04BC 0E940000          xcall lsr8
 04C0 802F              mov R24,R16
 04C2 8170              andi R24,1
 04C4 51F4              brne L120
 04C6           X37:
 04C6                   .dbline 425
 04C6           ;   {
 04C6                   .dbline 426
 04C6           ;    PD[i+1]=(t|0x08);
 04C6 CE01              movw R24,R28
 04C8 0196              adiw R24,1
 04CA E62F              mov R30,R22
 04CC FF27              clr R31
 04CE E80F              add R30,R24
 04D0 F91F              adc R31,R25
 04D2 842F              mov R24,R20
 04D4 8860              ori R24,8
 04D6 8083              std z+0,R24
 04D8                   .dbline 427
 04D8           ;   }
 04D8 09C0              xjmp L121
 04DA           L120:
 04DA                   .dbline 429
 04DA           ;   else
 04DA           ;   {
 04DA                   .dbline 430
 04DA           ;    PD[i+1]=(t&0xf7);
 04DA CE01              movw R24,R28
 04DC 0196              adiw R24,1
 04DE E62F              mov R30,R22
 04E0 FF27              clr R31
 04E2 E80F              add R30,R24
 04E4 F91F              adc R31,R25
 04E6 842F              mov R24,R20
 04E8 877F              andi R24,247
 04EA 8083              std z+0,R24
 04EC                   .dbline 431
 04EC           ;   }
 04EC           L121:
 04EC                   .dbline 432
 04EC           ;  }
 04EC           L117:
 04EC                   .dbline 422
 04EC 6395              inc R22
 04EE           L119:
 04EE                   .dbline 422
 04EE 6830              cpi R22,8
 04F0 18F3              brlo L116
 04F2           X38:
 04F2                   .dbline 433
 04F2           ;  PD[0]=1;//起始位
 04F2 81E0              ldi R24,1
 04F4 8883              std y+0,R24
 04F6                   .dbline 434
 04F6           ;  PD[9]=0;//结束位
 04F6 2224              clr R2
 04F8 2986              std y+9,R2
 04FA                   .dbline 435
 04FA           ;  PORTD&=0xf7;// 先拉低
 04FA 82B3              in R24,0x12
 04FC 877F              andi R24,247
 04FE 82BB              out 0x12,R24
 0500                   .dbline 436
 0500           ;  asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");
 0500 0000              nop
 0502                   .dbline 436
 0502 0000              nop
 0504                   .dbline 436
 0504 0000              nop
 0506                   .dbline 436
 0506 0000              nop
 0508                   .dbline 436
 0508 0000              nop
 050A                   .dbline 437
 050A           ;  for(i=0;i<10;i++)//再模拟发送10位
 050A 6627              clr R22
 050C 09C0              xjmp L128
 050E           L125:
 050E                   .dbline 438
 050E           ;  {
 050E                   .dbline 439
 050E           ;  PORTD=PD[i];
 050E CE01              movw R24,R28
 0510 E62F              mov R30,R22
 0512 FF27              clr R31
 0514 E80F              add R30,R24
 0516 F91F              adc R31,R25
 0518 2080              ldd R2,z+0
 051A 22BA              out 0x12,R2
 051C                   .dbline 440
 051C           ;  asm("nop");
 051C 0000              nop
 051E                   .dbline 441
 051E           ;  }
 051E           L126:
 051E                   .dbline 437
 051E 6395              inc R22
 0520           L128:
 0520                   .dbline 437
 0520 6A30              cpi R22,10
 0522 A8F3              brlo L125
 0524           X39:
 0524                   .dbline 442
 0524           ;  PORTD&=0xf7;//最后保持低
 0524 82B3              in R24,0x12
 0526 877F              andi R24,247
 0528 82BB              out 0x12,R24
 052A                   .dbline 445
 052A           ;  
 052A           ;  
 052A           ;  t=UDR1;//开串口接收中断前读空缓存
 052A 40919C00          lds R20,156
 052E                   .dbline 446
 052E           ;  UCSR1B|=0x80;//开串口1接收中断
 052E 80919A00          lds R24,154
 0532 8068              ori R24,128
 0534 80939A00          sts 154,R24
 0538                   .dbline -2
 0538           L115:
 0538                   .dbline 0 ; func end
 0538 2A96              adiw R28,10
 053A 0C940000          xjmp pop_xgsetF00C
 053E                   .dbsym r t 20 c
 053E                   .dbsym l PD 0 A[10:10]c
 053E                   .dbsym r i 22 c
 053E                   .dbsym r b 10 c
 053E                   .dbend
 053E                   .dbfunc e uart0_init _uart0_init fV
                        .even
 053E           _uart0_init::
 053E                   .dbline -1
 053E                   .dbline 456
 053E           ; }
 053E           ; 
 053E           ; 
 053E           ; //UART0 initialize
 053E           ; // desired baud rate: 57600
 053E           ; // actual: baud rate:58824 (2.1%)
 053E           ; // char size: 8 bit
 053E           ; // parity: Disabled
 053E           ; void uart0_init(void)
 053E           ; {
 053E                   .dbline 457
 053E           ;  UCSR0B = 0x00; //disable while setting baud rate
 053E 2224              clr R2
 0540 2AB8              out 0xa,R2
 0542                   .dbline 458
 0542           ;  UCSR0A = 0x02;
 0542 82E0              ldi R24,2
 0544 8BB9              out 0xb,R24
 0546                   .dbline 459
 0546           ;  UCSR0C = 0x06;
 0546 86E0              ldi R24,6
 0548 80939500          sts 149,R24
 054C                   .dbline 460
 054C           ;  UBRR0L = 0x10; //set baud rate lo 57600
 054C 80E1              ldi R24,16
 054E 89B9              out 0x9,R24
 0550                   .dbline 461
 0550           ;  UBRR0H = 0x00; //set baud rate hi
 0550 20929000          sts 144,R2
 0554                   .dbline 462
 0554           ;  UCSR0B = 0x98;
 0554 88E9              ldi R24,152
 0556 8AB9              out 0xa,R24
 0558                   .dbline -2
 0558           L129:
 0558                   .dbline 0 ; func end
 0558 0895              ret
 055A                   .dbend
                        .area vector(rom, abs)
                        .org 72
 0048 0C94AD02          jmp _uart0_rx_isr
                        .area text(rom, con, rel)
 055A                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 055A                   .dbfunc e uart0_rx_isr _uart0_rx_isr fV
                        .even
 055A           _uart0_rx_isr::
 055A 2A92              st -y,R2
 055C 8A93              st -y,R24
 055E 9A93              st -y,R25
 0560 EA93              st -y,R30
 0562 FA93              st -y,R31
 0564 2FB6              IN R2,63
 0566 2A92              st -y,R2
 0568                   .dbline -1
 0568                   .dbline 467
 0568           ; }
 0568           ; 
 0568           ; #pragma interrupt_handler uart0_rx_isr:iv_USART0_RXC
 0568           ; void uart0_rx_isr(void)//串口0接收中断
 0568           ; {
 0568                   .dbline 468
 0568           ;     if(Uart0RxCounter<74)
 0568 8091E301          lds R24,_Uart0RxCounter
 056C 8A34              cpi R24,74
 056E 70F4              brsh L131
 0570           X40:
 0570                   .dbline 469
 0570           ;       {
 0570                   .dbline 470
 0570           ;     Uart0RxData[Uart0RxCounter]=UDR0;//接收串口数据,同时清空串口接收中断标志
 0570 80E0              ldi R24,<_Uart0RxData
 0572 90E0              ldi R25,>_Uart0RxData
 0574 E091E301          lds R30,_Uart0RxCounter
 0578 FF27              clr R31
 057A E80F              add R30,R24
 057C F91F              adc R31,R25
 057E 2CB0              in R2,0xc
 0580 2082              std z+0,R2
 0582                   .dbline 471
 0582           ;       Uart0RxCounter++;
 0582 8091E301          lds R24,_Uart0RxCounter
 0586 8F5F              subi R24,255    ; addi 1
 0588 8093E301          sts _Uart0RxCounter,R24
 058C                   .dbline 472
 058C           ;       }
 058C           L131:
 058C                   .dbline -2
 058C           L130:
 058C                   .dbline 0 ; func end
 058C 2990              ld R2,y+
 058E 2FBE              OUT 63,R2
 0590 F991              ld R31,y+
 0592 E991              ld R30,y+
 0594 9991              ld R25,y+
 0596 8991              ld R24,y+
 0598 2990              ld R2,y+
 059A 1895              reti
 059C                   .dbend
                        .area vector(rom, abs)
                        .org 64
 0040 0C94CE02          jmp _timer0_ovf_isr
                        .area text(rom, con, rel)
 059C                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 059C                   .dbfunc e timer0_ovf_isr _timer0_ovf_isr fV
                        .even
 059C           _timer0_ovf_isr::
 059C 2A92              st -y,R2
 059E 8A93              st -y,R24
 05A0 9A93              st -y,R25
 05A2 2FB6              IN R2,63
 05A4 2A92              st -y,R2
 05A6                   .dbline -1
 05A6                   .dbline 477
 05A6           ; }
 05A6           ; 
 05A6           ; #pragma interrupt_handler timer0_ovf_isr:iv_TIM0_OVF
 05A6           ; void timer0_ovf_isr(void)
 05A6           ; {
 05A6                   .dbline 478
 05A6           ; Timer0Counter--;
 05A6 80912E02          lds R24,_Timer0Counter
 05AA 90912F02          lds R25,_Timer0Counter+1
 05AE 0197              sbiw R24,1
 05B0 90932F02          sts _Timer0Counter+1,R25
 05B4 80932E02          sts _Timer0Counter,R24
 05B8                   .dbline 479
 05B8           ; if(Timer0Counter==0)
 05B8 8030              cpi R24,0
 05BA 8907              cpc R24,R25
 05BC 61F4              brne L134
 05BE           X41:
 05BE                   .dbline 480
 05BE           ; {
 05BE                   .dbline 481
 05BE           ;  TCNT0=0;
 05BE 2224              clr R2
 05C0 22BE              out 0x32,R2
 05C2                   .dbline 482
 05C2           ;  TimeOutFlag=1;
 05C2 81E0              ldi R24,1
 05C4 8093CB01          sts _TimeOutFlag,R24
 05C8                   .dbline 483
 05C8           ;  TIMSK&=0xFE;//关定时器0中断
 05C8 87B7              in R24,0x37
 05CA 8E7F              andi R24,254
 05CC 87BF              out 0x37,R24
 05CE                   .dbline 484
 05CE           ;  UCSR0B&=0x7f;//关串口接收中断
 05CE 8AB1              in R24,0xa
 05D0 8F77              andi R24,127
 05D2 8AB9              out 0xa,R24
 05D4                   .dbline 485
 05D4           ;  }
 05D4 02C0              xjmp L135
 05D6           L134:
 05D6                   .dbline 487
 05D6           ;  else
 05D6           ;  {
 05D6                   .dbline 488
 05D6           ;  TCNT0=0x06;//定时8ms
 05D6 86E0              ldi R24,6
 05D8 82BF              out 0x32,R24
 05DA                   .dbline 489
 05DA           ;  }
 05DA           L135:
 05DA                   .dbline -2
 05DA           L133:
 05DA                   .dbline 0 ; func end
 05DA 2990              ld R2,y+
 05DC 2FBE              OUT 63,R2
 05DE 9991              ld R25,y+
 05E0 8991              ld R24,y+
 05E2 2990              ld R2,y+
 05E4 1895              reti
 05E6                   .dbend
                        .area vector(rom, abs)
                        .org 116
 0074 0C94F302          jmp _timer3_ovf_isr
                        .area text(rom, con, rel)
 05E6                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 05E6                   .dbfunc e timer3_ovf_isr _timer3_ovf_isr fV
                        .even
 05E6           _timer3_ovf_isr::
 05E6 1A92              st -y,R1
 05E8 2A92              st -y,R2
 05EA 8A93              st -y,R24
 05EC 9A93              st -y,R25
 05EE 1FB6              IN R1,63
 05F0 1A92              st -y,R1
 05F2                   .dbline -1
 05F2                   .dbline 494
 05F2           ; }
 05F2           ; 
 05F2           ; #pragma interrupt_handler timer3_ovf_isr:iv_TIM3_OVF
 05F2           ; void timer3_ovf_isr(void)
 05F2           ; {
 05F2                   .dbline 495
 05F2           ;        ETIMSK = 0x00; //Timer3中断关闭
 05F2 2224              clr R2
 05F4 20927D00          sts 125,R2
 05F8                   .dbline 496
 05F8           ;        TCCR3B = 0x00; //stop
 05F8 20928A00          sts 138,R2
 05FC                   .dbline 498
 05FC           ;               
 05FC           ;                  if(PWM1_PIN==1)//收放电机正在运行
 05FC 89B3              in R24,0x19
 05FE 8270              andi R24,2
 0600 8695              lsr R24
 0602 8130              cpi R24,1
 0604 49F4              brne L137
 0606           X42:
 0606                   .dbline 499
 0606           ;                  {
 0606                   .dbline 500
 0606           ;                  Motor1Status.s.CommandStop=1;
 0606 80913E02          lds R24,_Motor1Status
 060A 90913F02          lds R25,_Motor1Status+1
 060E 8860              ori R24,8
 0610 90933F02          sts _Motor1Status+1,R25
 0614 80933E02          sts _Motor1Status,R24
 0618                   .dbline 501
 0618           ;                  }
 0618           L137:
 0618                   .dbline 502
 0618           ;                  if(PWM2_PIN==1)//调节电机正在运行
 0618 80B1              in R24,0x0
 061A 8470              andi R24,4
 061C 8695              lsr R24
 061E 8695              lsr R24
 0620 8130              cpi R24,1
 0622 49F4              brne L139
 0624           X43:
 0624                   .dbline 503
 0624           ;                  { 
 0624                   .dbline 504
 0624           ;                  Motor2Status.s.CommandStop=1;
 0624 80913C02          lds R24,_Motor2Status
 0628 90913D02          lds R25,_Motor2Status+1
 062C 8860              ori R24,8
 062E 90933D02          sts _Motor2Status+1,R25
 0632 80933C02          sts _Motor2Status,R24
 0636                   .dbline 505
 0636           ;                  }
 0636           L139:
 0636                   .dbline 506
 0636           ;                  MOTORSTOP  //关电机
 0636                   .dbline 506
 0636                   .dbline 506
 0636 D09A              sbi 0x1a,0
 0638                   .dbline 506
 0638 D89A              sbi 0x1b,0
 063A                   .dbline 506
 063A                   .dbline 506
 063A                   .dbline 506
 063A                   .dbline 506
 063A                   .dbline 506
 063A 80916100          lds R24,97
 063E 8260              ori R24,2
 0640 80936100          sts 97,R24
 0644                   .dbline 506
 0644 80916200          lds R24,98
 0648 8260              ori R24,2
 064A 80936200          sts 98,R24
 064E                   .dbline 506
 064E                   .dbline 506
 064E                   .dbline 506
 064E                   .dbline 506
 064E BF9A              sbi 0x17,7
 0650                   .dbline 506
 0650 88B3              in R24,0x18
 0652 8F77              andi R24,127
 0654 88BB              out 0x18,R24
 0656                   .dbline 506
 0656                   .dbline 506
 0656                   .dbline 506
 0656                   .dbline 506
 0656 D29A              sbi 0x1a,2
 0658                   .dbline 506
 0658 8BB3              in R24,0x1b
 065A 8B7F              andi R24,251
 065C 8BBB              out 0x1b,R24
 065E                   .dbline 506
 065E                   .dbline 506
 065E                   .dbline 506
 065E                   .dbline 506
 065E                   .dbline 506
 065E D19A              sbi 0x1a,1
 0660                   .dbline 506
 0660 8BB3              in R24,0x1b
 0662 8D7F              andi R24,253
 0664 8BBB              out 0x1b,R24
 0666                   .dbline 506
 0666                   .dbline 506
 0666                   .dbline 506
 0666                   .dbline 506
 0666                   .dbline 506
 0666 80916100          lds R24,97
 066A 8160              ori R24,1
 066C 80936100          sts 97,R24
 0670                   .dbline 506
 0670 80916200          lds R24,98
 0674 8E7F              andi R24,254
 0676 80936200          sts 98,R24
 067A                   .dbline 506
 067A                   .dbline 506
 067A                   .dbline 506
 067A                   .dbline 506
 067A                   .dbline 506
 067A 80916100          lds R24,97
 067E 8460              ori R24,4
 0680 80936100          sts 97,R24
 0684                   .dbline 506
 0684 80916200          lds R24,98
 0688 8B7F              andi R24,251
 068A 80936200          sts 98,R24
 068E                   .dbline 506
 068E                   .dbline 506
 068E                   .dbline -2
 068E           L136:
 068E                   .dbline 0 ; func end
 068E 1990              ld R1,y+
 0690 1FBE              OUT 63,R1
 0692 9991              ld R25,y+
 0694 8991              ld R24,y+
 0696 2990              ld R2,y+
 0698 1990              ld R1,y+
 069A 1895              reti
 069C                   .dbend
 069C                   .dbfunc e SendUart0_2 _SendUart0_2 fV
 069C           ;              t -> R20
 069C           ;              i -> R22
 069C           ;              s -> R10,R11
 069C           ;            len -> R12
                        .even
 069C           _SendUart0_2::
 069C 0E940000          xcall push_xgsetF03C
 06A0 5901              movw R10,R18
 06A2 C02E              mov R12,R16
 06A4                   .dbline -1
 06A4                   .dbline 510
 06A4           ; }
 06A4           ; 
 06A4           ; void SendUart0_2(unsigned char len,unsigned int s)   //串口发送数据
 06A4           ; {//要求流量板在s个8ms内通过串口返回数据
 06A4                   .dbline 513
 06A4           ; unsigned char t,i;    
 06A4           ; 
 06A4           ; for(t=0;t<74;t++)
 06A4 4427              clr R20
 06A6 09C0              xjmp L145
 06A8           L142:
 06A8                   .dbline 514
 06A8           ;   Uart0RxData[t]=0xff;
 06A8 80E0              ldi R24,<_Uart0RxData
 06AA 90E0              ldi R25,>_Uart0RxData
 06AC E42F              mov R30,R20
 06AE FF27              clr R31
 06B0 E80F              add R30,R24
 06B2 F91F              adc R31,R25
 06B4 8FEF              ldi R24,255
 06B6 8083              std z+0,R24
 06B8           L143:
 06B8                   .dbline 513
 06B8 4395              inc R20
 06BA           L145:
 06BA                   .dbline 513
 06BA 4A34              cpi R20,74
 06BC A8F3              brlo L142
 06BE           X44:
 06BE                   .dbline 516
 06BE           ;   
 06BE           ; Uart0RxCounter=0; //清串口接受计数  
 06BE 2224              clr R2
 06C0 2092E301          sts _Uart0RxCounter,R2
 06C4                   .dbline 518
 06C4           ; 
 06C4           ; for(t=0;t<len;t++)
 06C4 4427              clr R20
 06C6 10C0              xjmp L149
 06C8           L150:
 06C8                   .dbline 520
 06C8           ; {
 06C8           ; while(!(UCSR0A&(1<<UDRE0)));   // 等待发送缓冲器为空
 06C8           L151:
 06C8                   .dbline 520
 06C8 5D9B              sbis 0xb,5
 06CA FECF              rjmp L150
 06CC           X45:
 06CC                   .dbline 521
 06CC           ; for(i=0;i<200;i++);
 06CC 6627              clr R22
 06CE 01C0              xjmp L156
 06D0           L153:
 06D0                   .dbline 521
 06D0           L154:
 06D0                   .dbline 521
 06D0 6395              inc R22
 06D2           L156:
 06D2                   .dbline 521
 06D2 683C              cpi R22,200
 06D4 E8F3              brlo L153
 06D6           X46:
 06D6                   .dbline 522
 06D6           ; UDR0=Uart0TxData[t];  
 06D6 80E0              ldi R24,<_Uart0TxData
 06D8 90E0              ldi R25,>_Uart0TxData
 06DA E42F              mov R30,R20
 06DC FF27              clr R31
 06DE E80F              add R30,R24
 06E0 F91F              adc R31,R25
 06E2 2080              ldd R2,z+0
 06E4 2CB8              out 0xc,R2
 06E6                   .dbline 523
 06E6           ; }
 06E6           L147:
 06E6                   .dbline 518
 06E6 4395              inc R20
 06E8           L149:
 06E8                   .dbline 518
 06E8 4C15              cp R20,R12
 06EA 70F3              brlo L151
 06EC           X47:
 06EC                   .dbline 525
 06EC           ;                   
 06EC           ; if(s>0)
 06EC AA20              tst R10
 06EE 11F4              brne X48
 06F0 BB20              tst R11
 06F2 11F1              breq L157
 06F4           X48:
 06F4                   .dbline 526
 06F4           ; {
 06F4                   .dbline 528
 06F4           ;  //超时设定
 06F4           ; TimeOutFlag=0; //超时标志置0
 06F4 2224              clr R2
 06F6 2092CB01          sts _TimeOutFlag,R2
 06FA                   .dbline 529
 06FA           ; Timer0Counter=s; //8ms定时循环次数
 06FA B0922F02          sts _Timer0Counter+1,R11
 06FE A0922E02          sts _Timer0Counter,R10
 0702                   .dbline 530
 0702           ; TCNT0=0x06;//定时8ms
 0702 86E0              ldi R24,6
 0704 82BF              out 0x32,R24
 0706                   .dbline 531
 0706           ; TCCR0|=0x06;//256分频
 0706 83B7              in R24,0x33
 0708 8660              ori R24,6
 070A 83BF              out 0x33,R24
 070C                   .dbline 532
 070C           ; TIFR|=0x01; //清定时器0中断标志
 070C 86B7              in R24,0x36
 070E 8160              ori R24,1
 0710 86BF              out 0x36,R24
 0712                   .dbline 533
 0712           ; TIMSK|=0x01;//使能定时器0中断
 0712 87B7              in R24,0x37
 0714 8160              ori R24,1
 0716 87BF              out 0x37,R24
 0718                   .dbline 534
 0718           ; t=UDR0;//开串口接收中断前读空缓存
 0718 4CB1              in R20,0xc
 071A                   .dbline 535
 071A           ; UCSR0B|=0x80;//开串口接收中断
 071A 579A              sbi 0xa,7
 071C 03C0              xjmp L160
 071E           L159:
 071E                   .dbline 537
 071E           ; while(TimeOutFlag==0)
 071E           ; {
 071E                   .dbline 538
 071E           ; CheckMotor(0);
 071E 0027              clr R16
 0720 1127              clr R17
 0722 B9D3              xcall _CheckMotor
 0724                   .dbline 539
 0724           ; }
 0724           L160:
 0724                   .dbline 536
 0724 2090CB01          lds R2,_TimeOutFlag
 0728 2220              tst R2
 072A C9F3              breq L159
 072C           X49:
 072C                   .dbline 540
 072C           ; TIMSK&=0xFE;//关定时器0中断
 072C 87B7              in R24,0x37
 072E 8E7F              andi R24,254
 0730 87BF              out 0x37,R24
 0732                   .dbline 541
 0732           ; UCSR0B&=0x7f;//关串口接收中断
 0732 8AB1              in R24,0xa
 0734 8F77              andi R24,127
 0736 8AB9              out 0xa,R24
 0738                   .dbline 542
 0738           ; }
 0738           L157:
 0738                   .dbline -2
 0738           L141:
 0738                   .dbline 0 ; func end
 0738 0C940000          xjmp pop_xgsetF03C
 073C                   .dbsym r t 20 c
 073C                   .dbsym r i 22 c
 073C                   .dbsym r s 10 i
 073C                   .dbsym r len 12 c
 073C                   .dbend
 073C                   .dbfunc e SendUart0_3 _SendUart0_3 fV
 073C           ;              t -> R20
 073C           ;              i -> R22
 073C           ;             cn -> R10
 073C           ;              s -> R12,R13
 073C           ;            len -> R14
                        .even
 073C           _SendUart0_3::
 073C 0E940000          xcall push_xgsetF0FC
 0740 6901              movw R12,R18
 0742 E02E              mov R14,R16
 0744 AA84              ldd R10,y+10
 0746                   .dbline -1
 0746                   .dbline 546
 0746           ; }
 0746           ; 
 0746           ; void SendUart0_3(unsigned char len,unsigned int s,unsigned char cn)   //串口发送数据，不死等，收到采集板返回的cn个字节后即退出，如一直没收到cn个字节，则超时时间s*8ms到后也退出
 0746           ; {//要求流量板在s个8ms内通过串口返回数据
 0746                   .dbline 549
 0746           ; unsigned char t,i;    
 0746           ; 
 0746           ; for(t=0;t<74;t++)
 0746 4427              clr R20
 0748 09C0              xjmp L166
 074A           L163:
 074A                   .dbline 550
 074A           ;   Uart0RxData[t]=0xff;
 074A 80E0              ldi R24,<_Uart0RxData
 074C 90E0              ldi R25,>_Uart0RxData
 074E E42F              mov R30,R20
 0750 FF27              clr R31
 0752 E80F              add R30,R24
 0754 F91F              adc R31,R25
 0756 8FEF              ldi R24,255
 0758 8083              std z+0,R24
 075A           L164:
 075A                   .dbline 549
 075A 4395              inc R20
 075C           L166:
 075C                   .dbline 549
 075C 4A34              cpi R20,74
 075E A8F3              brlo L163
 0760           X50:
 0760                   .dbline 552
 0760           ;   
 0760           ; Uart0RxCounter=0; //清串口接受计数  
 0760 2224              clr R2
 0762 2092E301          sts _Uart0RxCounter,R2
 0766                   .dbline 554
 0766           ; 
 0766           ; for(t=0;t<len;t++)
 0766 4427              clr R20
 0768 10C0              xjmp L170
 076A           L171:
 076A                   .dbline 556
 076A           ; {
 076A           ; while(!(UCSR0A&(1<<UDRE0)));   // 等待发送缓冲器为空
 076A           L172:
 076A                   .dbline 556
 076A 5D9B              sbis 0xb,5
 076C FECF              rjmp L171
 076E           X51:
 076E                   .dbline 557
 076E           ; for(i=0;i<200;i++);
 076E 6627              clr R22
 0770 01C0              xjmp L177
 0772           L174:
 0772                   .dbline 557
 0772           L175:
 0772                   .dbline 557
 0772 6395              inc R22
 0774           L177:
 0774                   .dbline 557
 0774 683C              cpi R22,200
 0776 E8F3              brlo L174
 0778           X52:
 0778                   .dbline 558
 0778           ; UDR0=Uart0TxData[t];  
 0778 80E0              ldi R24,<_Uart0TxData
 077A 90E0              ldi R25,>_Uart0TxData
 077C E42F              mov R30,R20
 077E FF27              clr R31
 0780 E80F              add R30,R24
 0782 F91F              adc R31,R25
 0784 2080              ldd R2,z+0
 0786 2CB8              out 0xc,R2
 0788                   .dbline 559
 0788           ; }
 0788           L168:
 0788                   .dbline 554
 0788 4395              inc R20
 078A           L170:
 078A                   .dbline 554
 078A 4E15              cp R20,R14
 078C 70F3              brlo L172
 078E           X53:
 078E                   .dbline 561
 078E           ;                   
 078E           ; if(s>0)
 078E CC20              tst R12
 0790 11F4              brne X54
 0792 DD20              tst R13
 0794 39F1              breq L178
 0796           X54:
 0796                   .dbline 562
 0796           ; {
 0796                   .dbline 564
 0796           ;  //超时设定
 0796           ; TimeOutFlag=0; //超时标志置0
 0796 2224              clr R2
 0798 2092CB01          sts _TimeOutFlag,R2
 079C                   .dbline 565
 079C           ; Timer0Counter=s; //8ms定时循环次数
 079C D0922F02          sts _Timer0Counter+1,R13
 07A0 C0922E02          sts _Timer0Counter,R12
 07A4                   .dbline 566
 07A4           ; TCNT0=0x06;//定时8ms
 07A4 86E0              ldi R24,6
 07A6 82BF              out 0x32,R24
 07A8                   .dbline 567
 07A8           ; TCCR0|=0x06;//256分频
 07A8 83B7              in R24,0x33
 07AA 8660              ori R24,6
 07AC 83BF              out 0x33,R24
 07AE                   .dbline 568
 07AE           ; TIFR|=0x01; //清定时器0中断标志
 07AE 86B7              in R24,0x36
 07B0 8160              ori R24,1
 07B2 86BF              out 0x36,R24
 07B4                   .dbline 569
 07B4           ; TIMSK|=0x01;//使能定时器0中断
 07B4 87B7              in R24,0x37
 07B6 8160              ori R24,1
 07B8 87BF              out 0x37,R24
 07BA                   .dbline 570
 07BA           ; t=UDR0;//开串口接收中断前读空缓存
 07BA 4CB1              in R20,0xc
 07BC                   .dbline 571
 07BC           ; UCSR0B|=0x80;//开串口接收中断
 07BC 579A              sbi 0xa,7
 07BE 08C0              xjmp L181
 07C0           L180:
 07C0                   .dbline 573
 07C0           ; while(TimeOutFlag==0)
 07C0           ; {
 07C0                   .dbline 574
 07C0           ; CheckMotor(0);
 07C0 0027              clr R16
 07C2 1127              clr R17
 07C4 68D3              xcall _CheckMotor
 07C6                   .dbline 575
 07C6           ;  if(Uart0RxCounter>=cn)
 07C6 2090E301          lds R2,_Uart0RxCounter
 07CA 2A14              cp R2,R10
 07CC 08F0              brlo L183
 07CE           X55:
 07CE                   .dbline 576
 07CE           ;    break;
 07CE 04C0              xjmp L182
 07D0           L183:
 07D0                   .dbline 577
 07D0           ; }
 07D0           L181:
 07D0                   .dbline 572
 07D0 2090CB01          lds R2,_TimeOutFlag
 07D4 2220              tst R2
 07D6 A1F3              breq L180
 07D8           X56:
 07D8           L182:
 07D8                   .dbline 578
 07D8           ; TIMSK&=0xFE;//关定时器0中断
 07D8 87B7              in R24,0x37
 07DA 8E7F              andi R24,254
 07DC 87BF              out 0x37,R24
 07DE                   .dbline 579
 07DE           ; UCSR0B&=0x7f;//关串口接收中断
 07DE 8AB1              in R24,0xa
 07E0 8F77              andi R24,127
 07E2 8AB9              out 0xa,R24
 07E4                   .dbline 580
 07E4           ; }
 07E4           L178:
 07E4                   .dbline -2
 07E4           L162:
 07E4                   .dbline 0 ; func end
 07E4 0C940000          xjmp pop_xgsetF0FC
 07E8                   .dbsym r t 20 c
 07E8                   .dbsym r i 22 c
 07E8                   .dbsym r cn 10 c
 07E8                   .dbsym r s 12 i
 07E8                   .dbsym r len 14 c
 07E8                   .dbend
 07E8                   .dbfunc e Pwm_startup _Pwm_startup fV
 07E8           ;              c -> R20
 07E8           ;              b -> R22
 07E8           ;          motor -> R16
                        .even
 07E8           _Pwm_startup::
 07E8 4A93              st -y,R20
 07EA 6A93              st -y,R22
 07EC                   .dbline -1
 07EC                   .dbline 585
 07EC           ; }
 07EC           ; 
 07EC           ; 
 07EC           ; void Pwm_startup(unsigned char motor)//电机软启动
 07EC           ; {     unsigned char c,b;
 07EC                   .dbline 587
 07EC           ; 
 07EC           ;       if(motor==1)
 07EC 0130              cpi R16,1
 07EE 09F0              breq X93
 07F0 40C1              xjmp L186
 07F2           X93:
 07F2           X57:
 07F2                   .dbline 588
 07F2           ;       {  if(DIR1_PIN==0)
 07F2                   .dbline 588
 07F2 89B3              in R24,0x19
 07F4 8470              andi R24,4
 07F6 8695              lsr R24
 07F8 8695              lsr R24
 07FA 09F0              breq X94
 07FC 9FC0              xjmp L188
 07FE           X94:
 07FE           X58:
 07FE                   .dbline 589
 07FE           ;          {  PWM1_L       
 07FE                   .dbline 589
 07FE                   .dbline 589
 07FE D19A              sbi 0x1a,1
 0800                   .dbline 589
 0800 8BB3              in R24,0x1b
 0802 8D7F              andi R24,253
 0804 8BBB              out 0x1b,R24
 0806                   .dbline 589
 0806                   .dbline 590
 0806           ;                 BREAKE1_L 
 0806                   .dbline 590
 0806 D09A              sbi 0x1a,0
 0808                   .dbline 590
 0808 8BB3              in R24,0x1b
 080A 8E7F              andi R24,254
 080C 8BBB              out 0x1b,R24
 080E                   .dbline 590
 080E                   .dbline 591
 080E           ;                 DELAY100
 080E 2224              clr R2
 0810 3324              clr R3
 0812 3092B001          sts _Tt+1,R3
 0816 2092AF01          sts _Tt,R2
 081A 09C0              xjmp L193
 081C           L190:
 081C                   .dbline 591
 081C           L191:
 081C                   .dbline 591
 081C 8091AF01          lds R24,_Tt
 0820 9091B001          lds R25,_Tt+1
 0824 0196              adiw R24,1
 0826 9093B001          sts _Tt+1,R25
 082A 8093AF01          sts _Tt,R24
 082E           L193:
 082E                   .dbline 591
 082E 8091AF01          lds R24,_Tt
 0832 9091B001          lds R25,_Tt+1
 0836 8A32              cpi R24,42
 0838 E0E0              ldi R30,0
 083A 9E07              cpc R25,R30
 083C 78F3              brlo L190
 083E           X59:
 083E                   .dbline 592
 083E           ;            for(b=0;b<30;b++)//6ms采用降低占空比启动电机
 083E 6627              clr R22
 0840 37C0              xjmp L197
 0842           L194:
 0842                   .dbline 593
 0842           ;                {
 0842                   .dbline 594
 0842           ;                 PWM1_H
 0842                   .dbline 594
 0842 D19A              sbi 0x1a,1
 0844                   .dbline 594
 0844 D99A              sbi 0x1b,1
 0846                   .dbline 594
 0846                   .dbline 595
 0846           ;                 DELAY100
 0846 2224              clr R2
 0848 3324              clr R3
 084A 3092B001          sts _Tt+1,R3
 084E 2092AF01          sts _Tt,R2
 0852 09C0              xjmp L201
 0854           L198:
 0854                   .dbline 595
 0854           L199:
 0854                   .dbline 595
 0854 8091AF01          lds R24,_Tt
 0858 9091B001          lds R25,_Tt+1
 085C 0196              adiw R24,1
 085E 9093B001          sts _Tt+1,R25
 0862 8093AF01          sts _Tt,R24
 0866           L201:
 0866                   .dbline 595
 0866 8091AF01          lds R24,_Tt
 086A 9091B001          lds R25,_Tt+1
 086E 8A32              cpi R24,42
 0870 E0E0              ldi R30,0
 0872 9E07              cpc R25,R30
 0874 78F3              brlo L198
 0876           X60:
 0876                   .dbline 596
 0876           ;                 PWM1_L
 0876                   .dbline 596
 0876 D19A              sbi 0x1a,1
 0878                   .dbline 596
 0878 8BB3              in R24,0x1b
 087A 8D7F              andi R24,253
 087C 8BBB              out 0x1b,R24
 087E                   .dbline 596
 087E                   .dbline 597
 087E           ;                 DELAY100
 087E 2224              clr R2
 0880 3324              clr R3
 0882 3092B001          sts _Tt+1,R3
 0886 2092AF01          sts _Tt,R2
 088A 09C0              xjmp L205
 088C           L202:
 088C                   .dbline 597
 088C           L203:
 088C                   .dbline 597
 088C 8091AF01          lds R24,_Tt
 0890 9091B001          lds R25,_Tt+1
 0894 0196              adiw R24,1
 0896 9093B001          sts _Tt+1,R25
 089A 8093AF01          sts _Tt,R24
 089E           L205:
 089E                   .dbline 597
 089E 8091AF01          lds R24,_Tt
 08A2 9091B001          lds R25,_Tt+1
 08A6 8A32              cpi R24,42
 08A8 E0E0              ldi R30,0
 08AA 9E07              cpc R25,R30
 08AC 78F3              brlo L202
 08AE           X61:
 08AE                   .dbline 598
 08AE           ;                }
 08AE           L195:
 08AE                   .dbline 592
 08AE 6395              inc R22
 08B0           L197:
 08B0                   .dbline 592
 08B0 6E31              cpi R22,30
 08B2 38F2              brlo L194
 08B4           X62:
 08B4                   .dbline 600
 08B4           ;  
 08B4           ;        for(c=0;c<200;c++)//150ms采用降低占空比启动电机
 08B4 4427              clr R20
 08B6 3EC0              xjmp L209
 08B8           L206:
 08B8                   .dbline 601
 08B8           ;                {
 08B8                   .dbline 602
 08B8           ;              PWM1_L
 08B8                   .dbline 602
 08B8 D19A              sbi 0x1a,1
 08BA                   .dbline 602
 08BA 8BB3              in R24,0x1b
 08BC 8D7F              andi R24,253
 08BE 8BBB              out 0x1b,R24
 08C0                   .dbline 602
 08C0                   .dbline 603
 08C0           ;                  for(b=0;b<(200-c);b++)
 08C0 6627              clr R22
 08C2 0CC0              xjmp L213
 08C4           L210:
 08C4                   .dbline 604
 08C4           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 08C4                   .dbline 604
 08C4 0000              nop
 08C6                   .dbline 604
 08C6 0000              nop
 08C8                   .dbline 604
 08C8 0000              nop
 08CA                   .dbline 604
 08CA 0000              nop
 08CC                   .dbline 604
 08CC 0000              nop
 08CE                   .dbline 604
 08CE 0000              nop
 08D0                   .dbline 604
 08D0 0000              nop
 08D2                   .dbline 604
 08D2 0000              nop
 08D4                   .dbline 604
 08D4 0000              nop
 08D6                   .dbline 604
 08D6 0000              nop
 08D8                   .dbline 604
 08D8 0000              nop
 08DA                   .dbline 604
 08DA           L211:
 08DA                   .dbline 603
 08DA 6395              inc R22
 08DC           L213:
 08DC                   .dbline 603
 08DC 242E              mov R2,R20
 08DE 3324              clr R3
 08E0 88EC              ldi R24,200
 08E2 90E0              ldi R25,0
 08E4 2C01              movw R4,R24
 08E6 4218              sub R4,R2
 08E8 5308              sbc R5,R3
 08EA 262E              mov R2,R22
 08EC 3324              clr R3
 08EE 2414              cp R2,R4
 08F0 3504              cpc R3,R5
 08F2 44F3              brlt L210
 08F4           X63:
 08F4                   .dbline 606
 08F4           ;                       
 08F4           ;              if(Motor1Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 08F4 20903E02          lds R2,_Motor1Status
 08F8 30903F02          lds R3,_Motor1Status+1
 08FC 25FC              sbrc R2,5
 08FE 03C0              rjmp L214
 0900           X64:
 0900                   .dbline 607
 0900           ;                  {PWM1_H}
 0900                   .dbline 607
 0900                   .dbline 607
 0900 D19A              sbi 0x1a,1
 0902                   .dbline 607
 0902 D99A              sbi 0x1b,1
 0904                   .dbline 607
 0904                   .dbline 607
 0904 04C0              xjmp L215
 0906           L214:
 0906                   .dbline 609
 0906           ;                  else 
 0906           ;                  {PWM1_L}
 0906                   .dbline 609
 0906                   .dbline 609
 0906 D19A              sbi 0x1a,1
 0908                   .dbline 609
 0908 8BB3              in R24,0x1b
 090A 8D7F              andi R24,253
 090C 8BBB              out 0x1b,R24
 090E                   .dbline 609
 090E                   .dbline 609
 090E           L215:
 090E                   .dbline 611
 090E           ;                  
 090E           ;              for(b=0;b<(c+50);b++)
 090E 6627              clr R22
 0910 0CC0              xjmp L219
 0912           L216:
 0912                   .dbline 612
 0912           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0912                   .dbline 612
 0912 0000              nop
 0914                   .dbline 612
 0914 0000              nop
 0916                   .dbline 612
 0916 0000              nop
 0918                   .dbline 612
 0918 0000              nop
 091A                   .dbline 612
 091A 0000              nop
 091C                   .dbline 612
 091C 0000              nop
 091E                   .dbline 612
 091E 0000              nop
 0920                   .dbline 612
 0920 0000              nop
 0922                   .dbline 612
 0922 0000              nop
 0924                   .dbline 612
 0924 0000              nop
 0926                   .dbline 612
 0926 0000              nop
 0928                   .dbline 612
 0928           L217:
 0928                   .dbline 611
 0928 6395              inc R22
 092A           L219:
 092A                   .dbline 611
 092A 842F              mov R24,R20
 092C 8E5C              subi R24,206    ; addi 50
 092E 6817              cp R22,R24
 0930 80F3              brlo L216
 0932           X65:
 0932                   .dbline 613
 0932           ;                }      
 0932           L207:
 0932                   .dbline 600
 0932 4395              inc R20
 0934           L209:
 0934                   .dbline 600
 0934 483C              cpi R20,200
 0936 08F4              brsh X95
 0938 BFCF              xjmp L206
 093A           X95:
 093A           X66:
 093A                   .dbline 614
 093A           ;          }
 093A 3BC2              xjmp L187
 093C           L188:
 093C                   .dbline 616
 093C           ;          else
 093C           ;          {
 093C                   .dbline 617
 093C           ;             PWM1_H       
 093C                   .dbline 617
 093C D19A              sbi 0x1a,1
 093E                   .dbline 617
 093E D99A              sbi 0x1b,1
 0940                   .dbline 617
 0940                   .dbline 618
 0940           ;                 BREAKE1_L 
 0940                   .dbline 618
 0940 D09A              sbi 0x1a,0
 0942                   .dbline 618
 0942 8BB3              in R24,0x1b
 0944 8E7F              andi R24,254
 0946 8BBB              out 0x1b,R24
 0948                   .dbline 618
 0948                   .dbline 619
 0948           ;                 DELAY100
 0948 2224              clr R2
 094A 3324              clr R3
 094C 3092B001          sts _Tt+1,R3
 0950 2092AF01          sts _Tt,R2
 0954 09C0              xjmp L223
 0956           L220:
 0956                   .dbline 619
 0956           L221:
 0956                   .dbline 619
 0956 8091AF01          lds R24,_Tt
 095A 9091B001          lds R25,_Tt+1
 095E 0196              adiw R24,1
 0960 9093B001          sts _Tt+1,R25
 0964 8093AF01          sts _Tt,R24
 0968           L223:
 0968                   .dbline 619
 0968 8091AF01          lds R24,_Tt
 096C 9091B001          lds R25,_Tt+1
 0970 8A32              cpi R24,42
 0972 E0E0              ldi R30,0
 0974 9E07              cpc R25,R30
 0976 78F3              brlo L220
 0978           X67:
 0978                   .dbline 620
 0978           ;            for(b=0;b<30;b++)//6ms采用降低占空比启动电机
 0978 6627              clr R22
 097A 37C0              xjmp L227
 097C           L224:
 097C                   .dbline 621
 097C           ;                {
 097C                   .dbline 622
 097C           ;                 PWM1_L
 097C                   .dbline 622
 097C D19A              sbi 0x1a,1
 097E                   .dbline 622
 097E 8BB3              in R24,0x1b
 0980 8D7F              andi R24,253
 0982 8BBB              out 0x1b,R24
 0984                   .dbline 622
 0984                   .dbline 623
 0984           ;                 DELAY100
 0984 2224              clr R2
 0986 3324              clr R3
 0988 3092B001          sts _Tt+1,R3
 098C 2092AF01          sts _Tt,R2
 0990 09C0              xjmp L231
 0992           L228:
 0992                   .dbline 623
 0992           L229:
 0992                   .dbline 623
 0992 8091AF01          lds R24,_Tt
 0996 9091B001          lds R25,_Tt+1
 099A 0196              adiw R24,1
 099C 9093B001          sts _Tt+1,R25
 09A0 8093AF01          sts _Tt,R24
 09A4           L231:
 09A4                   .dbline 623
 09A4 8091AF01          lds R24,_Tt
 09A8 9091B001          lds R25,_Tt+1
 09AC 8A32              cpi R24,42
 09AE E0E0              ldi R30,0
 09B0 9E07              cpc R25,R30
 09B2 78F3              brlo L228
 09B4           X68:
 09B4                   .dbline 624
 09B4           ;                 PWM1_H
 09B4                   .dbline 624
 09B4 D19A              sbi 0x1a,1
 09B6                   .dbline 624
 09B6 D99A              sbi 0x1b,1
 09B8                   .dbline 624
 09B8                   .dbline 625
 09B8           ;                 DELAY100
 09B8 2224              clr R2
 09BA 3324              clr R3
 09BC 3092B001          sts _Tt+1,R3
 09C0 2092AF01          sts _Tt,R2
 09C4 09C0              xjmp L235
 09C6           L232:
 09C6                   .dbline 625
 09C6           L233:
 09C6                   .dbline 625
 09C6 8091AF01          lds R24,_Tt
 09CA 9091B001          lds R25,_Tt+1
 09CE 0196              adiw R24,1
 09D0 9093B001          sts _Tt+1,R25
 09D4 8093AF01          sts _Tt,R24
 09D8           L235:
 09D8                   .dbline 625
 09D8 8091AF01          lds R24,_Tt
 09DC 9091B001          lds R25,_Tt+1
 09E0 8A32              cpi R24,42
 09E2 E0E0              ldi R30,0
 09E4 9E07              cpc R25,R30
 09E6 78F3              brlo L232
 09E8           X69:
 09E8                   .dbline 626
 09E8           ;                }
 09E8           L225:
 09E8                   .dbline 620
 09E8 6395              inc R22
 09EA           L227:
 09EA                   .dbline 620
 09EA 6E31              cpi R22,30
 09EC 38F2              brlo L224
 09EE           X70:
 09EE                   .dbline 628
 09EE           ;  
 09EE           ;        for(c=0;c<200;c++)//150ms采用降低占空比启动电机
 09EE 4427              clr R20
 09F0 3CC0              xjmp L239
 09F2           L236:
 09F2                   .dbline 629
 09F2           ;                {
 09F2                   .dbline 630
 09F2           ;              PWM1_H
 09F2                   .dbline 630
 09F2 D19A              sbi 0x1a,1
 09F4                   .dbline 630
 09F4 D99A              sbi 0x1b,1
 09F6                   .dbline 630
 09F6                   .dbline 631
 09F6           ;                  for(b=0;b<(200-c);b++)
 09F6 6627              clr R22
 09F8 0CC0              xjmp L243
 09FA           L240:
 09FA                   .dbline 632
 09FA           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 09FA                   .dbline 632
 09FA 0000              nop
 09FC                   .dbline 632
 09FC 0000              nop
 09FE                   .dbline 632
 09FE 0000              nop
 0A00                   .dbline 632
 0A00 0000              nop
 0A02                   .dbline 632
 0A02 0000              nop
 0A04                   .dbline 632
 0A04 0000              nop
 0A06                   .dbline 632
 0A06 0000              nop
 0A08                   .dbline 632
 0A08 0000              nop
 0A0A                   .dbline 632
 0A0A 0000              nop
 0A0C                   .dbline 632
 0A0C 0000              nop
 0A0E                   .dbline 632
 0A0E 0000              nop
 0A10                   .dbline 632
 0A10           L241:
 0A10                   .dbline 631
 0A10 6395              inc R22
 0A12           L243:
 0A12                   .dbline 631
 0A12 242E              mov R2,R20
 0A14 3324              clr R3
 0A16 88EC              ldi R24,200
 0A18 90E0              ldi R25,0
 0A1A 2C01              movw R4,R24
 0A1C 4218              sub R4,R2
 0A1E 5308              sbc R5,R3
 0A20 262E              mov R2,R22
 0A22 3324              clr R3
 0A24 2414              cp R2,R4
 0A26 3504              cpc R3,R5
 0A28 44F3              brlt L240
 0A2A           X71:
 0A2A                   .dbline 634
 0A2A           ;                       
 0A2A           ;              if(Motor1Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 0A2A 20903E02          lds R2,_Motor1Status
 0A2E 30903F02          lds R3,_Motor1Status+1
 0A32 25FC              sbrc R2,5
 0A34 05C0              rjmp L244
 0A36           X72:
 0A36                   .dbline 635
 0A36           ;                  {PWM1_L}
 0A36                   .dbline 635
 0A36                   .dbline 635
 0A36 D19A              sbi 0x1a,1
 0A38                   .dbline 635
 0A38 8BB3              in R24,0x1b
 0A3A 8D7F              andi R24,253
 0A3C 8BBB              out 0x1b,R24
 0A3E                   .dbline 635
 0A3E                   .dbline 635
 0A3E 02C0              xjmp L245
 0A40           L244:
 0A40                   .dbline 637
 0A40           ;                  else 
 0A40           ;                  {PWM1_H}
 0A40                   .dbline 637
 0A40                   .dbline 637
 0A40 D19A              sbi 0x1a,1
 0A42                   .dbline 637
 0A42 D99A              sbi 0x1b,1
 0A44                   .dbline 637
 0A44                   .dbline 637
 0A44           L245:
 0A44                   .dbline 639
 0A44           ;                  
 0A44           ;              for(b=0;b<(c+50);b++)
 0A44 6627              clr R22
 0A46 0CC0              xjmp L249
 0A48           L246:
 0A48                   .dbline 640
 0A48           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0A48                   .dbline 640
 0A48 0000              nop
 0A4A                   .dbline 640
 0A4A 0000              nop
 0A4C                   .dbline 640
 0A4C 0000              nop
 0A4E                   .dbline 640
 0A4E 0000              nop
 0A50                   .dbline 640
 0A50 0000              nop
 0A52                   .dbline 640
 0A52 0000              nop
 0A54                   .dbline 640
 0A54 0000              nop
 0A56                   .dbline 640
 0A56 0000              nop
 0A58                   .dbline 640
 0A58 0000              nop
 0A5A                   .dbline 640
 0A5A 0000              nop
 0A5C                   .dbline 640
 0A5C 0000              nop
 0A5E                   .dbline 640
 0A5E           L247:
 0A5E                   .dbline 639
 0A5E 6395              inc R22
 0A60           L249:
 0A60                   .dbline 639
 0A60 842F              mov R24,R20
 0A62 8E5C              subi R24,206    ; addi 50
 0A64 6817              cp R22,R24
 0A66 80F3              brlo L246
 0A68           X73:
 0A68                   .dbline 641
 0A68           ;                }      
 0A68           L237:
 0A68                   .dbline 628
 0A68 4395              inc R20
 0A6A           L239:
 0A6A                   .dbline 628
 0A6A 483C              cpi R20,200
 0A6C 08F4              brsh X96
 0A6E C1CF              xjmp L236
 0A70           X96:
 0A70           X74:
 0A70                   .dbline 642
 0A70           ;          }
 0A70                   .dbline 643
 0A70           ;       } 
 0A70 A0C1              xjmp L187
 0A72           L186:
 0A72                   .dbline 644
 0A72           ;       else if(motor==2)
 0A72 0230              cpi R16,2
 0A74 09F0              breq X97
 0A76 9DC1              xjmp L250
 0A78           X97:
 0A78           X75:
 0A78                   .dbline 645
 0A78           ;       {  
 0A78                   .dbline 646
 0A78           ;         if(DIR2_PIN==0)
 0A78 0099              sbic 0x0,0
 0A7A CEC0              rjmp L252
 0A7C           X76:
 0A7C                   .dbline 647
 0A7C           ;          { 
 0A7C                   .dbline 648
 0A7C           ;             PWM2_L       
 0A7C                   .dbline 648
 0A7C 80916100          lds R24,97
 0A80 8460              ori R24,4
 0A82 80936100          sts 97,R24
 0A86                   .dbline 648
 0A86 80916200          lds R24,98
 0A8A 8B7F              andi R24,251
 0A8C 80936200          sts 98,R24
 0A90                   .dbline 648
 0A90                   .dbline 649
 0A90           ;                 BREAKE2_L 
 0A90                   .dbline 649
 0A90 80916100          lds R24,97
 0A94 8260              ori R24,2
 0A96 80936100          sts 97,R24
 0A9A                   .dbline 649
 0A9A 80916200          lds R24,98
 0A9E 8D7F              andi R24,253
 0AA0 80936200          sts 98,R24
 0AA4                   .dbline 649
 0AA4                   .dbline 650
 0AA4           ;                 DELAY100
 0AA4 2224              clr R2
 0AA6 3324              clr R3
 0AA8 3092B001          sts _Tt+1,R3
 0AAC 2092AF01          sts _Tt,R2
 0AB0 09C0              xjmp L257
 0AB2           L254:
 0AB2                   .dbline 650
 0AB2           L255:
 0AB2                   .dbline 650
 0AB2 8091AF01          lds R24,_Tt
 0AB6 9091B001          lds R25,_Tt+1
 0ABA 0196              adiw R24,1
 0ABC 9093B001          sts _Tt+1,R25
 0AC0 8093AF01          sts _Tt,R24
 0AC4           L257:
 0AC4                   .dbline 650
 0AC4 8091AF01          lds R24,_Tt
 0AC8 9091B001          lds R25,_Tt+1
 0ACC 8A32              cpi R24,42
 0ACE E0E0              ldi R30,0
 0AD0 9E07              cpc R25,R30
 0AD2 78F3              brlo L254
 0AD4           X77:
 0AD4                   .dbline 651
 0AD4           ;            for(b=0;b<30;b++)//6ms采用降低占空比启动电机
 0AD4 6627              clr R22
 0AD6 45C0              xjmp L261
 0AD8           L258:
 0AD8                   .dbline 652
 0AD8           ;                {
 0AD8                   .dbline 653
 0AD8           ;                 PWM2_H
 0AD8                   .dbline 653
 0AD8 80916100          lds R24,97
 0ADC 8460              ori R24,4
 0ADE 80936100          sts 97,R24
 0AE2                   .dbline 653
 0AE2 80916200          lds R24,98
 0AE6 8460              ori R24,4
 0AE8 80936200          sts 98,R24
 0AEC                   .dbline 653
 0AEC                   .dbline 654
 0AEC           ;                 DELAY100
 0AEC 2224              clr R2
 0AEE 3324              clr R3
 0AF0 3092B001          sts _Tt+1,R3
 0AF4 2092AF01          sts _Tt,R2
 0AF8 09C0              xjmp L265
 0AFA           L262:
 0AFA                   .dbline 654
 0AFA           L263:
 0AFA                   .dbline 654
 0AFA 8091AF01          lds R24,_Tt
 0AFE 9091B001          lds R25,_Tt+1
 0B02 0196              adiw R24,1
 0B04 9093B001          sts _Tt+1,R25
 0B08 8093AF01          sts _Tt,R24
 0B0C           L265:
 0B0C                   .dbline 654
 0B0C 8091AF01          lds R24,_Tt
 0B10 9091B001          lds R25,_Tt+1
 0B14 8A32              cpi R24,42
 0B16 E0E0              ldi R30,0
 0B18 9E07              cpc R25,R30
 0B1A 78F3              brlo L262
 0B1C           X78:
 0B1C                   .dbline 655
 0B1C           ;                 PWM2_L
 0B1C                   .dbline 655
 0B1C 80916100          lds R24,97
 0B20 8460              ori R24,4
 0B22 80936100          sts 97,R24
 0B26                   .dbline 655
 0B26 80916200          lds R24,98
 0B2A 8B7F              andi R24,251
 0B2C 80936200          sts 98,R24
 0B30                   .dbline 655
 0B30                   .dbline 656
 0B30           ;                 DELAY100
 0B30 2224              clr R2
 0B32 3324              clr R3
 0B34 3092B001          sts _Tt+1,R3
 0B38 2092AF01          sts _Tt,R2
 0B3C 09C0              xjmp L269
 0B3E           L266:
 0B3E                   .dbline 656
 0B3E           L267:
 0B3E                   .dbline 656
 0B3E 8091AF01          lds R24,_Tt
 0B42 9091B001          lds R25,_Tt+1
 0B46 0196              adiw R24,1
 0B48 9093B001          sts _Tt+1,R25
 0B4C 8093AF01          sts _Tt,R24
 0B50           L269:
 0B50                   .dbline 656
 0B50 8091AF01          lds R24,_Tt
 0B54 9091B001          lds R25,_Tt+1
 0B58 8A32              cpi R24,42
 0B5A E0E0              ldi R30,0
 0B5C 9E07              cpc R25,R30
 0B5E 78F3              brlo L266
 0B60           X79:
 0B60                   .dbline 657
 0B60           ;                }
 0B60           L259:
 0B60                   .dbline 651
 0B60 6395              inc R22
 0B62           L261:
 0B62                   .dbline 651
 0B62 6E31              cpi R22,30
 0B64 08F4              brsh X98
 0B66 B8CF              xjmp L258
 0B68           X98:
 0B68           X80:
 0B68                   .dbline 659
 0B68           ;  
 0B68           ;        for(c=0;c<200;c++)//150ms采用降低占空比启动电机
 0B68 4427              clr R20
 0B6A 52C0              xjmp L273
 0B6C           L270:
 0B6C                   .dbline 660
 0B6C           ;                {
 0B6C                   .dbline 661
 0B6C           ;              PWM2_L
 0B6C                   .dbline 661
 0B6C 80916100          lds R24,97
 0B70 8460              ori R24,4
 0B72 80936100          sts 97,R24
 0B76                   .dbline 661
 0B76 80916200          lds R24,98
 0B7A 8B7F              andi R24,251
 0B7C 80936200          sts 98,R24
 0B80                   .dbline 661
 0B80                   .dbline 662
 0B80           ;                  for(b=0;b<(200-c);b++)
 0B80 6627              clr R22
 0B82 0CC0              xjmp L277
 0B84           L274:
 0B84                   .dbline 663
 0B84           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0B84                   .dbline 663
 0B84 0000              nop
 0B86                   .dbline 663
 0B86 0000              nop
 0B88                   .dbline 663
 0B88 0000              nop
 0B8A                   .dbline 663
 0B8A 0000              nop
 0B8C                   .dbline 663
 0B8C 0000              nop
 0B8E                   .dbline 663
 0B8E 0000              nop
 0B90                   .dbline 663
 0B90 0000              nop
 0B92                   .dbline 663
 0B92 0000              nop
 0B94                   .dbline 663
 0B94 0000              nop
 0B96                   .dbline 663
 0B96 0000              nop
 0B98                   .dbline 663
 0B98 0000              nop
 0B9A                   .dbline 663
 0B9A           L275:
 0B9A                   .dbline 662
 0B9A 6395              inc R22
 0B9C           L277:
 0B9C                   .dbline 662
 0B9C 242E              mov R2,R20
 0B9E 3324              clr R3
 0BA0 88EC              ldi R24,200
 0BA2 90E0              ldi R25,0
 0BA4 2C01              movw R4,R24
 0BA6 4218              sub R4,R2
 0BA8 5308              sbc R5,R3
 0BAA 262E              mov R2,R22
 0BAC 3324              clr R3
 0BAE 2414              cp R2,R4
 0BB0 3504              cpc R3,R5
 0BB2 44F3              brlt L274
 0BB4           X81:
 0BB4                   .dbline 665
 0BB4           ;                       
 0BB4           ;              if(Motor2Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 0BB4 20903C02          lds R2,_Motor2Status
 0BB8 30903D02          lds R3,_Motor2Status+1
 0BBC 25FC              sbrc R2,5
 0BBE 0BC0              rjmp L278
 0BC0           X82:
 0BC0                   .dbline 666
 0BC0           ;                  {PWM2_H}
 0BC0                   .dbline 666
 0BC0                   .dbline 666
 0BC0 80916100          lds R24,97
 0BC4 8460              ori R24,4
 0BC6 80936100          sts 97,R24
 0BCA                   .dbline 666
 0BCA 80916200          lds R24,98
 0BCE 8460              ori R24,4
 0BD0 80936200          sts 98,R24
 0BD4                   .dbline 666
 0BD4                   .dbline 666
 0BD4 0AC0              xjmp L279
 0BD6           L278:
 0BD6                   .dbline 668
 0BD6           ;                  else 
 0BD6           ;                  {PWM2_L}
 0BD6                   .dbline 668
 0BD6                   .dbline 668
 0BD6 80916100          lds R24,97
 0BDA 8460              ori R24,4
 0BDC 80936100          sts 97,R24
 0BE0                   .dbline 668
 0BE0 80916200          lds R24,98
 0BE4 8B7F              andi R24,251
 0BE6 80936200          sts 98,R24
 0BEA                   .dbline 668
 0BEA                   .dbline 668
 0BEA           L279:
 0BEA                   .dbline 670
 0BEA           ;                  
 0BEA           ;              for(b=0;b<(c+50);b++)
 0BEA 6627              clr R22
 0BEC 0CC0              xjmp L283
 0BEE           L280:
 0BEE                   .dbline 671
 0BEE           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0BEE                   .dbline 671
 0BEE 0000              nop
 0BF0                   .dbline 671
 0BF0 0000              nop
 0BF2                   .dbline 671
 0BF2 0000              nop
 0BF4                   .dbline 671
 0BF4 0000              nop
 0BF6                   .dbline 671
 0BF6 0000              nop
 0BF8                   .dbline 671
 0BF8 0000              nop
 0BFA                   .dbline 671
 0BFA 0000              nop
 0BFC                   .dbline 671
 0BFC 0000              nop
 0BFE                   .dbline 671
 0BFE 0000              nop
 0C00                   .dbline 671
 0C00 0000              nop
 0C02                   .dbline 671
 0C02 0000              nop
 0C04                   .dbline 671
 0C04           L281:
 0C04                   .dbline 670
 0C04 6395              inc R22
 0C06           L283:
 0C06                   .dbline 670
 0C06 842F              mov R24,R20
 0C08 8E5C              subi R24,206    ; addi 50
 0C0A 6817              cp R22,R24
 0C0C 80F3              brlo L280
 0C0E           X83:
 0C0E                   .dbline 672
 0C0E           ;                }      
 0C0E           L271:
 0C0E                   .dbline 659
 0C0E 4395              inc R20
 0C10           L273:
 0C10                   .dbline 659
 0C10 483C              cpi R20,200
 0C12 08F4              brsh X99
 0C14 ABCF              xjmp L270
 0C16           X99:
 0C16           X84:
 0C16                   .dbline 673
 0C16           ;          }
 0C16 CDC0              xjmp L253
 0C18           L252:
 0C18                   .dbline 675
 0C18           ;          else
 0C18           ;          {
 0C18                   .dbline 676
 0C18           ;             PWM2_H       
 0C18                   .dbline 676
 0C18 80916100          lds R24,97
 0C1C 8460              ori R24,4
 0C1E 80936100          sts 97,R24
 0C22                   .dbline 676
 0C22 80916200          lds R24,98
 0C26 8460              ori R24,4
 0C28 80936200          sts 98,R24
 0C2C                   .dbline 676
 0C2C                   .dbline 677
 0C2C           ;                 BREAKE2_L 
 0C2C                   .dbline 677
 0C2C 80916100          lds R24,97
 0C30 8260              ori R24,2
 0C32 80936100          sts 97,R24
 0C36                   .dbline 677
 0C36 80916200          lds R24,98
 0C3A 8D7F              andi R24,253
 0C3C 80936200          sts 98,R24
 0C40                   .dbline 677
 0C40                   .dbline 678
 0C40           ;                 DELAY100
 0C40 2224              clr R2
 0C42 3324              clr R3
 0C44 3092B001          sts _Tt+1,R3
 0C48 2092AF01          sts _Tt,R2
 0C4C 09C0              xjmp L287
 0C4E           L284:
 0C4E                   .dbline 678
 0C4E           L285:
 0C4E                   .dbline 678
 0C4E 8091AF01          lds R24,_Tt
 0C52 9091B001          lds R25,_Tt+1
 0C56 0196              adiw R24,1
 0C58 9093B001          sts _Tt+1,R25
 0C5C 8093AF01          sts _Tt,R24
 0C60           L287:
 0C60                   .dbline 678
 0C60 8091AF01          lds R24,_Tt
 0C64 9091B001          lds R25,_Tt+1
 0C68 8A32              cpi R24,42
 0C6A E0E0              ldi R30,0
 0C6C 9E07              cpc R25,R30
 0C6E 78F3              brlo L284
 0C70           X85:
 0C70                   .dbline 679
 0C70           ;             for(b=0;b<30;b++)//6ms采用降低占空比启动电机
 0C70 6627              clr R22
 0C72 45C0              xjmp L291
 0C74           L288:
 0C74                   .dbline 680
 0C74           ;                {
 0C74                   .dbline 681
 0C74           ;                 PWM2_L
 0C74                   .dbline 681
 0C74 80916100          lds R24,97
 0C78 8460              ori R24,4
 0C7A 80936100          sts 97,R24
 0C7E                   .dbline 681
 0C7E 80916200          lds R24,98
 0C82 8B7F              andi R24,251
 0C84 80936200          sts 98,R24
 0C88                   .dbline 681
 0C88                   .dbline 682
 0C88           ;                 DELAY100
 0C88 2224              clr R2
 0C8A 3324              clr R3
 0C8C 3092B001          sts _Tt+1,R3
 0C90 2092AF01          sts _Tt,R2
 0C94 09C0              xjmp L295
 0C96           L292:
 0C96                   .dbline 682
 0C96           L293:
 0C96                   .dbline 682
 0C96 8091AF01          lds R24,_Tt
 0C9A 9091B001          lds R25,_Tt+1
 0C9E 0196              adiw R24,1
 0CA0 9093B001          sts _Tt+1,R25
 0CA4 8093AF01          sts _Tt,R24
 0CA8           L295:
 0CA8                   .dbline 682
 0CA8 8091AF01          lds R24,_Tt
 0CAC 9091B001          lds R25,_Tt+1
 0CB0 8A32              cpi R24,42
 0CB2 E0E0              ldi R30,0
 0CB4 9E07              cpc R25,R30
 0CB6 78F3              brlo L292
 0CB8           X86:
 0CB8                   .dbline 683
 0CB8           ;                 PWM2_H
 0CB8                   .dbline 683
 0CB8 80916100          lds R24,97
 0CBC 8460              ori R24,4
 0CBE 80936100          sts 97,R24
 0CC2                   .dbline 683
 0CC2 80916200          lds R24,98
 0CC6 8460              ori R24,4
 0CC8 80936200          sts 98,R24
 0CCC                   .dbline 683
 0CCC                   .dbline 684
 0CCC           ;                 DELAY100
 0CCC 2224              clr R2
 0CCE 3324              clr R3
 0CD0 3092B001          sts _Tt+1,R3
 0CD4 2092AF01          sts _Tt,R2
 0CD8 09C0              xjmp L299
 0CDA           L296:
 0CDA                   .dbline 684
 0CDA           L297:
 0CDA                   .dbline 684
 0CDA 8091AF01          lds R24,_Tt
 0CDE 9091B001          lds R25,_Tt+1
 0CE2 0196              adiw R24,1
 0CE4 9093B001          sts _Tt+1,R25
 0CE8 8093AF01          sts _Tt,R24
 0CEC           L299:
 0CEC                   .dbline 684
 0CEC 8091AF01          lds R24,_Tt
 0CF0 9091B001          lds R25,_Tt+1
 0CF4 8A32              cpi R24,42
 0CF6 E0E0              ldi R30,0
 0CF8 9E07              cpc R25,R30
 0CFA 78F3              brlo L296
 0CFC           X87:
 0CFC                   .dbline 685
 0CFC           ;                }
 0CFC           L289:
 0CFC                   .dbline 679
 0CFC 6395              inc R22
 0CFE           L291:
 0CFE                   .dbline 679
 0CFE 6E31              cpi R22,30
 0D00 08F4              brsh X100
 0D02 B8CF              xjmp L288
 0D04           X100:
 0D04           X88:
 0D04                   .dbline 687
 0D04           ;  
 0D04           ;        for(c=0;c<200;c++)//150ms采用降低占空比启动电机
 0D04 4427              clr R20
 0D06 52C0              xjmp L303
 0D08           L300:
 0D08                   .dbline 688
 0D08           ;                {
 0D08                   .dbline 689
 0D08           ;              PWM2_H
 0D08                   .dbline 689
 0D08 80916100          lds R24,97
 0D0C 8460              ori R24,4
 0D0E 80936100          sts 97,R24
 0D12                   .dbline 689
 0D12 80916200          lds R24,98
 0D16 8460              ori R24,4
 0D18 80936200          sts 98,R24
 0D1C                   .dbline 689
 0D1C                   .dbline 690
 0D1C           ;                  for(b=0;b<(200-c);b++)
 0D1C 6627              clr R22
 0D1E 0CC0              xjmp L307
 0D20           L304:
 0D20                   .dbline 691
 0D20           ;                   {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0D20                   .dbline 691
 0D20 0000              nop
 0D22                   .dbline 691
 0D22 0000              nop
 0D24                   .dbline 691
 0D24 0000              nop
 0D26                   .dbline 691
 0D26 0000              nop
 0D28                   .dbline 691
 0D28 0000              nop
 0D2A                   .dbline 691
 0D2A 0000              nop
 0D2C                   .dbline 691
 0D2C 0000              nop
 0D2E                   .dbline 691
 0D2E 0000              nop
 0D30                   .dbline 691
 0D30 0000              nop
 0D32                   .dbline 691
 0D32 0000              nop
 0D34                   .dbline 691
 0D34 0000              nop
 0D36                   .dbline 691
 0D36           L305:
 0D36                   .dbline 690
 0D36 6395              inc R22
 0D38           L307:
 0D38                   .dbline 690
 0D38 242E              mov R2,R20
 0D3A 3324              clr R3
 0D3C 88EC              ldi R24,200
 0D3E 90E0              ldi R25,0
 0D40 2C01              movw R4,R24
 0D42 4218              sub R4,R2
 0D44 5308              sbc R5,R3
 0D46 262E              mov R2,R22
 0D48 3324              clr R3
 0D4A 2414              cp R2,R4
 0D4C 3504              cpc R3,R5
 0D4E 44F3              brlt L304
 0D50           X89:
 0D50                   .dbline 693
 0D50           ;                       
 0D50           ;              if(Motor2Status.s.UnderVoltage==0)//如意启动过程中没有发生欠压，则继续启动
 0D50 20903C02          lds R2,_Motor2Status
 0D54 30903D02          lds R3,_Motor2Status+1
 0D58 25FC              sbrc R2,5
 0D5A 0BC0              rjmp L308
 0D5C           X90:
 0D5C                   .dbline 694
 0D5C           ;                  {PWM2_L}
 0D5C                   .dbline 694
 0D5C                   .dbline 694
 0D5C 80916100          lds R24,97
 0D60 8460              ori R24,4
 0D62 80936100          sts 97,R24
 0D66                   .dbline 694
 0D66 80916200          lds R24,98
 0D6A 8B7F              andi R24,251
 0D6C 80936200          sts 98,R24
 0D70                   .dbline 694
 0D70                   .dbline 694
 0D70 0AC0              xjmp L309
 0D72           L308:
 0D72                   .dbline 696
 0D72           ;                  else 
 0D72           ;                  {PWM2_H}
 0D72                   .dbline 696
 0D72                   .dbline 696
 0D72 80916100          lds R24,97
 0D76 8460              ori R24,4
 0D78 80936100          sts 97,R24
 0D7C                   .dbline 696
 0D7C 80916200          lds R24,98
 0D80 8460              ori R24,4
 0D82 80936200          sts 98,R24
 0D86                   .dbline 696
 0D86                   .dbline 696
 0D86           L309:
 0D86                   .dbline 698
 0D86           ;                  
 0D86           ;              for(b=0;b<(c+50);b++)
 0D86 6627              clr R22
 0D88 0CC0              xjmp L313
 0D8A           L310:
 0D8A                   .dbline 699
 0D8A           ;                  {asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");}
 0D8A                   .dbline 699
 0D8A 0000              nop
 0D8C                   .dbline 699
 0D8C 0000              nop
 0D8E                   .dbline 699
 0D8E 0000              nop
 0D90                   .dbline 699
 0D90 0000              nop
 0D92                   .dbline 699
 0D92 0000              nop
 0D94                   .dbline 699
 0D94 0000              nop
 0D96                   .dbline 699
 0D96 0000              nop
 0D98                   .dbline 699
 0D98 0000              nop
 0D9A                   .dbline 699
 0D9A 0000              nop
 0D9C                   .dbline 699
 0D9C 0000              nop
 0D9E                   .dbline 699
 0D9E 0000              nop
 0DA0                   .dbline 699
 0DA0           L311:
 0DA0                   .dbline 698
 0DA0 6395              inc R22
 0DA2           L313:
 0DA2                   .dbline 698
 0DA2 842F              mov R24,R20
 0DA4 8E5C              subi R24,206    ; addi 50
 0DA6 6817              cp R22,R24
 0DA8 80F3              brlo L310
 0DAA           X91:
 0DAA                   .dbline 700
 0DAA           ;                }      
 0DAA           L301:
 0DAA                   .dbline 687
 0DAA 4395              inc R20
 0DAC           L303:
 0DAC                   .dbline 687
 0DAC 483C              cpi R20,200
 0DAE 08F4              brsh X101
 0DB0 ABCF              xjmp L300
 0DB2           X101:
 0DB2           X92:
 0DB2                   .dbline 701
 0DB2           ;          }
 0DB2           L253:
 0DB2                   .dbline 702
 0DB2           ;       }
 0DB2           L250:
 0DB2           L187:
 0DB2                   .dbline -2
 0DB2           L185:
 0DB2                   .dbline 0 ; func end
 0DB2 6991              ld R22,y+
 0DB4 4991              ld R20,y+
 0DB6 0895              ret
 0DB8                   .dbsym r c 20 c
 0DB8                   .dbsym r b 22 c
 0DB8                   .dbsym r motor 16 c
 0DB8                   .dbend
 0DB8                   .dbfunc e SampleADC _SampleADC fc
 0DB8           ;           adcl -> y+0
 0DB8           ;              c -> R10
 0DB8           ;         ADdata -> R12,R13
 0DB8           ;             ch -> R10
                        .even
 0DB8           _SampleADC::
 0DB8 0E940000          xcall push_xgsetF03C
 0DBC A02E              mov R10,R16
 0DBE 2497              sbiw R28,4
 0DC0                   .dbline -1
 0DC0                   .dbline 707
 0DC0           ; }
 0DC0           ; 
 0DC0           ;    
 0DC0           ; unsigned char SampleADC(unsigned char ch)//耗时约5ms
 0DC0           ; {     unsigned char c;
 0DC0                   .dbline 711
 0DC0           ;       unsigned long adcl;
 0DC0           ;         unsigned int ADdata;
 0DC0           ; 
 0DC0           ;         ADMUX  = (0xc0+ch);//片内2.56V基准，选择单端输入通道 
 0DC0 8A2D              mov R24,R10
 0DC2 8054              subi R24,64    ; addi 192
 0DC4 87B9              out 0x7,R24
 0DC6                   .dbline 712
 0DC6           ;         ADCSRA =0xC3;//ADC使能，ADC开始转换，ADC自动触发使能（连续转换模式），8分频 
 0DC6 83EC              ldi R24,195
 0DC8 86B9              out 0x6,R24
 0DCA                   .dbline 715
 0DCA           ;    
 0DCA           ;         //第一次采样值不要
 0DCA           ;         for(ADdata=0;ADdata<100;ADdata++);
 0DCA CC24              clr R12
 0DCC DD24              clr R13
 0DCE 03C0              xjmp L318
 0DD0           L315:
 0DD0                   .dbline 715
 0DD0           L316:
 0DD0                   .dbline 715
 0DD0 C601              movw R24,R12
 0DD2 0196              adiw R24,1
 0DD4 6C01              movw R12,R24
 0DD6           L318:
 0DD6                   .dbline 715
 0DD6 C601              movw R24,R12
 0DD8 8436              cpi R24,100
 0DDA E0E0              ldi R30,0
 0DDC 9E07              cpc R25,R30
 0DDE C0F3              brlo L315
 0DE0           X102:
 0DE0           L319:
 0DE0                   .dbline 716
 0DE0           ;         while((ADCSRA&0x40)==0x40);//等待转换完成
 0DE0           L320:
 0DE0                   .dbline 716
 0DE0 86B1              in R24,0x6
 0DE2 8074              andi R24,64
 0DE4 8034              cpi R24,64
 0DE6 E1F3              breq L319
 0DE8           X103:
 0DE8                   .dbline 717
 0DE8           ;         ADdata=ADCL;
 0DE8 C4B0              in R12,0x4
 0DEA DD24              clr R13
 0DEC                   .dbline 718
 0DEC           ;         ADdata=ADCH;  
 0DEC C5B0              in R12,0x5
 0DEE DD24              clr R13
 0DF0                   .dbline 720
 0DF0           ;   
 0DF0           ;         adcl=0;
 0DF0 80E0              ldi R24,0
 0DF2 8883              std y+0,R24
 0DF4 8983              std y+1,R24
 0DF6 8A83              std y+2,R24
 0DF8 8B83              std y+3,R24
 0DFA                   .dbline 721
 0DFA           ;         for(c=0;c<32;c++)//32次值取平均
 0DFA AA24              clr R10
 0DFC 2CC0              xjmp L325
 0DFE           L322:
 0DFE                   .dbline 722
 0DFE           ;         {
 0DFE                   .dbline 723
 0DFE           ;          ADCSRA = 0xC3;//ADC使能，ADC开始转换，ADC自动触发使能（连续转换模式），8分频 
 0DFE 83EC              ldi R24,195
 0E00 86B9              out 0x6,R24
 0E02                   .dbline 724
 0E02           ;          for(ADdata=0;ADdata<100;ADdata++);
 0E02 CC24              clr R12
 0E04 DD24              clr R13
 0E06 03C0              xjmp L329
 0E08           L326:
 0E08                   .dbline 724
 0E08           L327:
 0E08                   .dbline 724
 0E08 C601              movw R24,R12
 0E0A 0196              adiw R24,1
 0E0C 6C01              movw R12,R24
 0E0E           L329:
 0E0E                   .dbline 724
 0E0E C601              movw R24,R12
 0E10 8436              cpi R24,100
 0E12 E0E0              ldi R30,0
 0E14 9E07              cpc R25,R30
 0E16 C0F3              brlo L326
 0E18           X104:
 0E18           L330:
 0E18                   .dbline 725
 0E18           ;          while((ADCSRA&0x40)==0x40);//等待转换完成    
 0E18           L331:
 0E18                   .dbline 725
 0E18 86B1              in R24,0x6
 0E1A 8074              andi R24,64
 0E1C 8034              cpi R24,64
 0E1E E1F3              breq L330
 0E20           X105:
 0E20                   .dbline 726
 0E20           ;          ADdata=ADCL;   
 0E20 C4B0              in R12,0x4
 0E22 DD24              clr R13
 0E24                   .dbline 727
 0E24           ;          ADdata|=(ADCH<<8);
 0E24 25B0              in R2,0x5
 0E26 3324              clr R3
 0E28 322C              mov R3,R2
 0E2A 2224              clr R2
 0E2C C228              or R12,R2
 0E2E D328              or R13,R3
 0E30                   .dbline 728
 0E30           ;          ADdata&=0x03ff;//10位有效转换结果
 0E30 C601              movw R24,R12
 0E32 9370              andi R25,3
 0E34 6C01              movw R12,R24
 0E36                   .dbline 729
 0E36           ;          adcl+=ADdata;
 0E36 1C01              movw R2,R24
 0E38 4424              clr R4
 0E3A 5524              clr R5
 0E3C 6880              ldd R6,y+0
 0E3E 7980              ldd R7,y+1
 0E40 8A80              ldd R8,y+2
 0E42 9B80              ldd R9,y+3
 0E44 620C              add R6,R2
 0E46 731C              adc R7,R3
 0E48 841C              adc R8,R4
 0E4A 951C              adc R9,R5
 0E4C 6882              std y+0,R6
 0E4E 7982              std y+1,R7
 0E50 8A82              std y+2,R8
 0E52 9B82              std y+3,R9
 0E54                   .dbline 730
 0E54           ;         }
 0E54           L323:
 0E54                   .dbline 721
 0E54 A394              inc R10
 0E56           L325:
 0E56                   .dbline 721
 0E56 8A2D              mov R24,R10
 0E58 8032              cpi R24,32
 0E5A 88F2              brlo L322
 0E5C           X106:
 0E5C                   .dbline 732
 0E5C           ; 
 0E5C           ;         adcl>>=7;//除以32，再除以4，相当于8位AD
 0E5C 87E0              ldi R24,7
 0E5E 90E0              ldi R25,0
 0E60 0881              ldd R16,y+0
 0E62 1981              ldd R17,y+1
 0E64 2A81              ldd R18,y+2
 0E66 3B81              ldd R19,y+3
 0E68 8A93              st -y,R24
 0E6A 0E940000          xcall lsr32
 0E6E 0883              std y+0,R16
 0E70 1983              std y+1,R17
 0E72 2A83              std y+2,R18
 0E74 3B83              std y+3,R19
 0E76                   .dbline 733
 0E76           ;         return (adcl&0x000000ff);//取8位有效位
 0E76 4FEF              ldi R20,255
 0E78 50E0              ldi R21,0
 0E7A 60E0              ldi R22,0
 0E7C 70E0              ldi R23,0
 0E7E 2880              ldd R2,y+0
 0E80 3980              ldd R3,y+1
 0E82 4A80              ldd R4,y+2
 0E84 5B80              ldd R5,y+3
 0E86 2422              and R2,R20
 0E88 3522              and R3,R21
 0E8A 4622              and R4,R22
 0E8C 5722              and R5,R23
 0E8E 022D              mov R16,R2
 0E90                   .dbline -2
 0E90           L314:
 0E90                   .dbline 0 ; func end
 0E90 2496              adiw R28,4
 0E92 0C940000          xjmp pop_xgsetF03C
 0E96                   .dbsym l adcl 0 l
 0E96                   .dbsym r c 10 c
 0E96                   .dbsym r ADdata 12 i
 0E96                   .dbsym r ch 10 c
 0E96                   .dbend
 0E96                   .dbfunc e CheckMotor _CheckMotor fV
 0E96           ;              n -> R12,R13
 0E96           ;              f -> y+0
 0E96           ;              a -> R12
 0E96           ;              t -> R10,R11
                        .even
 0E96           _CheckMotor::
 0E96 0E940000          xcall push_xgsetF03C
 0E9A 5801              movw R10,R16
 0E9C 2497              sbiw R28,4
 0E9E                   .dbline -1
 0E9E                   .dbline 737
 0E9E           ; }
 0E9E           ; 
 0E9E           ; void CheckMotor(unsigned int t)//电机不转时耗时5us，最大定时8388ms
 0E9E           ; {   
 0E9E                   .dbline 741
 0E9E           ;     float f;
 0E9E           ;       unsigned char a;
 0E9E           ;     unsigned int n;
 0E9E           ;     TCCR1B = 0x00; //stop
 0E9E 2224              clr R2
 0EA0 2EBC              out 0x2e,R2
 0EA2                   .dbline 742
 0EA2           ;       if(t>8388)
 0EA2 84EC              ldi R24,8388
 0EA4 90E2              ldi R25,32
 0EA6 8A15              cp R24,R10
 0EA8 9B05              cpc R25,R11
 0EAA 08F4              brsh L334
 0EAC           X107:
 0EAC                   .dbline 743
 0EAC           ;          t=8388;
 0EAC 5C01              movw R10,R24
 0EAE           L334:
 0EAE                   .dbline 744
 0EAE           ;       f=t;
 0EAE 8501              movw R16,R10
 0EB0 0E940000          xcall uint2fp
 0EB4 0883              std y+0,R16
 0EB6 1983              std y+1,R17
 0EB8 2A83              std y+2,R18
 0EBA 3B83              std y+3,R19
 0EBC                   .dbline 745
 0EBC           ;       f*=7.8125;
 0EBC 00E0              ldi R16,<L336
 0EBE 10E0              ldi R17,>L336
 0EC0 0E940000          xcall elpm32
 0EC4 CE01              movw R24,R28
 0EC6 9A93              st -y,R25
 0EC8 8A93              st -y,R24
 0ECA 0E940000          xcall fpmule1
 0ECE 0883              std y+0,R16
 0ED0 1983              std y+1,R17
 0ED2 2A83              std y+2,R18
 0ED4 3B83              std y+3,R19
 0ED6                   .dbline 746
 0ED6           ;       n=f;
 0ED6 0881              ldd R16,y+0
 0ED8 1981              ldd R17,y+1
 0EDA 2A81              ldd R18,y+2
 0EDC 3B81              ldd R19,y+3
 0EDE 0E940000          xcall fpint
 0EE2 6801              movw R12,R16
 0EE4                   .dbline 747
 0EE4           ;     TCNT1 = 65535-n;  
 0EE4 1601              movw R2,R12
 0EE6 4424              clr R4
 0EE8 5524              clr R5
 0EEA 4FEF              ldi R20,255
 0EEC 5FEF              ldi R21,255
 0EEE 60E0              ldi R22,0
 0EF0 70E0              ldi R23,0
 0EF2 4219              sub R20,R2
 0EF4 5309              sbc R21,R3
 0EF6 6409              sbc R22,R4
 0EF8 7509              sbc R23,R5
 0EFA 5DBD              out 0x2d,R21
 0EFC 4CBD              out 0x2c,R20
 0EFE                   .dbline 748
 0EFE           ;       TIFR|=0x04; //清定时器1中断标志 
 0EFE 86B7              in R24,0x36
 0F00 8460              ori R24,4
 0F02 86BF              out 0x36,R24
 0F04                   .dbline 749
 0F04           ;       TCCR1B = 0x05; //1024分频
 0F04 85E0              ldi R24,5
 0F06 8EBD              out 0x2e,R24
 0F08 DFC1              xjmp L338
 0F0A           L337:
 0F0A                   .dbline 752
 0F0A           ;       
 0F0A           ;     while((TIFR&0x04)==0x00)//定时中断到来前一直采样监测电流
 0F0A           ;    {   
 0F0A                   .dbline 753
 0F0A           ;     if( (Motor1Run_P) || (Motor1Run_N) )//收放电机运行时才实时检测电流，否则电流保存最后一次的测试值
 0F0A 89B3              in R24,0x19
 0F0C 8270              andi R24,2
 0F0E 8695              lsr R24
 0F10 31F4              brne L343
 0F12           X108:
 0F12 89B3              in R24,0x19
 0F14 8470              andi R24,4
 0F16 8695              lsr R24
 0F18 8695              lsr R24
 0F1A 8130              cpi R24,1
 0F1C 61F0              breq L342
 0F1E           X109:
 0F1E           L343:
 0F1E 89B3              in R24,0x19
 0F20 8270              andi R24,2
 0F22 8695              lsr R24
 0F24 8130              cpi R24,1
 0F26 09F0              breq X122
 0F28 BFC0              xjmp L340
 0F2A           X122:
 0F2A           X110:
 0F2A 89B3              in R24,0x19
 0F2C 8470              andi R24,4
 0F2E 8695              lsr R24
 0F30 8695              lsr R24
 0F32 09F0              breq X123
 0F34 B9C0              xjmp L340
 0F36           X123:
 0F36           X111:
 0F36           L342:
 0F36                   .dbline 754
 0F36           ;     {
 0F36                   .dbline 755
 0F36           ;         a=SampleADC(7);
 0F36 07E0              ldi R16,7
 0F38 3FDF              xcall _SampleADC
 0F3A C02E              mov R12,R16
 0F3C                   .dbline 757
 0F3C           ;         
 0F3C           ;       if(a>Motor1Thr)//过流关电机
 0F3C 20903902          lds R2,_Motor1Thr
 0F40 3324              clr R3
 0F42 4C2C              mov R4,R12
 0F44 5524              clr R5
 0F46 2414              cp R2,R4
 0F48 3504              cpc R3,R5
 0F4A DCF5              brge L344
 0F4C           X112:
 0F4C                   .dbline 758
 0F4C           ;       {
 0F4C                   .dbline 759
 0F4C           ;          MOTORSTOP//关电机   
 0F4C                   .dbline 759
 0F4C                   .dbline 759
 0F4C D09A              sbi 0x1a,0
 0F4E                   .dbline 759
 0F4E D89A              sbi 0x1b,0
 0F50                   .dbline 759
 0F50                   .dbline 759
 0F50                   .dbline 759
 0F50                   .dbline 759
 0F50                   .dbline 759
 0F50 80916100          lds R24,97
 0F54 8260              ori R24,2
 0F56 80936100          sts 97,R24
 0F5A                   .dbline 759
 0F5A 80916200          lds R24,98
 0F5E 8260              ori R24,2
 0F60 80936200          sts 98,R24
 0F64                   .dbline 759
 0F64                   .dbline 759
 0F64                   .dbline 759
 0F64                   .dbline 759
 0F64 BF9A              sbi 0x17,7
 0F66                   .dbline 759
 0F66 88B3              in R24,0x18
 0F68 8F77              andi R24,127
 0F6A 88BB              out 0x18,R24
 0F6C                   .dbline 759
 0F6C                   .dbline 759
 0F6C                   .dbline 759
 0F6C                   .dbline 759
 0F6C D29A              sbi 0x1a,2
 0F6E                   .dbline 759
 0F6E 8BB3              in R24,0x1b
 0F70 8B7F              andi R24,251
 0F72 8BBB              out 0x1b,R24
 0F74                   .dbline 759
 0F74                   .dbline 759
 0F74                   .dbline 759
 0F74                   .dbline 759
 0F74                   .dbline 759
 0F74 D19A              sbi 0x1a,1
 0F76                   .dbline 759
 0F76 8BB3              in R24,0x1b
 0F78 8D7F              andi R24,253
 0F7A 8BBB              out 0x1b,R24
 0F7C                   .dbline 759
 0F7C                   .dbline 759
 0F7C                   .dbline 759
 0F7C                   .dbline 759
 0F7C                   .dbline 759
 0F7C 80916100          lds R24,97
 0F80 8160              ori R24,1
 0F82 80936100          sts 97,R24
 0F86                   .dbline 759
 0F86 80916200          lds R24,98
 0F8A 8E7F              andi R24,254
 0F8C 80936200          sts 98,R24
 0F90                   .dbline 759
 0F90                   .dbline 759
 0F90                   .dbline 759
 0F90                   .dbline 759
 0F90                   .dbline 759
 0F90 80916100          lds R24,97
 0F94 8460              ori R24,4
 0F96 80936100          sts 97,R24
 0F9A                   .dbline 759
 0F9A 80916200          lds R24,98
 0F9E 8B7F              andi R24,251
 0FA0 80936200          sts 98,R24
 0FA4                   .dbline 759
 0FA4                   .dbline 759
 0FA4                   .dbline 760
 0FA4           ;        Motor1Status.s.OverCurrent=1;//过流状态置1，表示电机上次停止原因为过流停
 0FA4 80913E02          lds R24,_Motor1Status
 0FA8 90913F02          lds R25,_Motor1Status+1
 0FAC 8061              ori R24,16
 0FAE 90933F02          sts _Motor1Status+1,R25
 0FB2 80933E02          sts _Motor1Status,R24
 0FB6                   .dbline 761
 0FB6           ;          Motor1Status.s.RUN=0;//停止状态
 0FB6 8E7F              andi R24,254
 0FB8 90933F02          sts _Motor1Status+1,R25
 0FBC 80933E02          sts _Motor1Status,R24
 0FC0                   .dbline 762
 0FC0           ;         }
 0FC0 3EC0              xjmp L345
 0FC2           L344:
 0FC2                   .dbline 763
 0FC2           ;         else if(a<MotorIdelCur)//断路关电机 
 0FC2 20903602          lds R2,_MotorIdelCur
 0FC6 C214              cp R12,R2
 0FC8 D0F5              brsh L346
 0FCA           X113:
 0FCA                   .dbline 764
 0FCA           ;         {   
 0FCA                   .dbline 765
 0FCA           ;          MOTORSTOP//关电机
 0FCA                   .dbline 765
 0FCA                   .dbline 765
 0FCA D09A              sbi 0x1a,0
 0FCC                   .dbline 765
 0FCC D89A              sbi 0x1b,0
 0FCE                   .dbline 765
 0FCE                   .dbline 765
 0FCE                   .dbline 765
 0FCE                   .dbline 765
 0FCE                   .dbline 765
 0FCE 80916100          lds R24,97
 0FD2 8260              ori R24,2
 0FD4 80936100          sts 97,R24
 0FD8                   .dbline 765
 0FD8 80916200          lds R24,98
 0FDC 8260              ori R24,2
 0FDE 80936200          sts 98,R24
 0FE2                   .dbline 765
 0FE2                   .dbline 765
 0FE2                   .dbline 765
 0FE2                   .dbline 765
 0FE2 BF9A              sbi 0x17,7
 0FE4                   .dbline 765
 0FE4 88B3              in R24,0x18
 0FE6 8F77              andi R24,127
 0FE8 88BB              out 0x18,R24
 0FEA                   .dbline 765
 0FEA                   .dbline 765
 0FEA                   .dbline 765
 0FEA                   .dbline 765
 0FEA D29A              sbi 0x1a,2
 0FEC                   .dbline 765
 0FEC 8BB3              in R24,0x1b
 0FEE 8B7F              andi R24,251
 0FF0 8BBB              out 0x1b,R24
 0FF2                   .dbline 765
 0FF2                   .dbline 765
 0FF2                   .dbline 765
 0FF2                   .dbline 765
 0FF2                   .dbline 765
 0FF2 D19A              sbi 0x1a,1
 0FF4                   .dbline 765
 0FF4 8BB3              in R24,0x1b
 0FF6 8D7F              andi R24,253
 0FF8 8BBB              out 0x1b,R24
 0FFA                   .dbline 765
 0FFA                   .dbline 765
 0FFA                   .dbline 765
 0FFA                   .dbline 765
 0FFA                   .dbline 765
 0FFA 80916100          lds R24,97
 0FFE 8160              ori R24,1
 1000 80936100          sts 97,R24
 1004                   .dbline 765
 1004 80916200          lds R24,98
 1008 8E7F              andi R24,254
 100A 80936200          sts 98,R24
 100E                   .dbline 765
 100E                   .dbline 765
 100E                   .dbline 765
 100E                   .dbline 765
 100E                   .dbline 765
 100E 80916100          lds R24,97
 1012 8460              ori R24,4
 1014 80936100          sts 97,R24
 1018                   .dbline 765
 1018 80916200          lds R24,98
 101C 8B7F              andi R24,251
 101E 80936200          sts 98,R24
 1022                   .dbline 765
 1022                   .dbline 765
 1022                   .dbline 766
 1022           ;        Motor1Status.s.BrokenStop=1;//断路状态置1，表示电机上次停止原因为断路停
 1022 80913E02          lds R24,_Motor1Status
 1026 90913F02          lds R25,_Motor1Status+1
 102A 8460              ori R24,4
 102C 90933F02          sts _Motor1Status+1,R25
 1030 80933E02          sts _Motor1Status,R24
 1034                   .dbline 767
 1034           ;          Motor1Status.s.RUN=0;//停止状态
 1034 8E7F              andi R24,254
 1036 90933F02          sts _Motor1Status+1,R25
 103A 80933E02          sts _Motor1Status,R24
 103E                   .dbline 768
 103E           ;         }
 103E           L346:
 103E           L345:
 103E                   .dbline 770
 103E           ;       
 103E           ;        Motor1Status.s.RUN=1;//运行状态
 103E 80913E02          lds R24,_Motor1Status
 1042 90913F02          lds R25,_Motor1Status+1
 1046 8160              ori R24,1
 1048 90933F02          sts _Motor1Status+1,R25
 104C 80933E02          sts _Motor1Status,R24
 1050                   .dbline 772
 1050           ;        
 1050           ;        f=a;
 1050 0C2D              mov R16,R12
 1052 1127              clr R17
 1054 0E940000          xcall int2fp
 1058 0883              std y+0,R16
 105A 1983              std y+1,R17
 105C 2A83              std y+2,R18
 105E 3B83              std y+3,R19
 1060                   .dbline 773
 1060           ;        f*=1.042;
 1060 00E0              ldi R16,<L348
 1062 10E0              ldi R17,>L348
 1064 0E940000          xcall elpm32
 1068 CE01              movw R24,R28
 106A 9A93              st -y,R25
 106C 8A93              st -y,R24
 106E 0E940000          xcall fpmule1
 1072 0883              std y+0,R16
 1074 1983              std y+1,R17
 1076 2A83              std y+2,R18
 1078 3B83              std y+3,R19
 107A                   .dbline 774
 107A           ;        Motor1Status.s.ThisCurrent=f;
 107A 0881              ldd R16,y+0
 107C 1981              ldd R17,y+1
 107E 2A81              ldd R18,y+2
 1080 3B81              ldd R19,y+3
 1082 0E940000          xcall fpint
 1086 C801              movw R24,R16
 1088 9070              andi R25,0
 108A 982F              mov R25,R24
 108C 8827              clr R24
 108E 8070              andi R24,0
 1090 E0913E02          lds R30,_Motor1Status
 1094 F0913F02          lds R31,_Motor1Status+1
 1098 F070              andi R31,0
 109A E82B              or R30,R24
 109C F92B              or R31,R25
 109E F0933F02          sts _Motor1Status+1,R31
 10A2 E0933E02          sts _Motor1Status,R30
 10A6                   .dbline 775
 10A6           ;     }
 10A6 09C0              xjmp L341
 10A8           L340:
 10A8                   .dbline 777
 10A8           ;     else
 10A8           ;       {
 10A8                   .dbline 778
 10A8           ;        Motor1Status.s.RUN=0;//停止状态
 10A8 80913E02          lds R24,_Motor1Status
 10AC 90913F02          lds R25,_Motor1Status+1
 10B0 8E7F              andi R24,254
 10B2 90933F02          sts _Motor1Status+1,R25
 10B6 80933E02          sts _Motor1Status,R24
 10BA                   .dbline 779
 10BA           ;       }
 10BA           L341:
 10BA                   .dbline 780
 10BA           ;        Motor1Status.s.DIR=DIR1_PIN;
 10BA 89B3              in R24,0x19
 10BC 9927              clr R25
 10BE 8470              andi R24,4
 10C0 9070              andi R25,0
 10C2 9595              asr R25
 10C4 8795              ror R24
 10C6 9595              asr R25
 10C8 8795              ror R24
 10CA 8170              andi R24,1
 10CC 9070              andi R25,0
 10CE 880F              lsl R24
 10D0 991F              rol R25
 10D2 8270              andi R24,2
 10D4 9070              andi R25,0
 10D6 E0913E02          lds R30,_Motor1Status
 10DA F0913F02          lds R31,_Motor1Status+1
 10DE ED7F              andi R30,253
 10E0 E82B              or R30,R24
 10E2 F92B              or R31,R25
 10E4 F0933F02          sts _Motor1Status+1,R31
 10E8 E0933E02          sts _Motor1Status,R30
 10EC                   .dbline 783
 10EC           ;        
 10EC           ;                  
 10EC           ;     if( (Motor2Run_P) || (Motor2Run_N) )//调节电机运行时才实时检测电流，否则电流保存最后一次的测试值
 10EC 80B1              in R24,0x0
 10EE 8470              andi R24,4
 10F0 8695              lsr R24
 10F2 8695              lsr R24
 10F4 21F4              brne L352
 10F6           X114:
 10F6 80B1              in R24,0x0
 10F8 8170              andi R24,1
 10FA 8130              cpi R24,1
 10FC 49F0              breq L351
 10FE           X115:
 10FE           L352:
 10FE 80B1              in R24,0x0
 1100 8470              andi R24,4
 1102 8695              lsr R24
 1104 8695              lsr R24
 1106 8130              cpi R24,1
 1108 09F0              breq X124
 110A BBC0              xjmp L349
 110C           X124:
 110C           X116:
 110C 0099              sbic 0x0,0
 110E B9C0              rjmp L349
 1110           X117:
 1110           L351:
 1110                   .dbline 784
 1110           ;     {
 1110                   .dbline 785
 1110           ;        a=SampleADC(6);        
 1110 06E0              ldi R16,6
 1112 52DE              xcall _SampleADC
 1114 C02E              mov R12,R16
 1116                   .dbline 787
 1116           ;       
 1116           ;      if(a>Motor2Thr)//过流关电机
 1116 20903802          lds R2,_Motor2Thr
 111A 3324              clr R3
 111C 4C2C              mov R4,R12
 111E 5524              clr R5
 1120 2414              cp R2,R4
 1122 3504              cpc R3,R5
 1124 DCF5              brge L353
 1126           X118:
 1126                   .dbline 788
 1126           ;      {
 1126                   .dbline 789
 1126           ;          MOTORSTOP//关电机
 1126                   .dbline 789
 1126                   .dbline 789
 1126 D09A              sbi 0x1a,0
 1128                   .dbline 789
 1128 D89A              sbi 0x1b,0
 112A                   .dbline 789
 112A                   .dbline 789
 112A                   .dbline 789
 112A                   .dbline 789
 112A                   .dbline 789
 112A 80916100          lds R24,97
 112E 8260              ori R24,2
 1130 80936100          sts 97,R24
 1134                   .dbline 789
 1134 80916200          lds R24,98
 1138 8260              ori R24,2
 113A 80936200          sts 98,R24
 113E                   .dbline 789
 113E                   .dbline 789
 113E                   .dbline 789
 113E                   .dbline 789
 113E BF9A              sbi 0x17,7
 1140                   .dbline 789
 1140 88B3              in R24,0x18
 1142 8F77              andi R24,127
 1144 88BB              out 0x18,R24
 1146                   .dbline 789
 1146                   .dbline 789
 1146                   .dbline 789
 1146                   .dbline 789
 1146 D29A              sbi 0x1a,2
 1148                   .dbline 789
 1148 8BB3              in R24,0x1b
 114A 8B7F              andi R24,251
 114C 8BBB              out 0x1b,R24
 114E                   .dbline 789
 114E                   .dbline 789
 114E                   .dbline 789
 114E                   .dbline 789
 114E                   .dbline 789
 114E D19A              sbi 0x1a,1
 1150                   .dbline 789
 1150 8BB3              in R24,0x1b
 1152 8D7F              andi R24,253
 1154 8BBB              out 0x1b,R24
 1156                   .dbline 789
 1156                   .dbline 789
 1156                   .dbline 789
 1156                   .dbline 789
 1156                   .dbline 789
 1156 80916100          lds R24,97
 115A 8160              ori R24,1
 115C 80936100          sts 97,R24
 1160                   .dbline 789
 1160 80916200          lds R24,98
 1164 8E7F              andi R24,254
 1166 80936200          sts 98,R24
 116A                   .dbline 789
 116A                   .dbline 789
 116A                   .dbline 789
 116A                   .dbline 789
 116A                   .dbline 789
 116A 80916100          lds R24,97
 116E 8460              ori R24,4
 1170 80936100          sts 97,R24
 1174                   .dbline 789
 1174 80916200          lds R24,98
 1178 8B7F              andi R24,251
 117A 80936200          sts 98,R24
 117E                   .dbline 789
 117E                   .dbline 789
 117E                   .dbline 790
 117E           ;        Motor2Status.s.OverCurrent=1;//过流状态置1，表示电机上次停止原因为过流停
 117E 80913C02          lds R24,_Motor2Status
 1182 90913D02          lds R25,_Motor2Status+1
 1186 8061              ori R24,16
 1188 90933D02          sts _Motor2Status+1,R25
 118C 80933C02          sts _Motor2Status,R24
 1190                   .dbline 791
 1190           ;          Motor2Status.s.RUN=0;//停止状态
 1190 8E7F              andi R24,254
 1192 90933D02          sts _Motor2Status+1,R25
 1196 80933C02          sts _Motor2Status,R24
 119A                   .dbline 792
 119A           ;        } 
 119A 3EC0              xjmp L354
 119C           L353:
 119C                   .dbline 793
 119C           ;        else if(a<MotorIdelCur) //断路关电机，电流小于26mA认为是断路
 119C 20903602          lds R2,_MotorIdelCur
 11A0 C214              cp R12,R2
 11A2 D0F5              brsh L355
 11A4           X119:
 11A4                   .dbline 794
 11A4           ;        {
 11A4                   .dbline 795
 11A4           ;          MOTORSTOP//关电机
 11A4                   .dbline 795
 11A4                   .dbline 795
 11A4 D09A              sbi 0x1a,0
 11A6                   .dbline 795
 11A6 D89A              sbi 0x1b,0
 11A8                   .dbline 795
 11A8                   .dbline 795
 11A8                   .dbline 795
 11A8                   .dbline 795
 11A8                   .dbline 795
 11A8 80916100          lds R24,97
 11AC 8260              ori R24,2
 11AE 80936100          sts 97,R24
 11B2                   .dbline 795
 11B2 80916200          lds R24,98
 11B6 8260              ori R24,2
 11B8 80936200          sts 98,R24
 11BC                   .dbline 795
 11BC                   .dbline 795
 11BC                   .dbline 795
 11BC                   .dbline 795
 11BC BF9A              sbi 0x17,7
 11BE                   .dbline 795
 11BE 88B3              in R24,0x18
 11C0 8F77              andi R24,127
 11C2 88BB              out 0x18,R24
 11C4                   .dbline 795
 11C4                   .dbline 795
 11C4                   .dbline 795
 11C4                   .dbline 795
 11C4 D29A              sbi 0x1a,2
 11C6                   .dbline 795
 11C6 8BB3              in R24,0x1b
 11C8 8B7F              andi R24,251
 11CA 8BBB              out 0x1b,R24
 11CC                   .dbline 795
 11CC                   .dbline 795
 11CC                   .dbline 795
 11CC                   .dbline 795
 11CC                   .dbline 795
 11CC D19A              sbi 0x1a,1
 11CE                   .dbline 795
 11CE 8BB3              in R24,0x1b
 11D0 8D7F              andi R24,253
 11D2 8BBB              out 0x1b,R24
 11D4                   .dbline 795
 11D4                   .dbline 795
 11D4                   .dbline 795
 11D4                   .dbline 795
 11D4                   .dbline 795
 11D4 80916100          lds R24,97
 11D8 8160              ori R24,1
 11DA 80936100          sts 97,R24
 11DE                   .dbline 795
 11DE 80916200          lds R24,98
 11E2 8E7F              andi R24,254
 11E4 80936200          sts 98,R24
 11E8                   .dbline 795
 11E8                   .dbline 795
 11E8                   .dbline 795
 11E8                   .dbline 795
 11E8                   .dbline 795
 11E8 80916100          lds R24,97
 11EC 8460              ori R24,4
 11EE 80936100          sts 97,R24
 11F2                   .dbline 795
 11F2 80916200          lds R24,98
 11F6 8B7F              andi R24,251
 11F8 80936200          sts 98,R24
 11FC                   .dbline 795
 11FC                   .dbline 795
 11FC                   .dbline 796
 11FC           ;        Motor2Status.s.BrokenStop=1;//断路状态置1，表示电机上次停止原因为断路停
 11FC 80913C02          lds R24,_Motor2Status
 1200 90913D02          lds R25,_Motor2Status+1
 1204 8460              ori R24,4
 1206 90933D02          sts _Motor2Status+1,R25
 120A 80933C02          sts _Motor2Status,R24
 120E                   .dbline 797
 120E           ;          Motor2Status.s.RUN=0;//停止状态
 120E 8E7F              andi R24,254
 1210 90933D02          sts _Motor2Status+1,R25
 1214 80933C02          sts _Motor2Status,R24
 1218                   .dbline 798
 1218           ;        }
 1218           L355:
 1218           L354:
 1218                   .dbline 800
 1218           ;        
 1218           ;        Motor2Status.s.RUN=1;//运行状态
 1218 80913C02          lds R24,_Motor2Status
 121C 90913D02          lds R25,_Motor2Status+1
 1220 8160              ori R24,1
 1222 90933D02          sts _Motor2Status+1,R25
 1226 80933C02          sts _Motor2Status,R24
 122A                   .dbline 802
 122A           ;        
 122A           ;        f=a;
 122A 0C2D              mov R16,R12
 122C 1127              clr R17
 122E 0E940000          xcall int2fp
 1232 0883              std y+0,R16
 1234 1983              std y+1,R17
 1236 2A83              std y+2,R18
 1238 3B83              std y+3,R19
 123A                   .dbline 803
 123A           ;        f*=1.042;
 123A 00E0              ldi R16,<L348
 123C 10E0              ldi R17,>L348
 123E 0E940000          xcall elpm32
 1242 CE01              movw R24,R28
 1244 9A93              st -y,R25
 1246 8A93              st -y,R24
 1248 0E940000          xcall fpmule1
 124C 0883              std y+0,R16
 124E 1983              std y+1,R17
 1250 2A83              std y+2,R18
 1252 3B83              std y+3,R19
 1254                   .dbline 804
 1254           ;        Motor2Status.s.ThisCurrent=f;
 1254 0881              ldd R16,y+0
 1256 1981              ldd R17,y+1
 1258 2A81              ldd R18,y+2
 125A 3B81              ldd R19,y+3
 125C 0E940000          xcall fpint
 1260 C801              movw R24,R16
 1262 9070              andi R25,0
 1264 982F              mov R25,R24
 1266 8827              clr R24
 1268 8070              andi R24,0
 126A E0913C02          lds R30,_Motor2Status
 126E F0913D02          lds R31,_Motor2Status+1
 1272 F070              andi R31,0
 1274 E82B              or R30,R24
 1276 F92B              or R31,R25
 1278 F0933D02          sts _Motor2Status+1,R31
 127C E0933C02          sts _Motor2Status,R30
 1280                   .dbline 805
 1280           ;     }
 1280 09C0              xjmp L350
 1282           L349:
 1282                   .dbline 807
 1282           ;       else
 1282           ;       {
 1282                   .dbline 808
 1282           ;        Motor2Status.s.RUN=0;//停止状态
 1282 80913C02          lds R24,_Motor2Status
 1286 90913D02          lds R25,_Motor2Status+1
 128A 8E7F              andi R24,254
 128C 90933D02          sts _Motor2Status+1,R25
 1290 80933C02          sts _Motor2Status,R24
 1294                   .dbline 809
 1294           ;       }
 1294           L350:
 1294                   .dbline 810
 1294           ;      Motor2Status.s.DIR=DIR2_PIN;  
 1294 80B1              in R24,0x0
 1296 9927              clr R25
 1298 8170              andi R24,1
 129A 9070              andi R25,0
 129C 8170              andi R24,1
 129E 9070              andi R25,0
 12A0 880F              lsl R24
 12A2 991F              rol R25
 12A4 8270              andi R24,2
 12A6 9070              andi R25,0
 12A8 E0913C02          lds R30,_Motor2Status
 12AC F0913D02          lds R31,_Motor2Status+1
 12B0 ED7F              andi R30,253
 12B2 E82B              or R30,R24
 12B4 F92B              or R31,R25
 12B6 F0933D02          sts _Motor2Status+1,R31
 12BA E0933C02          sts _Motor2Status,R30
 12BE                   .dbline 812
 12BE           ;       
 12BE           ;     if(t==0){break;}//不定时则检测一次电机状态后直接跳出
 12BE AA20              tst R10
 12C0 19F4              brne L357
 12C2 BB20              tst R11
 12C4 09F4              brne L357
 12C6           X120:
 12C6                   .dbline 812
 12C6                   .dbline 812
 12C6 03C0              xjmp L339
 12C8           L357:
 12C8                   .dbline 813
 12C8           ;    } 
 12C8           L338:
 12C8                   .dbline 751
 12C8 26B6              in R2,0x36
 12CA 22FE              sbrs R2,2
 12CC 1ECE              rjmp L337
 12CE           X121:
 12CE           L339:
 12CE                   .dbline 815
 12CE           ;    
 12CE           ;    TCCR1B = 0x00; //stop
 12CE 2224              clr R2
 12D0 2EBC              out 0x2e,R2
 12D2                   .dbline -2
 12D2           L333:
 12D2                   .dbline 0 ; func end
 12D2 2496              adiw R28,4
 12D4 0C940000          xjmp pop_xgsetF03C
 12D8                   .dbsym r n 12 i
 12D8                   .dbsym l f 0 D
 12D8                   .dbsym r a 12 c
 12D8                   .dbsym r t 10 i
 12D8                   .dbend
 12D8                   .dbfunc e Start _Start fV
                        .even
 12D8           _Start::
 12D8                   .dbline -1
 12D8                   .dbline 820
 12D8           ; }
 12D8           ; 
 12D8           ; 
 12D8           ; void Start(void)
 12D8           ; {
 12D8                   .dbline 821
 12D8           ;  InitialIO();
 12D8 92D8              xcall _InitialIO
 12DA                   .dbline 822
 12DA           ;  uart0_init();
 12DA 31D9              xcall _uart0_init
 12DC                   .dbline 824
 12DC           ;  
 12DC           ;  MOTORSTOP//关电机
 12DC                   .dbline 824
 12DC                   .dbline 824
 12DC D09A              sbi 0x1a,0
 12DE                   .dbline 824
 12DE D89A              sbi 0x1b,0
 12E0                   .dbline 824
 12E0                   .dbline 824
 12E0                   .dbline 824
 12E0                   .dbline 824
 12E0                   .dbline 824
 12E0 80916100          lds R24,97
 12E4 8260              ori R24,2
 12E6 80936100          sts 97,R24
 12EA                   .dbline 824
 12EA 80916200          lds R24,98
 12EE 8260              ori R24,2
 12F0 80936200          sts 98,R24
 12F4                   .dbline 824
 12F4                   .dbline 824
 12F4                   .dbline 824
 12F4                   .dbline 824
 12F4 BF9A              sbi 0x17,7
 12F6                   .dbline 824
 12F6 88B3              in R24,0x18
 12F8 8F77              andi R24,127
 12FA 88BB              out 0x18,R24
 12FC                   .dbline 824
 12FC                   .dbline 824
 12FC                   .dbline 824
 12FC                   .dbline 824
 12FC D29A              sbi 0x1a,2
 12FE                   .dbline 824
 12FE 8BB3              in R24,0x1b
 1300 8B7F              andi R24,251
 1302 8BBB              out 0x1b,R24
 1304                   .dbline 824
 1304                   .dbline 824
 1304                   .dbline 824
 1304                   .dbline 824
 1304                   .dbline 824
 1304 D19A              sbi 0x1a,1
 1306                   .dbline 824
 1306 8BB3              in R24,0x1b
 1308 8D7F              andi R24,253
 130A 8BBB              out 0x1b,R24
 130C                   .dbline 824
 130C                   .dbline 824
 130C                   .dbline 824
 130C                   .dbline 824
 130C                   .dbline 824
 130C 80916100          lds R24,97
 1310 8160              ori R24,1
 1312 80936100          sts 97,R24
 1316                   .dbline 824
 1316 80916200          lds R24,98
 131A 8E7F              andi R24,254
 131C 80936200          sts 98,R24
 1320                   .dbline 824
 1320                   .dbline 824
 1320                   .dbline 824
 1320                   .dbline 824
 1320                   .dbline 824
 1320 80916100          lds R24,97
 1324 8460              ori R24,4
 1326 80936100          sts 97,R24
 132A                   .dbline 824
 132A 80916200          lds R24,98
 132E 8B7F              andi R24,251
 1330 80936200          sts 98,R24
 1334                   .dbline 824
 1334                   .dbline 824
 1334                   .dbline 825
 1334           ;  BREAKE1_L//放开刹车
 1334                   .dbline 825
 1334 D09A              sbi 0x1a,0
 1336                   .dbline 825
 1336 8BB3              in R24,0x1b
 1338 8E7F              andi R24,254
 133A 8BBB              out 0x1b,R24
 133C                   .dbline 825
 133C                   .dbline 826
 133C           ;  BREAKE2_L//放开刹车
 133C                   .dbline 826
 133C 80916100          lds R24,97
 1340 8260              ori R24,2
 1342 80936100          sts 97,R24
 1346                   .dbline 826
 1346 80916200          lds R24,98
 134A 8D7F              andi R24,253
 134C 80936200          sts 98,R24
 1350                   .dbline 826
 1350                   .dbline 828
 1350           ;  
 1350           ;  Motor1Status.s.RUN=0; 
 1350 80913E02          lds R24,_Motor1Status
 1354 90913F02          lds R25,_Motor1Status+1
 1358 8E7F              andi R24,254
 135A 90933F02          sts _Motor1Status+1,R25
 135E 80933E02          sts _Motor1Status,R24
 1362                   .dbline 829
 1362           ;  Motor1Status.s.DIR=DIR1_PIN;
 1362 89B3              in R24,0x19
 1364 9927              clr R25
 1366 8470              andi R24,4
 1368 9070              andi R25,0
 136A 9595              asr R25
 136C 8795              ror R24
 136E 9595              asr R25
 1370 8795              ror R24
 1372 8170              andi R24,1
 1374 9070              andi R25,0
 1376 880F              lsl R24
 1378 991F              rol R25
 137A 8270              andi R24,2
 137C 9070              andi R25,0
 137E E0913E02          lds R30,_Motor1Status
 1382 F0913F02          lds R31,_Motor1Status+1
 1386 ED7F              andi R30,253
 1388 E82B              or R30,R24
 138A F92B              or R31,R25
 138C F0933F02          sts _Motor1Status+1,R31
 1390 E0933E02          sts _Motor1Status,R30
 1394                   .dbline 830
 1394           ;  Motor1Status.s.BrokenStop=0;
 1394 CF01              movw R24,R30
 1396 8B7F              andi R24,251
 1398 90933F02          sts _Motor1Status+1,R25
 139C 80933E02          sts _Motor1Status,R24
 13A0                   .dbline 831
 13A0           ;  Motor1Status.s.CommandStop=0;
 13A0 877F              andi R24,247
 13A2 90933F02          sts _Motor1Status+1,R25
 13A6 80933E02          sts _Motor1Status,R24
 13AA                   .dbline 832
 13AA           ;  Motor1Status.s.OverCurrent=0;
 13AA 8F7E              andi R24,239
 13AC 90933F02          sts _Motor1Status+1,R25
 13B0 80933E02          sts _Motor1Status,R24
 13B4                   .dbline 833
 13B4           ;  Motor1Status.s.UnderVoltage=0;
 13B4 8F7D              andi R24,223
 13B6 90933F02          sts _Motor1Status+1,R25
 13BA 80933E02          sts _Motor1Status,R24
 13BE                   .dbline 834
 13BE           ;  Motor1Status.s.StartResult=0;
 13BE 8F73              andi R24,63
 13C0 90933F02          sts _Motor1Status+1,R25
 13C4 80933E02          sts _Motor1Status,R24
 13C8                   .dbline 835
 13C8           ;  Motor1Status.s.ThisCurrent=0;
 13C8 9070              andi R25,0
 13CA 90933F02          sts _Motor1Status+1,R25
 13CE 80933E02          sts _Motor1Status,R24
 13D2                   .dbline 837
 13D2           ;  
 13D2           ;  Motor2Status.s.RUN=0; 
 13D2 80913C02          lds R24,_Motor2Status
 13D6 90913D02          lds R25,_Motor2Status+1
 13DA 8E7F              andi R24,254
 13DC 90933D02          sts _Motor2Status+1,R25
 13E0 80933C02          sts _Motor2Status,R24
 13E4                   .dbline 838
 13E4           ;  Motor2Status.s.DIR=DIR2_PIN;
 13E4 80B1              in R24,0x0
 13E6 9927              clr R25
 13E8 8170              andi R24,1
 13EA 9070              andi R25,0
 13EC 8170              andi R24,1
 13EE 9070              andi R25,0
 13F0 880F              lsl R24
 13F2 991F              rol R25
 13F4 8270              andi R24,2
 13F6 9070              andi R25,0
 13F8 E0913C02          lds R30,_Motor2Status
 13FC F0913D02          lds R31,_Motor2Status+1
 1400 ED7F              andi R30,253
 1402 E82B              or R30,R24
 1404 F92B              or R31,R25
 1406 F0933D02          sts _Motor2Status+1,R31
 140A E0933C02          sts _Motor2Status,R30
 140E                   .dbline 839
 140E           ;  Motor2Status.s.BrokenStop=0;
 140E CF01              movw R24,R30
 1410 8B7F              andi R24,251
 1412 90933D02          sts _Motor2Status+1,R25
 1416 80933C02          sts _Motor2Status,R24
 141A                   .dbline 840
 141A           ;  Motor2Status.s.CommandStop=0;
 141A 877F              andi R24,247
 141C 90933D02          sts _Motor2Status+1,R25
 1420 80933C02          sts _Motor2Status,R24
 1424                   .dbline 841
 1424           ;  Motor2Status.s.OverCurrent=0;
 1424 8F7E              andi R24,239
 1426 90933D02          sts _Motor2Status+1,R25
 142A 80933C02          sts _Motor2Status,R24
 142E                   .dbline 842
 142E           ;  Motor2Status.s.UnderVoltage=0;
 142E 8F7D              andi R24,223
 1430 90933D02          sts _Motor2Status+1,R25
 1434 80933C02          sts _Motor2Status,R24
 1438                   .dbline 843
 1438           ;  Motor2Status.s.StartResult=0;
 1438 8F73              andi R24,63
 143A 90933D02          sts _Motor2Status+1,R25
 143E 80933C02          sts _Motor2Status,R24
 1442                   .dbline 844
 1442           ;  Motor2Status.s.ThisCurrent=0;
 1442 9070              andi R25,0
 1444 90933D02          sts _Motor2Status+1,R25
 1448 80933C02          sts _Motor2Status,R24
 144C                   .dbline 846
 144C           ;  
 144C           ;  IntFlag=0;//无接收帧中断
 144C 2224              clr R2
 144E 2092B101          sts _IntFlag,R2
 1452                   .dbline 847
 1452           ;  DataFlag=0;//无标定系数下发 
 1452 3324              clr R3
 1454 3092B401          sts _DataFlag+1,R3
 1458 2092B301          sts _DataFlag,R2
 145C                   .dbline 848
 145C           ;  coeff_len=0;
 145C 30921F00          sts _coeff_len+1,R3
 1460 20921E00          sts _coeff_len,R2
 1464                   .dbline 849
 1464           ;  coeff_count=0;//标定系数计数
 1464 30921D00          sts _coeff_count+1,R3
 1468 20921C00          sts _coeff_count,R2
 146C                   .dbline 851
 146C           ;  
 146C           ;  ACSR|=0x10;//清模拟比较器中断标志
 146C 449A              sbi 0x8,4
 146E                   .dbline 852
 146E           ;  ACSR&=0xf7;//关模拟比较器中断
 146E 88B1              in R24,0x8
 1470 877F              andi R24,247
 1472 88B9              out 0x8,R24
 1474                   .dbline 853
 1474           ;  ACSR|=0x40;//ACBG置位，模拟比较器正级接内部能隙基准1.23V
 1474 469A              sbi 0x8,6
 1476                   .dbline 854
 1476           ;  ACSR|=0x03;//开模拟比较器,AIN1连到比较器负极，0:比较器输出变化即中断，1：保留，2：下降沿中断，3:上升沿中断   
 1476 88B1              in R24,0x8
 1478 8360              ori R24,3
 147A 88B9              out 0x8,R24
 147C                   .dbline 855
 147C           ;  ACSR|=0x08;//开模拟比较器中断，任何时候都要进行欠压监测      
 147C 439A              sbi 0x8,3
 147E                   .dbline 856
 147E           ;  ACSR|=0x10;//清模拟比较器中断标志    
 147E 449A              sbi 0x8,4
 1480                   .dbline 865
 1480           ;       
 1480           ; 
 1480           ; //EIFR|=0x01;//清INT0中断标志,每位控制一个中断，可控制8个中断
 1480           ;  //EICRA|=0x0c; //INT0上升沿触发 ，每2位控制一个中断，共4个中断，0-低电平触发，1-保留，2-下降沿触发，3-上升沿触发
 1480           ;  //EIMSK|=0x01;//使能INT0中断 ,每位控制一个中断，可控制8个中断
 1480           ;  
 1480           ;  //SREG=0x80;//总中断使能
 1480           ;  
 1480           ;       EICRA|=0x03; //INT0上升沿触发 ，每2位控制一个中断，共4个中断，0-低电平触发，1-保留，2-下降沿触发，3-上升沿触发
 1480 80916A00          lds R24,106
 1484 8360              ori R24,3
 1486 80936A00          sts 106,R24
 148A                   .dbline 867
 148A           ;        
 148A           ;       MANINT_CLR
 148A                   .dbline 867
 148A 88B7              in R24,0x38
 148C 8160              ori R24,1
 148E 88BF              out 0x38,R24
 1490                   .dbline 867
 1490                   .dbline 868
 1490           ;       MANINT_EN
 1490                   .dbline 868
 1490 89B7              in R24,0x39
 1492 8160              ori R24,1
 1494 89BF              out 0x39,R24
 1496                   .dbline 868
 1496                   .dbline 870
 1496           ;       
 1496           ;       INT_EN
 1496                   .dbline 870
 1496 7894              sei
 1498                   .dbline 870
 1498                   .dbline 872
 1498           ;  
 1498           ;  M1_H
 1498 949A              sbi 0x12,4
 149A                   .dbline 873
 149A           ;  CheckMotor(50);
 149A 02E3              ldi R16,50
 149C 10E0              ldi R17,0
 149E FBDC              xcall _CheckMotor
 14A0                   .dbline 874
 14A0           ;  M1_L
 14A0 82B3              in R24,0x12
 14A2 8F7E              andi R24,239
 14A4 82BB              out 0x12,R24
 14A6                   .dbline -2
 14A6           L359:
 14A6                   .dbline 0 ; func end
 14A6 0895              ret
 14A8                   .dbend
 14A8                   .dbfunc e Gear2Thr _Gear2Thr fV
                        .even
 14A8           _Gear2Thr::
 14A8                   .dbline -1
 14A8                   .dbline 879
 14A8           ;  
 14A8           ; }
 14A8           ; 
 14A8           ; void Gear2Thr(void)
 14A8           ; {
 14A8                   .dbline 881
 14A8           ; //将电机过流档位换算为数字量，方便中断函数中进行比较运算
 14A8           ;   if(Motor1Gear<1) {Motor1Gear=1;}//堵转电流最小为1档
 14A8 80913B02          lds R24,_Motor1Gear
 14AC 8130              cpi R24,1
 14AE 18F4              brsh L361
 14B0           X125:
 14B0                   .dbline 881
 14B0                   .dbline 881
 14B0 81E0              ldi R24,1
 14B2 80933B02          sts _Motor1Gear,R24
 14B6                   .dbline 881
 14B6           L361:
 14B6                   .dbline 882
 14B6           ;   if(Motor1Gear>6) {Motor1Gear=6;}//堵转电流最大为6档
 14B6 86E0              ldi R24,6
 14B8 20903B02          lds R2,_Motor1Gear
 14BC 8215              cp R24,R2
 14BE 10F4              brsh L363
 14C0           X126:
 14C0                   .dbline 882
 14C0                   .dbline 882
 14C0 80933B02          sts _Motor1Gear,R24
 14C4                   .dbline 882
 14C4           L363:
 14C4                   .dbline 883
 14C4           ;   if(Motor2Gear<1) {Motor2Gear=6;}//堵转电流最小为1档
 14C4 80913A02          lds R24,_Motor2Gear
 14C8 8130              cpi R24,1
 14CA 18F4              brsh L365
 14CC           X127:
 14CC                   .dbline 883
 14CC                   .dbline 883
 14CC 86E0              ldi R24,6
 14CE 80933A02          sts _Motor2Gear,R24
 14D2                   .dbline 883
 14D2           L365:
 14D2                   .dbline 884
 14D2           ;   if(Motor2Gear>6) {Motor2Gear=6;}//堵转电流最大为6档
 14D2 86E0              ldi R24,6
 14D4 20903A02          lds R2,_Motor2Gear
 14D8 8215              cp R24,R2
 14DA 10F4              brsh L367
 14DC           X128:
 14DC                   .dbline 884
 14DC                   .dbline 884
 14DC 80933A02          sts _Motor2Gear,R24
 14E0                   .dbline 884
 14E0           L367:
 14E0                   .dbline 886
 14E0           ;   //第1档从100mA起步，每档差值30mA,0.96个字/1mA，第6档约250mA
 14E0           ;   Motor1Thr= 96+ (Motor1Gear-1)*29;
 14E0 10913B02          lds R17,_Motor1Gear
 14E4 0DE1              ldi R16,29
 14E6 0103              mulsu R16,R17
 14E8 802D              mov R24,R0
 14EA 8D51              subi R24,29
 14EC 805A              subi R24,160    ; addi 96
 14EE 80933902          sts _Motor1Thr,R24
 14F2                   .dbline 887
 14F2           ;   Motor2Thr= 96+ (Motor2Gear-1)*29;
 14F2 10913A02          lds R17,_Motor2Gear
 14F6 0103              mulsu R16,R17
 14F8 802D              mov R24,R0
 14FA 8D51              subi R24,29
 14FC 805A              subi R24,160    ; addi 96
 14FE 80933802          sts _Motor2Thr,R24
 1502                   .dbline 889
 1502           ;   
 1502           ;   if(MotorIdelGear<1){MotorIdelGear=1;}//电机断路电流最小1档
 1502 80913702          lds R24,_MotorIdelGear
 1506 8130              cpi R24,1
 1508 18F4              brsh L369
 150A           X129:
 150A                   .dbline 889
 150A                   .dbline 889
 150A 81E0              ldi R24,1
 150C 80933702          sts _MotorIdelGear,R24
 1510                   .dbline 889
 1510           L369:
 1510                   .dbline 890
 1510           ;   if(MotorIdelGear>6){MotorIdelGear=6;}//电机断路电流最大6档
 1510 86E0              ldi R24,6
 1512 20903702          lds R2,_MotorIdelGear
 1516 8215              cp R24,R2
 1518 10F4              brsh L371
 151A           X130:
 151A                   .dbline 890
 151A                   .dbline 890
 151A 80933702          sts _MotorIdelGear,R24
 151E                   .dbline 890
 151E           L371:
 151E                   .dbline 892
 151E           ;   //从5mA起步，最大30mA
 151E           ;   MotorIdelCur=(MotorIdelGear-1)*5+5;
 151E 10913702          lds R17,_MotorIdelGear
 1522 05E0              ldi R16,5
 1524 0103              mulsu R16,R17
 1526 802D              mov R24,R0
 1528 8550              subi R24,5
 152A 8B5F              subi R24,251    ; addi 5
 152C 80933602          sts _MotorIdelCur,R24
 1530                   .dbline -2
 1530           L360:
 1530                   .dbline 0 ; func end
 1530 0895              ret
 1532                   .dbend
 1532                   .dbfunc e main _main fV
 1532           ;             pt -> <dead>
 1532           ;             mk -> <dead>
 1532           ;             at -> <dead>
 1532           ;            add -> <dead>
 1532           ;              f -> y+5
 1532           ; TestDataBlockCount -> R14,R15
 1532           ; TestDataBlockIndex -> R10,R11
 1532           ;              i -> R10
 1532           ;              l -> y+1
 1532           ;              j -> R12,R13
                        .even
 1532           _main::
 1532 2997              sbiw R28,9
 1534                   .dbline -1
 1534                   .dbline 897
 1534           ;   
 1534           ; }
 1534           ; 
 1534           ; void main(void)
 1534           ; { 
 1534                   .dbline 904
 1534           ;   unsigned char i;
 1534           ;   unsigned int add,at,mk,pt,j;
 1534           ;   unsigned long l;
 1534           ;   unsigned int TestDataBlockIndex,TestDataBlockCount;
 1534           ;   float f;
 1534           ;  
 1534           ;       for(l=0;l<1000;l++)
 1534 80E0              ldi R24,0
 1536 8983              std y+1+0,R24
 1538 8A83              std y+1+1,R24
 153A 8B83              std y+1+2,R24
 153C 8C83              std y+1+3,R24
 153E 1BC0              xjmp L377
 1540           L374:
 1540                   .dbline 905
 1540           ;       {
 1540                   .dbline 906
 1540           ;               for(j=0;j<1000;j++);
 1540 CC24              clr R12
 1542 DD24              clr R13
 1544 03C0              xjmp L381
 1546           L378:
 1546                   .dbline 906
 1546           L379:
 1546                   .dbline 906
 1546 C601              movw R24,R12
 1548 0196              adiw R24,1
 154A 6C01              movw R12,R24
 154C           L381:
 154C                   .dbline 906
 154C C601              movw R24,R12
 154E 883E              cpi R24,232
 1550 E3E0              ldi R30,3
 1552 9E07              cpc R25,R30
 1554 C0F3              brlo L378
 1556           X131:
 1556                   .dbline 907
 1556           ;       }
 1556           L375:
 1556                   .dbline 904
 1556 41E0              ldi R20,1
 1558 50E0              ldi R21,0
 155A 60E0              ldi R22,0
 155C 70E0              ldi R23,0
 155E 2980              ldd R2,y+1
 1560 3A80              ldd R3,y+2
 1562 4B80              ldd R4,y+3
 1564 5C80              ldd R5,y+4
 1566 240E              add R2,R20
 1568 351E              adc R3,R21
 156A 461E              adc R4,R22
 156C 571E              adc R5,R23
 156E 2982              std y+1,R2
 1570 3A82              std y+2,R3
 1572 4B82              std y+3,R4
 1574 5C82              std y+4,R5
 1576           L377:
 1576                   .dbline 904
 1576 48EE              ldi R20,232
 1578 53E0              ldi R21,3
 157A 60E0              ldi R22,0
 157C 70E0              ldi R23,0
 157E 2980              ldd R2,y+1
 1580 3A80              ldd R3,y+2
 1582 4B80              ldd R4,y+3
 1584 5C80              ldd R5,y+4
 1586 2416              cp R2,R20
 1588 3506              cpc R3,R21
 158A 4606              cpc R4,R22
 158C 5706              cpc R5,R23
 158E C0F2              brlo L374
 1590           X132:
 1590                   .dbline 909
 1590           ; 
 1590           ;       Start();
 1590 A3DE              xcall _Start
 1592                   .dbline 911
 1592           ; 
 1592           ;       CheckMotor(50); 
 1592 02E3              ldi R16,50
 1594 10E0              ldi R17,0
 1596 7FDC              xcall _CheckMotor
 1598                   .dbline 913
 1598           ; 
 1598           ;       Motor1Gear=EEPROM_read(0);
 1598 0027              clr R16
 159A 1127              clr R17
 159C 0E94DC24          xcall _EEPROM_read
 15A0 00933B02          sts _Motor1Gear,R16
 15A4                   .dbline 914
 15A4           ;       Motor2Gear=EEPROM_read(1);
 15A4 01E0              ldi R16,1
 15A6 10E0              ldi R17,0
 15A8 0E94DC24          xcall _EEPROM_read
 15AC 00933A02          sts _Motor2Gear,R16
 15B0                   .dbline 915
 15B0           ;       MotorIdelCur=EEPROM_read(2);
 15B0 02E0              ldi R16,2
 15B2 10E0              ldi R17,0
 15B4 0E94DC24          xcall _EEPROM_read
 15B8 A02E              mov R10,R16
 15BA A0923602          sts _MotorIdelCur,R10
 15BE                   .dbline 916
 15BE           ;       Gear2Thr();
 15BE 74DF              xcall _Gear2Thr
 15C0                   .dbline 919
 15C0           ;   
 15C0           ;       //采集总线电压，判断是否进入存储状态  
 15C0           ;       if(SampleADC(4)<30)//Cable端的电压低于30V 
 15C0 04E0              ldi R16,4
 15C2 FADB              xcall _SampleADC
 15C4 A02E              mov R10,R16
 15C6 8A2D              mov R24,R10
 15C8 0E31              cpi R16,30
 15CA 10F0              brlo X327
 15CC 0C945320          xjmp L388
 15D0           X327:
 15D0           X133:
 15D0                   .dbline 920
 15D0           ;       {         
 15D0                   .dbline 921
 15D0           ;               UCSR0B = 0x00;
 15D0 2224              clr R2
 15D2 2AB8              out 0xa,R2
 15D4                   .dbline 922
 15D4           ;               PORTE&=0xFD;
 15D4 83B1              in R24,0x3
 15D6 8D7F              andi R24,253
 15D8 83B9              out 0x3,R24
 15DA                   .dbline 923
 15DA           ;               DDRE|=0x02;
 15DA 119A              sbi 0x2,1
 15DC                   .dbline 924
 15DC           ;               PORTE&=0xFD;     
 15DC 83B1              in R24,0x3
 15DE 8D7F              andi R24,253
 15E0 83B9              out 0x3,R24
 15E2           L384:
 15E2                   .dbline 925
 15E2           ;               while(1); 
 15E2           L385:
 15E2                   .dbline 925
 15E2 FFCF              xjmp L384
 15E4           L387:
 15E4                   .dbline 929
 15E4           ;       }
 15E4           ;            
 15E4           ;       while(1)//若Cable端为高电压，则进入正常的通讯状态
 15E4           ;       { 
 15E4                   .dbline 930
 15E4           ;               CheckMotor(0);//实时进行电机过流检测
 15E4 0027              clr R16
 15E6 1127              clr R17
 15E8 56DC              xcall _CheckMotor
 15EA                   .dbline 932
 15EA           ; 
 15EA           ;               if(IntFlag==2)//校验位错误，不上传任何响应，上位机按超时处理
 15EA 8091B101          lds R24,_IntFlag
 15EE 8230              cpi R24,2
 15F0 59F4              brne L390
 15F2           X134:
 15F2                   .dbline 933
 15F2           ;               { 
 15F2                   .dbline 934
 15F2           ;                       IntFlag=0;//无命令帧
 15F2 2224              clr R2
 15F4 2092B101          sts _IntFlag,R2
 15F8                   .dbline 935
 15F8           ;                       EIFR|=0x01;//清INT0中断标志
 15F8 88B7              in R24,0x38
 15FA 8160              ori R24,1
 15FC 88BF              out 0x38,R24
 15FE                   .dbline 936
 15FE           ;                       EIMSK|=0x01;//使能INT0中断       
 15FE 89B7              in R24,0x39
 1600 8160              ori R24,1
 1602 89BF              out 0x39,R24
 1604                   .dbline 937
 1604           ;               }
 1604 0C945320          xjmp L391
 1608           L390:
 1608                   .dbline 938
 1608           ;               else if(IntFlag==1)//接收到了正常命令帧
 1608 8091B101          lds R24,_IntFlag
 160C 8130              cpi R24,1
 160E 11F0              breq X328
 1610 0C945320          xjmp L392
 1614           X328:
 1614           X135:
 1614                   .dbline 939
 1614           ;               {
 1614                   .dbline 940
 1614           ;                       if(DataFlag)
 1614 2090B301          lds R2,_DataFlag
 1618 3090B401          lds R3,_DataFlag+1
 161C 2220              tst R2
 161E 19F4              brne X136
 1620 3320              tst R3
 1622 09F4              brne X329
 1624 BEC4              xjmp L394
 1626           X329:
 1626           X136:
 1626                   .dbline 941
 1626           ;                       {                 
 1626                   .dbline 942
 1626           ;                               coeffdata[coeff_count]=R_dat;
 1626 80E0              ldi R24,<_coeffdata
 1628 90E0              ldi R25,>_coeffdata
 162A E0911C00          lds R30,_coeff_count
 162E F0911D00          lds R31,_coeff_count+1
 1632 E80F              add R30,R24
 1634 F91F              adc R31,R25
 1636 2090CD01          lds R2,_R_dat
 163A 3090CE01          lds R3,_R_dat+1
 163E 2082              std z+0,R2
 1640                   .dbline 943
 1640           ;                               coeff_count++;    
 1640 80911C00          lds R24,_coeff_count
 1644 90911D00          lds R25,_coeff_count+1
 1648 0196              adiw R24,1
 164A 90931D00          sts _coeff_count+1,R25
 164E 80931C00          sts _coeff_count,R24
 1652                   .dbline 945
 1652           ; 
 1652           ;                               if(coeff_count==coeff_len)
 1652 20901E00          lds R2,_coeff_len
 1656 30901F00          lds R3,_coeff_len+1
 165A 8215              cp R24,R2
 165C 9305              cpc R25,R3
 165E 11F0              breq X330
 1660 0C944A20          xjmp L395
 1664           X330:
 1664           X137:
 1664                   .dbline 946
 1664           ;                               {
 1664                   .dbline 947
 1664           ;                                       if(DataFlag==1)//下发压力温度系数
 1664 8091B301          lds R24,_DataFlag
 1668 9091B401          lds R25,_DataFlag+1
 166C 8130              cpi R24,1
 166E E0E0              ldi R30,0
 1670 9E07              cpc R25,R30
 1672 09F0              breq X331
 1674 E7C0              xjmp L398
 1676           X331:
 1676           X138:
 1676                   .dbline 948
 1676           ;                                       {
 1676                   .dbline 949
 1676           ;                                               Uart0TxData[0]=0xE8;
 1676 88EE              ldi R24,232
 1678 80932100          sts _Uart0TxData,R24
 167C                   .dbline 950
 167C           ;                                               Uart0TxData[1]=0x40;
 167C 80E4              ldi R24,64
 167E 80932200          sts _Uart0TxData+1,R24
 1682                   .dbline 951
 1682           ;                                               Uart0TxData[2]=0x88;
 1682 88E8              ldi R24,136
 1684 80932300          sts _Uart0TxData+2,R24
 1688                   .dbline 952
 1688           ;                                               Uart0TxData[3]=0;//压力温度系数包0
 1688 2224              clr R2
 168A 20922400          sts _Uart0TxData+3,R2
 168E                   .dbline 953
 168E           ;                                               Uart0TxData[4]=0x21;
 168E 81E2              ldi R24,33
 1690 80932500          sts _Uart0TxData+4,R24
 1694                   .dbline 954
 1694           ;                                               Uart0TxData[5]=0x22;
 1694 82E2              ldi R24,34
 1696 80932600          sts _Uart0TxData+5,R24
 169A                   .dbline 955
 169A           ;                                               Uart0TxData[6]=0x23;
 169A 83E2              ldi R24,35
 169C 80932700          sts _Uart0TxData+6,R24
 16A0                   .dbline 956
 16A0           ;                                               Uart0TxData[7]=0x24;
 16A0 84E2              ldi R24,36
 16A2 80932800          sts _Uart0TxData+7,R24
 16A6                   .dbline 957
 16A6           ;                                               Uart0TxData[8]=0x32;     
 16A6 82E3              ldi R24,50
 16A8 80932900          sts _Uart0TxData+8,R24
 16AC                   .dbline 958
 16AC           ;                                               for(k=0;k<64;k++)
 16AC 3324              clr R3
 16AE 3092AE01          sts _k+1,R3
 16B2 2092AD01          sts _k,R2
 16B6 1AC0              xjmp L411
 16B8           L408:
 16B8                   .dbline 959
 16B8           ;                                               {
 16B8                   .dbline 960
 16B8           ;                                                       Uart0TxData[9+k]=coeffdata[k];  
 16B8 A090AD01          lds R10,_k
 16BC B090AE01          lds R11,_k+1
 16C0 80E0              ldi R24,<_coeffdata
 16C2 90E0              ldi R25,>_coeffdata
 16C4 F501              movw R30,R10
 16C6 E80F              add R30,R24
 16C8 F91F              adc R31,R25
 16CA 2080              ldd R2,z+0
 16CC 80E0              ldi R24,<_Uart0TxData
 16CE 90E0              ldi R25,>_Uart0TxData
 16D0 F501              movw R30,R10
 16D2 3996              adiw R30,9
 16D4 E80F              add R30,R24
 16D6 F91F              adc R31,R25
 16D8 2082              std z+0,R2
 16DA                   .dbline 961
 16DA           ;                                               }                
 16DA           L409:
 16DA                   .dbline 958
 16DA 8091AD01          lds R24,_k
 16DE 9091AE01          lds R25,_k+1
 16E2 0196              adiw R24,1
 16E4 9093AE01          sts _k+1,R25
 16E8 8093AD01          sts _k,R24
 16EC           L411:
 16EC                   .dbline 958
 16EC 8091AD01          lds R24,_k
 16F0 9091AE01          lds R25,_k+1
 16F4 8034              cpi R24,64
 16F6 E0E0              ldi R30,0
 16F8 9E07              cpc R25,R30
 16FA F0F2              brlo L408
 16FC           X139:
 16FC                   .dbline 962
 16FC           ;                                               SendUart0_2(74,20);//超时160ms
 16FC 24E1              ldi R18,20
 16FE 30E0              ldi R19,0
 1700 0AE4              ldi R16,74
 1702 0E944E03          xcall _SendUart0_2
 1706                   .dbline 963
 1706           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x88))
 1706 8091E301          lds R24,_Uart0RxCounter
 170A 8930              cpi R24,9
 170C B1F4              brne L412
 170E           X140:
 170E 8091E401          lds R24,_Uart0RxData
 1712 8535              cpi R24,85
 1714 91F4              brne L412
 1716           X141:
 1716 8091E501          lds R24,_Uart0RxData+1
 171A 8034              cpi R24,64
 171C 71F4              brne L412
 171E           X142:
 171E 8091E601          lds R24,_Uart0RxData+2
 1722 8838              cpi R24,136
 1724 51F4              brne L412
 1726           X143:
 1726                   .dbline 964
 1726           ;                                               {T_dat&=0xff00; }
 1726                   .dbline 964
 1726 8091CF01          lds R24,_T_dat
 172A 9091D001          lds R25,_T_dat+1
 172E 8070              andi R24,0
 1730 9093D001          sts _T_dat+1,R25
 1734 8093CF01          sts _T_dat,R24
 1738                   .dbline 964
 1738 06C0              xjmp L413
 173A           L412:
 173A                   .dbline 966
 173A           ;                                               else
 173A           ;                                               {T_dat=0x00aa; }
 173A                   .dbline 966
 173A 8AEA              ldi R24,170
 173C 90E0              ldi R25,0
 173E 9093D001          sts _T_dat+1,R25
 1742 8093CF01          sts _T_dat,R24
 1746                   .dbline 966
 1746           L413:
 1746                   .dbline 968
 1746           ; 
 1746           ;                                               Uart0TxData[0]=0xE8;
 1746 88EE              ldi R24,232
 1748 80932100          sts _Uart0TxData,R24
 174C                   .dbline 969
 174C           ;                                               Uart0TxData[1]=0x40;
 174C 80E4              ldi R24,64
 174E 80932200          sts _Uart0TxData+1,R24
 1752                   .dbline 970
 1752           ;                                               Uart0TxData[2]=0x88;
 1752 88E8              ldi R24,136
 1754 80932300          sts _Uart0TxData+2,R24
 1758                   .dbline 971
 1758           ;                                               Uart0TxData[3]=1;//压力温度系数包1
 1758 81E0              ldi R24,1
 175A 80932400          sts _Uart0TxData+3,R24
 175E                   .dbline 972
 175E           ;                                               Uart0TxData[4]=0x21;
 175E 81E2              ldi R24,33
 1760 80932500          sts _Uart0TxData+4,R24
 1764                   .dbline 973
 1764           ;                                               Uart0TxData[5]=0x22;
 1764 82E2              ldi R24,34
 1766 80932600          sts _Uart0TxData+5,R24
 176A                   .dbline 974
 176A           ;                                               Uart0TxData[6]=0x23;
 176A 83E2              ldi R24,35
 176C 80932700          sts _Uart0TxData+6,R24
 1770                   .dbline 975
 1770           ;                                               Uart0TxData[7]=0x24;
 1770 84E2              ldi R24,36
 1772 80932800          sts _Uart0TxData+7,R24
 1776                   .dbline 976
 1776           ;                                               Uart0TxData[8]=0x32;     
 1776 82E3              ldi R24,50
 1778 80932900          sts _Uart0TxData+8,R24
 177C                   .dbline 977
 177C           ;                                               for(k=0;k<64;k++)
 177C 2224              clr R2
 177E 3324              clr R3
 1780 3092AE01          sts _k+1,R3
 1784 2092AD01          sts _k,R2
 1788 1CC0              xjmp L427
 178A           L424:
 178A                   .dbline 978
 178A           ;                                               {
 178A                   .dbline 979
 178A           ;                                                       Uart0TxData[9+k]=coeffdata[k+64];  
 178A A090AD01          lds R10,_k
 178E B090AE01          lds R11,_k+1
 1792 80E0              ldi R24,<_coeffdata
 1794 90E0              ldi R25,>_coeffdata
 1796 F501              movw R30,R10
 1798 E05C              subi R30,192  ; offset = 64
 179A FF4F              sbci R31,255
 179C E80F              add R30,R24
 179E F91F              adc R31,R25
 17A0 2080              ldd R2,z+0
 17A2 80E0              ldi R24,<_Uart0TxData
 17A4 90E0              ldi R25,>_Uart0TxData
 17A6 F501              movw R30,R10
 17A8 3996              adiw R30,9
 17AA E80F              add R30,R24
 17AC F91F              adc R31,R25
 17AE 2082              std z+0,R2
 17B0                   .dbline 980
 17B0           ;                                               }                
 17B0           L425:
 17B0                   .dbline 977
 17B0 8091AD01          lds R24,_k
 17B4 9091AE01          lds R25,_k+1
 17B8 0196              adiw R24,1
 17BA 9093AE01          sts _k+1,R25
 17BE 8093AD01          sts _k,R24
 17C2           L427:
 17C2                   .dbline 977
 17C2 8091AD01          lds R24,_k
 17C6 9091AE01          lds R25,_k+1
 17CA 8034              cpi R24,64
 17CC E0E0              ldi R30,0
 17CE 9E07              cpc R25,R30
 17D0 E0F2              brlo L424
 17D2           X144:
 17D2                   .dbline 981
 17D2           ;                                               SendUart0_2(74,20);//超时160ms
 17D2 24E1              ldi R18,20
 17D4 30E0              ldi R19,0
 17D6 0AE4              ldi R16,74
 17D8 0E944E03          xcall _SendUart0_2
 17DC                   .dbline 982
 17DC           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x88))
 17DC 8091E301          lds R24,_Uart0RxCounter
 17E0 8930              cpi R24,9
 17E2 B1F4              brne L428
 17E4           X145:
 17E4 8091E401          lds R24,_Uart0RxData
 17E8 8535              cpi R24,85
 17EA 91F4              brne L428
 17EC           X146:
 17EC 8091E501          lds R24,_Uart0RxData+1
 17F0 8034              cpi R24,64
 17F2 71F4              brne L428
 17F4           X147:
 17F4 8091E601          lds R24,_Uart0RxData+2
 17F8 8838              cpi R24,136
 17FA 51F4              brne L428
 17FC           X148:
 17FC                   .dbline 983
 17FC           ;                                               {T_dat&=0x00ff; }
 17FC                   .dbline 983
 17FC 8091CF01          lds R24,_T_dat
 1800 9091D001          lds R25,_T_dat+1
 1804 9070              andi R25,0
 1806 9093D001          sts _T_dat+1,R25
 180A 8093CF01          sts _T_dat,R24
 180E                   .dbline 983
 180E 09C0              xjmp L429
 1810           L428:
 1810                   .dbline 985
 1810           ;                                               else
 1810           ;                                               {T_dat|=0x5500; }
 1810                   .dbline 985
 1810 8091CF01          lds R24,_T_dat
 1814 9091D001          lds R25,_T_dat+1
 1818 9565              ori R25,85
 181A 9093D001          sts _T_dat+1,R25
 181E 8093CF01          sts _T_dat,R24
 1822                   .dbline 985
 1822           L429:
 1822                   .dbline 987
 1822           ; 
 1822           ;                                               DataFlag=0;
 1822 2224              clr R2
 1824 3324              clr R3
 1826 3092B401          sts _DataFlag+1,R3
 182A 2092B301          sts _DataFlag,R2
 182E                   .dbline 988
 182E           ;                                               coeff_len=0;    
 182E 30921F00          sts _coeff_len+1,R3
 1832 20921E00          sts _coeff_len,R2
 1836                   .dbline 989
 1836           ;                                               T_com=0x0A;
 1836 8AE0              ldi R24,10
 1838 8093CC01          sts _T_com,R24
 183C                   .dbline 990
 183C           ;                                               SendManchester();               
 183C 0E94D120          xcall _SendManchester
 1840                   .dbline 991
 1840           ;                                       }
 1840 0C944A20          xjmp L395
 1844           L398:
 1844                   .dbline 992
 1844           ;                                       else if(DataFlag==2)//下发流量系数
 1844 8091B301          lds R24,_DataFlag
 1848 9091B401          lds R25,_DataFlag+1
 184C 8230              cpi R24,2
 184E E0E0              ldi R30,0
 1850 9E07              cpc R25,R30
 1852 09F0              breq X332
 1854 E8C0              xjmp L432
 1856           X332:
 1856           X149:
 1856                   .dbline 993
 1856           ;                                       {
 1856                   .dbline 994
 1856           ;                                               Uart0TxData[0]=0xE8;
 1856 88EE              ldi R24,232
 1858 80932100          sts _Uart0TxData,R24
 185C                   .dbline 995
 185C           ;                                               Uart0TxData[1]=0x40;
 185C 80E4              ldi R24,64
 185E 80932200          sts _Uart0TxData+1,R24
 1862                   .dbline 996
 1862           ;                                               Uart0TxData[2]=0x88;
 1862 88E8              ldi R24,136
 1864 80932300          sts _Uart0TxData+2,R24
 1868                   .dbline 997
 1868           ;                                               Uart0TxData[3]=2;//流量系数包2
 1868 82E0              ldi R24,2
 186A 80932400          sts _Uart0TxData+3,R24
 186E                   .dbline 998
 186E           ;                                               Uart0TxData[4]=0x21;
 186E 81E2              ldi R24,33
 1870 80932500          sts _Uart0TxData+4,R24
 1874                   .dbline 999
 1874           ;                                               Uart0TxData[5]=0x22;
 1874 82E2              ldi R24,34
 1876 80932600          sts _Uart0TxData+5,R24
 187A                   .dbline 1000
 187A           ;                                               Uart0TxData[6]=0x23;
 187A 83E2              ldi R24,35
 187C 80932700          sts _Uart0TxData+6,R24
 1880                   .dbline 1001
 1880           ;                                               Uart0TxData[7]=0x24;
 1880 84E2              ldi R24,36
 1882 80932800          sts _Uart0TxData+7,R24
 1886                   .dbline 1002
 1886           ;                                               Uart0TxData[8]=0x32;     
 1886 82E3              ldi R24,50
 1888 80932900          sts _Uart0TxData+8,R24
 188C                   .dbline 1003
 188C           ;                                               for(k=0;k<64;k++)
 188C 2224              clr R2
 188E 3324              clr R3
 1890 3092AE01          sts _k+1,R3
 1894 2092AD01          sts _k,R2
 1898 1AC0              xjmp L445
 189A           L442:
 189A                   .dbline 1004
 189A           ;                                               {
 189A                   .dbline 1005
 189A           ;                                                       Uart0TxData[9+k]=coeffdata[k];  
 189A A090AD01          lds R10,_k
 189E B090AE01          lds R11,_k+1
 18A2 80E0              ldi R24,<_coeffdata
 18A4 90E0              ldi R25,>_coeffdata
 18A6 F501              movw R30,R10
 18A8 E80F              add R30,R24
 18AA F91F              adc R31,R25
 18AC 2080              ldd R2,z+0
 18AE 80E0              ldi R24,<_Uart0TxData
 18B0 90E0              ldi R25,>_Uart0TxData
 18B2 F501              movw R30,R10
 18B4 3996              adiw R30,9
 18B6 E80F              add R30,R24
 18B8 F91F              adc R31,R25
 18BA 2082              std z+0,R2
 18BC                   .dbline 1006
 18BC           ;                                               }                
 18BC           L443:
 18BC                   .dbline 1003
 18BC 8091AD01          lds R24,_k
 18C0 9091AE01          lds R25,_k+1
 18C4 0196              adiw R24,1
 18C6 9093AE01          sts _k+1,R25
 18CA 8093AD01          sts _k,R24
 18CE           L445:
 18CE                   .dbline 1003
 18CE 8091AD01          lds R24,_k
 18D2 9091AE01          lds R25,_k+1
 18D6 8034              cpi R24,64
 18D8 E0E0              ldi R30,0
 18DA 9E07              cpc R25,R30
 18DC F0F2              brlo L442
 18DE           X150:
 18DE                   .dbline 1007
 18DE           ;                                               SendUart0_2(74,20);//超时160ms
 18DE 24E1              ldi R18,20
 18E0 30E0              ldi R19,0
 18E2 0AE4              ldi R16,74
 18E4 0E944E03          xcall _SendUart0_2
 18E8                   .dbline 1008
 18E8           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x88))
 18E8 8091E301          lds R24,_Uart0RxCounter
 18EC 8930              cpi R24,9
 18EE B1F4              brne L446
 18F0           X151:
 18F0 8091E401          lds R24,_Uart0RxData
 18F4 8535              cpi R24,85
 18F6 91F4              brne L446
 18F8           X152:
 18F8 8091E501          lds R24,_Uart0RxData+1
 18FC 8034              cpi R24,64
 18FE 71F4              brne L446
 1900           X153:
 1900 8091E601          lds R24,_Uart0RxData+2
 1904 8838              cpi R24,136
 1906 51F4              brne L446
 1908           X154:
 1908                   .dbline 1009
 1908           ;                                               {T_dat&=0xff00; }
 1908                   .dbline 1009
 1908 8091CF01          lds R24,_T_dat
 190C 9091D001          lds R25,_T_dat+1
 1910 8070              andi R24,0
 1912 9093D001          sts _T_dat+1,R25
 1916 8093CF01          sts _T_dat,R24
 191A                   .dbline 1009
 191A 06C0              xjmp L447
 191C           L446:
 191C                   .dbline 1011
 191C           ;                                               else
 191C           ;                                               {T_dat=0x00aa; }
 191C                   .dbline 1011
 191C 8AEA              ldi R24,170
 191E 90E0              ldi R25,0
 1920 9093D001          sts _T_dat+1,R25
 1924 8093CF01          sts _T_dat,R24
 1928                   .dbline 1011
 1928           L447:
 1928                   .dbline 1013
 1928           ; 
 1928           ;                                               Uart0TxData[0]=0xE8;
 1928 88EE              ldi R24,232
 192A 80932100          sts _Uart0TxData,R24
 192E                   .dbline 1014
 192E           ;                                               Uart0TxData[1]=0x40;
 192E 80E4              ldi R24,64
 1930 80932200          sts _Uart0TxData+1,R24
 1934                   .dbline 1015
 1934           ;                                               Uart0TxData[2]=0x88;
 1934 88E8              ldi R24,136
 1936 80932300          sts _Uart0TxData+2,R24
 193A                   .dbline 1016
 193A           ;                                               Uart0TxData[3]=3;//流量系数包3
 193A 83E0              ldi R24,3
 193C 80932400          sts _Uart0TxData+3,R24
 1940                   .dbline 1017
 1940           ;                                               Uart0TxData[4]=0x21;
 1940 81E2              ldi R24,33
 1942 80932500          sts _Uart0TxData+4,R24
 1946                   .dbline 1018
 1946           ;                                               Uart0TxData[5]=0x22;
 1946 82E2              ldi R24,34
 1948 80932600          sts _Uart0TxData+5,R24
 194C                   .dbline 1019
 194C           ;                                               Uart0TxData[6]=0x23;
 194C 83E2              ldi R24,35
 194E 80932700          sts _Uart0TxData+6,R24
 1952                   .dbline 1020
 1952           ;                                               Uart0TxData[7]=0x24;
 1952 84E2              ldi R24,36
 1954 80932800          sts _Uart0TxData+7,R24
 1958                   .dbline 1021
 1958           ;                                               Uart0TxData[8]=0x32;     
 1958 82E3              ldi R24,50
 195A 80932900          sts _Uart0TxData+8,R24
 195E                   .dbline 1022
 195E           ;                                               for(k=0;k<64;k++)
 195E 2224              clr R2
 1960 3324              clr R3
 1962 3092AE01          sts _k+1,R3
 1966 2092AD01          sts _k,R2
 196A 1CC0              xjmp L461
 196C           L458:
 196C                   .dbline 1023
 196C           ;                                               {
 196C                   .dbline 1024
 196C           ;                                                       Uart0TxData[9+k]=coeffdata[k+64];  
 196C A090AD01          lds R10,_k
 1970 B090AE01          lds R11,_k+1
 1974 80E0              ldi R24,<_coeffdata
 1976 90E0              ldi R25,>_coeffdata
 1978 F501              movw R30,R10
 197A E05C              subi R30,192  ; offset = 64
 197C FF4F              sbci R31,255
 197E E80F              add R30,R24
 1980 F91F              adc R31,R25
 1982 2080              ldd R2,z+0
 1984 80E0              ldi R24,<_Uart0TxData
 1986 90E0              ldi R25,>_Uart0TxData
 1988 F501              movw R30,R10
 198A 3996              adiw R30,9
 198C E80F              add R30,R24
 198E F91F              adc R31,R25
 1990 2082              std z+0,R2
 1992                   .dbline 1025
 1992           ;                                               }                
 1992           L459:
 1992                   .dbline 1022
 1992 8091AD01          lds R24,_k
 1996 9091AE01          lds R25,_k+1
 199A 0196              adiw R24,1
 199C 9093AE01          sts _k+1,R25
 19A0 8093AD01          sts _k,R24
 19A4           L461:
 19A4                   .dbline 1022
 19A4 8091AD01          lds R24,_k
 19A8 9091AE01          lds R25,_k+1
 19AC 8034              cpi R24,64
 19AE E0E0              ldi R30,0
 19B0 9E07              cpc R25,R30
 19B2 E0F2              brlo L458
 19B4           X155:
 19B4                   .dbline 1026
 19B4           ;                                               SendUart0_2(74,20);//超时160ms
 19B4 24E1              ldi R18,20
 19B6 30E0              ldi R19,0
 19B8 0AE4              ldi R16,74
 19BA 0E944E03          xcall _SendUart0_2
 19BE                   .dbline 1027
 19BE           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x88))
 19BE 8091E301          lds R24,_Uart0RxCounter
 19C2 8930              cpi R24,9
 19C4 B1F4              brne L462
 19C6           X156:
 19C6 8091E401          lds R24,_Uart0RxData
 19CA 8535              cpi R24,85
 19CC 91F4              brne L462
 19CE           X157:
 19CE 8091E501          lds R24,_Uart0RxData+1
 19D2 8034              cpi R24,64
 19D4 71F4              brne L462
 19D6           X158:
 19D6 8091E601          lds R24,_Uart0RxData+2
 19DA 8838              cpi R24,136
 19DC 51F4              brne L462
 19DE           X159:
 19DE                   .dbline 1028
 19DE           ;                                               {T_dat&=0x00ff; }
 19DE                   .dbline 1028
 19DE 8091CF01          lds R24,_T_dat
 19E2 9091D001          lds R25,_T_dat+1
 19E6 9070              andi R25,0
 19E8 9093D001          sts _T_dat+1,R25
 19EC 8093CF01          sts _T_dat,R24
 19F0                   .dbline 1028
 19F0 09C0              xjmp L463
 19F2           L462:
 19F2                   .dbline 1030
 19F2           ;                                               else
 19F2           ;                                               {T_dat|=0x5500; }
 19F2                   .dbline 1030
 19F2 8091CF01          lds R24,_T_dat
 19F6 9091D001          lds R25,_T_dat+1
 19FA 9565              ori R25,85
 19FC 9093D001          sts _T_dat+1,R25
 1A00 8093CF01          sts _T_dat,R24
 1A04                   .dbline 1030
 1A04           L463:
 1A04                   .dbline 1032
 1A04           ; 
 1A04           ;                                               DataFlag=0;
 1A04 2224              clr R2
 1A06 3324              clr R3
 1A08 3092B401          sts _DataFlag+1,R3
 1A0C 2092B301          sts _DataFlag,R2
 1A10                   .dbline 1033
 1A10           ;                                               coeff_len=0;    
 1A10 30921F00          sts _coeff_len+1,R3
 1A14 20921E00          sts _coeff_len,R2
 1A18                   .dbline 1034
 1A18           ;                                               T_com=0x0B;
 1A18 8BE0              ldi R24,11
 1A1A 8093CC01          sts _T_com,R24
 1A1E                   .dbline 1035
 1A1E           ;                                               SendManchester();               
 1A1E 0E94D120          xcall _SendManchester
 1A22                   .dbline 1036
 1A22           ;                                       }       
 1A22 0C944A20          xjmp L395
 1A26           L432:
 1A26                   .dbline 1037
 1A26           ;                                       else if(DataFlag==3)//提取测试数据
 1A26 8091B301          lds R24,_DataFlag
 1A2A 9091B401          lds R25,_DataFlag+1
 1A2E 8330              cpi R24,3
 1A30 E0E0              ldi R30,0
 1A32 9E07              cpc R25,R30
 1A34 09F0              breq X333
 1A36 A5C0              xjmp L466
 1A38           X333:
 1A38           X160:
 1A38                   .dbline 1038
 1A38           ;                                       {
 1A38                   .dbline 1039
 1A38           ;                                               DataFlag=0;
 1A38 2224              clr R2
 1A3A 3324              clr R3
 1A3C 3092B401          sts _DataFlag+1,R3
 1A40 2092B301          sts _DataFlag,R2
 1A44                   .dbline 1040
 1A44           ;                                               coeff_len=0;    
 1A44 30921F00          sts _coeff_len+1,R3
 1A48 20921E00          sts _coeff_len,R2
 1A4C                   .dbline 1041
 1A4C           ;                                               T_com=0x09;
 1A4C 89E0              ldi R24,9
 1A4E 8093CC01          sts _T_com,R24
 1A52                   .dbline 1042
 1A52           ;                                               TestDataBlockIndex=coeffdata[1];
 1A52 A0906C00          lds R10,_coeffdata+1
 1A56 BB24              clr R11
 1A58                   .dbline 1043
 1A58           ;                                               TestDataBlockIndex<<=8;
 1A58 BA2C              mov R11,R10
 1A5A AA24              clr R10
 1A5C                   .dbline 1044
 1A5C           ;                                               TestDataBlockIndex|=coeffdata[0];//首块地址/索引
 1A5C 20906B00          lds R2,_coeffdata
 1A60 3324              clr R3
 1A62 A228              or R10,R2
 1A64 B328              or R11,R3
 1A66                   .dbline 1045
 1A66           ;                                               TestDataBlockCount=coeffdata[3];
 1A66 E0906E00          lds R14,_coeffdata+3
 1A6A FF24              clr R15
 1A6C                   .dbline 1046
 1A6C           ;                                               TestDataBlockCount<<=8;
 1A6C FE2C              mov R15,R14
 1A6E EE24              clr R14
 1A70                   .dbline 1047
 1A70           ;                                               TestDataBlockCount|=coeffdata[2];//需提取的总包数，每包64字节，每块4096字节共64包
 1A70 20906D00          lds R2,_coeffdata+2
 1A74 3324              clr R3
 1A76 E228              or R14,R2
 1A78 F328              or R15,R3
 1A7A                   .dbline 1049
 1A7A           ; 
 1A7A           ;                                               for(k=0;k<TestDataBlockCount;k++)//按用户要求分包进行上传，每包64字节传32帧
 1A7A 2224              clr R2
 1A7C 3092AE01          sts _k+1,R3
 1A80 2092AD01          sts _k,R2
 1A84 74C0              xjmp L474
 1A86           L471:
 1A86                   .dbline 1050
 1A86           ;                                               {
 1A86                   .dbline 1051
 1A86           ;                                                       Uart0TxData[0]=0xE8;
 1A86 88EE              ldi R24,232
 1A88 80932100          sts _Uart0TxData,R24
 1A8C                   .dbline 1052
 1A8C           ;                                                       Uart0TxData[1]=0x40;
 1A8C 80E4              ldi R24,64
 1A8E 80932200          sts _Uart0TxData+1,R24
 1A92                   .dbline 1053
 1A92           ;                                                       Uart0TxData[2]=0x9A;//读测试数据
 1A92 8AE9              ldi R24,154
 1A94 80932300          sts _Uart0TxData+2,R24
 1A98                   .dbline 1054
 1A98           ;                                                       Uart0TxData[3]=8;
 1A98 88E0              ldi R24,8
 1A9A 80932400          sts _Uart0TxData+3,R24
 1A9E                   .dbline 1057
 1A9E           ; 
 1A9E           ;                                                       //统一块索引
 1A9E           ;                                                       Uart0TxData[4]=(k);     
 1A9E 2090AD01          lds R2,_k
 1AA2 3090AE01          lds R3,_k+1
 1AA6 20922500          sts _Uart0TxData+4,R2
 1AAA                   .dbline 1058
 1AAA           ;                                                       Uart0TxData[5]=(k>>8);  //包索引        
 1AAA 232C              mov R2,R3
 1AAC 3324              clr R3
 1AAE 20922600          sts _Uart0TxData+5,R2
 1AB2                   .dbline 1059
 1AB2           ;                                                       Uart0TxData[6]=(TestDataBlockIndex);
 1AB2 A0922700          sts _Uart0TxData+6,R10
 1AB6                   .dbline 1060
 1AB6           ;                                                       Uart0TxData[7]=(TestDataBlockIndex>>8);//首块索引
 1AB6 1501              movw R2,R10
 1AB8 232C              mov R2,R3
 1ABA 3324              clr R3
 1ABC 20922800          sts _Uart0TxData+7,R2
 1AC0                   .dbline 1070
 1AC0           ; 
 1AC0           ;                                                       /*
 1AC0           ;                                                       // 单独块索引
 1AC0           ;                                                       Uart0TxData[4]=(k%8);   
 1AC0           ;                                                       Uart0TxData[5]=0;       //包索引        
 1AC0           ;                                                       Uart0TxData[6]=(TestDataBlockIndex+k/8);
 1AC0           ;                                                       Uart0TxData[7]=((TestDataBlockIndex+k/8)>>8);//首块索引
 1AC0           ;                                                       */
 1AC0           ; 
 1AC0           ;                                                       SendUart0_2(9,6);//超时48ms
 1AC0 26E0              ldi R18,6
 1AC2 30E0              ldi R19,0
 1AC4 09E0              ldi R16,9
 1AC6 0E944E03          xcall _SendUart0_2
 1ACA                   .dbline 1071
 1ACA           ;                                                       for(bf=0;bf<32;bf++)
 1ACA 2224              clr R2
 1ACC 3324              clr R3
 1ACE 30921900          sts _bf+1,R3
 1AD2 20921800          sts _bf,R2
 1AD6 39C0              xjmp L485
 1AD8           L482:
 1AD8                   .dbline 1072
 1AD8           ;                                                       {               
 1AD8                   .dbline 1073
 1AD8           ;                                                               T_dat=Uart0RxData[bf*2+1];//高字节
 1AD8 80E0              ldi R24,<_Uart0RxData
 1ADA 90E0              ldi R25,>_Uart0RxData
 1ADC E0911800          lds R30,_bf
 1AE0 F0911900          lds R31,_bf+1
 1AE4 EE0F              lsl R30
 1AE6 FF1F              rol R31
 1AE8 3196              adiw R30,1
 1AEA E80F              add R30,R24
 1AEC F91F              adc R31,R25
 1AEE 2080              ldd R2,z+0
 1AF0 3324              clr R3
 1AF2 3092D001          sts _T_dat+1,R3
 1AF6 2092CF01          sts _T_dat,R2
 1AFA                   .dbline 1074
 1AFA           ;                                                               T_dat<<=8;
 1AFA 322C              mov R3,R2
 1AFC 2224              clr R2
 1AFE 3092D001          sts _T_dat+1,R3
 1B02 2092CF01          sts _T_dat,R2
 1B06                   .dbline 1075
 1B06           ;                                                               T_dat|=Uart0RxData[bf*2+0];//低字节
 1B06 E0911800          lds R30,_bf
 1B0A F0911900          lds R31,_bf+1
 1B0E EE0F              lsl R30
 1B10 FF1F              rol R31
 1B12 E80F              add R30,R24
 1B14 F91F              adc R31,R25
 1B16 2080              ldd R2,z+0
 1B18 3324              clr R3
 1B1A 4090CF01          lds R4,_T_dat
 1B1E 5090D001          lds R5,_T_dat+1
 1B22 4228              or R4,R2
 1B24 5328              or R5,R3
 1B26 5092D001          sts _T_dat+1,R5
 1B2A 4092CF01          sts _T_dat,R4
 1B2E                   .dbline 1076
 1B2E           ;                                                               SendManchester();       
 1B2E 0E94D120          xcall _SendManchester
 1B32                   .dbline 1077
 1B32           ;                                                               CheckMotor(10);  
 1B32 0AE0              ldi R16,10
 1B34 10E0              ldi R17,0
 1B36 AFD9              xcall _CheckMotor
 1B38                   .dbline 1078
 1B38           ;                                                       }               
 1B38           L483:
 1B38                   .dbline 1071
 1B38 80911800          lds R24,_bf
 1B3C 90911900          lds R25,_bf+1
 1B40 0196              adiw R24,1
 1B42 90931900          sts _bf+1,R25
 1B46 80931800          sts _bf,R24
 1B4A           L485:
 1B4A                   .dbline 1071
 1B4A 80911800          lds R24,_bf
 1B4E 90911900          lds R25,_bf+1
 1B52 8032              cpi R24,32
 1B54 E0E0              ldi R30,0
 1B56 9E07              cpc R25,R30
 1B58 08F4              brsh X334
 1B5A BECF              xjmp L482
 1B5C           X334:
 1B5C           X161:
 1B5C                   .dbline 1079
 1B5C           ;                                               }
 1B5C           L472:
 1B5C                   .dbline 1049
 1B5C 8091AD01          lds R24,_k
 1B60 9091AE01          lds R25,_k+1
 1B64 0196              adiw R24,1
 1B66 9093AE01          sts _k+1,R25
 1B6A 8093AD01          sts _k,R24
 1B6E           L474:
 1B6E                   .dbline 1049
 1B6E 2090AD01          lds R2,_k
 1B72 3090AE01          lds R3,_k+1
 1B76 2E14              cp R2,R14
 1B78 3F04              cpc R3,R15
 1B7A 08F4              brsh X335
 1B7C 84CF              xjmp L471
 1B7E           X335:
 1B7E           X162:
 1B7E                   .dbline 1080
 1B7E           ;                                       } 
 1B7E 0C944A20          xjmp L395
 1B82           L466:
 1B82                   .dbline 1081
 1B82           ;                                       else if(DataFlag==4)//下发仪器信息
 1B82 8091B301          lds R24,_DataFlag
 1B86 9091B401          lds R25,_DataFlag+1
 1B8A 8430              cpi R24,4
 1B8C E0E0              ldi R30,0
 1B8E 9E07              cpc R25,R30
 1B90 11F0              breq X336
 1B92 0C944A20          xjmp L395
 1B96           X336:
 1B96           X163:
 1B96                   .dbline 1082
 1B96           ;                                       {
 1B96                   .dbline 1083
 1B96           ;                                               T_dat=0x0000;
 1B96 2224              clr R2
 1B98 3324              clr R3
 1B9A 3092D001          sts _T_dat+1,R3
 1B9E 2092CF01          sts _T_dat,R2
 1BA2                   .dbline 1085
 1BA2           ; 
 1BA2           ;                                               Uart0TxData[0]=0xE8;
 1BA2 88EE              ldi R24,232
 1BA4 80932100          sts _Uart0TxData,R24
 1BA8                   .dbline 1086
 1BA8           ;                                               Uart0TxData[1]=0x40;
 1BA8 80E4              ldi R24,64
 1BAA 80932200          sts _Uart0TxData+1,R24
 1BAE                   .dbline 1087
 1BAE           ;                                               Uart0TxData[2]=0x84;
 1BAE 84E8              ldi R24,132
 1BB0 80932300          sts _Uart0TxData+2,R24
 1BB4                   .dbline 1088
 1BB4           ;                                               Uart0TxData[3]=0;//包0
 1BB4 20922400          sts _Uart0TxData+3,R2
 1BB8                   .dbline 1089
 1BB8           ;                                               Uart0TxData[4]=0x21;
 1BB8 81E2              ldi R24,33
 1BBA 80932500          sts _Uart0TxData+4,R24
 1BBE                   .dbline 1090
 1BBE           ;                                               Uart0TxData[5]=0x22;
 1BBE 82E2              ldi R24,34
 1BC0 80932600          sts _Uart0TxData+5,R24
 1BC4                   .dbline 1091
 1BC4           ;                                               Uart0TxData[6]=0x23;
 1BC4 83E2              ldi R24,35
 1BC6 80932700          sts _Uart0TxData+6,R24
 1BCA                   .dbline 1092
 1BCA           ;                                               Uart0TxData[7]=0x24;
 1BCA 84E2              ldi R24,36
 1BCC 80932800          sts _Uart0TxData+7,R24
 1BD0                   .dbline 1093
 1BD0           ;                                               Uart0TxData[8]=0x32;     
 1BD0 82E3              ldi R24,50
 1BD2 80932900          sts _Uart0TxData+8,R24
 1BD6                   .dbline 1094
 1BD6           ;                                               for(k=0;k<64;k++)
 1BD6 3092AE01          sts _k+1,R3
 1BDA 2092AD01          sts _k,R2
 1BDE 1AC0              xjmp L499
 1BE0           L496:
 1BE0                   .dbline 1095
 1BE0           ;                                               {
 1BE0                   .dbline 1096
 1BE0           ;                                                       Uart0TxData[9+k]=coeffdata[k];  
 1BE0 A090AD01          lds R10,_k
 1BE4 B090AE01          lds R11,_k+1
 1BE8 80E0              ldi R24,<_coeffdata
 1BEA 90E0              ldi R25,>_coeffdata
 1BEC F501              movw R30,R10
 1BEE E80F              add R30,R24
 1BF0 F91F              adc R31,R25
 1BF2 2080              ldd R2,z+0
 1BF4 80E0              ldi R24,<_Uart0TxData
 1BF6 90E0              ldi R25,>_Uart0TxData
 1BF8 F501              movw R30,R10
 1BFA 3996              adiw R30,9
 1BFC E80F              add R30,R24
 1BFE F91F              adc R31,R25
 1C00 2082              std z+0,R2
 1C02                   .dbline 1097
 1C02           ;                                               }                
 1C02           L497:
 1C02                   .dbline 1094
 1C02 8091AD01          lds R24,_k
 1C06 9091AE01          lds R25,_k+1
 1C0A 0196              adiw R24,1
 1C0C 9093AE01          sts _k+1,R25
 1C10 8093AD01          sts _k,R24
 1C14           L499:
 1C14                   .dbline 1094
 1C14 8091AD01          lds R24,_k
 1C18 9091AE01          lds R25,_k+1
 1C1C 8034              cpi R24,64
 1C1E E0E0              ldi R30,0
 1C20 9E07              cpc R25,R30
 1C22 F0F2              brlo L496
 1C24           X164:
 1C24                   .dbline 1098
 1C24           ;                                               SendUart0_2(74,20);//超时160ms
 1C24 24E1              ldi R18,20
 1C26 30E0              ldi R19,0
 1C28 0AE4              ldi R16,74
 1C2A 0E944E03          xcall _SendUart0_2
 1C2E                   .dbline 1099
 1C2E           ;                                               if(!((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x84)))
 1C2E 8091E301          lds R24,_Uart0RxCounter
 1C32 8930              cpi R24,9
 1C34 61F4              brne L506
 1C36           X165:
 1C36 8091E401          lds R24,_Uart0RxData
 1C3A 8535              cpi R24,85
 1C3C 41F4              brne L506
 1C3E           X166:
 1C3E 8091E501          lds R24,_Uart0RxData+1
 1C42 8034              cpi R24,64
 1C44 21F4              brne L506
 1C46           X167:
 1C46 8091E601          lds R24,_Uart0RxData+2
 1C4A 8438              cpi R24,132
 1C4C 49F0              breq L500
 1C4E           X168:
 1C4E           L506:
 1C4E                   .dbline 1100
 1C4E           ;                                               {T_dat|=0x0001; }
 1C4E                   .dbline 1100
 1C4E 8091CF01          lds R24,_T_dat
 1C52 9091D001          lds R25,_T_dat+1
 1C56 8160              ori R24,1
 1C58 9093D001          sts _T_dat+1,R25
 1C5C 8093CF01          sts _T_dat,R24
 1C60                   .dbline 1100
 1C60           L500:
 1C60                   .dbline 1102
 1C60           ; 
 1C60           ;                                               Uart0TxData[0]=0xE8;
 1C60 88EE              ldi R24,232
 1C62 80932100          sts _Uart0TxData,R24
 1C66                   .dbline 1103
 1C66           ;                                               Uart0TxData[1]=0x40;
 1C66 80E4              ldi R24,64
 1C68 80932200          sts _Uart0TxData+1,R24
 1C6C                   .dbline 1104
 1C6C           ;                                               Uart0TxData[2]=0x84;
 1C6C 84E8              ldi R24,132
 1C6E 80932300          sts _Uart0TxData+2,R24
 1C72                   .dbline 1105
 1C72           ;                                               Uart0TxData[3]=1;//包1
 1C72 81E0              ldi R24,1
 1C74 80932400          sts _Uart0TxData+3,R24
 1C78                   .dbline 1106
 1C78           ;                                               Uart0TxData[4]=0x21;
 1C78 81E2              ldi R24,33
 1C7A 80932500          sts _Uart0TxData+4,R24
 1C7E                   .dbline 1107
 1C7E           ;                                               Uart0TxData[5]=0x22;
 1C7E 82E2              ldi R24,34
 1C80 80932600          sts _Uart0TxData+5,R24
 1C84                   .dbline 1108
 1C84           ;                                               Uart0TxData[6]=0x23;
 1C84 83E2              ldi R24,35
 1C86 80932700          sts _Uart0TxData+6,R24
 1C8A                   .dbline 1109
 1C8A           ;                                               Uart0TxData[7]=0x24;
 1C8A 84E2              ldi R24,36
 1C8C 80932800          sts _Uart0TxData+7,R24
 1C90                   .dbline 1110
 1C90           ;                                               Uart0TxData[8]=0x32;     
 1C90 82E3              ldi R24,50
 1C92 80932900          sts _Uart0TxData+8,R24
 1C96                   .dbline 1111
 1C96           ;                                               for(k=0;k<64;k++)
 1C96 2224              clr R2
 1C98 3324              clr R3
 1C9A 3092AE01          sts _k+1,R3
 1C9E 2092AD01          sts _k,R2
 1CA2 1CC0              xjmp L518
 1CA4           L515:
 1CA4                   .dbline 1112
 1CA4           ;                                               {
 1CA4                   .dbline 1113
 1CA4           ;                                                       Uart0TxData[9+k]=coeffdata[k+64];  
 1CA4 A090AD01          lds R10,_k
 1CA8 B090AE01          lds R11,_k+1
 1CAC 80E0              ldi R24,<_coeffdata
 1CAE 90E0              ldi R25,>_coeffdata
 1CB0 F501              movw R30,R10
 1CB2 E05C              subi R30,192  ; offset = 64
 1CB4 FF4F              sbci R31,255
 1CB6 E80F              add R30,R24
 1CB8 F91F              adc R31,R25
 1CBA 2080              ldd R2,z+0
 1CBC 80E0              ldi R24,<_Uart0TxData
 1CBE 90E0              ldi R25,>_Uart0TxData
 1CC0 F501              movw R30,R10
 1CC2 3996              adiw R30,9
 1CC4 E80F              add R30,R24
 1CC6 F91F              adc R31,R25
 1CC8 2082              std z+0,R2
 1CCA                   .dbline 1114
 1CCA           ;                                               }                
 1CCA           L516:
 1CCA                   .dbline 1111
 1CCA 8091AD01          lds R24,_k
 1CCE 9091AE01          lds R25,_k+1
 1CD2 0196              adiw R24,1
 1CD4 9093AE01          sts _k+1,R25
 1CD8 8093AD01          sts _k,R24
 1CDC           L518:
 1CDC                   .dbline 1111
 1CDC 8091AD01          lds R24,_k
 1CE0 9091AE01          lds R25,_k+1
 1CE4 8034              cpi R24,64
 1CE6 E0E0              ldi R30,0
 1CE8 9E07              cpc R25,R30
 1CEA E0F2              brlo L515
 1CEC           X169:
 1CEC                   .dbline 1115
 1CEC           ;                                               SendUart0_2(74,20);//超时160ms
 1CEC 24E1              ldi R18,20
 1CEE 30E0              ldi R19,0
 1CF0 0AE4              ldi R16,74
 1CF2 0E944E03          xcall _SendUart0_2
 1CF6                   .dbline 1116
 1CF6           ;                                               if(!((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x84)))
 1CF6 8091E301          lds R24,_Uart0RxCounter
 1CFA 8930              cpi R24,9
 1CFC 61F4              brne L525
 1CFE           X170:
 1CFE 8091E401          lds R24,_Uart0RxData
 1D02 8535              cpi R24,85
 1D04 41F4              brne L525
 1D06           X171:
 1D06 8091E501          lds R24,_Uart0RxData+1
 1D0A 8034              cpi R24,64
 1D0C 21F4              brne L525
 1D0E           X172:
 1D0E 8091E601          lds R24,_Uart0RxData+2
 1D12 8438              cpi R24,132
 1D14 49F0              breq L519
 1D16           X173:
 1D16           L525:
 1D16                   .dbline 1117
 1D16           ;                                               {T_dat|=0x0002; }
 1D16                   .dbline 1117
 1D16 8091CF01          lds R24,_T_dat
 1D1A 9091D001          lds R25,_T_dat+1
 1D1E 8260              ori R24,2
 1D20 9093D001          sts _T_dat+1,R25
 1D24 8093CF01          sts _T_dat,R24
 1D28                   .dbline 1117
 1D28           L519:
 1D28                   .dbline 1119
 1D28           ; 
 1D28           ;                                               Uart0TxData[0]=0xE8;
 1D28 88EE              ldi R24,232
 1D2A 80932100          sts _Uart0TxData,R24
 1D2E                   .dbline 1120
 1D2E           ;                                               Uart0TxData[1]=0x40;
 1D2E 80E4              ldi R24,64
 1D30 80932200          sts _Uart0TxData+1,R24
 1D34                   .dbline 1121
 1D34           ;                                               Uart0TxData[2]=0x84;
 1D34 84E8              ldi R24,132
 1D36 80932300          sts _Uart0TxData+2,R24
 1D3A                   .dbline 1122
 1D3A           ;                                               Uart0TxData[3]=2;//包2
 1D3A 82E0              ldi R24,2
 1D3C 80932400          sts _Uart0TxData+3,R24
 1D40                   .dbline 1123
 1D40           ;                                               Uart0TxData[4]=0x21;
 1D40 81E2              ldi R24,33
 1D42 80932500          sts _Uart0TxData+4,R24
 1D46                   .dbline 1124
 1D46           ;                                               Uart0TxData[5]=0x22;
 1D46 82E2              ldi R24,34
 1D48 80932600          sts _Uart0TxData+5,R24
 1D4C                   .dbline 1125
 1D4C           ;                                               Uart0TxData[6]=0x23;
 1D4C 83E2              ldi R24,35
 1D4E 80932700          sts _Uart0TxData+6,R24
 1D52                   .dbline 1126
 1D52           ;                                               Uart0TxData[7]=0x24;
 1D52 84E2              ldi R24,36
 1D54 80932800          sts _Uart0TxData+7,R24
 1D58                   .dbline 1127
 1D58           ;                                               Uart0TxData[8]=0x32;     
 1D58 82E3              ldi R24,50
 1D5A 80932900          sts _Uart0TxData+8,R24
 1D5E                   .dbline 1128
 1D5E           ;                                               for(k=0;k<64;k++)
 1D5E 2224              clr R2
 1D60 3324              clr R3
 1D62 3092AE01          sts _k+1,R3
 1D66 2092AD01          sts _k,R2
 1D6A 1CC0              xjmp L537
 1D6C           L534:
 1D6C                   .dbline 1129
 1D6C           ;                                               {
 1D6C                   .dbline 1130
 1D6C           ;                                                       Uart0TxData[9+k]=coeffdata[k+128];  
 1D6C A090AD01          lds R10,_k
 1D70 B090AE01          lds R11,_k+1
 1D74 80E0              ldi R24,<_coeffdata
 1D76 90E0              ldi R25,>_coeffdata
 1D78 F501              movw R30,R10
 1D7A E058              subi R30,128  ; offset = 128
 1D7C FF4F              sbci R31,255
 1D7E E80F              add R30,R24
 1D80 F91F              adc R31,R25
 1D82 2080              ldd R2,z+0
 1D84 80E0              ldi R24,<_Uart0TxData
 1D86 90E0              ldi R25,>_Uart0TxData
 1D88 F501              movw R30,R10
 1D8A 3996              adiw R30,9
 1D8C E80F              add R30,R24
 1D8E F91F              adc R31,R25
 1D90 2082              std z+0,R2
 1D92                   .dbline 1131
 1D92           ;                                               }                
 1D92           L535:
 1D92                   .dbline 1128
 1D92 8091AD01          lds R24,_k
 1D96 9091AE01          lds R25,_k+1
 1D9A 0196              adiw R24,1
 1D9C 9093AE01          sts _k+1,R25
 1DA0 8093AD01          sts _k,R24
 1DA4           L537:
 1DA4                   .dbline 1128
 1DA4 8091AD01          lds R24,_k
 1DA8 9091AE01          lds R25,_k+1
 1DAC 8034              cpi R24,64
 1DAE E0E0              ldi R30,0
 1DB0 9E07              cpc R25,R30
 1DB2 E0F2              brlo L534
 1DB4           X174:
 1DB4                   .dbline 1132
 1DB4           ;                                               SendUart0_2(74,20);//超时160ms
 1DB4 24E1              ldi R18,20
 1DB6 30E0              ldi R19,0
 1DB8 0AE4              ldi R16,74
 1DBA 0E944E03          xcall _SendUart0_2
 1DBE                   .dbline 1133
 1DBE           ;                                               if(!((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x84)))
 1DBE 8091E301          lds R24,_Uart0RxCounter
 1DC2 8930              cpi R24,9
 1DC4 61F4              brne L544
 1DC6           X175:
 1DC6 8091E401          lds R24,_Uart0RxData
 1DCA 8535              cpi R24,85
 1DCC 41F4              brne L544
 1DCE           X176:
 1DCE 8091E501          lds R24,_Uart0RxData+1
 1DD2 8034              cpi R24,64
 1DD4 21F4              brne L544
 1DD6           X177:
 1DD6 8091E601          lds R24,_Uart0RxData+2
 1DDA 8438              cpi R24,132
 1DDC 49F0              breq L538
 1DDE           X178:
 1DDE           L544:
 1DDE                   .dbline 1134
 1DDE           ;                                               {T_dat|=0x0004; }
 1DDE                   .dbline 1134
 1DDE 8091CF01          lds R24,_T_dat
 1DE2 9091D001          lds R25,_T_dat+1
 1DE6 8460              ori R24,4
 1DE8 9093D001          sts _T_dat+1,R25
 1DEC 8093CF01          sts _T_dat,R24
 1DF0                   .dbline 1134
 1DF0           L538:
 1DF0                   .dbline 1136
 1DF0           ; 
 1DF0           ;                                               Uart0TxData[0]=0xE8;
 1DF0 88EE              ldi R24,232
 1DF2 80932100          sts _Uart0TxData,R24
 1DF6                   .dbline 1137
 1DF6           ;                                               Uart0TxData[1]=0x40;
 1DF6 80E4              ldi R24,64
 1DF8 80932200          sts _Uart0TxData+1,R24
 1DFC                   .dbline 1138
 1DFC           ;                                               Uart0TxData[2]=0x84;
 1DFC 84E8              ldi R24,132
 1DFE 80932300          sts _Uart0TxData+2,R24
 1E02                   .dbline 1139
 1E02           ;                                               Uart0TxData[3]=3;//包3
 1E02 83E0              ldi R24,3
 1E04 80932400          sts _Uart0TxData+3,R24
 1E08                   .dbline 1140
 1E08           ;                                               Uart0TxData[4]=0x21;
 1E08 81E2              ldi R24,33
 1E0A 80932500          sts _Uart0TxData+4,R24
 1E0E                   .dbline 1141
 1E0E           ;                                               Uart0TxData[5]=0x22;
 1E0E 82E2              ldi R24,34
 1E10 80932600          sts _Uart0TxData+5,R24
 1E14                   .dbline 1142
 1E14           ;                                               Uart0TxData[6]=0x23;
 1E14 83E2              ldi R24,35
 1E16 80932700          sts _Uart0TxData+6,R24
 1E1A                   .dbline 1143
 1E1A           ;                                               Uart0TxData[7]=0x24;
 1E1A 84E2              ldi R24,36
 1E1C 80932800          sts _Uart0TxData+7,R24
 1E20                   .dbline 1144
 1E20           ;                                               Uart0TxData[8]=0x32;     
 1E20 82E3              ldi R24,50
 1E22 80932900          sts _Uart0TxData+8,R24
 1E26                   .dbline 1145
 1E26           ;                                               for(k=0;k<64;k++)
 1E26 2224              clr R2
 1E28 3324              clr R3
 1E2A 3092AE01          sts _k+1,R3
 1E2E 2092AD01          sts _k,R2
 1E32 1CC0              xjmp L556
 1E34           L553:
 1E34                   .dbline 1146
 1E34           ;                                               {
 1E34                   .dbline 1147
 1E34           ;                                                       Uart0TxData[9+k]=coeffdata[k+192];  
 1E34 A090AD01          lds R10,_k
 1E38 B090AE01          lds R11,_k+1
 1E3C 80E0              ldi R24,<_coeffdata
 1E3E 90E0              ldi R25,>_coeffdata
 1E40 F501              movw R30,R10
 1E42 E054              subi R30,64  ; offset = 192
 1E44 FF4F              sbci R31,255
 1E46 E80F              add R30,R24
 1E48 F91F              adc R31,R25
 1E4A 2080              ldd R2,z+0
 1E4C 80E0              ldi R24,<_Uart0TxData
 1E4E 90E0              ldi R25,>_Uart0TxData
 1E50 F501              movw R30,R10
 1E52 3996              adiw R30,9
 1E54 E80F              add R30,R24
 1E56 F91F              adc R31,R25
 1E58 2082              std z+0,R2
 1E5A                   .dbline 1148
 1E5A           ;                                               }                
 1E5A           L554:
 1E5A                   .dbline 1145
 1E5A 8091AD01          lds R24,_k
 1E5E 9091AE01          lds R25,_k+1
 1E62 0196              adiw R24,1
 1E64 9093AE01          sts _k+1,R25
 1E68 8093AD01          sts _k,R24
 1E6C           L556:
 1E6C                   .dbline 1145
 1E6C 8091AD01          lds R24,_k
 1E70 9091AE01          lds R25,_k+1
 1E74 8034              cpi R24,64
 1E76 E0E0              ldi R30,0
 1E78 9E07              cpc R25,R30
 1E7A E0F2              brlo L553
 1E7C           X179:
 1E7C                   .dbline 1149
 1E7C           ;                                               SendUart0_2(74,20);//超时160ms
 1E7C 24E1              ldi R18,20
 1E7E 30E0              ldi R19,0
 1E80 0AE4              ldi R16,74
 1E82 0E944E03          xcall _SendUart0_2
 1E86                   .dbline 1150
 1E86           ;                                               if(!((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x84)))
 1E86 8091E301          lds R24,_Uart0RxCounter
 1E8A 8930              cpi R24,9
 1E8C 61F4              brne L563
 1E8E           X180:
 1E8E 8091E401          lds R24,_Uart0RxData
 1E92 8535              cpi R24,85
 1E94 41F4              brne L563
 1E96           X181:
 1E96 8091E501          lds R24,_Uart0RxData+1
 1E9A 8034              cpi R24,64
 1E9C 21F4              brne L563
 1E9E           X182:
 1E9E 8091E601          lds R24,_Uart0RxData+2
 1EA2 8438              cpi R24,132
 1EA4 49F0              breq L557
 1EA6           X183:
 1EA6           L563:
 1EA6                   .dbline 1151
 1EA6           ;                                               {T_dat|=0x0008; }
 1EA6                   .dbline 1151
 1EA6 8091CF01          lds R24,_T_dat
 1EAA 9091D001          lds R25,_T_dat+1
 1EAE 8860              ori R24,8
 1EB0 9093D001          sts _T_dat+1,R25
 1EB4 8093CF01          sts _T_dat,R24
 1EB8                   .dbline 1151
 1EB8           L557:
 1EB8                   .dbline 1153
 1EB8           ; 
 1EB8           ;                                               Uart0TxData[0]=0xE8;
 1EB8 88EE              ldi R24,232
 1EBA 80932100          sts _Uart0TxData,R24
 1EBE                   .dbline 1154
 1EBE           ;                                               Uart0TxData[1]=0x40;
 1EBE 80E4              ldi R24,64
 1EC0 80932200          sts _Uart0TxData+1,R24
 1EC4                   .dbline 1155
 1EC4           ;                                               Uart0TxData[2]=0x84;
 1EC4 84E8              ldi R24,132
 1EC6 80932300          sts _Uart0TxData+2,R24
 1ECA                   .dbline 1156
 1ECA           ;                                               Uart0TxData[3]=4;//包4
 1ECA 84E0              ldi R24,4
 1ECC 80932400          sts _Uart0TxData+3,R24
 1ED0                   .dbline 1157
 1ED0           ;                                               Uart0TxData[4]=0x21;
 1ED0 81E2              ldi R24,33
 1ED2 80932500          sts _Uart0TxData+4,R24
 1ED6                   .dbline 1158
 1ED6           ;                                               Uart0TxData[5]=0x22;
 1ED6 82E2              ldi R24,34
 1ED8 80932600          sts _Uart0TxData+5,R24
 1EDC                   .dbline 1159
 1EDC           ;                                               Uart0TxData[6]=0x23;
 1EDC 83E2              ldi R24,35
 1EDE 80932700          sts _Uart0TxData+6,R24
 1EE2                   .dbline 1160
 1EE2           ;                                               Uart0TxData[7]=0x24;
 1EE2 84E2              ldi R24,36
 1EE4 80932800          sts _Uart0TxData+7,R24
 1EE8                   .dbline 1161
 1EE8           ;                                               Uart0TxData[8]=0x32;     
 1EE8 82E3              ldi R24,50
 1EEA 80932900          sts _Uart0TxData+8,R24
 1EEE                   .dbline 1162
 1EEE           ;                                               for(k=0;k<64;k++)
 1EEE 2224              clr R2
 1EF0 3324              clr R3
 1EF2 3092AE01          sts _k+1,R3
 1EF6 2092AD01          sts _k,R2
 1EFA 1CC0              xjmp L575
 1EFC           L572:
 1EFC                   .dbline 1163
 1EFC           ;                                               {
 1EFC                   .dbline 1164
 1EFC           ;                                                       Uart0TxData[9+k]=coeffdata[k+256];  
 1EFC A090AD01          lds R10,_k
 1F00 B090AE01          lds R11,_k+1
 1F04 80E0              ldi R24,<_coeffdata
 1F06 90E0              ldi R25,>_coeffdata
 1F08 F501              movw R30,R10
 1F0A E050              subi R30,0  ; offset = 256
 1F0C FF4F              sbci R31,255
 1F0E E80F              add R30,R24
 1F10 F91F              adc R31,R25
 1F12 2080              ldd R2,z+0
 1F14 80E0              ldi R24,<_Uart0TxData
 1F16 90E0              ldi R25,>_Uart0TxData
 1F18 F501              movw R30,R10
 1F1A 3996              adiw R30,9
 1F1C E80F              add R30,R24
 1F1E F91F              adc R31,R25
 1F20 2082              std z+0,R2
 1F22                   .dbline 1165
 1F22           ;                                               }                
 1F22           L573:
 1F22                   .dbline 1162
 1F22 8091AD01          lds R24,_k
 1F26 9091AE01          lds R25,_k+1
 1F2A 0196              adiw R24,1
 1F2C 9093AE01          sts _k+1,R25
 1F30 8093AD01          sts _k,R24
 1F34           L575:
 1F34                   .dbline 1162
 1F34 8091AD01          lds R24,_k
 1F38 9091AE01          lds R25,_k+1
 1F3C 8034              cpi R24,64
 1F3E E0E0              ldi R30,0
 1F40 9E07              cpc R25,R30
 1F42 E0F2              brlo L572
 1F44           X184:
 1F44                   .dbline 1166
 1F44           ;                                               SendUart0_2(74,20);//超时160ms
 1F44 24E1              ldi R18,20
 1F46 30E0              ldi R19,0
 1F48 0AE4              ldi R16,74
 1F4A 0E944E03          xcall _SendUart0_2
 1F4E                   .dbline 1167
 1F4E           ;                                               if(!((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x84)))
 1F4E 8091E301          lds R24,_Uart0RxCounter
 1F52 8930              cpi R24,9
 1F54 61F4              brne L582
 1F56           X185:
 1F56 8091E401          lds R24,_Uart0RxData
 1F5A 8535              cpi R24,85
 1F5C 41F4              brne L582
 1F5E           X186:
 1F5E 8091E501          lds R24,_Uart0RxData+1
 1F62 8034              cpi R24,64
 1F64 21F4              brne L582
 1F66           X187:
 1F66 8091E601          lds R24,_Uart0RxData+2
 1F6A 8438              cpi R24,132
 1F6C 49F0              breq L576
 1F6E           X188:
 1F6E           L582:
 1F6E                   .dbline 1168
 1F6E           ;                                               {T_dat|=0x0010; }
 1F6E                   .dbline 1168
 1F6E 8091CF01          lds R24,_T_dat
 1F72 9091D001          lds R25,_T_dat+1
 1F76 8061              ori R24,16
 1F78 9093D001          sts _T_dat+1,R25
 1F7C 8093CF01          sts _T_dat,R24
 1F80                   .dbline 1168
 1F80           L576:
 1F80                   .dbline 1170
 1F80           ; 
 1F80           ;                                               DataFlag=0;
 1F80 2224              clr R2
 1F82 3324              clr R3
 1F84 3092B401          sts _DataFlag+1,R3
 1F88 2092B301          sts _DataFlag,R2
 1F8C                   .dbline 1171
 1F8C           ;                                               coeff_len=0;    
 1F8C 30921F00          sts _coeff_len+1,R3
 1F90 20921E00          sts _coeff_len,R2
 1F94                   .dbline 1172
 1F94           ;                                               T_com=0x0C;
 1F94 8CE0              ldi R24,12
 1F96 8093CC01          sts _T_com,R24
 1F9A                   .dbline 1173
 1F9A           ;                                               SendManchester();               
 1F9A 0E94D120          xcall _SendManchester
 1F9E                   .dbline 1174
 1F9E           ;                                       }     
 1F9E                   .dbline 1175
 1F9E           ;                               }        
 1F9E                   .dbline 1176
 1F9E           ;                       }
 1F9E 0C944A20          xjmp L395
 1FA2           L394:
 1FA2                   .dbline 1179
 1FA2           ; 
 1FA2           ;                       else//若不是下发标定系数，则进入以下各个命令的子语句
 1FA2           ;                       { 
 1FA2                   .dbline 1180
 1FA2           ;                               T_com=(R_dat>>4);
 1FA2 2090CD01          lds R2,_R_dat
 1FA6 3090CE01          lds R3,_R_dat+1
 1FAA 3594              asr R3
 1FAC 2794              ror R2
 1FAE 3594              asr R3
 1FB0 2794              ror R2
 1FB2 3594              asr R3
 1FB4 2794              ror R2
 1FB6 3594              asr R3
 1FB8 2794              ror R2
 1FBA 2092CC01          sts _T_com,R2
 1FBE                   .dbline 1181
 1FBE           ;                               switch(R_dat&0xf0)
 1FBE 8091CD01          lds R24,_R_dat
 1FC2 9091CE01          lds R25,_R_dat+1
 1FC6 807F              andi R24,240
 1FC8 9070              andi R25,0
 1FCA 5C01              movw R10,R24
 1FCC 8036              cpi R24,96
 1FCE E0E0              ldi R30,0
 1FD0 9E07              cpc R25,R30
 1FD2 09F4              brne X337
 1FD4 E2C2              xjmp L628
 1FD6           X337:
 1FD6           X189:
 1FD6 80E6              ldi R24,96
 1FD8 90E0              ldi R25,0
 1FDA 8A15              cp R24,R10
 1FDC 9B05              cpc R25,R11
 1FDE 0CF4              brge X338
 1FE0 33C0              xjmp L968
 1FE2           X338:
 1FE2           X190:
 1FE2           L967:
 1FE2 C501              movw R24,R10
 1FE4 8033              cpi R24,48
 1FE6 E0E0              ldi R30,0
 1FE8 9E07              cpc R25,R30
 1FEA 09F4              brne X339
 1FEC EDC0              xjmp L603
 1FEE           X339:
 1FEE           X191:
 1FEE 80E3              ldi R24,48
 1FF0 90E0              ldi R25,0
 1FF2 8A15              cp R24,R10
 1FF4 9B05              cpc R25,R11
 1FF6 A4F0              brlt L970
 1FF8           X192:
 1FF8           L969:
 1FF8 C501              movw R24,R10
 1FFA 8031              cpi R24,16
 1FFC E0E0              ldi R30,0
 1FFE 9E07              cpc R25,R30
 2000 09F4              brne X340
 2002 5FC0              xjmp L586
 2004           X340:
 2004           X193:
 2004 8031              cpi R24,16
 2006 E0E0              ldi R30,0
 2008 9E07              cpc R25,R30
 200A 14F4              brge X341
 200C 0C944A20          xjmp L584
 2010           X341:
 2010           X194:
 2010           L971:
 2010 C501              movw R24,R10
 2012 8032              cpi R24,32
 2014 E0E0              ldi R30,0
 2016 9E07              cpc R25,R30
 2018 09F4              brne X342
 201A 93C0              xjmp L594
 201C           X342:
 201C           X195:
 201C 0C944A20          xjmp L584
 2020           L970:
 2020 C501              movw R24,R10
 2022 8034              cpi R24,64
 2024 E0E0              ldi R30,0
 2026 9E07              cpc R25,R30
 2028 09F4              brne X343
 202A 19C1              xjmp L604
 202C           X343:
 202C           X196:
 202C 8034              cpi R24,64
 202E E0E0              ldi R30,0
 2030 9E07              cpc R25,R30
 2032 14F4              brge X344
 2034 0C944A20          xjmp L584
 2038           X344:
 2038           X197:
 2038           L972:
 2038 C501              movw R24,R10
 203A 8035              cpi R24,80
 203C E0E0              ldi R30,0
 203E 9E07              cpc R25,R30
 2040 09F4              brne X345
 2042 64C1              xjmp L611
 2044           X345:
 2044           X198:
 2044 0C944A20          xjmp L584
 2048           L968:
 2048 C501              movw R24,R10
 204A 8039              cpi R24,144
 204C E0E0              ldi R30,0
 204E 9E07              cpc R25,R30
 2050 09F4              brne X346
 2052 F1C6              xjmp L722
 2054           X346:
 2054           X199:
 2054 80E9              ldi R24,144
 2056 90E0              ldi R25,0
 2058 8A15              cp R24,R10
 205A 9B05              cpc R25,R11
 205C A4F0              brlt L974
 205E           X200:
 205E           L973:
 205E C501              movw R24,R10
 2060 8037              cpi R24,112
 2062 E0E0              ldi R30,0
 2064 9E07              cpc R25,R30
 2066 09F4              brne X347
 2068 9CC3              xjmp L654
 206A           X347:
 206A           X201:
 206A 8037              cpi R24,112
 206C E0E0              ldi R30,0
 206E 9E07              cpc R25,R30
 2070 14F4              brge X348
 2072 0C944A20          xjmp L584
 2076           X348:
 2076           X202:
 2076           L975:
 2076 C501              movw R24,R10
 2078 8038              cpi R24,128
 207A E0E0              ldi R30,0
 207C 9E07              cpc R25,R30
 207E 09F4              brne X349
 2080 C9C4              xjmp L679
 2082           X349:
 2082           X203:
 2082 0C944A20          xjmp L584
 2086           L974:
 2086 C501              movw R24,R10
 2088 803B              cpi R24,176
 208A E0E0              ldi R30,0
 208C 9E07              cpc R25,R30
 208E 11F4              brne X350
 2090 0C94531B          xjmp L851
 2094           X350:
 2094           X204:
 2094 80EB              ldi R24,176
 2096 90E0              ldi R25,0
 2098 8A15              cp R24,R10
 209A 9B05              cpc R25,R11
 209C 4CF0              brlt L977
 209E           X205:
 209E           L976:
 209E C501              movw R24,R10
 20A0 803A              cpi R24,160
 20A2 E0E0              ldi R30,0
 20A4 9E07              cpc R25,R30
 20A6 11F4              brne X351
 20A8 0C948B1A          xjmp L826
 20AC           X351:
 20AC           X206:
 20AC 0C944A20          xjmp L584
 20B0           L977:
 20B0 C501              movw R24,R10
 20B2 803C              cpi R24,192
 20B4 E0E0              ldi R30,0
 20B6 9E07              cpc R25,R30
 20B8 11F4              brne X352
 20BA 0C941B1C          xjmp L876
 20BE           X352:
 20BE           X207:
 20BE 0C944A20          xjmp L584
 20C2           L586:
 20C2                   .dbline 1184
 20C2           ;                               { 
 20C2           ;                                       case 0x10://复位        
 20C2           ;                                               Uart0TxData[0]=0xE8;
 20C2 88EE              ldi R24,232
 20C4 80932100          sts _Uart0TxData,R24
 20C8                   .dbline 1185
 20C8           ;                                               Uart0TxData[1]=0x40;
 20C8 80E4              ldi R24,64
 20CA 80932200          sts _Uart0TxData+1,R24
 20CE                   .dbline 1186
 20CE           ;                                               Uart0TxData[2]=0x8D;//流量板握手，超时40ms
 20CE 8DE8              ldi R24,141
 20D0 80932300          sts _Uart0TxData+2,R24
 20D4                   .dbline 1187
 20D4           ;                                               Uart0TxData[3]=31;
 20D4 8FE1              ldi R24,31
 20D6 80932400          sts _Uart0TxData+3,R24
 20DA                   .dbline 1188
 20DA           ;                                               SendUart0_2(9,5); 
 20DA 25E0              ldi R18,5
 20DC 30E0              ldi R19,0
 20DE 09E0              ldi R16,9
 20E0 0E944E03          xcall _SendUart0_2
 20E4                   .dbline 1189
 20E4           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x8D))
 20E4 8091E301          lds R24,_Uart0RxCounter
 20E8 8930              cpi R24,9
 20EA 99F4              brne L590
 20EC           X208:
 20EC 8091E401          lds R24,_Uart0RxData
 20F0 8535              cpi R24,85
 20F2 79F4              brne L590
 20F4           X209:
 20F4 8091E501          lds R24,_Uart0RxData+1
 20F8 8034              cpi R24,64
 20FA 59F4              brne L590
 20FC           X210:
 20FC 8091E601          lds R24,_Uart0RxData+2
 2100 8D38              cpi R24,141
 2102 39F4              brne L590
 2104           X211:
 2104                   .dbline 1190
 2104           ;                                               {T_dat=0x00;}
 2104                   .dbline 1190
 2104 2224              clr R2
 2106 3324              clr R3
 2108 3092D001          sts _T_dat+1,R3
 210C 2092CF01          sts _T_dat,R2
 2110                   .dbline 1190
 2110 06C0              xjmp L591
 2112           L590:
 2112                   .dbline 1192
 2112           ;                                               else
 2112           ;                                               {T_dat=0xff;}
 2112                   .dbline 1192
 2112 8FEF              ldi R24,255
 2114 90E0              ldi R25,0
 2116 9093D001          sts _T_dat+1,R25
 211A 8093CF01          sts _T_dat,R24
 211E                   .dbline 1192
 211E           L591:
 211E                   .dbline 1193
 211E           ;                                               T_dat<<=8;
 211E 2090CF01          lds R2,_T_dat
 2122 3090D001          lds R3,_T_dat+1
 2126 322C              mov R3,R2
 2128 2224              clr R2
 212A 3092D001          sts _T_dat+1,R3
 212E 2092CF01          sts _T_dat,R2
 2132                   .dbline 1194
 2132           ;                                               T_dat|=0x00;
 2132 3092D001          sts _T_dat+1,R3
 2136 2092CF01          sts _T_dat,R2
 213A                   .dbline 1195
 213A           ;                                               SendManchester();       
 213A 0E94D120          xcall _SendManchester
 213E                   .dbline 1196
 213E           ;                                               break;
 213E 0C944A20          xjmp L584
 2142           L594:
 2142                   .dbline 1199
 2142           ; 
 2142           ;                                       case 0x20://读版本号
 2142           ;                                               Uart0TxData[0]=0xE8;
 2142 88EE              ldi R24,232
 2144 80932100          sts _Uart0TxData,R24
 2148                   .dbline 1200
 2148           ;                                               Uart0TxData[1]=0x40;
 2148 80E4              ldi R24,64
 214A 80932200          sts _Uart0TxData+1,R24
 214E                   .dbline 1201
 214E           ;                                               Uart0TxData[2]=0x8D;//流量板握手，超时40ms
 214E 8DE8              ldi R24,141
 2150 80932300          sts _Uart0TxData+2,R24
 2154                   .dbline 1202
 2154           ;                                               Uart0TxData[3]=31;
 2154 8FE1              ldi R24,31
 2156 80932400          sts _Uart0TxData+3,R24
 215A                   .dbline 1203
 215A           ;                                               SendUart0_2(9,5); 
 215A 25E0              ldi R18,5
 215C 30E0              ldi R19,0
 215E 09E0              ldi R16,9
 2160 0E944E03          xcall _SendUart0_2
 2164                   .dbline 1204
 2164           ;                                               if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x8D))
 2164 8091E301          lds R24,_Uart0RxCounter
 2168 8930              cpi R24,9
 216A A1F4              brne L598
 216C           X212:
 216C 8091E401          lds R24,_Uart0RxData
 2170 8535              cpi R24,85
 2172 81F4              brne L598
 2174           X213:
 2174 8091E501          lds R24,_Uart0RxData+1
 2178 8034              cpi R24,64
 217A 61F4              brne L598
 217C           X214:
 217C 8091E601          lds R24,_Uart0RxData+2
 2180 8D38              cpi R24,141
 2182 41F4              brne L598
 2184           X215:
 2184                   .dbline 1205
 2184           ;                                                       {T_dat=Uart0RxData[3];}
 2184                   .dbline 1205
 2184 2090E701          lds R2,_Uart0RxData+3
 2188 3324              clr R3
 218A 3092D001          sts _T_dat+1,R3
 218E 2092CF01          sts _T_dat,R2
 2192                   .dbline 1205
 2192 06C0              xjmp L599
 2194           L598:
 2194                   .dbline 1207
 2194           ;                                               else
 2194           ;                                                       {T_dat=0xff;}    
 2194                   .dbline 1207
 2194 8FEF              ldi R24,255
 2196 90E0              ldi R25,0
 2198 9093D001          sts _T_dat+1,R25
 219C 8093CF01          sts _T_dat,R24
 21A0                   .dbline 1207
 21A0           L599:
 21A0                   .dbline 1208
 21A0           ;                                               T_dat<<=8;
 21A0 2090CF01          lds R2,_T_dat
 21A4 3090D001          lds R3,_T_dat+1
 21A8 322C              mov R3,R2
 21AA 2224              clr R2
 21AC 3092D001          sts _T_dat+1,R3
 21B0 2092CF01          sts _T_dat,R2
 21B4                   .dbline 1209
 21B4           ;                                               T_dat|=BB;
 21B4 C101              movw R24,R2
 21B6 8061              ori R24,16
 21B8 9093D001          sts _T_dat+1,R25
 21BC 8093CF01          sts _T_dat,R24
 21C0                   .dbline 1210
 21C0           ;                                               SendManchester();       
 21C0 0E94D120          xcall _SendManchester
 21C4                   .dbline 1211
 21C4           ;                                               break;
 21C4 0C944A20          xjmp L584
 21C8           L603:
 21C8                   .dbline 1214
 21C8           ; 
 21C8           ;                                       case 0x30://Cable电压,VIN/VR电压
 21C8           ;                                               CheckMotor(30);   
 21C8 0EE1              ldi R16,30
 21CA 10E0              ldi R17,0
 21CC 0E944B07          xcall _CheckMotor
 21D0                   .dbline 1215
 21D0           ;                                               f=SampleADC(5);//Cable CAB-R1
 21D0 05E0              ldi R16,5
 21D2 0E94DC06          xcall _SampleADC
 21D6 1127              clr R17
 21D8 0E940000          xcall int2fp
 21DC 0D83              std y+5,R16
 21DE 1E83              std y+6,R17
 21E0 2F83              std y+7,R18
 21E2 3887              std y+8,R19
 21E4                   .dbline 1219
 21E4           ;                                               //f=f*2.56;
 21E4           ;                                               //f=f*101;
 21E4           ;                                               //f=f/256;
 21E4           ;                                               T_dat=f;
 21E4 0D81              ldd R16,y+5
 21E6 1E81              ldd R17,y+6
 21E8 2F81              ldd R18,y+7
 21EA 3885              ldd R19,y+8
 21EC 0E940000          xcall fpint
 21F0 1093D001          sts _T_dat+1,R17
 21F4 0093CF01          sts _T_dat,R16
 21F8                   .dbline 1220
 21F8           ;                                               CheckMotor(30);
 21F8 0EE1              ldi R16,30
 21FA 10E0              ldi R17,0
 21FC 0E944B07          xcall _CheckMotor
 2200                   .dbline 1221
 2200           ;                                               T_dat<<=8;   
 2200 2090CF01          lds R2,_T_dat
 2204 3090D001          lds R3,_T_dat+1
 2208 322C              mov R3,R2
 220A 2224              clr R2
 220C 3092D001          sts _T_dat+1,R3
 2210 2092CF01          sts _T_dat,R2
 2214                   .dbline 1222
 2214           ;                                               f=SampleADC(4);//VIN / VR  CAB-R2
 2214 04E0              ldi R16,4
 2216 0E94DC06          xcall _SampleADC
 221A 1127              clr R17
 221C 0E940000          xcall int2fp
 2220 0D83              std y+5,R16
 2222 1E83              std y+6,R17
 2224 2F83              std y+7,R18
 2226 3887              std y+8,R19
 2228                   .dbline 1226
 2228           ;                                               //f=f*2.56;
 2228           ;                                               //f=f*101;
 2228           ;                                               //f=f/256;
 2228           ;                                               i=f;
 2228 0D81              ldd R16,y+5
 222A 1E81              ldd R17,y+6
 222C 2F81              ldd R18,y+7
 222E 3885              ldd R19,y+8
 2230 0E940000          xcall fpint
 2234 A02E              mov R10,R16
 2236                   .dbline 1227
 2236           ;                                               T_dat|=i; 
 2236 2A2C              mov R2,R10
 2238 3324              clr R3
 223A 4090CF01          lds R4,_T_dat
 223E 5090D001          lds R5,_T_dat+1
 2242 4228              or R4,R2
 2244 5328              or R5,R3
 2246 5092D001          sts _T_dat+1,R5
 224A 4092CF01          sts _T_dat,R4
 224E                   .dbline 1228
 224E           ;                                               CheckMotor(30);
 224E 0EE1              ldi R16,30
 2250 10E0              ldi R17,0
 2252 0E944B07          xcall _CheckMotor
 2256                   .dbline 1229
 2256           ;                                               SendManchester();   
 2256 0E94D120          xcall _SendManchester
 225A                   .dbline 1230
 225A           ;                                               break;
 225A 0C944A20          xjmp L584
 225E           L604:
 225E                   .dbline 1241
 225E           ; 
 225E           ;                                       case 0x40: //采集板压力和温度
 225E           ;                                               /*
 225E           ;                                               CheckMotor(40); //40ms定时              
 225E           ;                                               T_dat=1234;//没有流量板时暂用一固定数值表示压力
 225E           ;                                               SendManchester();
 225E           ;                                               CheckMotor(40); //40ms定时               
 225E           ;                                               T_dat=5678;//没有流量板时暂用一固定数值表示温度
 225E           ;                                               SendManchester();
 225E           ;                                               */
 225E           ;                                               Uart0TxData[0]=0xE8;
 225E 88EE              ldi R24,232
 2260 80932100          sts _Uart0TxData,R24
 2264                   .dbline 1242
 2264           ;                                               Uart0TxData[1]=0x40;
 2264 80E4              ldi R24,64
 2266 80932200          sts _Uart0TxData+1,R24
 226A                   .dbline 1243
 226A           ;                                               Uart0TxData[2]=0x89;
 226A 89E8              ldi R24,137
 226C 80932300          sts _Uart0TxData+2,R24
 2270                   .dbline 1244
 2270           ;                                               Uart0TxData[3]=9;
 2270 89E0              ldi R24,9
 2272 80932400          sts _Uart0TxData+3,R24
 2276                   .dbline 1245
 2276           ;                                               SendUart0_2(9,50);//流量板直读检测，超时400ms
 2276 22E3              ldi R18,50
 2278 30E0              ldi R19,0
 227A 09E0              ldi R16,9
 227C 0E944E03          xcall _SendUart0_2
 2280                   .dbline 1247
 2280           ; 
 2280           ;                                               T_dat=Uart0RxData[1];
 2280 2090E501          lds R2,_Uart0RxData+1
 2284 3324              clr R3
 2286 3092D001          sts _T_dat+1,R3
 228A 2092CF01          sts _T_dat,R2
 228E                   .dbline 1248
 228E           ;                                               T_dat<<=8;
 228E 2090CF01          lds R2,_T_dat
 2292 3090D001          lds R3,_T_dat+1
 2296 322C              mov R3,R2
 2298 2224              clr R2
 229A 3092D001          sts _T_dat+1,R3
 229E 2092CF01          sts _T_dat,R2
 22A2                   .dbline 1249
 22A2           ;                                               T_dat|=Uart0RxData[0];
 22A2 2090E401          lds R2,_Uart0RxData
 22A6 3324              clr R3
 22A8 4090CF01          lds R4,_T_dat
 22AC 5090D001          lds R5,_T_dat+1
 22B0 4228              or R4,R2
 22B2 5328              or R5,R3
 22B4 5092D001          sts _T_dat+1,R5
 22B8 4092CF01          sts _T_dat,R4
 22BC                   .dbline 1250
 22BC           ;                                               SendManchester();//压力
 22BC 0E94D120          xcall _SendManchester
 22C0                   .dbline 1252
 22C0           ; 
 22C0           ;                                               CheckMotor(30); 
 22C0 0EE1              ldi R16,30
 22C2 10E0              ldi R17,0
 22C4 0E944B07          xcall _CheckMotor
 22C8                   .dbline 1253
 22C8           ;                                               T_dat=Uart0RxData[3];
 22C8 2090E701          lds R2,_Uart0RxData+3
 22CC 3324              clr R3
 22CE 3092D001          sts _T_dat+1,R3
 22D2 2092CF01          sts _T_dat,R2
 22D6                   .dbline 1254
 22D6           ;                                               T_dat<<=8;
 22D6 2090CF01          lds R2,_T_dat
 22DA 3090D001          lds R3,_T_dat+1
 22DE 322C              mov R3,R2
 22E0 2224              clr R2
 22E2 3092D001          sts _T_dat+1,R3
 22E6 2092CF01          sts _T_dat,R2
 22EA                   .dbline 1255
 22EA           ;                                               T_dat|=Uart0RxData[2];
 22EA 2090E601          lds R2,_Uart0RxData+2
 22EE 3324              clr R3
 22F0 4090CF01          lds R4,_T_dat
 22F4 5090D001          lds R5,_T_dat+1
 22F8 4228              or R4,R2
 22FA 5328              or R5,R3
 22FC 5092D001          sts _T_dat+1,R5
 2300 4092CF01          sts _T_dat,R4
 2304                   .dbline 1256
 2304           ;                                               SendManchester();//温度
 2304 0E94D120          xcall _SendManchester
 2308                   .dbline 1257
 2308           ;                                               break;
 2308 0C944A20          xjmp L584
 230C           L611:
 230C                   .dbline 1277
 230C           ; 
 230C           ;                                       case 0x50://流量采样                                                     
 230C           ;                                               /*      
 230C           ;                                               CheckMotor(40); //40ms定时              
 230C           ;                                               myFIB.f=123.456; 
 230C           ;                                               T_dat=myFIB.i[1];
 230C           ;                                               SendManchester();
 230C           ;                                               CheckMotor(40);
 230C           ;                                               T_dat=myFIB.i[0];
 230C           ;                                               SendManchester();
 230C           ;                                               CheckMotor(40);
 230C           ;                                               myFIB.f=789.012; 
 230C           ;                                               T_dat=myFIB.i[1];
 230C           ;                                               SendManchester();
 230C           ;                                               CheckMotor(40);
 230C           ;                                               T_dat=myFIB.i[0];
 230C           ;                                               SendManchester();
 230C           ;                                               CheckMotor(40);
 230C           ;                                               */
 230C           ;                                               Uart0TxData[0]=0xE8;
 230C 88EE              ldi R24,232
 230E 80932100          sts _Uart0TxData,R24
 2312                   .dbline 1278
 2312           ;                                               Uart0TxData[1]=0x40;
 2312 80E4              ldi R24,64
 2314 80932200          sts _Uart0TxData+1,R24
 2318                   .dbline 1279
 2318           ;                                               Uart0TxData[2]=0x89;
 2318 89E8              ldi R24,137
 231A 80932300          sts _Uart0TxData+2,R24
 231E                   .dbline 1280
 231E           ;                                               Uart0TxData[3]=9;
 231E 89E0              ldi R24,9
 2320 80932400          sts _Uart0TxData+3,R24
 2324                   .dbline 1281
 2324           ;                                               SendUart0_2(9,50);//流量板直读检测，超时400ms
 2324 22E3              ldi R18,50
 2326 30E0              ldi R19,0
 2328 09E0              ldi R16,9
 232A 0E944E03          xcall _SendUart0_2
 232E                   .dbline 1283
 232E           ; 
 232E           ;                                               lfib=Uart0RxData[5];
 232E 2090E901          lds R2,_Uart0RxData+5
 2332 3324              clr R3
 2334 4424              clr R4
 2336 5524              clr R5
 2338 30921500          sts _lfib+1,R3
 233C 20921400          sts _lfib,R2
 2340 50921700          sts _lfib+2+1,R5
 2344 40921600          sts _lfib+2,R4
 2348                   .dbline 1284
 2348           ;                                               lfib<<=8;
 2348 88E0              ldi R24,8
 234A 90E0              ldi R25,0
 234C 20911600          lds R18,_lfib+2
 2350 30911700          lds R19,_lfib+2+1
 2354 00911400          lds R16,_lfib
 2358 10911500          lds R17,_lfib+1
 235C 8A93              st -y,R24
 235E 0E940000          xcall lsl32
 2362 10931500          sts _lfib+1,R17
 2366 00931400          sts _lfib,R16
 236A 30931700          sts _lfib+2+1,R19
 236E 20931600          sts _lfib+2,R18
 2372                   .dbline 1285
 2372           ;                                               lfib|=Uart0RxData[4];
 2372 2090E801          lds R2,_Uart0RxData+4
 2376 3324              clr R3
 2378 4424              clr R4
 237A 5524              clr R5
 237C 3801              movw R6,R16
 237E 4901              movw R8,R18
 2380 6228              or R6,R2
 2382 7328              or R7,R3
 2384 8428              or R8,R4
 2386 9528              or R9,R5
 2388 70921500          sts _lfib+1,R7
 238C 60921400          sts _lfib,R6
 2390 90921700          sts _lfib+2+1,R9
 2394 80921600          sts _lfib+2,R8
 2398                   .dbline 1286
 2398           ;                                               lfib&=0x0000ffff;
 2398 4FEF              ldi R20,255
 239A 5FEF              ldi R21,255
 239C 60E0              ldi R22,0
 239E 70E0              ldi R23,0
 23A0 1301              movw R2,R6
 23A2 2401              movw R4,R8
 23A4 2422              and R2,R20
 23A6 3522              and R3,R21
 23A8 4622              and R4,R22
 23AA 5722              and R5,R23
 23AC 30921500          sts _lfib+1,R3
 23B0 20921400          sts _lfib,R2
 23B4 50921700          sts _lfib+2+1,R5
 23B8 40921600          sts _lfib+2,R4
 23BC                   .dbline 1287
 23BC           ;                                               myFIB.f=(unsigned long)lfib; 
 23BC 8101              movw R16,R2
 23BE 9201              movw R18,R4
 23C0 0E940000          xcall ulong2fp
 23C4 10934102          sts _myFIB+1,R17
 23C8 00934002          sts _myFIB,R16
 23CC 30934302          sts _myFIB+2+1,R19
 23D0 20934202          sts _myFIB+2,R18
 23D4                   .dbline 1289
 23D4           ; 
 23D4           ;                                               T_dat=myFIB.i[1];
 23D4 20904202          lds R2,_myFIB+2
 23D8 30904302          lds R3,_myFIB+2+1
 23DC 3092D001          sts _T_dat+1,R3
 23E0 2092CF01          sts _T_dat,R2
 23E4                   .dbline 1290
 23E4           ;                                               SendManchester();//流量-时间
 23E4 0E94D120          xcall _SendManchester
 23E8                   .dbline 1291
 23E8           ;                                               crc16array[0]=(unsigned char)(T_dat);
 23E8 2090CF01          lds R2,_T_dat
 23EC 3090D001          lds R3,_T_dat+1
 23F0 20920000          sts _crc16array,R2
 23F4                   .dbline 1292
 23F4           ;                                               crc16array[1]=(unsigned char)(T_dat>>8);
 23F4 232C              mov R2,R3
 23F6 3324              clr R3
 23F8 27FC              sbrc R2,7
 23FA 3094              com R3
 23FC 20920100          sts _crc16array+1,R2
 2400                   .dbline 1294
 2400           ; 
 2400           ;                                               CheckMotor(30); 
 2400 0EE1              ldi R16,30
 2402 10E0              ldi R17,0
 2404 0E944B07          xcall _CheckMotor
 2408                   .dbline 1295
 2408           ;                                               T_dat=myFIB.i[0];
 2408 20904002          lds R2,_myFIB
 240C 30904102          lds R3,_myFIB+1
 2410 3092D001          sts _T_dat+1,R3
 2414 2092CF01          sts _T_dat,R2
 2418                   .dbline 1296
 2418           ;                                               SendManchester();//流量-时间
 2418 0E94D120          xcall _SendManchester
 241C                   .dbline 1297
 241C           ;                                               crc16array[2]=(unsigned char)(T_dat);
 241C 2090CF01          lds R2,_T_dat
 2420 3090D001          lds R3,_T_dat+1
 2424 20920200          sts _crc16array+2,R2
 2428                   .dbline 1298
 2428           ;                                               crc16array[3]=(unsigned char)(T_dat>>8);
 2428 232C              mov R2,R3
 242A 3324              clr R3
 242C 27FC              sbrc R2,7
 242E 3094              com R3
 2430 20920300          sts _crc16array+3,R2
 2434                   .dbline 1300
 2434           ; 
 2434           ;                                               CheckMotor(30); 
 2434 0EE1              ldi R16,30
 2436 10E0              ldi R17,0
 2438 0E944B07          xcall _CheckMotor
 243C                   .dbline 1302
 243C           ; 
 243C           ;                                               lfib=Uart0RxData[7];
 243C 2090EB01          lds R2,_Uart0RxData+7
 2440 3324              clr R3
 2442 4424              clr R4
 2444 5524              clr R5
 2446 30921500          sts _lfib+1,R3
 244A 20921400          sts _lfib,R2
 244E 50921700          sts _lfib+2+1,R5
 2452 40921600          sts _lfib+2,R4
 2456                   .dbline 1303
 2456           ;                                               lfib<<=8;
 2456 88E0              ldi R24,8
 2458 90E0              ldi R25,0
 245A 20911600          lds R18,_lfib+2
 245E 30911700          lds R19,_lfib+2+1
 2462 00911400          lds R16,_lfib
 2466 10911500          lds R17,_lfib+1
 246A 8A93              st -y,R24
 246C 0E940000          xcall lsl32
 2470 10931500          sts _lfib+1,R17
 2474 00931400          sts _lfib,R16
 2478 30931700          sts _lfib+2+1,R19
 247C 20931600          sts _lfib+2,R18
 2480                   .dbline 1304
 2480           ;                                               lfib|=Uart0RxData[6];
 2480 2090EA01          lds R2,_Uart0RxData+6
 2484 3324              clr R3
 2486 4424              clr R4
 2488 5524              clr R5
 248A 3801              movw R6,R16
 248C 4901              movw R8,R18
 248E 6228              or R6,R2
 2490 7328              or R7,R3
 2492 8428              or R8,R4
 2494 9528              or R9,R5
 2496 70921500          sts _lfib+1,R7
 249A 60921400          sts _lfib,R6
 249E 90921700          sts _lfib+2+1,R9
 24A2 80921600          sts _lfib+2,R8
 24A6                   .dbline 1305
 24A6           ;                                               lfib&=0x0000ffff;
 24A6 4FEF              ldi R20,255
 24A8 5FEF              ldi R21,255
 24AA 60E0              ldi R22,0
 24AC 70E0              ldi R23,0
 24AE 1301              movw R2,R6
 24B0 2401              movw R4,R8
 24B2 2422              and R2,R20
 24B4 3522              and R3,R21
 24B6 4622              and R4,R22
 24B8 5722              and R5,R23
 24BA 30921500          sts _lfib+1,R3
 24BE 20921400          sts _lfib,R2
 24C2 50921700          sts _lfib+2+1,R5
 24C6 40921600          sts _lfib+2,R4
 24CA                   .dbline 1306
 24CA           ;                                               myFIB.f=(unsigned long)lfib; 
 24CA 8101              movw R16,R2
 24CC 9201              movw R18,R4
 24CE 0E940000          xcall ulong2fp
 24D2 10934102          sts _myFIB+1,R17
 24D6 00934002          sts _myFIB,R16
 24DA 30934302          sts _myFIB+2+1,R19
 24DE 20934202          sts _myFIB+2,R18
 24E2                   .dbline 1308
 24E2           ; 
 24E2           ;                                               T_dat=myFIB.i[1];
 24E2 20904202          lds R2,_myFIB+2
 24E6 30904302          lds R3,_myFIB+2+1
 24EA 3092D001          sts _T_dat+1,R3
 24EE 2092CF01          sts _T_dat,R2
 24F2                   .dbline 1309
 24F2           ;                                               SendManchester();//流量-相位1
 24F2 0E94D120          xcall _SendManchester
 24F6                   .dbline 1310
 24F6           ;                                               crc16array[4]=(unsigned char)(T_dat);
 24F6 2090CF01          lds R2,_T_dat
 24FA 3090D001          lds R3,_T_dat+1
 24FE 20920400          sts _crc16array+4,R2
 2502                   .dbline 1311
 2502           ;                                               crc16array[5]=(unsigned char)(T_dat>>8);
 2502 232C              mov R2,R3
 2504 3324              clr R3
 2506 27FC              sbrc R2,7
 2508 3094              com R3
 250A 20920500          sts _crc16array+5,R2
 250E                   .dbline 1314
 250E           ; 
 250E           ; 
 250E           ;                                               CheckMotor(30); 
 250E 0EE1              ldi R16,30
 2510 10E0              ldi R17,0
 2512 0E944B07          xcall _CheckMotor
 2516                   .dbline 1315
 2516           ;                                               T_dat=myFIB.i[0];
 2516 20904002          lds R2,_myFIB
 251A 30904102          lds R3,_myFIB+1
 251E 3092D001          sts _T_dat+1,R3
 2522 2092CF01          sts _T_dat,R2
 2526                   .dbline 1316
 2526           ;                                               SendManchester();//流量-相位2
 2526 0E94D120          xcall _SendManchester
 252A                   .dbline 1317
 252A           ;                                               crc16array[6]=(unsigned char)(T_dat);
 252A 2090CF01          lds R2,_T_dat
 252E 3090D001          lds R3,_T_dat+1
 2532 20920600          sts _crc16array+6,R2
 2536                   .dbline 1318
 2536           ;                                               crc16array[7]=(unsigned char)(T_dat>>8);
 2536 232C              mov R2,R3
 2538 3324              clr R3
 253A 27FC              sbrc R2,7
 253C 3094              com R3
 253E 20920700          sts _crc16array+7,R2
 2542                   .dbline 1320
 2542           ; 
 2542           ;                                               CheckMotor(30); 
 2542 0EE1              ldi R16,30
 2544 10E0              ldi R17,0
 2546 0E944B07          xcall _CheckMotor
 254A                   .dbline 1321
 254A           ;                                               crc16(crc16array,8);//0.75ms
 254A 28E0              ldi R18,8
 254C 30E0              ldi R19,0
 254E 00E0              ldi R16,<_crc16array
 2550 10E0              ldi R17,>_crc16array
 2552 0E94E324          xcall _crc16
 2556                   .dbline 1322
 2556           ;                                               T_dat=crc16hi;
 2556 20901300          lds R2,_crc16hi
 255A 3324              clr R3
 255C 3092D001          sts _T_dat+1,R3
 2560 2092CF01          sts _T_dat,R2
 2564                   .dbline 1323
 2564           ;                                               T_dat<<=8;
 2564 2090CF01          lds R2,_T_dat
 2568 3090D001          lds R3,_T_dat+1
 256C 322C              mov R3,R2
 256E 2224              clr R2
 2570 3092D001          sts _T_dat+1,R3
 2574 2092CF01          sts _T_dat,R2
 2578                   .dbline 1324
 2578           ;                                               T_dat|=crc16lo;   
 2578 20901200          lds R2,_crc16lo
 257C 3324              clr R3
 257E 4090CF01          lds R4,_T_dat
 2582 5090D001          lds R5,_T_dat+1
 2586 4228              or R4,R2
 2588 5328              or R5,R3
 258A 5092D001          sts _T_dat+1,R5
 258E 4092CF01          sts _T_dat,R4
 2592                   .dbline 1325
 2592           ;                                               SendManchester();//上传CRC校验共2字节
 2592 0E94D120          xcall _SendManchester
 2596                   .dbline 1326
 2596           ;                                               break;
 2596 0C944A20          xjmp L584
 259A           L628:
 259A                   .dbline 1330
 259A           ;                                       
 259A           ;                                       //收放电机 
 259A           ;                                       case 0x60:  
 259A           ;                                               if( !(((R_dat)==0x61)  || ((R_dat)==0x62) ) )//既不是正转，也不是反转，则立即返回且不响应上位机
 259A E090CD01          lds R14,_R_dat
 259E F090CE01          lds R15,_R_dat+1
 25A2 C701              movw R24,R14
 25A4 8136              cpi R24,97
 25A6 E0E0              ldi R30,0
 25A8 9E07              cpc R25,R30
 25AA 31F0              breq L629
 25AC           X216:
 25AC 8236              cpi R24,98
 25AE E0E0              ldi R30,0
 25B0 9E07              cpc R25,R30
 25B2 11F0              breq L629
 25B4           X217:
 25B4                   .dbline 1331
 25B4           ;                                                       break;
 25B4 0C944A20          xjmp L584
 25B8           L629:
 25B8                   .dbline 1333
 25B8           ; 
 25B8           ;                                               if( (Motor2Run_P) || (Motor2Run_N) )//调节电机正在运行
 25B8 80B1              in R24,0x0
 25BA 8470              andi R24,4
 25BC 8695              lsr R24
 25BE 8695              lsr R24
 25C0 21F4              brne L634
 25C2           X218:
 25C2 80B1              in R24,0x0
 25C4 8170              andi R24,1
 25C6 8130              cpi R24,1
 25C8 41F0              breq L633
 25CA           X219:
 25CA           L634:
 25CA 80B1              in R24,0x0
 25CC 8470              andi R24,4
 25CE 8695              lsr R24
 25D0 8695              lsr R24
 25D2 8130              cpi R24,1
 25D4 81F4              brne L631
 25D6           X220:
 25D6 0099              sbic 0x0,0
 25D8 0EC0              rjmp L631
 25DA           X221:
 25DA           L633:
 25DA                   .dbline 1334
 25DA           ;                                               {
 25DA                   .dbline 1335
 25DA           ;                                                       Motor1Status.s.StartResult=3;//另一电机正在运行
 25DA 80913E02          lds R24,_Motor1Status
 25DE 90913F02          lds R25,_Motor1Status+1
 25E2 806C              ori R24,192
 25E4 90933F02          sts _Motor1Status+1,R25
 25E8 80933E02          sts _Motor1Status,R24
 25EC                   .dbline 1336
 25EC           ;                                                       CheckMotor(100);//很快响应上位机
 25EC 04E6              ldi R16,100
 25EE 10E0              ldi R17,0
 25F0 0E944B07          xcall _CheckMotor
 25F4                   .dbline 1337
 25F4           ;                                               }
 25F4 CAC0              xjmp L632
 25F6           L631:
 25F6                   .dbline 1338
 25F6           ;                                               else if(Motor1Run_P)//收放电机正在正转
 25F6 89B3              in R24,0x19
 25F8 8270              andi R24,2
 25FA 8695              lsr R24
 25FC 81F5              brne L635
 25FE           X222:
 25FE 89B3              in R24,0x19
 2600 8470              andi R24,4
 2602 8695              lsr R24
 2604 8695              lsr R24
 2606 8130              cpi R24,1
 2608 51F5              brne L635
 260A           X223:
 260A                   .dbline 1339
 260A           ;                                               {
 260A                   .dbline 1340
 260A           ;                                                 if(R_dat==0x61)
 260A 8091CD01          lds R24,_R_dat
 260E 9091CE01          lds R25,_R_dat+1
 2612 8136              cpi R24,97
 2614 E0E0              ldi R30,0
 2616 9E07              cpc R25,R30
 2618 59F4              brne L637
 261A           X224:
 261A                   .dbline 1341
 261A           ;                                                 {
 261A                   .dbline 1342
 261A           ;                                                   Motor1Status.s.StartResult=1;//本电机正在同向运行
 261A 80913E02          lds R24,_Motor1Status
 261E 90913F02          lds R25,_Motor1Status+1
 2622 8F73              andi R24,63
 2624 8064              ori R24,64
 2626 90933F02          sts _Motor1Status+1,R25
 262A 80933E02          sts _Motor1Status,R24
 262E                   .dbline 1343
 262E           ;                                                 }
 262E 12C0              xjmp L638
 2630           L637:
 2630                   .dbline 1344
 2630           ;                                                 else if(R_dat==0x62)
 2630 8091CD01          lds R24,_R_dat
 2634 9091CE01          lds R25,_R_dat+1
 2638 8236              cpi R24,98
 263A E0E0              ldi R30,0
 263C 9E07              cpc R25,R30
 263E 51F4              brne L639
 2640           X225:
 2640                   .dbline 1345
 2640           ;                                                 {
 2640                   .dbline 1346
 2640           ;                                                  Motor1Status.s.StartResult=2;//本电机正在反向运行
 2640 80913E02          lds R24,_Motor1Status
 2644 90913F02          lds R25,_Motor1Status+1
 2648 8F73              andi R24,63
 264A 8068              ori R24,128
 264C 90933F02          sts _Motor1Status+1,R25
 2650 80933E02          sts _Motor1Status,R24
 2654                   .dbline 1347
 2654           ;                                                 }
 2654           L639:
 2654           L638:
 2654                   .dbline 1348
 2654           ;                                                 CheckMotor(100); //很快响应上位机
 2654 04E6              ldi R16,100
 2656 10E0              ldi R17,0
 2658 0E944B07          xcall _CheckMotor
 265C                   .dbline 1349
 265C           ;                                               }
 265C 96C0              xjmp L636
 265E           L635:
 265E                   .dbline 1350
 265E           ;                                               else if(Motor1Run_N)//收放电机正在反转
 265E 89B3              in R24,0x19
 2660 8270              andi R24,2
 2662 8695              lsr R24
 2664 8130              cpi R24,1
 2666 79F5              brne L641
 2668           X226:
 2668 89B3              in R24,0x19
 266A 8470              andi R24,4
 266C 8695              lsr R24
 266E 8695              lsr R24
 2670 51F5              brne L641
 2672           X227:
 2672                   .dbline 1351
 2672           ;                                               {
 2672                   .dbline 1352
 2672           ;                                                 if(R_dat==0x61)
 2672 8091CD01          lds R24,_R_dat
 2676 9091CE01          lds R25,_R_dat+1
 267A 8136              cpi R24,97
 267C E0E0              ldi R30,0
 267E 9E07              cpc R25,R30
 2680 59F4              brne L643
 2682           X228:
 2682                   .dbline 1353
 2682           ;                                                 {
 2682                   .dbline 1354
 2682           ;                                                  Motor1Status.s.StartResult=2;//本电机正在反向运行 
 2682 80913E02          lds R24,_Motor1Status
 2686 90913F02          lds R25,_Motor1Status+1
 268A 8F73              andi R24,63
 268C 8068              ori R24,128
 268E 90933F02          sts _Motor1Status+1,R25
 2692 80933E02          sts _Motor1Status,R24
 2696                   .dbline 1355
 2696           ;                                                 }
 2696 12C0              xjmp L644
 2698           L643:
 2698                   .dbline 1356
 2698           ;                                                 else if(R_dat==0x62)
 2698 8091CD01          lds R24,_R_dat
 269C 9091CE01          lds R25,_R_dat+1
 26A0 8236              cpi R24,98
 26A2 E0E0              ldi R30,0
 26A4 9E07              cpc R25,R30
 26A6 51F4              brne L645
 26A8           X229:
 26A8                   .dbline 1357
 26A8           ;                                                 {
 26A8                   .dbline 1358
 26A8           ;                                                  Motor1Status.s.StartResult=1;//本电机正在同向运行
 26A8 80913E02          lds R24,_Motor1Status
 26AC 90913F02          lds R25,_Motor1Status+1
 26B0 8F73              andi R24,63
 26B2 8064              ori R24,64
 26B4 90933F02          sts _Motor1Status+1,R25
 26B8 80933E02          sts _Motor1Status,R24
 26BC                   .dbline 1359
 26BC           ;                                                 }
 26BC           L645:
 26BC           L644:
 26BC                   .dbline 1360
 26BC           ;                                                 CheckMotor(100); //很快响应上位机
 26BC 04E6              ldi R16,100
 26BE 10E0              ldi R17,0
 26C0 0E944B07          xcall _CheckMotor
 26C4                   .dbline 1361
 26C4           ;                                               }
 26C4 62C0              xjmp L642
 26C6           L641:
 26C6                   .dbline 1363
 26C6           ;                                               else //二个电机都是停止状态，按命令要求启动电机，约1.5秒后反馈上位机
 26C6           ;                                               {  
 26C6                   .dbline 1365
 26C6           ;                                                       //全部电机状态置初值，上一次停止原因全部清除
 26C6           ;                                                       Motor1Status.s.BrokenStop=0;
 26C6 80913E02          lds R24,_Motor1Status
 26CA 90913F02          lds R25,_Motor1Status+1
 26CE 8B7F              andi R24,251
 26D0 90933F02          sts _Motor1Status+1,R25
 26D4 80933E02          sts _Motor1Status,R24
 26D8                   .dbline 1366
 26D8           ;                                                       Motor1Status.s.CommandStop=0;
 26D8 877F              andi R24,247
 26DA 90933F02          sts _Motor1Status+1,R25
 26DE 80933E02          sts _Motor1Status,R24
 26E2                   .dbline 1367
 26E2           ;                                                       Motor1Status.s.OverCurrent=0;
 26E2 8F7E              andi R24,239
 26E4 90933F02          sts _Motor1Status+1,R25
 26E8 80933E02          sts _Motor1Status,R24
 26EC                   .dbline 1368
 26EC           ;                                                       Motor1Status.s.UnderVoltage=0;
 26EC 8F7D              andi R24,223
 26EE 90933F02          sts _Motor1Status+1,R25
 26F2 80933E02          sts _Motor1Status,R24
 26F6                   .dbline 1369
 26F6           ;                                                       Motor1Status.s.StartResult=0;//正常启动
 26F6 8F73              andi R24,63
 26F8 90933F02          sts _Motor1Status+1,R25
 26FC 80933E02          sts _Motor1Status,R24
 2700                   .dbline 1371
 2700           ; 
 2700           ;                                                       if((R_dat)==0x61)//张开命令
 2700 8091CD01          lds R24,_R_dat
 2704 9091CE01          lds R25,_R_dat+1
 2708 8136              cpi R24,97
 270A E0E0              ldi R30,0
 270C 9E07              cpc R25,R30
 270E 19F4              brne L647
 2710           X230:
 2710                   .dbline 1372
 2710           ;                                                       { 
 2710                   .dbline 1373
 2710           ;                                                               DIR1_H       //张臂，正转
 2710                   .dbline 1373
 2710 D29A              sbi 0x1a,2
 2712                   .dbline 1373
 2712 DA9A              sbi 0x1b,2
 2714                   .dbline 1373
 2714                   .dbline 1374
 2714           ;                                                       }
 2714 0EC0              xjmp L648
 2716           L647:
 2716                   .dbline 1375
 2716           ;                                                       else if((R_dat)==0x62)          
 2716 8091CD01          lds R24,_R_dat
 271A 9091CE01          lds R25,_R_dat+1
 271E 8236              cpi R24,98
 2720 E0E0              ldi R30,0
 2722 9E07              cpc R25,R30
 2724 11F0              breq X353
 2726 0C945520          xjmp L373
 272A           X353:
 272A           X231:
 272A                   .dbline 1376
 272A           ;                                                       { 
 272A                   .dbline 1377
 272A           ;                                                               DIR1_L      //收臂，反转
 272A                   .dbline 1377
 272A D29A              sbi 0x1a,2
 272C                   .dbline 1377
 272C 8BB3              in R24,0x1b
 272E 8B7F              andi R24,251
 2730 8BBB              out 0x1b,R24
 2732                   .dbline 1377
 2732                   .dbline 1378
 2732           ;                                                       }
 2732                   .dbline 1380
 2732           ;                                                       else
 2732           ;                                                       {
 2732                   .dbline 1381
 2732           ;                                                               return;//20170609
 2732           L650:
 2732           L648:
 2732                   .dbline 1384
 2732           ;                                                       }
 2732           ; 
 2732           ;                                                       VM_H//开电机电源
 2732                   .dbline 1384
 2732                   .dbline 1384
 2732 D09A              sbi 0x1a,0
 2734                   .dbline 1384
 2734 D89A              sbi 0x1b,0
 2736                   .dbline 1384
 2736                   .dbline 1384
 2736                   .dbline 1384
 2736                   .dbline 1384
 2736                   .dbline 1384
 2736 80916100          lds R24,97
 273A 8260              ori R24,2
 273C 80936100          sts 97,R24
 2740                   .dbline 1384
 2740 80916200          lds R24,98
 2744 8260              ori R24,2
 2746 80936200          sts 98,R24
 274A                   .dbline 1384
 274A                   .dbline 1384
 274A                   .dbline 1384
 274A                   .dbline 1384
 274A BF9A              sbi 0x17,7
 274C                   .dbline 1384
 274C C79A              sbi 0x18,7
 274E                   .dbline 1384
 274E                   .dbline 1386
 274E           ; 
 274E           ;                                                       CheckMotor(500);//开电机电源后需等待半秒让大功率二极管电压稳定
 274E 04EF              ldi R16,500
 2750 11E0              ldi R17,1
 2752 0E944B07          xcall _CheckMotor
 2756                   .dbline 1392
 2756           ; 
 2756           ;                                                       //CompCounter=0; //电流监测计数器清0
 2756           ;                                                       //EIFR|=0x01;//清INT0中断标志
 2756           ;                                                       //EIMSK&=0xfe;//关INT0中断，电机启动前期不用监测过流情况
 2756           ; 
 2756           ;                                                       TCCR1B = 0x00; //stop
 2756 2224              clr R2
 2758 2EBC              out 0x2e,R2
 275A                   .dbline 1393
 275A           ;                                                       TCNT1 = 61629;   //定时500ms
 275A 8DEB              ldi R24,61629
 275C 90EF              ldi R25,240
 275E 9DBD              out 0x2d,R25
 2760 8CBD              out 0x2c,R24
 2762                   .dbline 1394
 2762           ;                                                       TIFR|=0x04; //清定时器1中断标志
 2762 86B7              in R24,0x36
 2764 8460              ori R24,4
 2766 86BF              out 0x36,R24
 2768                   .dbline 1395
 2768           ;                                                       TCCR1B = 0x05; //1024分频
 2768 85E0              ldi R24,5
 276A 8EBD              out 0x2e,R24
 276C                   .dbline 1396
 276C           ;                                                       TIFR|=0x04; //清定时器1中断标志
 276C 86B7              in R24,0x36
 276E 8460              ori R24,4
 2770 86BF              out 0x36,R24
 2772                   .dbline 1398
 2772           ; 
 2772           ;                                                       Pwm_startup(1);//PWM启动，耗时约200ms,电机启动前期不进行电流检查，但有欠压监测          
 2772 01E0              ldi R16,1
 2774 0E94F403          xcall _Pwm_startup
 2778           L651:
 2778                   .dbline 1400
 2778           ; 
 2778           ;                                                       while((TIFR&0x04)==0x00); //等待定时到，期间可能有欠压中断发生
 2778           L652:
 2778                   .dbline 1400
 2778 26B6              in R2,0x36
 277A 22FE              sbrs R2,2
 277C FDCF              rjmp L651
 277E           X232:
 277E                   .dbline 1401
 277E           ;                                                       TCCR1B = 0x00; //stop
 277E 2224              clr R2
 2780 2EBC              out 0x2e,R2
 2782                   .dbline 1406
 2782           ; 
 2782           ;                                                       //EIFR|=0x01;//清INT0中断标志
 2782           ;                                                       //EIMSK|=0x01;//开INT0中断，电机启动500ms后即开始监测过流情况
 2782           ; 
 2782           ;                                                       CheckMotor(500);//延时保证总线电压稳定          
 2782 04EF              ldi R16,500
 2784 11E0              ldi R17,1
 2786 0E944B07          xcall _CheckMotor
 278A                   .dbline 1407
 278A           ;                                               }
 278A           L642:
 278A           L636:
 278A           L632:
 278A                   .dbline 1408
 278A           ;                                               T_dat=Motor1Status.i;
 278A 20903E02          lds R2,_Motor1Status
 278E 30903F02          lds R3,_Motor1Status+1
 2792 3092D001          sts _T_dat+1,R3
 2796 2092CF01          sts _T_dat,R2
 279A                   .dbline 1409
 279A           ;                                               SendManchester();        
 279A 0E94D120          xcall _SendManchester
 279E                   .dbline 1411
 279E           ; 
 279E           ;                                               break;
 279E 0C944A20          xjmp L584
 27A2           L654:
 27A2                   .dbline 1414
 27A2           ; 
 27A2           ;                                       case 0x70://调节电机   
 27A2           ;                                               if( ((R_dat)<0x71)  || ((R_dat)>0x7c)  )//既不是调大，也不是调小，也不微调大，也不是微调小，则立即返回且不响应上位机
 27A2 E090CD01          lds R14,_R_dat
 27A6 F090CE01          lds R15,_R_dat+1
 27AA C701              movw R24,R14
 27AC 8137              cpi R24,113
 27AE E0E0              ldi R30,0
 27B0 9E07              cpc R25,R30
 27B2 2CF0              brlt L657
 27B4           X233:
 27B4 8CE7              ldi R24,124
 27B6 90E0              ldi R25,0
 27B8 8E15              cp R24,R14
 27BA 9F05              cpc R25,R15
 27BC 14F4              brge L655
 27BE           X234:
 27BE           L657:
 27BE                   .dbline 1415
 27BE           ;                                               break;
 27BE 0C944A20          xjmp L584
 27C2           L655:
 27C2                   .dbline 1417
 27C2           ; 
 27C2           ;                                               i=R_dat%2;
 27C2 22E0              ldi R18,2
 27C4 30E0              ldi R19,0
 27C6 0091CD01          lds R16,_R_dat
 27CA 1091CE01          lds R17,_R_dat+1
 27CE 0E940000          xcall mod16s
 27D2 A02E              mov R10,R16
 27D4                   .dbline 1419
 27D4           ;                                               
 27D4           ;                                               if( (Motor1Run_P) || (Motor1Run_N) )//收放电机正在运行
 27D4 89B3              in R24,0x19
 27D6 8270              andi R24,2
 27D8 8695              lsr R24
 27DA 31F4              brne L661
 27DC           X235:
 27DC 89B3              in R24,0x19
 27DE 8470              andi R24,4
 27E0 8695              lsr R24
 27E2 8695              lsr R24
 27E4 8130              cpi R24,1
 27E6 51F0              breq L660
 27E8           X236:
 27E8           L661:
 27E8 89B3              in R24,0x19
 27EA 8270              andi R24,2
 27EC 8695              lsr R24
 27EE 8130              cpi R24,1
 27F0 99F4              brne L658
 27F2           X237:
 27F2 89B3              in R24,0x19
 27F4 8470              andi R24,4
 27F6 8695              lsr R24
 27F8 8695              lsr R24
 27FA 71F4              brne L658
 27FC           X238:
 27FC           L660:
 27FC                   .dbline 1420
 27FC           ;                                               {
 27FC                   .dbline 1421
 27FC           ;                                                       Motor2Status.s.StartResult=3;//另一电机正在运行
 27FC 80913C02          lds R24,_Motor2Status
 2800 90913D02          lds R25,_Motor2Status+1
 2804 806C              ori R24,192
 2806 90933D02          sts _Motor2Status+1,R25
 280A 80933C02          sts _Motor2Status,R24
 280E                   .dbline 1422
 280E           ;                                                       CheckMotor(100);//很快响应上位机
 280E 04E6              ldi R16,100
 2810 10E0              ldi R17,0
 2812 0E944B07          xcall _CheckMotor
 2816                   .dbline 1423
 2816           ;                                               }
 2816 AEC0              xjmp L659
 2818           L658:
 2818                   .dbline 1424
 2818           ;                                               else if(Motor2Run_P)//调节电机正在正转
 2818 80B1              in R24,0x0
 281A 8470              andi R24,4
 281C 8695              lsr R24
 281E 8695              lsr R24
 2820 01F5              brne L662
 2822           X239:
 2822 80B1              in R24,0x0
 2824 8170              andi R24,1
 2826 8130              cpi R24,1
 2828 E1F4              brne L662
 282A           X240:
 282A                   .dbline 1425
 282A           ;                                               {
 282A                   .dbline 1426
 282A           ;                                                 if(i==0)//偶数命令，正转
 282A AA20              tst R10
 282C 59F4              brne L664
 282E           X241:
 282E                   .dbline 1427
 282E           ;                                                 {
 282E                   .dbline 1428
 282E           ;                                                  Motor2Status.s.StartResult=1;//本电机正在同向运行
 282E 80913C02          lds R24,_Motor2Status
 2832 90913D02          lds R25,_Motor2Status+1
 2836 8F73              andi R24,63
 2838 8064              ori R24,64
 283A 90933D02          sts _Motor2Status+1,R25
 283E 80933C02          sts _Motor2Status,R24
 2842                   .dbline 1429
 2842           ;                                                 }
 2842 0AC0              xjmp L665
 2844           L664:
 2844                   .dbline 1431
 2844           ;                                                 else//奇数命令，反转
 2844           ;                                                 {
 2844                   .dbline 1432
 2844           ;                                                  Motor2Status.s.StartResult=2;//本电机正在反向运行
 2844 80913C02          lds R24,_Motor2Status
 2848 90913D02          lds R25,_Motor2Status+1
 284C 8F73              andi R24,63
 284E 8068              ori R24,128
 2850 90933D02          sts _Motor2Status+1,R25
 2854 80933C02          sts _Motor2Status,R24
 2858                   .dbline 1433
 2858           ;                                                 }
 2858           L665:
 2858                   .dbline 1434
 2858           ;                                                 CheckMotor(100); //很快响应上位机
 2858 04E6              ldi R16,100
 285A 10E0              ldi R17,0
 285C 0E944B07          xcall _CheckMotor
 2860                   .dbline 1435
 2860           ;                                               }
 2860 89C0              xjmp L663
 2862           L662:
 2862                   .dbline 1436
 2862           ;                                               else if(Motor2Run_N)//调节电机正在反转
 2862 80B1              in R24,0x0
 2864 8470              andi R24,4
 2866 8695              lsr R24
 2868 8695              lsr R24
 286A 8130              cpi R24,1
 286C F1F4              brne L666
 286E           X242:
 286E 0099              sbic 0x0,0
 2870 1CC0              rjmp L666
 2872           X243:
 2872                   .dbline 1437
 2872           ;                                               {
 2872                   .dbline 1438
 2872           ;                                                 if(i==0)//偶数命令，正转
 2872 AA20              tst R10
 2874 59F4              brne L668
 2876           X244:
 2876                   .dbline 1439
 2876           ;                                                 {
 2876                   .dbline 1440
 2876           ;                                                  Motor2Status.s.StartResult=2;//本电机正在反向运行
 2876 80913C02          lds R24,_Motor2Status
 287A 90913D02          lds R25,_Motor2Status+1
 287E 8F73              andi R24,63
 2880 8068              ori R24,128
 2882 90933D02          sts _Motor2Status+1,R25
 2886 80933C02          sts _Motor2Status,R24
 288A                   .dbline 1441
 288A           ;                                                 }
 288A 0AC0              xjmp L669
 288C           L668:
 288C                   .dbline 1443
 288C           ;                                                 else//奇数命令，反转
 288C           ;                                                 {
 288C                   .dbline 1444
 288C           ;                                                  Motor2Status.s.StartResult=1;//本电机正在同向运行
 288C 80913C02          lds R24,_Motor2Status
 2890 90913D02          lds R25,_Motor2Status+1
 2894 8F73              andi R24,63
 2896 8064              ori R24,64
 2898 90933D02          sts _Motor2Status+1,R25
 289C 80933C02          sts _Motor2Status,R24
 28A0                   .dbline 1445
 28A0           ;                                                 }
 28A0           L669:
 28A0                   .dbline 1446
 28A0           ;                                                 CheckMotor(100); //很快响应上位机
 28A0 04E6              ldi R16,100
 28A2 10E0              ldi R17,0
 28A4 0E944B07          xcall _CheckMotor
 28A8                   .dbline 1447
 28A8           ;                                               }                                       
 28A8 65C0              xjmp L667
 28AA           L666:
 28AA                   .dbline 1449
 28AA           ;                                               else //二个电机都是停止状态，按命令要求启动电机，约1.5秒后反馈上位机
 28AA           ;                                               {  
 28AA                   .dbline 1451
 28AA           ;                                                       //全部电机状态置初值，上一次停止原因全部清除
 28AA           ;                                                       Motor2Status.s.BrokenStop=0;
 28AA 80913C02          lds R24,_Motor2Status
 28AE 90913D02          lds R25,_Motor2Status+1
 28B2 8B7F              andi R24,251
 28B4 90933D02          sts _Motor2Status+1,R25
 28B8 80933C02          sts _Motor2Status,R24
 28BC                   .dbline 1452
 28BC           ;                                                       Motor2Status.s.CommandStop=0;
 28BC 877F              andi R24,247
 28BE 90933D02          sts _Motor2Status+1,R25
 28C2 80933C02          sts _Motor2Status,R24
 28C6                   .dbline 1453
 28C6           ;                                                       Motor2Status.s.OverCurrent=0;
 28C6 8F7E              andi R24,239
 28C8 90933D02          sts _Motor2Status+1,R25
 28CC 80933C02          sts _Motor2Status,R24
 28D0                   .dbline 1454
 28D0           ;                                                       Motor2Status.s.UnderVoltage=0;
 28D0 8F7D              andi R24,223
 28D2 90933D02          sts _Motor2Status+1,R25
 28D6 80933C02          sts _Motor2Status,R24
 28DA                   .dbline 1455
 28DA           ;                                                       Motor2Status.s.StartResult=0;//正常启动
 28DA 8F73              andi R24,63
 28DC 90933D02          sts _Motor2Status+1,R25
 28E0 80933C02          sts _Motor2Status,R24
 28E4                   .dbline 1457
 28E4           ; 
 28E4           ;                                                       if( i==1 )//奇数命令，调大
 28E4 8A2D              mov R24,R10
 28E6 8130              cpi R24,1
 28E8 59F4              brne L670
 28EA           X245:
 28EA                   .dbline 1458
 28EA           ;                                                       { 
 28EA                   .dbline 1459
 28EA           ;                                                               DIR2_L      //反转
 28EA                   .dbline 1459
 28EA 80916100          lds R24,97
 28EE 8160              ori R24,1
 28F0 80936100          sts 97,R24
 28F4                   .dbline 1459
 28F4 80916200          lds R24,98
 28F8 8E7F              andi R24,254
 28FA 80936200          sts 98,R24
 28FE                   .dbline 1459
 28FE                   .dbline 1460
 28FE           ;                                                       }
 28FE 0EC0              xjmp L671
 2900           L670:
 2900                   .dbline 1461
 2900           ;                                                       else if( i==0 )    //偶数命令，调小
 2900 AA20              tst R10
 2902 11F0              breq X354
 2904 0C945520          xjmp L373
 2908           X354:
 2908           X246:
 2908                   .dbline 1462
 2908           ;                                                       { 
 2908                   .dbline 1463
 2908           ;                                                               DIR2_H      //正转
 2908                   .dbline 1463
 2908 80916100          lds R24,97
 290C 8160              ori R24,1
 290E 80936100          sts 97,R24
 2912                   .dbline 1463
 2912 80916200          lds R24,98
 2916 8160              ori R24,1
 2918 80936200          sts 98,R24
 291C                   .dbline 1463
 291C                   .dbline 1464
 291C           ;                                                       }
 291C                   .dbline 1466
 291C           ;                                                       else
 291C           ;                                                       {
 291C                   .dbline 1467
 291C           ;                                                               return;//20170609
 291C           L673:
 291C           L671:
 291C                   .dbline 1470
 291C           ;                                                       }
 291C           ; 
 291C           ;                                                       VM_H//开电机电源
 291C                   .dbline 1470
 291C                   .dbline 1470
 291C D09A              sbi 0x1a,0
 291E                   .dbline 1470
 291E D89A              sbi 0x1b,0
 2920                   .dbline 1470
 2920                   .dbline 1470
 2920                   .dbline 1470
 2920                   .dbline 1470
 2920                   .dbline 1470
 2920 80916100          lds R24,97
 2924 8260              ori R24,2
 2926 80936100          sts 97,R24
 292A                   .dbline 1470
 292A 80916200          lds R24,98
 292E 8260              ori R24,2
 2930 80936200          sts 98,R24
 2934                   .dbline 1470
 2934                   .dbline 1470
 2934                   .dbline 1470
 2934                   .dbline 1470
 2934 BF9A              sbi 0x17,7
 2936                   .dbline 1470
 2936 C79A              sbi 0x18,7
 2938                   .dbline 1470
 2938                   .dbline 1472
 2938           ; 
 2938           ;                                                       CheckMotor(500);//开电机电源后需等待半秒让大功率二极管电压稳定
 2938 04EF              ldi R16,500
 293A 11E0              ldi R17,1
 293C 0E944B07          xcall _CheckMotor
 2940                   .dbline 1478
 2940           ; 
 2940           ;                                                       //CompCounter=0; //电流监测计数器清0
 2940           ;                                                       //EIFR|=0x01;//清INT0中断标志
 2940           ;                                                       //EIMSK&=0xfe;//关INT0中断，电机启动前期不用监测过流情况
 2940           ; 
 2940           ;                                                       TCCR1B = 0x00; //stop
 2940 2224              clr R2
 2942 2EBC              out 0x2e,R2
 2944                   .dbline 1479
 2944           ;                                                       TCNT1 = 61629;   //定时500ms
 2944 8DEB              ldi R24,61629
 2946 90EF              ldi R25,240
 2948 9DBD              out 0x2d,R25
 294A 8CBD              out 0x2c,R24
 294C                   .dbline 1480
 294C           ;                                                       TIFR|=0x04; //清定时器1中断标志
 294C 86B7              in R24,0x36
 294E 8460              ori R24,4
 2950 86BF              out 0x36,R24
 2952                   .dbline 1481
 2952           ;                                                       TCCR1B = 0x05; //1024分频
 2952 85E0              ldi R24,5
 2954 8EBD              out 0x2e,R24
 2956                   .dbline 1482
 2956           ;                                                       TIFR|=0x04; //清定时器1中断标志
 2956 86B7              in R24,0x36
 2958 8460              ori R24,4
 295A 86BF              out 0x36,R24
 295C                   .dbline 1484
 295C           ; 
 295C           ;                                                       Pwm_startup(2);//PWM启动，耗时约200ms,电机启动前期不进行电流检查，但有欠压监测                                  
 295C 02E0              ldi R16,2
 295E 0E94F403          xcall _Pwm_startup
 2962           L674:
 2962                   .dbline 1486
 2962           ; 
 2962           ;                                                       while((TIFR&0x04)==0x00); //等待定时到，期间可能有欠压中断发生
 2962           L675:
 2962                   .dbline 1486
 2962 26B6              in R2,0x36
 2964 22FE              sbrs R2,2
 2966 FDCF              rjmp L674
 2968           X247:
 2968                   .dbline 1487
 2968           ;                                                       TCCR1B = 0x00; //stop
 2968 2224              clr R2
 296A 2EBC              out 0x2e,R2
 296C                   .dbline 1492
 296C           ; 
 296C           ;                                                       //EIFR|=0x01;//清INT0中断标志
 296C           ;                                                       //EIMSK|=0x01;//开INT0中断，电机启动500ms后即开始监测过流情况
 296C           ; 
 296C           ;                                                       CheckMotor(500);//延时保证总线电压稳定                   
 296C 04EF              ldi R16,500
 296E 11E0              ldi R17,1
 2970 0E944B07          xcall _CheckMotor
 2974                   .dbline 1493
 2974           ;                                               }
 2974           L667:
 2974           L663:
 2974           L659:
 2974                   .dbline 1494
 2974           ;                                               T_dat=Motor2Status.i;
 2974 20903C02          lds R2,_Motor2Status
 2978 30903D02          lds R3,_Motor2Status+1
 297C 3092D001          sts _T_dat+1,R3
 2980 2092CF01          sts _T_dat,R2
 2984                   .dbline 1495
 2984           ;                                               SendManchester();               
 2984 0E94D120          xcall _SendManchester
 2988                   .dbline 1496
 2988           ;                                               if(R_dat>0x72)//微调，需要定时，定时到后自动停止
 2988 82E7              ldi R24,114
 298A 90E0              ldi R25,0
 298C 2090CD01          lds R2,_R_dat
 2990 3090CE01          lds R3,_R_dat+1
 2994 8215              cp R24,R2
 2996 9305              cpc R25,R3
 2998 14F0              brlt X355
 299A 0C944A20          xjmp L584
 299E           X355:
 299E           X248:
 299E                   .dbline 1497
 299E           ;                                               {
 299E                   .dbline 1498
 299E           ;                                                       ETIFR=0x04;//清Timer3溢出中断标志
 299E 84E0              ldi R24,4
 29A0 80937C00          sts 124,R24
 29A4                   .dbline 1499
 29A4           ;                                                       ETIMSK = 0x04; //Timer3溢出中断使能，其它中断关闭
 29A4 80937D00          sts 125,R24
 29A8                   .dbline 1500
 29A8           ;                                                       TCCR3B = 0x00;
 29A8 2224              clr R2
 29AA 20928A00          sts 138,R2
 29AE                   .dbline 1502
 29AE           ; 
 29AE           ;                                                       j=(R_dat-0x72+1)/2;
 29AE 22E0              ldi R18,2
 29B0 30E0              ldi R19,0
 29B2 0091CD01          lds R16,_R_dat
 29B6 1091CE01          lds R17,_R_dat+1
 29BA 0257              subi R16,114
 29BC 1040              sbci R17,0
 29BE 0F5F              subi R16,255  ; offset = 1
 29C0 1F4F              sbci R17,255
 29C2 0E940000          xcall div16s
 29C6 6801              movw R12,R16
 29C8                   .dbline 1503
 29C8           ;                                                       j=j*7812;
 29C8 04E8              ldi R16,7812
 29CA 1EE1              ldi R17,30
 29CC 9601              movw R18,R12
 29CE 0E940000          xcall empy16s
 29D2 6801              movw R12,R16
 29D4                   .dbline 1504
 29D4           ;                                                       j=65536-j;
 29D4 1601              movw R2,R12
 29D6 4424              clr R4
 29D8 5524              clr R5
 29DA 40E0              ldi R20,0
 29DC 50E0              ldi R21,0
 29DE 61E0              ldi R22,1
 29E0 70E0              ldi R23,0
 29E2 4219              sub R20,R2
 29E4 5309              sbc R21,R3
 29E6 6409              sbc R22,R4
 29E8 7509              sbc R23,R5
 29EA                   .dbline 1505
 29EA           ;                                                       j+=1;
 29EA CA01              movw R24,R20
 29EC 0196              adiw R24,1
 29EE 6C01              movw R12,R24
 29F0                   .dbline 1507
 29F0           ; 
 29F0           ;                                                       TCNT3H = j>>8;  //最小1秒，最多5秒
 29F0 1C01              movw R2,R24
 29F2 232C              mov R2,R3
 29F4 3324              clr R3
 29F6 20928900          sts 137,R2
 29FA                   .dbline 1508
 29FA           ;                                                       TCNT3L = j;
 29FA C0928800          sts 136,R12
 29FE                   .dbline 1519
 29FE           ; 
 29FE           ;                                                       //TCNT3H = 0xE1;  //1秒
 29FE           ;                                                       //TCNT3L = 0x7C;
 29FE           ; 
 29FE           ;                                                       //TCNT3H = 0xC2; //2秒
 29FE           ;                                                       //TCNT3L = 0xF7;
 29FE           ; 
 29FE           ;                                                       // TCNT3H = 0xA4; //3秒
 29FE           ;                                                       // TCNT3L = 0x73;
 29FE           ; 
 29FE           ;                                                       TCCR3A = 0x00;
 29FE 2224              clr R2
 2A00 20928B00          sts 139,R2
 2A04                   .dbline 1520
 2A04           ;                                                       TCCR3B = 0x05; //8M时钟，1024分频，定时1秒
 2A04 85E0              ldi R24,5
 2A06 80938A00          sts 138,R24
 2A0A                   .dbline 1521
 2A0A           ;                                                       ETIFR=0x04;//清Timer3溢出中断标志
 2A0A 84E0              ldi R24,4
 2A0C 80937C00          sts 124,R24
 2A10                   .dbline 1522
 2A10           ;                                               } 
 2A10                   .dbline 1523
 2A10           ;                                               break;
 2A10 0C944A20          xjmp L584
 2A14           L679:
 2A14                   .dbline 1526
 2A14           ; 
 2A14           ;                                       case 0x80://电机相关
 2A14           ;                                               if(R_dat==0x80)//只开电机电源，不开电机
 2A14 8091CD01          lds R24,_R_dat
 2A18 9091CE01          lds R25,_R_dat+1
 2A1C 8038              cpi R24,128
 2A1E E0E0              ldi R30,0
 2A20 9E07              cpc R25,R30
 2A22 01F5              brne L680
 2A24           X249:
 2A24                   .dbline 1527
 2A24           ;                                               {                 
 2A24                   .dbline 1528
 2A24           ;                                                       CheckMotor(30);//延迟10ms  
 2A24 0EE1              ldi R16,30
 2A26 10E0              ldi R17,0
 2A28 0E944B07          xcall _CheckMotor
 2A2C                   .dbline 1529
 2A2C           ;                                                       VM_H//开电机电源
 2A2C                   .dbline 1529
 2A2C                   .dbline 1529
 2A2C D09A              sbi 0x1a,0
 2A2E                   .dbline 1529
 2A2E D89A              sbi 0x1b,0
 2A30                   .dbline 1529
 2A30                   .dbline 1529
 2A30                   .dbline 1529
 2A30                   .dbline 1529
 2A30                   .dbline 1529
 2A30 80916100          lds R24,97
 2A34 8260              ori R24,2
 2A36 80936100          sts 97,R24
 2A3A                   .dbline 1529
 2A3A 80916200          lds R24,98
 2A3E 8260              ori R24,2
 2A40 80936200          sts 98,R24
 2A44                   .dbline 1529
 2A44                   .dbline 1529
 2A44                   .dbline 1529
 2A44                   .dbline 1529
 2A44 BF9A              sbi 0x17,7
 2A46                   .dbline 1529
 2A46 C79A              sbi 0x18,7
 2A48                   .dbline 1529
 2A48                   .dbline 1530
 2A48           ;                                                       CheckMotor(30);//延迟10ms  
 2A48 0EE1              ldi R16,30
 2A4A 10E0              ldi R17,0
 2A4C 0E944B07          xcall _CheckMotor
 2A50                   .dbline 1531
 2A50           ;                                                       T_dat=0x0000;   
 2A50 2224              clr R2
 2A52 3324              clr R3
 2A54 3092D001          sts _T_dat+1,R3
 2A58 2092CF01          sts _T_dat,R2
 2A5C                   .dbline 1532
 2A5C           ;                                                       SendManchester();
 2A5C 0E94D120          xcall _SendManchester
 2A60                   .dbline 1533
 2A60           ;                                               }         
 2A60 0C944A20          xjmp L584
 2A64           L680:
 2A64                   .dbline 1534
 2A64           ;                                               else if(R_dat==0x81)//获取电机状态      
 2A64 8091CD01          lds R24,_R_dat
 2A68 9091CE01          lds R25,_R_dat+1
 2A6C 8138              cpi R24,129
 2A6E E0E0              ldi R30,0
 2A70 9E07              cpc R25,R30
 2A72 F1F4              brne L682
 2A74           X250:
 2A74                   .dbline 1535
 2A74           ;                                               { 
 2A74                   .dbline 1537
 2A74           ;                                                       //先处理收放电机
 2A74           ;                                                       CheckMotor(30);//延迟10ms  
 2A74 0EE1              ldi R16,30
 2A76 10E0              ldi R17,0
 2A78 0E944B07          xcall _CheckMotor
 2A7C                   .dbline 1538
 2A7C           ;                                                       T_dat=Motor1Status.i;      
 2A7C 20903E02          lds R2,_Motor1Status
 2A80 30903F02          lds R3,_Motor1Status+1
 2A84 3092D001          sts _T_dat+1,R3
 2A88 2092CF01          sts _T_dat,R2
 2A8C                   .dbline 1539
 2A8C           ;                                                       SendManchester();
 2A8C 0E94D120          xcall _SendManchester
 2A90                   .dbline 1542
 2A90           ; 
 2A90           ;                                                       //再处理调节电机 
 2A90           ;                                                       CheckMotor(30);//延迟10ms  
 2A90 0EE1              ldi R16,30
 2A92 10E0              ldi R17,0
 2A94 0E944B07          xcall _CheckMotor
 2A98                   .dbline 1543
 2A98           ;                                                       T_dat=Motor2Status.i;       
 2A98 20903C02          lds R2,_Motor2Status
 2A9C 30903D02          lds R3,_Motor2Status+1
 2AA0 3092D001          sts _T_dat+1,R3
 2AA4 2092CF01          sts _T_dat,R2
 2AA8                   .dbline 1544
 2AA8           ;                                                       SendManchester();
 2AA8 0E94D120          xcall _SendManchester
 2AAC                   .dbline 1545
 2AAC           ;                                               }         
 2AAC 0C944A20          xjmp L584
 2AB0           L682:
 2AB0                   .dbline 1546
 2AB0           ;                                               else if(R_dat==0x82)//电机停止，同时停止二个电机
 2AB0 8091CD01          lds R24,_R_dat
 2AB4 9091CE01          lds R25,_R_dat+1
 2AB8 8238              cpi R24,130
 2ABA E0E0              ldi R30,0
 2ABC 9E07              cpc R25,R30
 2ABE 09F0              breq X356
 2AC0 71C0              xjmp L684
 2AC2           X356:
 2AC2           X251:
 2AC2                   .dbline 1547
 2AC2           ;                                               {        
 2AC2                   .dbline 1548
 2AC2           ;                                                       if( (Motor1Run_P) || (Motor1Run_N) )//收放电机正在运行
 2AC2 89B3              in R24,0x19
 2AC4 8270              andi R24,2
 2AC6 8695              lsr R24
 2AC8 31F4              brne L689
 2ACA           X252:
 2ACA 89B3              in R24,0x19
 2ACC 8470              andi R24,4
 2ACE 8695              lsr R24
 2AD0 8695              lsr R24
 2AD2 8130              cpi R24,1
 2AD4 51F0              breq L688
 2AD6           X253:
 2AD6           L689:
 2AD6 89B3              in R24,0x19
 2AD8 8270              andi R24,2
 2ADA 8695              lsr R24
 2ADC 8130              cpi R24,1
 2ADE 71F4              brne L686
 2AE0           X254:
 2AE0 89B3              in R24,0x19
 2AE2 8470              andi R24,4
 2AE4 8695              lsr R24
 2AE6 8695              lsr R24
 2AE8 49F4              brne L686
 2AEA           X255:
 2AEA           L688:
 2AEA                   .dbline 1549
 2AEA           ;                                                       {
 2AEA                   .dbline 1550
 2AEA           ;                                                               Motor1Status.s.CommandStop=1;
 2AEA 80913E02          lds R24,_Motor1Status
 2AEE 90913F02          lds R25,_Motor1Status+1
 2AF2 8860              ori R24,8
 2AF4 90933F02          sts _Motor1Status+1,R25
 2AF8 80933E02          sts _Motor1Status,R24
 2AFC                   .dbline 1551
 2AFC           ;                                                       }
 2AFC           L686:
 2AFC                   .dbline 1552
 2AFC           ;                                                       if( (Motor2Run_P) || (Motor2Run_N) )//调节电机正在运行
 2AFC 80B1              in R24,0x0
 2AFE 8470              andi R24,4
 2B00 8695              lsr R24
 2B02 8695              lsr R24
 2B04 21F4              brne L693
 2B06           X256:
 2B06 80B1              in R24,0x0
 2B08 8170              andi R24,1
 2B0A 8130              cpi R24,1
 2B0C 41F0              breq L692
 2B0E           X257:
 2B0E           L693:
 2B0E 80B1              in R24,0x0
 2B10 8470              andi R24,4
 2B12 8695              lsr R24
 2B14 8695              lsr R24
 2B16 8130              cpi R24,1
 2B18 59F4              brne L690
 2B1A           X258:
 2B1A 0099              sbic 0x0,0
 2B1C 09C0              rjmp L690
 2B1E           X259:
 2B1E           L692:
 2B1E                   .dbline 1553
 2B1E           ;                                                       { 
 2B1E                   .dbline 1554
 2B1E           ;                                                               Motor2Status.s.CommandStop=1;
 2B1E 80913C02          lds R24,_Motor2Status
 2B22 90913D02          lds R25,_Motor2Status+1
 2B26 8860              ori R24,8
 2B28 90933D02          sts _Motor2Status+1,R25
 2B2C 80933C02          sts _Motor2Status,R24
 2B30                   .dbline 1555
 2B30           ;                                                       }
 2B30           L690:
 2B30                   .dbline 1556
 2B30           ;                                                       MOTORSTOP  //关电机
 2B30                   .dbline 1556
 2B30                   .dbline 1556
 2B30 D09A              sbi 0x1a,0
 2B32                   .dbline 1556
 2B32 D89A              sbi 0x1b,0
 2B34                   .dbline 1556
 2B34                   .dbline 1556
 2B34                   .dbline 1556
 2B34                   .dbline 1556
 2B34                   .dbline 1556
 2B34 80916100          lds R24,97
 2B38 8260              ori R24,2
 2B3A 80936100          sts 97,R24
 2B3E                   .dbline 1556
 2B3E 80916200          lds R24,98
 2B42 8260              ori R24,2
 2B44 80936200          sts 98,R24
 2B48                   .dbline 1556
 2B48                   .dbline 1556
 2B48                   .dbline 1556
 2B48                   .dbline 1556
 2B48 BF9A              sbi 0x17,7
 2B4A                   .dbline 1556
 2B4A 88B3              in R24,0x18
 2B4C 8F77              andi R24,127
 2B4E 88BB              out 0x18,R24
 2B50                   .dbline 1556
 2B50                   .dbline 1556
 2B50                   .dbline 1556
 2B50                   .dbline 1556
 2B50 D29A              sbi 0x1a,2
 2B52                   .dbline 1556
 2B52 8BB3              in R24,0x1b
 2B54 8B7F              andi R24,251
 2B56 8BBB              out 0x1b,R24
 2B58                   .dbline 1556
 2B58                   .dbline 1556
 2B58                   .dbline 1556
 2B58                   .dbline 1556
 2B58                   .dbline 1556
 2B58 D19A              sbi 0x1a,1
 2B5A                   .dbline 1556
 2B5A 8BB3              in R24,0x1b
 2B5C 8D7F              andi R24,253
 2B5E 8BBB              out 0x1b,R24
 2B60                   .dbline 1556
 2B60                   .dbline 1556
 2B60                   .dbline 1556
 2B60                   .dbline 1556
 2B60                   .dbline 1556
 2B60 80916100          lds R24,97
 2B64 8160              ori R24,1
 2B66 80936100          sts 97,R24
 2B6A                   .dbline 1556
 2B6A 80916200          lds R24,98
 2B6E 8E7F              andi R24,254
 2B70 80936200          sts 98,R24
 2B74                   .dbline 1556
 2B74                   .dbline 1556
 2B74                   .dbline 1556
 2B74                   .dbline 1556
 2B74                   .dbline 1556
 2B74 80916100          lds R24,97
 2B78 8460              ori R24,4
 2B7A 80936100          sts 97,R24
 2B7E                   .dbline 1556
 2B7E 80916200          lds R24,98
 2B82 8B7F              andi R24,251
 2B84 80936200          sts 98,R24
 2B88                   .dbline 1556
 2B88                   .dbline 1556
 2B88                   .dbline 1557
 2B88           ;                                                       CheckMotor(200);
 2B88 08EC              ldi R16,200
 2B8A 10E0              ldi R17,0
 2B8C 0E944B07          xcall _CheckMotor
 2B90                   .dbline 1558
 2B90           ;                                                       T_dat=0x0000;   
 2B90 2224              clr R2
 2B92 3324              clr R3
 2B94 3092D001          sts _T_dat+1,R3
 2B98 2092CF01          sts _T_dat,R2
 2B9C                   .dbline 1559
 2B9C           ;                                                       SendManchester();        
 2B9C 0E94D120          xcall _SendManchester
 2BA0                   .dbline 1560
 2BA0           ;                                               }
 2BA0 0C944A20          xjmp L584
 2BA4           L684:
 2BA4                   .dbline 1561
 2BA4           ;                                               else if(R_dat==0x83)//读取电机堵转电流档位和断路档位
 2BA4 8091CD01          lds R24,_R_dat
 2BA8 9091CE01          lds R25,_R_dat+1
 2BAC 8338              cpi R24,131
 2BAE E0E0              ldi R30,0
 2BB0 9E07              cpc R25,R30
 2BB2 09F0              breq X357
 2BB4 5DC0              xjmp L694
 2BB6           X357:
 2BB6           X260:
 2BB6                   .dbline 1562
 2BB6           ;                                               {
 2BB6                   .dbline 1563
 2BB6           ;                                                       Motor1Gear=EEPROM_read(0);//收放电机
 2BB6 0027              clr R16
 2BB8 1127              clr R17
 2BBA 0E94DC24          xcall _EEPROM_read
 2BBE C02E              mov R12,R16
 2BC0 C0923B02          sts _Motor1Gear,R12
 2BC4                   .dbline 1564
 2BC4           ;                                                       Motor2Gear=EEPROM_read(1);//调节电机
 2BC4 01E0              ldi R16,1
 2BC6 10E0              ldi R17,0
 2BC8 0E94DC24          xcall _EEPROM_read
 2BCC C02E              mov R12,R16
 2BCE C0923A02          sts _Motor2Gear,R12
 2BD2                   .dbline 1565
 2BD2           ;                                                       MotorIdelGear=EEPROM_read(2); //电机断路
 2BD2 02E0              ldi R16,2
 2BD4 10E0              ldi R17,0
 2BD6 0E94DC24          xcall _EEPROM_read
 2BDA C02E              mov R12,R16
 2BDC C0923702          sts _MotorIdelGear,R12
 2BE0                   .dbline 1566
 2BE0           ;                                                       Gear2Thr();
 2BE0 0E94540A          xcall _Gear2Thr
 2BE4                   .dbline 1567
 2BE4           ;                                                       CheckMotor(30);//延迟30ms       
 2BE4 0EE1              ldi R16,30
 2BE6 10E0              ldi R17,0
 2BE8 0E944B07          xcall _CheckMotor
 2BEC                   .dbline 1568
 2BEC           ;                                                       T_dat=MotorIdelGear;
 2BEC 20903702          lds R2,_MotorIdelGear
 2BF0 3324              clr R3
 2BF2 3092D001          sts _T_dat+1,R3
 2BF6 2092CF01          sts _T_dat,R2
 2BFA                   .dbline 1569
 2BFA           ;                                                       T_dat<<=4;
 2BFA 2090CF01          lds R2,_T_dat
 2BFE 3090D001          lds R3,_T_dat+1
 2C02 220C              lsl R2
 2C04 331C              rol R3
 2C06 220C              lsl R2
 2C08 331C              rol R3
 2C0A 220C              lsl R2
 2C0C 331C              rol R3
 2C0E 220C              lsl R2
 2C10 331C              rol R3
 2C12 3092D001          sts _T_dat+1,R3
 2C16 2092CF01          sts _T_dat,R2
 2C1A                   .dbline 1570
 2C1A           ;                                                       T_dat|=Motor2Gear;       
 2C1A 20903A02          lds R2,_Motor2Gear
 2C1E 3324              clr R3
 2C20 4090CF01          lds R4,_T_dat
 2C24 5090D001          lds R5,_T_dat+1
 2C28 4228              or R4,R2
 2C2A 5328              or R5,R3
 2C2C 5092D001          sts _T_dat+1,R5
 2C30 4092CF01          sts _T_dat,R4
 2C34                   .dbline 1571
 2C34           ;                                                       T_dat<<=4;
 2C34 1201              movw R2,R4
 2C36 220C              lsl R2
 2C38 331C              rol R3
 2C3A 220C              lsl R2
 2C3C 331C              rol R3
 2C3E 220C              lsl R2
 2C40 331C              rol R3
 2C42 220C              lsl R2
 2C44 331C              rol R3
 2C46 3092D001          sts _T_dat+1,R3
 2C4A 2092CF01          sts _T_dat,R2
 2C4E                   .dbline 1572
 2C4E           ;                                                       T_dat|=Motor1Gear; 
 2C4E 20903B02          lds R2,_Motor1Gear
 2C52 3324              clr R3
 2C54 4090CF01          lds R4,_T_dat
 2C58 5090D001          lds R5,_T_dat+1
 2C5C 4228              or R4,R2
 2C5E 5328              or R5,R3
 2C60 5092D001          sts _T_dat+1,R5
 2C64 4092CF01          sts _T_dat,R4
 2C68                   .dbline 1573
 2C68           ;                                                       SendManchester();
 2C68 0E94D120          xcall _SendManchester
 2C6C                   .dbline 1574
 2C6C           ;                                               }       
 2C6C 0C944A20          xjmp L584
 2C70           L694:
 2C70                   .dbline 1575
 2C70           ;                                               else if(R_dat>0x83)//还剩12档，用于设置电机堵转电流, 收放电机和调节电机各6档
 2C70 83E8              ldi R24,131
 2C72 90E0              ldi R25,0
 2C74 2090CD01          lds R2,_R_dat
 2C78 3090CE01          lds R3,_R_dat+1
 2C7C 8215              cp R24,R2
 2C7E 9305              cpc R25,R3
 2C80 14F0              brlt X358
 2C82 0C944A20          xjmp L584
 2C86           X358:
 2C86           X261:
 2C86                   .dbline 1576
 2C86           ;                                               {
 2C86                   .dbline 1577
 2C86           ;                                                       if(R_dat==0x84)
 2C86 C101              movw R24,R2
 2C88 8438              cpi R24,132
 2C8A E0E0              ldi R30,0
 2C8C 9E07              cpc R25,R30
 2C8E 49F4              brne L698
 2C90           X262:
 2C90                   .dbline 1578
 2C90           ;                                                       {
 2C90                   .dbline 1579
 2C90           ;                                                               Motor1Gear=1; 
 2C90 81E0              ldi R24,1
 2C92 80933B02          sts _Motor1Gear,R24
 2C96                   .dbline 1580
 2C96           ;                                                               EEPROM_write(0,Motor1Gear);
 2C96 282F              mov R18,R24
 2C98 0027              clr R16
 2C9A 1127              clr R17
 2C9C 0E94D424          xcall _EEPROM_write
 2CA0                   .dbline 1581
 2CA0           ;                                                       }
 2CA0 BAC0              xjmp L699
 2CA2           L698:
 2CA2                   .dbline 1582
 2CA2           ;                                                       else if(R_dat==0x85)
 2CA2 8091CD01          lds R24,_R_dat
 2CA6 9091CE01          lds R25,_R_dat+1
 2CAA 8538              cpi R24,133
 2CAC E0E0              ldi R30,0
 2CAE 9E07              cpc R25,R30
 2CB0 49F4              brne L700
 2CB2           X263:
 2CB2                   .dbline 1583
 2CB2           ;                                                       {
 2CB2                   .dbline 1584
 2CB2           ;                                                               Motor1Gear=2; 
 2CB2 82E0              ldi R24,2
 2CB4 80933B02          sts _Motor1Gear,R24
 2CB8                   .dbline 1585
 2CB8           ;                                                               EEPROM_write(0,Motor1Gear);
 2CB8 282F              mov R18,R24
 2CBA 0027              clr R16
 2CBC 1127              clr R17
 2CBE 0E94D424          xcall _EEPROM_write
 2CC2                   .dbline 1586
 2CC2           ;                                                       }
 2CC2 A9C0              xjmp L701
 2CC4           L700:
 2CC4                   .dbline 1587
 2CC4           ;                                                       else if(R_dat==0x86)
 2CC4 8091CD01          lds R24,_R_dat
 2CC8 9091CE01          lds R25,_R_dat+1
 2CCC 8638              cpi R24,134
 2CCE E0E0              ldi R30,0
 2CD0 9E07              cpc R25,R30
 2CD2 49F4              brne L702
 2CD4           X264:
 2CD4                   .dbline 1588
 2CD4           ;                                                       {
 2CD4                   .dbline 1589
 2CD4           ;                                                               Motor1Gear=3; 
 2CD4 83E0              ldi R24,3
 2CD6 80933B02          sts _Motor1Gear,R24
 2CDA                   .dbline 1590
 2CDA           ;                                                               EEPROM_write(0,Motor1Gear);
 2CDA 282F              mov R18,R24
 2CDC 0027              clr R16
 2CDE 1127              clr R17
 2CE0 0E94D424          xcall _EEPROM_write
 2CE4                   .dbline 1591
 2CE4           ;                                                       }
 2CE4 98C0              xjmp L703
 2CE6           L702:
 2CE6                   .dbline 1592
 2CE6           ;                                                       else if(R_dat==0x87)
 2CE6 8091CD01          lds R24,_R_dat
 2CEA 9091CE01          lds R25,_R_dat+1
 2CEE 8738              cpi R24,135
 2CF0 E0E0              ldi R30,0
 2CF2 9E07              cpc R25,R30
 2CF4 49F4              brne L704
 2CF6           X265:
 2CF6                   .dbline 1593
 2CF6           ;                                                       {
 2CF6                   .dbline 1594
 2CF6           ;                                                               Motor1Gear=4; 
 2CF6 84E0              ldi R24,4
 2CF8 80933B02          sts _Motor1Gear,R24
 2CFC                   .dbline 1595
 2CFC           ;                                                               EEPROM_write(0,Motor1Gear);
 2CFC 282F              mov R18,R24
 2CFE 0027              clr R16
 2D00 1127              clr R17
 2D02 0E94D424          xcall _EEPROM_write
 2D06                   .dbline 1596
 2D06           ;                                                       }
 2D06 87C0              xjmp L705
 2D08           L704:
 2D08                   .dbline 1597
 2D08           ;                                                       else if(R_dat==0x88)
 2D08 8091CD01          lds R24,_R_dat
 2D0C 9091CE01          lds R25,_R_dat+1
 2D10 8838              cpi R24,136
 2D12 E0E0              ldi R30,0
 2D14 9E07              cpc R25,R30
 2D16 49F4              brne L706
 2D18           X266:
 2D18                   .dbline 1598
 2D18           ;                                                       {
 2D18                   .dbline 1599
 2D18           ;                                                               Motor1Gear=5; 
 2D18 85E0              ldi R24,5
 2D1A 80933B02          sts _Motor1Gear,R24
 2D1E                   .dbline 1600
 2D1E           ;                                                               EEPROM_write(0,Motor1Gear);
 2D1E 282F              mov R18,R24
 2D20 0027              clr R16
 2D22 1127              clr R17
 2D24 0E94D424          xcall _EEPROM_write
 2D28                   .dbline 1601
 2D28           ;                                                       }
 2D28 76C0              xjmp L707
 2D2A           L706:
 2D2A                   .dbline 1602
 2D2A           ;                                                       else if(R_dat==0x89)
 2D2A 8091CD01          lds R24,_R_dat
 2D2E 9091CE01          lds R25,_R_dat+1
 2D32 8938              cpi R24,137
 2D34 E0E0              ldi R30,0
 2D36 9E07              cpc R25,R30
 2D38 49F4              brne L708
 2D3A           X267:
 2D3A                   .dbline 1603
 2D3A           ;                                                       {
 2D3A                   .dbline 1604
 2D3A           ;                                                               Motor1Gear=6; 
 2D3A 86E0              ldi R24,6
 2D3C 80933B02          sts _Motor1Gear,R24
 2D40                   .dbline 1605
 2D40           ;                                                               EEPROM_write(0,Motor1Gear);
 2D40 282F              mov R18,R24
 2D42 0027              clr R16
 2D44 1127              clr R17
 2D46 0E94D424          xcall _EEPROM_write
 2D4A                   .dbline 1606
 2D4A           ;                                                       }
 2D4A 65C0              xjmp L709
 2D4C           L708:
 2D4C                   .dbline 1607
 2D4C           ;                                                       else if(R_dat==0x8a)
 2D4C 8091CD01          lds R24,_R_dat
 2D50 9091CE01          lds R25,_R_dat+1
 2D54 8A38              cpi R24,138
 2D56 E0E0              ldi R30,0
 2D58 9E07              cpc R25,R30
 2D5A 49F4              brne L710
 2D5C           X268:
 2D5C                   .dbline 1608
 2D5C           ;                                                       {
 2D5C                   .dbline 1609
 2D5C           ;                                                               Motor2Gear=1; 
 2D5C 81E0              ldi R24,1
 2D5E 80933A02          sts _Motor2Gear,R24
 2D62                   .dbline 1610
 2D62           ;                                                               EEPROM_write(1,Motor2Gear);
 2D62 282F              mov R18,R24
 2D64 01E0              ldi R16,1
 2D66 10E0              ldi R17,0
 2D68 0E94D424          xcall _EEPROM_write
 2D6C                   .dbline 1611
 2D6C           ;                                                       }
 2D6C 54C0              xjmp L711
 2D6E           L710:
 2D6E                   .dbline 1612
 2D6E           ;                                                       else if(R_dat==0x8b)
 2D6E 8091CD01          lds R24,_R_dat
 2D72 9091CE01          lds R25,_R_dat+1
 2D76 8B38              cpi R24,139
 2D78 E0E0              ldi R30,0
 2D7A 9E07              cpc R25,R30
 2D7C 49F4              brne L712
 2D7E           X269:
 2D7E                   .dbline 1613
 2D7E           ;                                                       {
 2D7E                   .dbline 1614
 2D7E           ;                                                               Motor2Gear=2;
 2D7E 82E0              ldi R24,2
 2D80 80933A02          sts _Motor2Gear,R24
 2D84                   .dbline 1615
 2D84           ;                                                               EEPROM_write(1,Motor2Gear);
 2D84 282F              mov R18,R24
 2D86 01E0              ldi R16,1
 2D88 10E0              ldi R17,0
 2D8A 0E94D424          xcall _EEPROM_write
 2D8E                   .dbline 1616
 2D8E           ;                                                       }
 2D8E 43C0              xjmp L713
 2D90           L712:
 2D90                   .dbline 1617
 2D90           ;                                                       else if(R_dat==0x8c)
 2D90 8091CD01          lds R24,_R_dat
 2D94 9091CE01          lds R25,_R_dat+1
 2D98 8C38              cpi R24,140
 2D9A E0E0              ldi R30,0
 2D9C 9E07              cpc R25,R30
 2D9E 49F4              brne L714
 2DA0           X270:
 2DA0                   .dbline 1618
 2DA0           ;                                                       {
 2DA0                   .dbline 1619
 2DA0           ;                                                               Motor2Gear=3;
 2DA0 83E0              ldi R24,3
 2DA2 80933A02          sts _Motor2Gear,R24
 2DA6                   .dbline 1620
 2DA6           ;                                                               EEPROM_write(1,Motor2Gear);
 2DA6 282F              mov R18,R24
 2DA8 01E0              ldi R16,1
 2DAA 10E0              ldi R17,0
 2DAC 0E94D424          xcall _EEPROM_write
 2DB0                   .dbline 1621
 2DB0           ;                                                       }
 2DB0 32C0              xjmp L715
 2DB2           L714:
 2DB2                   .dbline 1622
 2DB2           ;                                                       else if(R_dat==0x8d)
 2DB2 8091CD01          lds R24,_R_dat
 2DB6 9091CE01          lds R25,_R_dat+1
 2DBA 8D38              cpi R24,141
 2DBC E0E0              ldi R30,0
 2DBE 9E07              cpc R25,R30
 2DC0 49F4              brne L716
 2DC2           X271:
 2DC2                   .dbline 1623
 2DC2           ;                                                       {
 2DC2                   .dbline 1624
 2DC2           ;                                                               Motor2Gear=4;
 2DC2 84E0              ldi R24,4
 2DC4 80933A02          sts _Motor2Gear,R24
 2DC8                   .dbline 1625
 2DC8           ;                                                               EEPROM_write(1,Motor2Gear);
 2DC8 282F              mov R18,R24
 2DCA 01E0              ldi R16,1
 2DCC 10E0              ldi R17,0
 2DCE 0E94D424          xcall _EEPROM_write
 2DD2                   .dbline 1626
 2DD2           ;                                                       }
 2DD2 21C0              xjmp L717
 2DD4           L716:
 2DD4                   .dbline 1627
 2DD4           ;                                                       else if(R_dat==0x8e)
 2DD4 8091CD01          lds R24,_R_dat
 2DD8 9091CE01          lds R25,_R_dat+1
 2DDC 8E38              cpi R24,142
 2DDE E0E0              ldi R30,0
 2DE0 9E07              cpc R25,R30
 2DE2 49F4              brne L718
 2DE4           X272:
 2DE4                   .dbline 1628
 2DE4           ;                                                       {
 2DE4                   .dbline 1629
 2DE4           ;                                                               Motor2Gear=5;
 2DE4 85E0              ldi R24,5
 2DE6 80933A02          sts _Motor2Gear,R24
 2DEA                   .dbline 1630
 2DEA           ;                                                               EEPROM_write(1,Motor2Gear);
 2DEA 282F              mov R18,R24
 2DEC 01E0              ldi R16,1
 2DEE 10E0              ldi R17,0
 2DF0 0E94D424          xcall _EEPROM_write
 2DF4                   .dbline 1631
 2DF4           ;                                                       }
 2DF4 10C0              xjmp L719
 2DF6           L718:
 2DF6                   .dbline 1632
 2DF6           ;                                                       else if(R_dat==0x8f)
 2DF6 8091CD01          lds R24,_R_dat
 2DFA 9091CE01          lds R25,_R_dat+1
 2DFE 8F38              cpi R24,143
 2E00 E0E0              ldi R30,0
 2E02 9E07              cpc R25,R30
 2E04 41F4              brne L720
 2E06           X273:
 2E06                   .dbline 1633
 2E06           ;                                                       {
 2E06                   .dbline 1634
 2E06           ;                                                               Motor2Gear=6;
 2E06 86E0              ldi R24,6
 2E08 80933A02          sts _Motor2Gear,R24
 2E0C                   .dbline 1635
 2E0C           ;                                                               EEPROM_write(1,Motor2Gear);
 2E0C 282F              mov R18,R24
 2E0E 01E0              ldi R16,1
 2E10 10E0              ldi R17,0
 2E12 0E94D424          xcall _EEPROM_write
 2E16                   .dbline 1636
 2E16           ;                                                       }         
 2E16           L720:
 2E16           L719:
 2E16           L717:
 2E16           L715:
 2E16           L713:
 2E16           L711:
 2E16           L709:
 2E16           L707:
 2E16           L705:
 2E16           L703:
 2E16           L701:
 2E16           L699:
 2E16                   .dbline 1637
 2E16           ;                                                       Gear2Thr();
 2E16 0E94540A          xcall _Gear2Thr
 2E1A                   .dbline 1638
 2E1A           ;                                                       CheckMotor(30);//延迟30ms       
 2E1A 0EE1              ldi R16,30
 2E1C 10E0              ldi R17,0
 2E1E 0E944B07          xcall _CheckMotor
 2E22                   .dbline 1639
 2E22           ;                                                       T_dat=0;            
 2E22 2224              clr R2
 2E24 3324              clr R3
 2E26 3092D001          sts _T_dat+1,R3
 2E2A 2092CF01          sts _T_dat,R2
 2E2E                   .dbline 1640
 2E2E           ;                                                       SendManchester(); 
 2E2E 0E94D120          xcall _SendManchester
 2E32                   .dbline 1641
 2E32           ;                                               }         
 2E32                   .dbline 1642
 2E32           ;                                               break;
 2E32 0C944A20          xjmp L584
 2E36           L722:
 2E36                   .dbline 1647
 2E36           ; 
 2E36           ; 
 2E36           ; 
 2E36           ;                                       case 0x90: //标定数据
 2E36           ;                                               if(R_dat==0x90)//提取测试信息
 2E36 8091CD01          lds R24,_R_dat
 2E3A 9091CE01          lds R25,_R_dat+1
 2E3E 8039              cpi R24,144
 2E40 E0E0              ldi R30,0
 2E42 9E07              cpc R25,R30
 2E44 09F0              breq X359
 2E46 16C1              xjmp L723
 2E48           X359:
 2E48           X274:
 2E48                   .dbline 1648
 2E48           ;                                               {
 2E48                   .dbline 1649
 2E48           ;                                                       Uart0TxData[0]=0xE8;
 2E48 88EE              ldi R24,232
 2E4A 80932100          sts _Uart0TxData,R24
 2E4E                   .dbline 1650
 2E4E           ;                                                       Uart0TxData[1]=0x40;
 2E4E 80E4              ldi R24,64
 2E50 80932200          sts _Uart0TxData+1,R24
 2E54                   .dbline 1651
 2E54           ;                                                       Uart0TxData[2]=0xc8;
 2E54 88EC              ldi R24,200
 2E56 80932300          sts _Uart0TxData+2,R24
 2E5A                   .dbline 1652
 2E5A           ;                                                       Uart0TxData[3]=0;//测试信息包0
 2E5A 2224              clr R2
 2E5C 20922400          sts _Uart0TxData+3,R2
 2E60                   .dbline 1653
 2E60           ;                                                       SendUart0_2(9,4);// 超时32ms     
 2E60 24E0              ldi R18,4
 2E62 30E0              ldi R19,0
 2E64 09E0              ldi R16,9
 2E66 0E944E03          xcall _SendUart0_2
 2E6A                   .dbline 1654
 2E6A           ;                                                       for(i=0;i<32;i++)
 2E6A AA24              clr R10
 2E6C 2FC0              xjmp L731
 2E6E           L728:
 2E6E                   .dbline 1655
 2E6E           ;                                                       {
 2E6E                   .dbline 1656
 2E6E           ;                                                               CheckMotor(20);
 2E6E 04E1              ldi R16,20
 2E70 10E0              ldi R17,0
 2E72 0E944B07          xcall _CheckMotor
 2E76                   .dbline 1657
 2E76           ;                                                               T_dat=Uart0RxData[i*2+1];//高字节
 2E76 80E0              ldi R24,<_Uart0RxData+1
 2E78 90E0              ldi R25,>_Uart0RxData+1
 2E7A EA2D              mov R30,R10
 2E7C FF27              clr R31
 2E7E EE0F              lsl R30
 2E80 FF1F              rol R31
 2E82 E80F              add R30,R24
 2E84 F91F              adc R31,R25
 2E86 2080              ldd R2,z+0
 2E88 3324              clr R3
 2E8A 3092D001          sts _T_dat+1,R3
 2E8E 2092CF01          sts _T_dat,R2
 2E92                   .dbline 1658
 2E92           ;                                                               T_dat<<=8;
 2E92 322C              mov R3,R2
 2E94 2224              clr R2
 2E96 3092D001          sts _T_dat+1,R3
 2E9A 2092CF01          sts _T_dat,R2
 2E9E                   .dbline 1659
 2E9E           ;                                                               T_dat|=Uart0RxData[i*2+0];//低字节
 2E9E 80E0              ldi R24,<_Uart0RxData
 2EA0 90E0              ldi R25,>_Uart0RxData
 2EA2 EA2D              mov R30,R10
 2EA4 FF27              clr R31
 2EA6 EE0F              lsl R30
 2EA8 FF1F              rol R31
 2EAA E80F              add R30,R24
 2EAC F91F              adc R31,R25
 2EAE 2080              ldd R2,z+0
 2EB0 3324              clr R3
 2EB2 4090CF01          lds R4,_T_dat
 2EB6 5090D001          lds R5,_T_dat+1
 2EBA 4228              or R4,R2
 2EBC 5328              or R5,R3
 2EBE 5092D001          sts _T_dat+1,R5
 2EC2 4092CF01          sts _T_dat,R4
 2EC6                   .dbline 1660
 2EC6           ;                                                               SendManchester();                
 2EC6 0E94D120          xcall _SendManchester
 2ECA                   .dbline 1661
 2ECA           ;                                                       }               
 2ECA           L729:
 2ECA                   .dbline 1654
 2ECA A394              inc R10
 2ECC           L731:
 2ECC                   .dbline 1654
 2ECC 8A2D              mov R24,R10
 2ECE 8032              cpi R24,32
 2ED0 70F2              brlo L728
 2ED2           X275:
 2ED2                   .dbline 1663
 2ED2           ; 
 2ED2           ;                                                       Uart0TxData[0]=0xE8;
 2ED2 88EE              ldi R24,232
 2ED4 80932100          sts _Uart0TxData,R24
 2ED8                   .dbline 1664
 2ED8           ;                                                       Uart0TxData[1]=0x40;
 2ED8 80E4              ldi R24,64
 2EDA 80932200          sts _Uart0TxData+1,R24
 2EDE                   .dbline 1665
 2EDE           ;                                                       Uart0TxData[2]=0xc8;
 2EDE 88EC              ldi R24,200
 2EE0 80932300          sts _Uart0TxData+2,R24
 2EE4                   .dbline 1666
 2EE4           ;                                                       Uart0TxData[3]=1;//测试信息包1
 2EE4 81E0              ldi R24,1
 2EE6 80932400          sts _Uart0TxData+3,R24
 2EEA                   .dbline 1667
 2EEA           ;                                                       SendUart0_2(9,4);// 超时32ms     
 2EEA 24E0              ldi R18,4
 2EEC 30E0              ldi R19,0
 2EEE 09E0              ldi R16,9
 2EF0 0E944E03          xcall _SendUart0_2
 2EF4                   .dbline 1668
 2EF4           ;                                                       for(i=0;i<32;i++)
 2EF4 AA24              clr R10
 2EF6 2FC0              xjmp L739
 2EF8           L736:
 2EF8                   .dbline 1669
 2EF8           ;                                                       {
 2EF8                   .dbline 1670
 2EF8           ;                                                               T_dat=Uart0RxData[i*2+1];//高字节
 2EF8 80E0              ldi R24,<_Uart0RxData+1
 2EFA 90E0              ldi R25,>_Uart0RxData+1
 2EFC EA2D              mov R30,R10
 2EFE FF27              clr R31
 2F00 EE0F              lsl R30
 2F02 FF1F              rol R31
 2F04 E80F              add R30,R24
 2F06 F91F              adc R31,R25
 2F08 2080              ldd R2,z+0
 2F0A 3324              clr R3
 2F0C 3092D001          sts _T_dat+1,R3
 2F10 2092CF01          sts _T_dat,R2
 2F14                   .dbline 1671
 2F14           ;                                                               T_dat<<=8;
 2F14 322C              mov R3,R2
 2F16 2224              clr R2
 2F18 3092D001          sts _T_dat+1,R3
 2F1C 2092CF01          sts _T_dat,R2
 2F20                   .dbline 1672
 2F20           ;                                                               T_dat|=Uart0RxData[i*2+0];//低字节
 2F20 80E0              ldi R24,<_Uart0RxData
 2F22 90E0              ldi R25,>_Uart0RxData
 2F24 EA2D              mov R30,R10
 2F26 FF27              clr R31
 2F28 EE0F              lsl R30
 2F2A FF1F              rol R31
 2F2C E80F              add R30,R24
 2F2E F91F              adc R31,R25
 2F30 2080              ldd R2,z+0
 2F32 3324              clr R3
 2F34 4090CF01          lds R4,_T_dat
 2F38 5090D001          lds R5,_T_dat+1
 2F3C 4228              or R4,R2
 2F3E 5328              or R5,R3
 2F40 5092D001          sts _T_dat+1,R5
 2F44 4092CF01          sts _T_dat,R4
 2F48                   .dbline 1673
 2F48           ;                                                               SendManchester();
 2F48 0E94D120          xcall _SendManchester
 2F4C                   .dbline 1674
 2F4C           ;                                                               CheckMotor(20);
 2F4C 04E1              ldi R16,20
 2F4E 10E0              ldi R17,0
 2F50 0E944B07          xcall _CheckMotor
 2F54                   .dbline 1675
 2F54           ;                                                       }       
 2F54           L737:
 2F54                   .dbline 1668
 2F54 A394              inc R10
 2F56           L739:
 2F56                   .dbline 1668
 2F56 8A2D              mov R24,R10
 2F58 8032              cpi R24,32
 2F5A 70F2              brlo L736
 2F5C           X276:
 2F5C                   .dbline 1677
 2F5C           ; 
 2F5C           ;                                                       Uart0TxData[0]=0xE8;
 2F5C 88EE              ldi R24,232
 2F5E 80932100          sts _Uart0TxData,R24
 2F62                   .dbline 1678
 2F62           ;                                                       Uart0TxData[1]=0x40;
 2F62 80E4              ldi R24,64
 2F64 80932200          sts _Uart0TxData+1,R24
 2F68                   .dbline 1679
 2F68           ;                                                       Uart0TxData[2]=0xc8;
 2F68 88EC              ldi R24,200
 2F6A 80932300          sts _Uart0TxData+2,R24
 2F6E                   .dbline 1680
 2F6E           ;                                                       Uart0TxData[3]=2;//测试信息包2
 2F6E 82E0              ldi R24,2
 2F70 80932400          sts _Uart0TxData+3,R24
 2F74                   .dbline 1681
 2F74           ;                                                       SendUart0_2(9,4);// 超时32ms     
 2F74 24E0              ldi R18,4
 2F76 30E0              ldi R19,0
 2F78 09E0              ldi R16,9
 2F7A 0E944E03          xcall _SendUart0_2
 2F7E                   .dbline 1682
 2F7E           ;                                                       for(i=0;i<32;i++)
 2F7E AA24              clr R10
 2F80 2FC0              xjmp L747
 2F82           L744:
 2F82                   .dbline 1683
 2F82           ;                                                       {
 2F82                   .dbline 1684
 2F82           ;                                                               T_dat=Uart0RxData[i*2+1];//高字节
 2F82 80E0              ldi R24,<_Uart0RxData+1
 2F84 90E0              ldi R25,>_Uart0RxData+1
 2F86 EA2D              mov R30,R10
 2F88 FF27              clr R31
 2F8A EE0F              lsl R30
 2F8C FF1F              rol R31
 2F8E E80F              add R30,R24
 2F90 F91F              adc R31,R25
 2F92 2080              ldd R2,z+0
 2F94 3324              clr R3
 2F96 3092D001          sts _T_dat+1,R3
 2F9A 2092CF01          sts _T_dat,R2
 2F9E                   .dbline 1685
 2F9E           ;                                                               T_dat<<=8;
 2F9E 322C              mov R3,R2
 2FA0 2224              clr R2
 2FA2 3092D001          sts _T_dat+1,R3
 2FA6 2092CF01          sts _T_dat,R2
 2FAA                   .dbline 1686
 2FAA           ;                                                               T_dat|=Uart0RxData[i*2+0];//低字节
 2FAA 80E0              ldi R24,<_Uart0RxData
 2FAC 90E0              ldi R25,>_Uart0RxData
 2FAE EA2D              mov R30,R10
 2FB0 FF27              clr R31
 2FB2 EE0F              lsl R30
 2FB4 FF1F              rol R31
 2FB6 E80F              add R30,R24
 2FB8 F91F              adc R31,R25
 2FBA 2080              ldd R2,z+0
 2FBC 3324              clr R3
 2FBE 4090CF01          lds R4,_T_dat
 2FC2 5090D001          lds R5,_T_dat+1
 2FC6 4228              or R4,R2
 2FC8 5328              or R5,R3
 2FCA 5092D001          sts _T_dat+1,R5
 2FCE 4092CF01          sts _T_dat,R4
 2FD2                   .dbline 1687
 2FD2           ;                                                               SendManchester();
 2FD2 0E94D120          xcall _SendManchester
 2FD6                   .dbline 1688
 2FD6           ;                                                               CheckMotor(20);
 2FD6 04E1              ldi R16,20
 2FD8 10E0              ldi R17,0
 2FDA 0E944B07          xcall _CheckMotor
 2FDE                   .dbline 1689
 2FDE           ;                                                       }               
 2FDE           L745:
 2FDE                   .dbline 1682
 2FDE A394              inc R10
 2FE0           L747:
 2FE0                   .dbline 1682
 2FE0 8A2D              mov R24,R10
 2FE2 8032              cpi R24,32
 2FE4 70F2              brlo L744
 2FE6           X277:
 2FE6                   .dbline 1691
 2FE6           ; 
 2FE6           ;                                                       Uart0TxData[0]=0xE8;
 2FE6 88EE              ldi R24,232
 2FE8 80932100          sts _Uart0TxData,R24
 2FEC                   .dbline 1692
 2FEC           ;                                                       Uart0TxData[1]=0x40;
 2FEC 80E4              ldi R24,64
 2FEE 80932200          sts _Uart0TxData+1,R24
 2FF2                   .dbline 1693
 2FF2           ;                                                       Uart0TxData[2]=0xc8;
 2FF2 88EC              ldi R24,200
 2FF4 80932300          sts _Uart0TxData+2,R24
 2FF8                   .dbline 1694
 2FF8           ;                                                       Uart0TxData[3]=3;//测试信息包3
 2FF8 83E0              ldi R24,3
 2FFA 80932400          sts _Uart0TxData+3,R24
 2FFE                   .dbline 1695
 2FFE           ;                                                       SendUart0_2(9,4);// 超时32ms     
 2FFE 24E0              ldi R18,4
 3000 30E0              ldi R19,0
 3002 09E0              ldi R16,9
 3004 0E944E03          xcall _SendUart0_2
 3008                   .dbline 1696
 3008           ;                                                       for(i=0;i<32;i++)
 3008 AA24              clr R10
 300A 2FC0              xjmp L755
 300C           L752:
 300C                   .dbline 1697
 300C           ;                                                       {
 300C                   .dbline 1698
 300C           ;                                                               T_dat=Uart0RxData[i*2+1];//高字节
 300C 80E0              ldi R24,<_Uart0RxData+1
 300E 90E0              ldi R25,>_Uart0RxData+1
 3010 EA2D              mov R30,R10
 3012 FF27              clr R31
 3014 EE0F              lsl R30
 3016 FF1F              rol R31
 3018 E80F              add R30,R24
 301A F91F              adc R31,R25
 301C 2080              ldd R2,z+0
 301E 3324              clr R3
 3020 3092D001          sts _T_dat+1,R3
 3024 2092CF01          sts _T_dat,R2
 3028                   .dbline 1699
 3028           ;                                                               T_dat<<=8;
 3028 322C              mov R3,R2
 302A 2224              clr R2
 302C 3092D001          sts _T_dat+1,R3
 3030 2092CF01          sts _T_dat,R2
 3034                   .dbline 1700
 3034           ;                                                               T_dat|=Uart0RxData[i*2+0];//低字节
 3034 80E0              ldi R24,<_Uart0RxData
 3036 90E0              ldi R25,>_Uart0RxData
 3038 EA2D              mov R30,R10
 303A FF27              clr R31
 303C EE0F              lsl R30
 303E FF1F              rol R31
 3040 E80F              add R30,R24
 3042 F91F              adc R31,R25
 3044 2080              ldd R2,z+0
 3046 3324              clr R3
 3048 4090CF01          lds R4,_T_dat
 304C 5090D001          lds R5,_T_dat+1
 3050 4228              or R4,R2
 3052 5328              or R5,R3
 3054 5092D001          sts _T_dat+1,R5
 3058 4092CF01          sts _T_dat,R4
 305C                   .dbline 1701
 305C           ;                                                               SendManchester();
 305C 0E94D120          xcall _SendManchester
 3060                   .dbline 1702
 3060           ;                                                               CheckMotor(20);
 3060 04E1              ldi R16,20
 3062 10E0              ldi R17,0
 3064 0E944B07          xcall _CheckMotor
 3068                   .dbline 1703
 3068           ;                                                       }                       
 3068           L753:
 3068                   .dbline 1696
 3068 A394              inc R10
 306A           L755:
 306A                   .dbline 1696
 306A 8A2D              mov R24,R10
 306C 8032              cpi R24,32
 306E 70F2              brlo L752
 3070           X278:
 3070                   .dbline 1704
 3070           ;                                               }
 3070 0C944A20          xjmp L584
 3074           L723:
 3074                   .dbline 1705
 3074           ;                                               else if(R_dat==0x91)//上传压力标定数据,20ms/帧  
 3074 8091CD01          lds R24,_R_dat
 3078 9091CE01          lds R25,_R_dat+1
 307C 8139              cpi R24,145
 307E E0E0              ldi R30,0
 3080 9E07              cpc R25,R30
 3082 21F5              brne L757
 3084           X279:
 3084                   .dbline 1706
 3084           ;                                               {
 3084                   .dbline 1708
 3084           ;                                                       //先获取总标定点数    
 3084           ;                                                       DataFlag=3;
 3084 83E0              ldi R24,3
 3086 90E0              ldi R25,0
 3088 9093B401          sts _DataFlag+1,R25
 308C 8093B301          sts _DataFlag,R24
 3090                   .dbline 1709
 3090           ;                                                       coeff_len=4;//上位机还需传4字节，分别为首块地址和包数
 3090 84E0              ldi R24,4
 3092 90931F00          sts _coeff_len+1,R25
 3096 80931E00          sts _coeff_len,R24
 309A                   .dbline 1710
 309A           ;                                                       coeff_count=0;
 309A 2224              clr R2
 309C 3324              clr R3
 309E 30921D00          sts _coeff_count+1,R3
 30A2 20921C00          sts _coeff_count,R2
 30A6                   .dbline 1711
 30A6           ;                                                       TimeOutFlag=0;
 30A6 2092CB01          sts _TimeOutFlag,R2
 30AA                   .dbline 1712
 30AA           ;                                                       Timer0Counter=200;//1.6s定时
 30AA 88EC              ldi R24,200
 30AC 90932F02          sts _Timer0Counter+1,R25
 30B0 80932E02          sts _Timer0Counter,R24
 30B4                   .dbline 1713
 30B4           ;                                                       TCNT0=0x06; //8ms
 30B4 86E0              ldi R24,6
 30B6 82BF              out 0x32,R24
 30B8                   .dbline 1714
 30B8           ;                                                       TCCR0|=0x06;//256分频
 30B8 83B7              in R24,0x33
 30BA 8660              ori R24,6
 30BC 83BF              out 0x33,R24
 30BE                   .dbline 1715
 30BE           ;                                                       TIFR|=0x01; //清定时器0中断标志
 30BE 86B7              in R24,0x36
 30C0 8160              ori R24,1
 30C2 86BF              out 0x36,R24
 30C4                   .dbline 1716
 30C4           ;                                                       TIMSK|=0x01;//使能定时器0中断           
 30C4 87B7              in R24,0x37
 30C6 8160              ori R24,1
 30C8 87BF              out 0x37,R24
 30CA                   .dbline 1717
 30CA           ;                                               }
 30CA E4C7              xjmp L584
 30CC           L757:
 30CC                   .dbline 1718
 30CC           ;                                               else if(R_dat==0x92)//清空标定数据,整机格式化  
 30CC 8091CD01          lds R24,_R_dat
 30D0 9091CE01          lds R25,_R_dat+1
 30D4 8239              cpi R24,146
 30D6 E0E0              ldi R30,0
 30D8 9E07              cpc R25,R30
 30DA E9F5              brne L759
 30DC           X280:
 30DC                   .dbline 1719
 30DC           ;                                               {       
 30DC                   .dbline 1720
 30DC           ;                                                       Uart0TxData[0]=0xE8;
 30DC 88EE              ldi R24,232
 30DE 80932100          sts _Uart0TxData,R24
 30E2                   .dbline 1721
 30E2           ;                                                       Uart0TxData[1]=0x40;
 30E2 80E4              ldi R24,64
 30E4 80932200          sts _Uart0TxData+1,R24
 30E8                   .dbline 1722
 30E8           ;                                                       Uart0TxData[2]=0x8c;
 30E8 8CE8              ldi R24,140
 30EA 80932300          sts _Uart0TxData+2,R24
 30EE                   .dbline 1723
 30EE           ;                                                       Uart0TxData[3]=8;
 30EE 88E0              ldi R24,8
 30F0 80932400          sts _Uart0TxData+3,R24
 30F4                   .dbline 1724
 30F4           ;                                                       Uart0TxData[4]=0;
 30F4 2224              clr R2
 30F6 20922500          sts _Uart0TxData+4,R2
 30FA                   .dbline 1725
 30FA           ;                                                       Uart0TxData[5]=0;
 30FA 20922600          sts _Uart0TxData+5,R2
 30FE                   .dbline 1726
 30FE           ;                                                       Uart0TxData[6]=0xff;
 30FE 8FEF              ldi R24,255
 3100 80932700          sts _Uart0TxData+6,R24
 3104                   .dbline 1727
 3104           ;                                                       Uart0TxData[7]=0xff;
 3104 80932800          sts _Uart0TxData+7,R24
 3108                   .dbline 1728
 3108           ;                                                       SendUart0_3(9,5000,9);// 最大超时40秒
 3108 89E0              ldi R24,9
 310A 8883              std y+0,R24
 310C 28E8              ldi R18,5000
 310E 33E1              ldi R19,19
 3110 09E0              ldi R16,9
 3112 0E949E03          xcall _SendUart0_3
 3116                   .dbline 1729
 3116           ;                                                       if((Uart0RxCounter==9)&&(Uart0RxData[0]==0x55)&&(Uart0RxData[1]==0x40)&&(Uart0RxData[2]==0x8c))
 3116 8091E301          lds R24,_Uart0RxCounter
 311A 8930              cpi R24,9
 311C 99F4              brne L768
 311E           X281:
 311E 8091E401          lds R24,_Uart0RxData
 3122 8535              cpi R24,85
 3124 79F4              brne L768
 3126           X282:
 3126 8091E501          lds R24,_Uart0RxData+1
 312A 8034              cpi R24,64
 312C 59F4              brne L768
 312E           X283:
 312E 8091E601          lds R24,_Uart0RxData+2
 3132 8C38              cpi R24,140
 3134 39F4              brne L768
 3136           X284:
 3136                   .dbline 1730
 3136           ;                                                               {T_dat=0x0000;}
 3136                   .dbline 1730
 3136 2224              clr R2
 3138 3324              clr R3
 313A 3092D001          sts _T_dat+1,R3
 313E 2092CF01          sts _T_dat,R2
 3142                   .dbline 1730
 3142 06C0              xjmp L769
 3144           L768:
 3144                   .dbline 1732
 3144           ;                                                       else
 3144           ;                                                               {T_dat=0xffff;}
 3144                   .dbline 1732
 3144 8FEF              ldi R24,65535
 3146 9FEF              ldi R25,255
 3148 9093D001          sts _T_dat+1,R25
 314C 8093CF01          sts _T_dat,R24
 3150                   .dbline 1732
 3150           L769:
 3150                   .dbline 1733
 3150           ;                                                       SendManchester();        
 3150 0E94D120          xcall _SendManchester
 3154                   .dbline 1734
 3154           ;                                               }
 3154 9FC7              xjmp L584
 3156           L759:
 3156                   .dbline 1735
 3156           ;                                               else if(R_dat==0x93)//上传全部系数，共256字节分128帧上传
 3156 8091CD01          lds R24,_R_dat
 315A 9091CE01          lds R25,_R_dat+1
 315E 8339              cpi R24,147
 3160 E0E0              ldi R30,0
 3162 9E07              cpc R25,R30
 3164 09F0              breq X360
 3166 22C1              xjmp L772
 3168           X360:
 3168           X285:
 3168                   .dbline 1736
 3168           ;                                               {
 3168                   .dbline 1737
 3168           ;                                                       Uart0TxData[0]=0xE8;
 3168 88EE              ldi R24,232
 316A 80932100          sts _Uart0TxData,R24
 316E                   .dbline 1738
 316E           ;                                                       Uart0TxData[1]=0x40;
 316E 80E4              ldi R24,64
 3170 80932200          sts _Uart0TxData+1,R24
 3174                   .dbline 1739
 3174           ;                                                       Uart0TxData[2]=0x87;
 3174 87E8              ldi R24,135
 3176 80932300          sts _Uart0TxData+2,R24
 317A                   .dbline 1740
 317A           ;                                                       Uart0TxData[3]=0;//系数包0
 317A 2224              clr R2
 317C 20922400          sts _Uart0TxData+3,R2
 3180                   .dbline 1741
 3180           ;                                                       SendUart0_2(9,4);// 超时32ms    
 3180 24E0              ldi R18,4
 3182 30E0              ldi R19,0
 3184 09E0              ldi R16,9
 3186 0E944E03          xcall _SendUart0_2
 318A                   .dbline 1742
 318A           ;                                                       if(Uart0RxCounter==64) 
 318A 8091E301          lds R24,_Uart0RxCounter
 318E 8034              cpi R24,64
 3190 99F5              brne L777
 3192           X286:
 3192                   .dbline 1743
 3192           ;                                                       {
 3192                   .dbline 1744
 3192           ;                                                               for(i=0;i<32;i++)
 3192 AA24              clr R10
 3194 2EC0              xjmp L782
 3196           L779:
 3196                   .dbline 1745
 3196           ;                                                               {
 3196                   .dbline 1746
 3196           ;                                                                       CheckMotor(20);
 3196 04E1              ldi R16,20
 3198 10E0              ldi R17,0
 319A 0E944B07          xcall _CheckMotor
 319E                   .dbline 1747
 319E           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 319E 80E0              ldi R24,<_Uart0RxData+1
 31A0 90E0              ldi R25,>_Uart0RxData+1
 31A2 EA2D              mov R30,R10
 31A4 FF27              clr R31
 31A6 EE0F              lsl R30
 31A8 FF1F              rol R31
 31AA E80F              add R30,R24
 31AC F91F              adc R31,R25
 31AE 2080              ldd R2,z+0
 31B0 3324              clr R3
 31B2 3092D001          sts _T_dat+1,R3
 31B6 2092CF01          sts _T_dat,R2
 31BA                   .dbline 1748
 31BA           ;                                                                       T_dat<<=8;
 31BA 322C              mov R3,R2
 31BC 2224              clr R2
 31BE 3092D001          sts _T_dat+1,R3
 31C2 2092CF01          sts _T_dat,R2
 31C6                   .dbline 1749
 31C6           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 31C6 80E0              ldi R24,<_Uart0RxData
 31C8 90E0              ldi R25,>_Uart0RxData
 31CA EA2D              mov R30,R10
 31CC FF27              clr R31
 31CE EE0F              lsl R30
 31D0 FF1F              rol R31
 31D2 E80F              add R30,R24
 31D4 F91F              adc R31,R25
 31D6 2080              ldd R2,z+0
 31D8 3324              clr R3
 31DA 4090CF01          lds R4,_T_dat
 31DE 5090D001          lds R5,_T_dat+1
 31E2 4228              or R4,R2
 31E4 5328              or R5,R3
 31E6 5092D001          sts _T_dat+1,R5
 31EA 4092CF01          sts _T_dat,R4
 31EE                   .dbline 1750
 31EE           ;                                                                       SendManchester();                
 31EE D9D7              xcall _SendManchester
 31F0                   .dbline 1751
 31F0           ;                                                               }       
 31F0           L780:
 31F0                   .dbline 1744
 31F0 A394              inc R10
 31F2           L782:
 31F2                   .dbline 1744
 31F2 8A2D              mov R24,R10
 31F4 8032              cpi R24,32
 31F6 78F2              brlo L779
 31F8           X287:
 31F8                   .dbline 1752
 31F8           ;                                                       }       
 31F8           L777:
 31F8                   .dbline 1754
 31F8           ; 
 31F8           ;                                                       Uart0TxData[0]=0xE8;
 31F8 88EE              ldi R24,232
 31FA 80932100          sts _Uart0TxData,R24
 31FE                   .dbline 1755
 31FE           ;                                                       Uart0TxData[1]=0x40;
 31FE 80E4              ldi R24,64
 3200 80932200          sts _Uart0TxData+1,R24
 3204                   .dbline 1756
 3204           ;                                                       Uart0TxData[2]=0x87;
 3204 87E8              ldi R24,135
 3206 80932300          sts _Uart0TxData+2,R24
 320A                   .dbline 1757
 320A           ;                                                       Uart0TxData[3]=1;//系数包1
 320A 81E0              ldi R24,1
 320C 80932400          sts _Uart0TxData+3,R24
 3210                   .dbline 1758
 3210           ;                                                       SendUart0_2(9,4);// 超时32ms     
 3210 24E0              ldi R18,4
 3212 30E0              ldi R19,0
 3214 09E0              ldi R16,9
 3216 0E944E03          xcall _SendUart0_2
 321A                   .dbline 1759
 321A           ;                                                       if(Uart0RxCounter==64) 
 321A 8091E301          lds R24,_Uart0RxCounter
 321E 8034              cpi R24,64
 3220 99F5              brne L787
 3222           X288:
 3222                   .dbline 1760
 3222           ;                                                       {
 3222                   .dbline 1761
 3222           ;                                                               for(i=0;i<32;i++)
 3222 AA24              clr R10
 3224 2EC0              xjmp L792
 3226           L789:
 3226                   .dbline 1762
 3226           ;                                                               {
 3226                   .dbline 1763
 3226           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3226 80E0              ldi R24,<_Uart0RxData+1
 3228 90E0              ldi R25,>_Uart0RxData+1
 322A EA2D              mov R30,R10
 322C FF27              clr R31
 322E EE0F              lsl R30
 3230 FF1F              rol R31
 3232 E80F              add R30,R24
 3234 F91F              adc R31,R25
 3236 2080              ldd R2,z+0
 3238 3324              clr R3
 323A 3092D001          sts _T_dat+1,R3
 323E 2092CF01          sts _T_dat,R2
 3242                   .dbline 1764
 3242           ;                                                                       T_dat<<=8;
 3242 322C              mov R3,R2
 3244 2224              clr R2
 3246 3092D001          sts _T_dat+1,R3
 324A 2092CF01          sts _T_dat,R2
 324E                   .dbline 1765
 324E           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 324E 80E0              ldi R24,<_Uart0RxData
 3250 90E0              ldi R25,>_Uart0RxData
 3252 EA2D              mov R30,R10
 3254 FF27              clr R31
 3256 EE0F              lsl R30
 3258 FF1F              rol R31
 325A E80F              add R30,R24
 325C F91F              adc R31,R25
 325E 2080              ldd R2,z+0
 3260 3324              clr R3
 3262 4090CF01          lds R4,_T_dat
 3266 5090D001          lds R5,_T_dat+1
 326A 4228              or R4,R2
 326C 5328              or R5,R3
 326E 5092D001          sts _T_dat+1,R5
 3272 4092CF01          sts _T_dat,R4
 3276                   .dbline 1766
 3276           ;                                                                       SendManchester();
 3276 95D7              xcall _SendManchester
 3278                   .dbline 1767
 3278           ;                                                                       CheckMotor(20);
 3278 04E1              ldi R16,20
 327A 10E0              ldi R17,0
 327C 0E944B07          xcall _CheckMotor
 3280                   .dbline 1768
 3280           ;                                                               }
 3280           L790:
 3280                   .dbline 1761
 3280 A394              inc R10
 3282           L792:
 3282                   .dbline 1761
 3282 8A2D              mov R24,R10
 3284 8032              cpi R24,32
 3286 78F2              brlo L789
 3288           X289:
 3288                   .dbline 1769
 3288           ;                                                       }               
 3288           L787:
 3288                   .dbline 1771
 3288           ; 
 3288           ;                                                       Uart0TxData[0]=0xE8;
 3288 88EE              ldi R24,232
 328A 80932100          sts _Uart0TxData,R24
 328E                   .dbline 1772
 328E           ;                                                       Uart0TxData[1]=0x40;
 328E 80E4              ldi R24,64
 3290 80932200          sts _Uart0TxData+1,R24
 3294                   .dbline 1773
 3294           ;                                                       Uart0TxData[2]=0x87;
 3294 87E8              ldi R24,135
 3296 80932300          sts _Uart0TxData+2,R24
 329A                   .dbline 1774
 329A           ;                                                       Uart0TxData[3]=2;//系数包2
 329A 82E0              ldi R24,2
 329C 80932400          sts _Uart0TxData+3,R24
 32A0                   .dbline 1775
 32A0           ;                                                       SendUart0_2(9,4);// 超时32ms    
 32A0 24E0              ldi R18,4
 32A2 30E0              ldi R19,0
 32A4 09E0              ldi R16,9
 32A6 0E944E03          xcall _SendUart0_2
 32AA                   .dbline 1776
 32AA           ;                                                       if(Uart0RxCounter==64) 
 32AA 8091E301          lds R24,_Uart0RxCounter
 32AE 8034              cpi R24,64
 32B0 99F5              brne L797
 32B2           X290:
 32B2                   .dbline 1777
 32B2           ;                                                       {
 32B2                   .dbline 1778
 32B2           ;                                                               for(i=0;i<32;i++)
 32B2 AA24              clr R10
 32B4 2EC0              xjmp L802
 32B6           L799:
 32B6                   .dbline 1779
 32B6           ;                                                               {
 32B6                   .dbline 1780
 32B6           ;                                                                       CheckMotor(20);
 32B6 04E1              ldi R16,20
 32B8 10E0              ldi R17,0
 32BA 0E944B07          xcall _CheckMotor
 32BE                   .dbline 1781
 32BE           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 32BE 80E0              ldi R24,<_Uart0RxData+1
 32C0 90E0              ldi R25,>_Uart0RxData+1
 32C2 EA2D              mov R30,R10
 32C4 FF27              clr R31
 32C6 EE0F              lsl R30
 32C8 FF1F              rol R31
 32CA E80F              add R30,R24
 32CC F91F              adc R31,R25
 32CE 2080              ldd R2,z+0
 32D0 3324              clr R3
 32D2 3092D001          sts _T_dat+1,R3
 32D6 2092CF01          sts _T_dat,R2
 32DA                   .dbline 1782
 32DA           ;                                                                       T_dat<<=8;
 32DA 322C              mov R3,R2
 32DC 2224              clr R2
 32DE 3092D001          sts _T_dat+1,R3
 32E2 2092CF01          sts _T_dat,R2
 32E6                   .dbline 1783
 32E6           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 32E6 80E0              ldi R24,<_Uart0RxData
 32E8 90E0              ldi R25,>_Uart0RxData
 32EA EA2D              mov R30,R10
 32EC FF27              clr R31
 32EE EE0F              lsl R30
 32F0 FF1F              rol R31
 32F2 E80F              add R30,R24
 32F4 F91F              adc R31,R25
 32F6 2080              ldd R2,z+0
 32F8 3324              clr R3
 32FA 4090CF01          lds R4,_T_dat
 32FE 5090D001          lds R5,_T_dat+1
 3302 4228              or R4,R2
 3304 5328              or R5,R3
 3306 5092D001          sts _T_dat+1,R5
 330A 4092CF01          sts _T_dat,R4
 330E                   .dbline 1784
 330E           ;                                                                       SendManchester();                
 330E 49D7              xcall _SendManchester
 3310                   .dbline 1785
 3310           ;                                                               }       
 3310           L800:
 3310                   .dbline 1778
 3310 A394              inc R10
 3312           L802:
 3312                   .dbline 1778
 3312 8A2D              mov R24,R10
 3314 8032              cpi R24,32
 3316 78F2              brlo L799
 3318           X291:
 3318                   .dbline 1786
 3318           ;                                                       }       
 3318           L797:
 3318                   .dbline 1788
 3318           ; 
 3318           ;                                                       Uart0TxData[0]=0xE8;
 3318 88EE              ldi R24,232
 331A 80932100          sts _Uart0TxData,R24
 331E                   .dbline 1789
 331E           ;                                                       Uart0TxData[1]=0x40;
 331E 80E4              ldi R24,64
 3320 80932200          sts _Uart0TxData+1,R24
 3324                   .dbline 1790
 3324           ;                                                       Uart0TxData[2]=0x87;
 3324 87E8              ldi R24,135
 3326 80932300          sts _Uart0TxData+2,R24
 332A                   .dbline 1791
 332A           ;                                                       Uart0TxData[3]=3;//系数包3
 332A 83E0              ldi R24,3
 332C 80932400          sts _Uart0TxData+3,R24
 3330                   .dbline 1792
 3330           ;                                                       SendUart0_2(9,4);// 超时32ms     
 3330 24E0              ldi R18,4
 3332 30E0              ldi R19,0
 3334 09E0              ldi R16,9
 3336 0E944E03          xcall _SendUart0_2
 333A                   .dbline 1793
 333A           ;                                                       if(Uart0RxCounter==64) 
 333A 8091E301          lds R24,_Uart0RxCounter
 333E 8034              cpi R24,64
 3340 09F0              breq X361
 3342 A8C6              xjmp L584
 3344           X361:
 3344           X292:
 3344                   .dbline 1794
 3344           ;                                                       {
 3344                   .dbline 1795
 3344           ;                                                               for(i=0;i<32;i++)
 3344 AA24              clr R10
 3346 2EC0              xjmp L812
 3348           L809:
 3348                   .dbline 1796
 3348           ;                                                               {
 3348                   .dbline 1797
 3348           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3348 80E0              ldi R24,<_Uart0RxData+1
 334A 90E0              ldi R25,>_Uart0RxData+1
 334C EA2D              mov R30,R10
 334E FF27              clr R31
 3350 EE0F              lsl R30
 3352 FF1F              rol R31
 3354 E80F              add R30,R24
 3356 F91F              adc R31,R25
 3358 2080              ldd R2,z+0
 335A 3324              clr R3
 335C 3092D001          sts _T_dat+1,R3
 3360 2092CF01          sts _T_dat,R2
 3364                   .dbline 1798
 3364           ;                                                                       T_dat<<=8;
 3364 322C              mov R3,R2
 3366 2224              clr R2
 3368 3092D001          sts _T_dat+1,R3
 336C 2092CF01          sts _T_dat,R2
 3370                   .dbline 1799
 3370           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3370 80E0              ldi R24,<_Uart0RxData
 3372 90E0              ldi R25,>_Uart0RxData
 3374 EA2D              mov R30,R10
 3376 FF27              clr R31
 3378 EE0F              lsl R30
 337A FF1F              rol R31
 337C E80F              add R30,R24
 337E F91F              adc R31,R25
 3380 2080              ldd R2,z+0
 3382 3324              clr R3
 3384 4090CF01          lds R4,_T_dat
 3388 5090D001          lds R5,_T_dat+1
 338C 4228              or R4,R2
 338E 5328              or R5,R3
 3390 5092D001          sts _T_dat+1,R5
 3394 4092CF01          sts _T_dat,R4
 3398                   .dbline 1800
 3398           ;                                                                       SendManchester();
 3398 04D7              xcall _SendManchester
 339A                   .dbline 1801
 339A           ;                                                                       CheckMotor(20);
 339A 04E1              ldi R16,20
 339C 10E0              ldi R17,0
 339E 0E944B07          xcall _CheckMotor
 33A2                   .dbline 1802
 33A2           ;                                                               }
 33A2           L810:
 33A2                   .dbline 1795
 33A2 A394              inc R10
 33A4           L812:
 33A4                   .dbline 1795
 33A4 8A2D              mov R24,R10
 33A6 8032              cpi R24,32
 33A8 78F2              brlo L809
 33AA           X293:
 33AA                   .dbline 1803
 33AA           ;                                                       }               
 33AA                   .dbline 1804
 33AA           ;                                               }
 33AA 74C6              xjmp L584
 33AC           L772:
 33AC                   .dbline 1805
 33AC           ;                                               else if(R_dat==0x9a)//电机断路电流为1档
 33AC 8091CD01          lds R24,_R_dat
 33B0 9091CE01          lds R25,_R_dat+1
 33B4 8A39              cpi R24,154
 33B6 E0E0              ldi R30,0
 33B8 9E07              cpc R25,R30
 33BA B1F4              brne L814
 33BC           X294:
 33BC                   .dbline 1806
 33BC           ;                                               {
 33BC                   .dbline 1807
 33BC           ;                                                       MotorIdelGear=1;
 33BC 81E0              ldi R24,1
 33BE 80933702          sts _MotorIdelGear,R24
 33C2                   .dbline 1808
 33C2           ;                                                       EEPROM_write(2,MotorIdelGear);  
 33C2 282F              mov R18,R24
 33C4 02E0              ldi R16,2
 33C6 10E0              ldi R17,0
 33C8 0E94D424          xcall _EEPROM_write
 33CC                   .dbline 1809
 33CC           ;                                                       Gear2Thr();
 33CC 0E94540A          xcall _Gear2Thr
 33D0                   .dbline 1810
 33D0           ;                                                       CheckMotor(30);//延迟30ms       
 33D0 0EE1              ldi R16,30
 33D2 10E0              ldi R17,0
 33D4 0E944B07          xcall _CheckMotor
 33D8                   .dbline 1811
 33D8           ;                                                       T_dat=0;            
 33D8 2224              clr R2
 33DA 3324              clr R3
 33DC 3092D001          sts _T_dat+1,R3
 33E0 2092CF01          sts _T_dat,R2
 33E4                   .dbline 1812
 33E4           ;                                                       SendManchester(); 
 33E4 DED6              xcall _SendManchester
 33E6                   .dbline 1813
 33E6           ;                                               }
 33E6 56C6              xjmp L584
 33E8           L814:
 33E8                   .dbline 1814
 33E8           ;                                               else if(R_dat==0x9b)//电机断路电流为2档
 33E8 8091CD01          lds R24,_R_dat
 33EC 9091CE01          lds R25,_R_dat+1
 33F0 8B39              cpi R24,155
 33F2 E0E0              ldi R30,0
 33F4 9E07              cpc R25,R30
 33F6 B1F4              brne L816
 33F8           X295:
 33F8                   .dbline 1815
 33F8           ;                                               {
 33F8                   .dbline 1816
 33F8           ;                                                       MotorIdelGear=2;
 33F8 82E0              ldi R24,2
 33FA 80933702          sts _MotorIdelGear,R24
 33FE                   .dbline 1817
 33FE           ;                                                       EEPROM_write(2,MotorIdelGear);  
 33FE 282F              mov R18,R24
 3400 02E0              ldi R16,2
 3402 10E0              ldi R17,0
 3404 0E94D424          xcall _EEPROM_write
 3408                   .dbline 1818
 3408           ;                                                       Gear2Thr();
 3408 0E94540A          xcall _Gear2Thr
 340C                   .dbline 1819
 340C           ;                                                       CheckMotor(30);//延迟30ms       
 340C 0EE1              ldi R16,30
 340E 10E0              ldi R17,0
 3410 0E944B07          xcall _CheckMotor
 3414                   .dbline 1820
 3414           ;                                                       T_dat=0;            
 3414 2224              clr R2
 3416 3324              clr R3
 3418 3092D001          sts _T_dat+1,R3
 341C 2092CF01          sts _T_dat,R2
 3420                   .dbline 1821
 3420           ;                                                       SendManchester(); 
 3420 C0D6              xcall _SendManchester
 3422                   .dbline 1822
 3422           ;                                               }
 3422 38C6              xjmp L584
 3424           L816:
 3424                   .dbline 1823
 3424           ;                                               else if(R_dat==0x9c)//电机断路电流为3档
 3424 8091CD01          lds R24,_R_dat
 3428 9091CE01          lds R25,_R_dat+1
 342C 8C39              cpi R24,156
 342E E0E0              ldi R30,0
 3430 9E07              cpc R25,R30
 3432 B1F4              brne L818
 3434           X296:
 3434                   .dbline 1824
 3434           ;                                               {
 3434                   .dbline 1825
 3434           ;                                                       MotorIdelGear=3;
 3434 83E0              ldi R24,3
 3436 80933702          sts _MotorIdelGear,R24
 343A                   .dbline 1826
 343A           ;                                                       EEPROM_write(2,MotorIdelGear);  
 343A 282F              mov R18,R24
 343C 02E0              ldi R16,2
 343E 10E0              ldi R17,0
 3440 0E94D424          xcall _EEPROM_write
 3444                   .dbline 1827
 3444           ;                                                       Gear2Thr();
 3444 0E94540A          xcall _Gear2Thr
 3448                   .dbline 1828
 3448           ;                                                       CheckMotor(30);//延迟30ms       
 3448 0EE1              ldi R16,30
 344A 10E0              ldi R17,0
 344C 0E944B07          xcall _CheckMotor
 3450                   .dbline 1829
 3450           ;                                                       T_dat=0;            
 3450 2224              clr R2
 3452 3324              clr R3
 3454 3092D001          sts _T_dat+1,R3
 3458 2092CF01          sts _T_dat,R2
 345C                   .dbline 1830
 345C           ;                                                       SendManchester(); 
 345C A2D6              xcall _SendManchester
 345E                   .dbline 1831
 345E           ;                                               }
 345E 1AC6              xjmp L584
 3460           L818:
 3460                   .dbline 1832
 3460           ;                                               else if(R_dat==0x9d)//电机断路电流为4档
 3460 8091CD01          lds R24,_R_dat
 3464 9091CE01          lds R25,_R_dat+1
 3468 8D39              cpi R24,157
 346A E0E0              ldi R30,0
 346C 9E07              cpc R25,R30
 346E B1F4              brne L820
 3470           X297:
 3470                   .dbline 1833
 3470           ;                                               {
 3470                   .dbline 1834
 3470           ;                                                       MotorIdelGear=4;
 3470 84E0              ldi R24,4
 3472 80933702          sts _MotorIdelGear,R24
 3476                   .dbline 1835
 3476           ;                                                       EEPROM_write(2,MotorIdelGear);  
 3476 282F              mov R18,R24
 3478 02E0              ldi R16,2
 347A 10E0              ldi R17,0
 347C 0E94D424          xcall _EEPROM_write
 3480                   .dbline 1836
 3480           ;                                                       Gear2Thr();
 3480 0E94540A          xcall _Gear2Thr
 3484                   .dbline 1837
 3484           ;                                                       CheckMotor(30);//延迟30ms       
 3484 0EE1              ldi R16,30
 3486 10E0              ldi R17,0
 3488 0E944B07          xcall _CheckMotor
 348C                   .dbline 1838
 348C           ;                                                       T_dat=0;            
 348C 2224              clr R2
 348E 3324              clr R3
 3490 3092D001          sts _T_dat+1,R3
 3494 2092CF01          sts _T_dat,R2
 3498                   .dbline 1839
 3498           ;                                                       SendManchester(); 
 3498 84D6              xcall _SendManchester
 349A                   .dbline 1840
 349A           ;                                               }
 349A FCC5              xjmp L584
 349C           L820:
 349C                   .dbline 1841
 349C           ;                                               else if(R_dat==0x9e)//电机断路电流为5档
 349C 8091CD01          lds R24,_R_dat
 34A0 9091CE01          lds R25,_R_dat+1
 34A4 8E39              cpi R24,158
 34A6 E0E0              ldi R30,0
 34A8 9E07              cpc R25,R30
 34AA B1F4              brne L822
 34AC           X298:
 34AC                   .dbline 1842
 34AC           ;                                               {
 34AC                   .dbline 1843
 34AC           ;                                                       MotorIdelGear=5;
 34AC 85E0              ldi R24,5
 34AE 80933702          sts _MotorIdelGear,R24
 34B2                   .dbline 1844
 34B2           ;                                                       EEPROM_write(2,MotorIdelGear);  
 34B2 282F              mov R18,R24
 34B4 02E0              ldi R16,2
 34B6 10E0              ldi R17,0
 34B8 0E94D424          xcall _EEPROM_write
 34BC                   .dbline 1845
 34BC           ;                                                       Gear2Thr();
 34BC 0E94540A          xcall _Gear2Thr
 34C0                   .dbline 1846
 34C0           ;                                                       CheckMotor(30);//延迟30ms       
 34C0 0EE1              ldi R16,30
 34C2 10E0              ldi R17,0
 34C4 0E944B07          xcall _CheckMotor
 34C8                   .dbline 1847
 34C8           ;                                                       T_dat=0;            
 34C8 2224              clr R2
 34CA 3324              clr R3
 34CC 3092D001          sts _T_dat+1,R3
 34D0 2092CF01          sts _T_dat,R2
 34D4                   .dbline 1848
 34D4           ;                                                       SendManchester(); 
 34D4 66D6              xcall _SendManchester
 34D6                   .dbline 1849
 34D6           ;                                               }
 34D6 DEC5              xjmp L584
 34D8           L822:
 34D8                   .dbline 1850
 34D8           ;                                               else if(R_dat==0x9f)//电机断路电流为6档
 34D8 8091CD01          lds R24,_R_dat
 34DC 9091CE01          lds R25,_R_dat+1
 34E0 8F39              cpi R24,159
 34E2 E0E0              ldi R30,0
 34E4 9E07              cpc R25,R30
 34E6 09F0              breq X362
 34E8 D5C5              xjmp L584
 34EA           X362:
 34EA           X299:
 34EA                   .dbline 1851
 34EA           ;                                               {
 34EA                   .dbline 1852
 34EA           ;                                                       MotorIdelGear=6;
 34EA 86E0              ldi R24,6
 34EC 80933702          sts _MotorIdelGear,R24
 34F0                   .dbline 1853
 34F0           ;                                                       EEPROM_write(2,MotorIdelGear);  
 34F0 282F              mov R18,R24
 34F2 02E0              ldi R16,2
 34F4 10E0              ldi R17,0
 34F6 0E94D424          xcall _EEPROM_write
 34FA                   .dbline 1854
 34FA           ;                                                       Gear2Thr();
 34FA 0E94540A          xcall _Gear2Thr
 34FE                   .dbline 1855
 34FE           ;                                                       CheckMotor(30);//延迟30ms       
 34FE 0EE1              ldi R16,30
 3500 10E0              ldi R17,0
 3502 0E944B07          xcall _CheckMotor
 3506                   .dbline 1856
 3506           ;                                                       T_dat=0;            
 3506 2224              clr R2
 3508 3324              clr R3
 350A 3092D001          sts _T_dat+1,R3
 350E 2092CF01          sts _T_dat,R2
 3512                   .dbline 1857
 3512           ;                                                       SendManchester(); 
 3512 47D6              xcall _SendManchester
 3514                   .dbline 1858
 3514           ;                                               }
 3514                   .dbline 1860
 3514           ; 
 3514           ;                                               break;
 3514 BFC5              xjmp L584
 3516           L826:
 3516                   .dbline 1863
 3516           ; 
 3516           ;                                       case 0xa0://压力标定系数
 3516           ;                                               if(R_dat==0xa0)//下发全部标定系数，共128字节,20ms/帧，共2560ms   
 3516 8091CD01          lds R24,_R_dat
 351A 9091CE01          lds R25,_R_dat+1
 351E 803A              cpi R24,160
 3520 E0E0              ldi R30,0
 3522 9E07              cpc R25,R30
 3524 29F5              brne L827
 3526           X300:
 3526                   .dbline 1864
 3526           ;                                                       { 
 3526                   .dbline 1865
 3526           ;                                                       DataFlag=1;
 3526 81E0              ldi R24,1
 3528 90E0              ldi R25,0
 352A 9093B401          sts _DataFlag+1,R25
 352E 8093B301          sts _DataFlag,R24
 3532                   .dbline 1866
 3532           ;                                                       coeff_len=128;
 3532 80E8              ldi R24,128
 3534 90931F00          sts _coeff_len+1,R25
 3538 80931E00          sts _coeff_len,R24
 353C                   .dbline 1867
 353C           ;                                                       coeff_count=0;
 353C 2224              clr R2
 353E 3324              clr R3
 3540 30921D00          sts _coeff_count+1,R3
 3544 20921C00          sts _coeff_count,R2
 3548                   .dbline 1868
 3548           ;                                                       TimeOutFlag=0;
 3548 2092CB01          sts _TimeOutFlag,R2
 354C                   .dbline 1869
 354C           ;                                                       Timer0Counter=1000;//8s定时
 354C 88EE              ldi R24,1000
 354E 93E0              ldi R25,3
 3550 90932F02          sts _Timer0Counter+1,R25
 3554 80932E02          sts _Timer0Counter,R24
 3558                   .dbline 1870
 3558           ;                                                       TCNT0=0x06; //8ms
 3558 86E0              ldi R24,6
 355A 82BF              out 0x32,R24
 355C                   .dbline 1871
 355C           ;                                                       TCCR0|=0x06;//256分频
 355C 83B7              in R24,0x33
 355E 8660              ori R24,6
 3560 83BF              out 0x33,R24
 3562                   .dbline 1872
 3562           ;                                                       TIFR|=0x01; //清定时器0中断标志
 3562 86B7              in R24,0x36
 3564 8160              ori R24,1
 3566 86BF              out 0x36,R24
 3568                   .dbline 1873
 3568           ;                                                       TIMSK|=0x01;//使能定时器0中断                               
 3568 87B7              in R24,0x37
 356A 8160              ori R24,1
 356C 87BF              out 0x37,R24
 356E                   .dbline 1874
 356E           ;                                               }
 356E 92C5              xjmp L584
 3570           L827:
 3570                   .dbline 1875
 3570           ;                                               else if(R_dat==0xa1)//上传标定系数,28ms/帧 ，共64帧128字节
 3570 8091CD01          lds R24,_R_dat
 3574 9091CE01          lds R25,_R_dat+1
 3578 813A              cpi R24,161
 357A E0E0              ldi R30,0
 357C 9E07              cpc R25,R30
 357E 09F0              breq X363
 3580 89C5              xjmp L584
 3582           X363:
 3582           X301:
 3582                   .dbline 1876
 3582           ;                                               {    
 3582                   .dbline 1877
 3582           ;                                                       Uart0TxData[0]=0xE8;
 3582 88EE              ldi R24,232
 3584 80932100          sts _Uart0TxData,R24
 3588                   .dbline 1878
 3588           ;                                                       Uart0TxData[1]=0x40;
 3588 80E4              ldi R24,64
 358A 80932200          sts _Uart0TxData+1,R24
 358E                   .dbline 1879
 358E           ;                                                       Uart0TxData[2]=0x87;
 358E 87E8              ldi R24,135
 3590 80932300          sts _Uart0TxData+2,R24
 3594                   .dbline 1880
 3594           ;                                                       Uart0TxData[3]=0;//系数包0
 3594 2224              clr R2
 3596 20922400          sts _Uart0TxData+3,R2
 359A                   .dbline 1881
 359A           ;                                                       SendUart0_2(9,5);// 超时40ms    
 359A 25E0              ldi R18,5
 359C 30E0              ldi R19,0
 359E 09E0              ldi R16,9
 35A0 0E944E03          xcall _SendUart0_2
 35A4                   .dbline 1882
 35A4           ;                                                       if(Uart0RxCounter==64) 
 35A4 8091E301          lds R24,_Uart0RxCounter
 35A8 8034              cpi R24,64
 35AA 99F5              brne L834
 35AC           X302:
 35AC                   .dbline 1883
 35AC           ;                                                       {
 35AC                   .dbline 1884
 35AC           ;                                                               for(i=0;i<32;i++)
 35AC AA24              clr R10
 35AE 2EC0              xjmp L839
 35B0           L836:
 35B0                   .dbline 1885
 35B0           ;                                                               {
 35B0                   .dbline 1886
 35B0           ;                                                                       CheckMotor(20);
 35B0 04E1              ldi R16,20
 35B2 10E0              ldi R17,0
 35B4 0E944B07          xcall _CheckMotor
 35B8                   .dbline 1887
 35B8           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 35B8 80E0              ldi R24,<_Uart0RxData+1
 35BA 90E0              ldi R25,>_Uart0RxData+1
 35BC EA2D              mov R30,R10
 35BE FF27              clr R31
 35C0 EE0F              lsl R30
 35C2 FF1F              rol R31
 35C4 E80F              add R30,R24
 35C6 F91F              adc R31,R25
 35C8 2080              ldd R2,z+0
 35CA 3324              clr R3
 35CC 3092D001          sts _T_dat+1,R3
 35D0 2092CF01          sts _T_dat,R2
 35D4                   .dbline 1888
 35D4           ;                                                                       T_dat<<=8;
 35D4 322C              mov R3,R2
 35D6 2224              clr R2
 35D8 3092D001          sts _T_dat+1,R3
 35DC 2092CF01          sts _T_dat,R2
 35E0                   .dbline 1889
 35E0           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 35E0 80E0              ldi R24,<_Uart0RxData
 35E2 90E0              ldi R25,>_Uart0RxData
 35E4 EA2D              mov R30,R10
 35E6 FF27              clr R31
 35E8 EE0F              lsl R30
 35EA FF1F              rol R31
 35EC E80F              add R30,R24
 35EE F91F              adc R31,R25
 35F0 2080              ldd R2,z+0
 35F2 3324              clr R3
 35F4 4090CF01          lds R4,_T_dat
 35F8 5090D001          lds R5,_T_dat+1
 35FC 4228              or R4,R2
 35FE 5328              or R5,R3
 3600 5092D001          sts _T_dat+1,R5
 3604 4092CF01          sts _T_dat,R4
 3608                   .dbline 1890
 3608           ;                                                                       SendManchester();                
 3608 CCD5              xcall _SendManchester
 360A                   .dbline 1891
 360A           ;                                                               }       
 360A           L837:
 360A                   .dbline 1884
 360A A394              inc R10
 360C           L839:
 360C                   .dbline 1884
 360C 8A2D              mov R24,R10
 360E 8032              cpi R24,32
 3610 78F2              brlo L836
 3612           X303:
 3612                   .dbline 1892
 3612           ;                                                       }       
 3612           L834:
 3612                   .dbline 1894
 3612           ; 
 3612           ;                                                       Uart0TxData[0]=0xE8;
 3612 88EE              ldi R24,232
 3614 80932100          sts _Uart0TxData,R24
 3618                   .dbline 1895
 3618           ;                                                       Uart0TxData[1]=0x40;
 3618 80E4              ldi R24,64
 361A 80932200          sts _Uart0TxData+1,R24
 361E                   .dbline 1896
 361E           ;                                                       Uart0TxData[2]=0x87;
 361E 87E8              ldi R24,135
 3620 80932300          sts _Uart0TxData+2,R24
 3624                   .dbline 1897
 3624           ;                                                       Uart0TxData[3]=1;//系数包1
 3624 81E0              ldi R24,1
 3626 80932400          sts _Uart0TxData+3,R24
 362A                   .dbline 1898
 362A           ;                                                       SendUart0_2(9,5);// 超时40ms             
 362A 25E0              ldi R18,5
 362C 30E0              ldi R19,0
 362E 09E0              ldi R16,9
 3630 0E944E03          xcall _SendUart0_2
 3634                   .dbline 1899
 3634           ;                                                       if(Uart0RxCounter==64) 
 3634 8091E301          lds R24,_Uart0RxCounter
 3638 8034              cpi R24,64
 363A 09F0              breq X364
 363C 2BC5              xjmp L584
 363E           X364:
 363E           X304:
 363E                   .dbline 1900
 363E           ;                                                       {
 363E                   .dbline 1901
 363E           ;                                                               for(i=0;i<32;i++)
 363E AA24              clr R10
 3640 2EC0              xjmp L849
 3642           L846:
 3642                   .dbline 1902
 3642           ;                                                               {
 3642                   .dbline 1903
 3642           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3642 80E0              ldi R24,<_Uart0RxData+1
 3644 90E0              ldi R25,>_Uart0RxData+1
 3646 EA2D              mov R30,R10
 3648 FF27              clr R31
 364A EE0F              lsl R30
 364C FF1F              rol R31
 364E E80F              add R30,R24
 3650 F91F              adc R31,R25
 3652 2080              ldd R2,z+0
 3654 3324              clr R3
 3656 3092D001          sts _T_dat+1,R3
 365A 2092CF01          sts _T_dat,R2
 365E                   .dbline 1904
 365E           ;                                                                       T_dat<<=8;
 365E 322C              mov R3,R2
 3660 2224              clr R2
 3662 3092D001          sts _T_dat+1,R3
 3666 2092CF01          sts _T_dat,R2
 366A                   .dbline 1905
 366A           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 366A 80E0              ldi R24,<_Uart0RxData
 366C 90E0              ldi R25,>_Uart0RxData
 366E EA2D              mov R30,R10
 3670 FF27              clr R31
 3672 EE0F              lsl R30
 3674 FF1F              rol R31
 3676 E80F              add R30,R24
 3678 F91F              adc R31,R25
 367A 2080              ldd R2,z+0
 367C 3324              clr R3
 367E 4090CF01          lds R4,_T_dat
 3682 5090D001          lds R5,_T_dat+1
 3686 4228              or R4,R2
 3688 5328              or R5,R3
 368A 5092D001          sts _T_dat+1,R5
 368E 4092CF01          sts _T_dat,R4
 3692                   .dbline 1906
 3692           ;                                                                       SendManchester();
 3692 87D5              xcall _SendManchester
 3694                   .dbline 1907
 3694           ;                                                                       CheckMotor(20);
 3694 04E1              ldi R16,20
 3696 10E0              ldi R17,0
 3698 0E944B07          xcall _CheckMotor
 369C                   .dbline 1908
 369C           ;                                                               }
 369C           L847:
 369C                   .dbline 1901
 369C A394              inc R10
 369E           L849:
 369E                   .dbline 1901
 369E 8A2D              mov R24,R10
 36A0 8032              cpi R24,32
 36A2 78F2              brlo L846
 36A4           X305:
 36A4                   .dbline 1909
 36A4           ;                                                       }               
 36A4                   .dbline 1910
 36A4           ;                                               }
 36A4                   .dbline 1911
 36A4           ;                                               break;
 36A4 F7C4              xjmp L584
 36A6           L851:
 36A6                   .dbline 1915
 36A6           ; 
 36A6           ; 
 36A6           ;                                       case 0xB0://流量相关
 36A6           ;                                               if(R_dat==0xb0) //下发流量系数
 36A6 8091CD01          lds R24,_R_dat
 36AA 9091CE01          lds R25,_R_dat+1
 36AE 803B              cpi R24,176
 36B0 E0E0              ldi R30,0
 36B2 9E07              cpc R25,R30
 36B4 29F5              brne L852
 36B6           X306:
 36B6                   .dbline 1916
 36B6           ;                                               {
 36B6                   .dbline 1917
 36B6           ;                                                       DataFlag=2;
 36B6 82E0              ldi R24,2
 36B8 90E0              ldi R25,0
 36BA 9093B401          sts _DataFlag+1,R25
 36BE 8093B301          sts _DataFlag,R24
 36C2                   .dbline 1918
 36C2           ;                                                       coeff_len=128;
 36C2 80E8              ldi R24,128
 36C4 90931F00          sts _coeff_len+1,R25
 36C8 80931E00          sts _coeff_len,R24
 36CC                   .dbline 1919
 36CC           ;                                                       coeff_count=0;
 36CC 2224              clr R2
 36CE 3324              clr R3
 36D0 30921D00          sts _coeff_count+1,R3
 36D4 20921C00          sts _coeff_count,R2
 36D8                   .dbline 1920
 36D8           ;                                                       TimeOutFlag=0;
 36D8 2092CB01          sts _TimeOutFlag,R2
 36DC                   .dbline 1921
 36DC           ;                                                       Timer0Counter=1000;//8s定时
 36DC 88EE              ldi R24,1000
 36DE 93E0              ldi R25,3
 36E0 90932F02          sts _Timer0Counter+1,R25
 36E4 80932E02          sts _Timer0Counter,R24
 36E8                   .dbline 1922
 36E8           ;                                                       TCNT0=0x06; //8ms
 36E8 86E0              ldi R24,6
 36EA 82BF              out 0x32,R24
 36EC                   .dbline 1923
 36EC           ;                                                       TCCR0|=0x06;//256分频
 36EC 83B7              in R24,0x33
 36EE 8660              ori R24,6
 36F0 83BF              out 0x33,R24
 36F2                   .dbline 1924
 36F2           ;                                                       TIFR|=0x01; //清定时器0中断标志
 36F2 86B7              in R24,0x36
 36F4 8160              ori R24,1
 36F6 86BF              out 0x36,R24
 36F8                   .dbline 1925
 36F8           ;                                                       TIMSK|=0x01;//使能定时器0中断           
 36F8 87B7              in R24,0x37
 36FA 8160              ori R24,1
 36FC 87BF              out 0x37,R24
 36FE                   .dbline 1926
 36FE           ;                                               }
 36FE CAC4              xjmp L584
 3700           L852:
 3700                   .dbline 1927
 3700           ;                                               else  if(R_dat==0xb1)//上提流量系数
 3700 8091CD01          lds R24,_R_dat
 3704 9091CE01          lds R25,_R_dat+1
 3708 813B              cpi R24,177
 370A E0E0              ldi R30,0
 370C 9E07              cpc R25,R30
 370E 09F0              breq X365
 3710 C1C4              xjmp L584
 3712           X365:
 3712           X307:
 3712                   .dbline 1928
 3712           ;                                               {
 3712                   .dbline 1929
 3712           ;                                                       Uart0TxData[0]=0xE8;
 3712 88EE              ldi R24,232
 3714 80932100          sts _Uart0TxData,R24
 3718                   .dbline 1930
 3718           ;                                                       Uart0TxData[1]=0x40;
 3718 80E4              ldi R24,64
 371A 80932200          sts _Uart0TxData+1,R24
 371E                   .dbline 1931
 371E           ;                                                       Uart0TxData[2]=0x87;
 371E 87E8              ldi R24,135
 3720 80932300          sts _Uart0TxData+2,R24
 3724                   .dbline 1932
 3724           ;                                                       Uart0TxData[3]=2;//系数包2
 3724 82E0              ldi R24,2
 3726 80932400          sts _Uart0TxData+3,R24
 372A                   .dbline 1933
 372A           ;                                                       SendUart0_2(9,5);// 超时40ms    
 372A 25E0              ldi R18,5
 372C 30E0              ldi R19,0
 372E 09E0              ldi R16,9
 3730 0E944E03          xcall _SendUart0_2
 3734                   .dbline 1934
 3734           ;                                                       if(Uart0RxCounter==64) 
 3734 8091E301          lds R24,_Uart0RxCounter
 3738 8034              cpi R24,64
 373A 99F5              brne L859
 373C           X308:
 373C                   .dbline 1935
 373C           ;                                                       {
 373C                   .dbline 1936
 373C           ;                                                               for(i=0;i<32;i++)
 373C AA24              clr R10
 373E 2EC0              xjmp L864
 3740           L861:
 3740                   .dbline 1937
 3740           ;                                                               {
 3740                   .dbline 1938
 3740           ;                                                                       CheckMotor(20);
 3740 04E1              ldi R16,20
 3742 10E0              ldi R17,0
 3744 0E944B07          xcall _CheckMotor
 3748                   .dbline 1939
 3748           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3748 80E0              ldi R24,<_Uart0RxData+1
 374A 90E0              ldi R25,>_Uart0RxData+1
 374C EA2D              mov R30,R10
 374E FF27              clr R31
 3750 EE0F              lsl R30
 3752 FF1F              rol R31
 3754 E80F              add R30,R24
 3756 F91F              adc R31,R25
 3758 2080              ldd R2,z+0
 375A 3324              clr R3
 375C 3092D001          sts _T_dat+1,R3
 3760 2092CF01          sts _T_dat,R2
 3764                   .dbline 1940
 3764           ;                                                                       T_dat<<=8;
 3764 322C              mov R3,R2
 3766 2224              clr R2
 3768 3092D001          sts _T_dat+1,R3
 376C 2092CF01          sts _T_dat,R2
 3770                   .dbline 1941
 3770           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3770 80E0              ldi R24,<_Uart0RxData
 3772 90E0              ldi R25,>_Uart0RxData
 3774 EA2D              mov R30,R10
 3776 FF27              clr R31
 3778 EE0F              lsl R30
 377A FF1F              rol R31
 377C E80F              add R30,R24
 377E F91F              adc R31,R25
 3780 2080              ldd R2,z+0
 3782 3324              clr R3
 3784 4090CF01          lds R4,_T_dat
 3788 5090D001          lds R5,_T_dat+1
 378C 4228              or R4,R2
 378E 5328              or R5,R3
 3790 5092D001          sts _T_dat+1,R5
 3794 4092CF01          sts _T_dat,R4
 3798                   .dbline 1942
 3798           ;                                                                       SendManchester();                
 3798 04D5              xcall _SendManchester
 379A                   .dbline 1943
 379A           ;                                                               }       
 379A           L862:
 379A                   .dbline 1936
 379A A394              inc R10
 379C           L864:
 379C                   .dbline 1936
 379C 8A2D              mov R24,R10
 379E 8032              cpi R24,32
 37A0 78F2              brlo L861
 37A2           X309:
 37A2                   .dbline 1944
 37A2           ;                                                       }       
 37A2           L859:
 37A2                   .dbline 1946
 37A2           ; 
 37A2           ;                                                       Uart0TxData[0]=0xE8;
 37A2 88EE              ldi R24,232
 37A4 80932100          sts _Uart0TxData,R24
 37A8                   .dbline 1947
 37A8           ;                                                       Uart0TxData[1]=0x40;
 37A8 80E4              ldi R24,64
 37AA 80932200          sts _Uart0TxData+1,R24
 37AE                   .dbline 1948
 37AE           ;                                                       Uart0TxData[2]=0x87;
 37AE 87E8              ldi R24,135
 37B0 80932300          sts _Uart0TxData+2,R24
 37B4                   .dbline 1949
 37B4           ;                                                       Uart0TxData[3]=3;//系数包3
 37B4 83E0              ldi R24,3
 37B6 80932400          sts _Uart0TxData+3,R24
 37BA                   .dbline 1950
 37BA           ;                                                       SendUart0_2(9,5);// 超时40ms     
 37BA 25E0              ldi R18,5
 37BC 30E0              ldi R19,0
 37BE 09E0              ldi R16,9
 37C0 0E944E03          xcall _SendUart0_2
 37C4                   .dbline 1951
 37C4           ;                                                       if(Uart0RxCounter==64) 
 37C4 8091E301          lds R24,_Uart0RxCounter
 37C8 8034              cpi R24,64
 37CA 09F0              breq X366
 37CC 63C4              xjmp L584
 37CE           X366:
 37CE           X310:
 37CE                   .dbline 1952
 37CE           ;                                                       {
 37CE                   .dbline 1953
 37CE           ;                                                               for(i=0;i<32;i++)
 37CE AA24              clr R10
 37D0 2EC0              xjmp L874
 37D2           L871:
 37D2                   .dbline 1954
 37D2           ;                                                               {
 37D2                   .dbline 1955
 37D2           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 37D2 80E0              ldi R24,<_Uart0RxData+1
 37D4 90E0              ldi R25,>_Uart0RxData+1
 37D6 EA2D              mov R30,R10
 37D8 FF27              clr R31
 37DA EE0F              lsl R30
 37DC FF1F              rol R31
 37DE E80F              add R30,R24
 37E0 F91F              adc R31,R25
 37E2 2080              ldd R2,z+0
 37E4 3324              clr R3
 37E6 3092D001          sts _T_dat+1,R3
 37EA 2092CF01          sts _T_dat,R2
 37EE                   .dbline 1956
 37EE           ;                                                                       T_dat<<=8;
 37EE 322C              mov R3,R2
 37F0 2224              clr R2
 37F2 3092D001          sts _T_dat+1,R3
 37F6 2092CF01          sts _T_dat,R2
 37FA                   .dbline 1957
 37FA           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 37FA 80E0              ldi R24,<_Uart0RxData
 37FC 90E0              ldi R25,>_Uart0RxData
 37FE EA2D              mov R30,R10
 3800 FF27              clr R31
 3802 EE0F              lsl R30
 3804 FF1F              rol R31
 3806 E80F              add R30,R24
 3808 F91F              adc R31,R25
 380A 2080              ldd R2,z+0
 380C 3324              clr R3
 380E 4090CF01          lds R4,_T_dat
 3812 5090D001          lds R5,_T_dat+1
 3816 4228              or R4,R2
 3818 5328              or R5,R3
 381A 5092D001          sts _T_dat+1,R5
 381E 4092CF01          sts _T_dat,R4
 3822                   .dbline 1958
 3822           ;                                                                       SendManchester();
 3822 BFD4              xcall _SendManchester
 3824                   .dbline 1959
 3824           ;                                                                       CheckMotor(20);
 3824 04E1              ldi R16,20
 3826 10E0              ldi R17,0
 3828 0E944B07          xcall _CheckMotor
 382C                   .dbline 1960
 382C           ;                                                               }
 382C           L872:
 382C                   .dbline 1953
 382C A394              inc R10
 382E           L874:
 382E                   .dbline 1953
 382E 8A2D              mov R24,R10
 3830 8032              cpi R24,32
 3832 78F2              brlo L871
 3834           X311:
 3834                   .dbline 1961
 3834           ;                                                       }               
 3834                   .dbline 1962
 3834           ;                                               }
 3834                   .dbline 1988
 3834           ;                                               /*   if(R_dat==0xb1)//读幅值
 3834           ;                                               {
 3834           ;                                               SendUart0(0xb0,5);//40ms定时
 3834           ;                                               for(k=0;k<8;k+=2)
 3834           ;                                               {
 3834           ;                                               T_dat=Uart0RxData[k];
 3834           ;                                               T_dat<<=8;
 3834           ;                                               T_dat|=Uart0RxData[k+1];
 3834           ;                                               SendManchester();
 3834           ;                                               CheckMotor(40);
 3834           ;                                               }
 3834           ;                                               }
 3834           ;                                               else  if((R_dat>0xb0) && (R_dat<0xb5) )//1800点提取,连续提取流量测试数据，4个通道分别提取，命令为0xB1-0xB4
 3834           ;                                               {   
 3834           ;                                               SendUart0(R_dat,125);//1s定时    
 3834           ;                                               for(k=0;k<1800;k++)//共1800帧数据，全部提取
 3834           ;                                               {
 3834           ;                                               SendUart0(0xFF,1);//8ms定时        
 3834           ;                                               T_dat=Uart0RxData[0];
 3834           ;                                               T_dat<<=8;
 3834           ;                                               T_dat|=Uart0RxData[1];
 3834           ;                                               SendManchester();
 3834           ;                                               CheckMotor(42);
 3834           ;                                               }
 3834           ;                                               } */  
 3834           ;                                               break;
 3834 2FC4              xjmp L584
 3836           L876:
 3836                   .dbline 1991
 3836           ; 
 3836           ;                                       case 0xc0://所有参数全采，上传16字节共8帧
 3836           ;                                               if(R_dat==0xc0)
 3836 8091CD01          lds R24,_R_dat
 383A 9091CE01          lds R25,_R_dat+1
 383E 803C              cpi R24,192
 3840 E0E0              ldi R30,0
 3842 9E07              cpc R25,R30
 3844 09F0              breq X367
 3846 86C2              xjmp L877
 3848           X367:
 3848           X312:
 3848                   .dbline 1992
 3848           ;                                               {
 3848                   .dbline 1993
 3848           ;                                                       Uart0TxData[0]=0xE8;
 3848 88EE              ldi R24,232
 384A 80932100          sts _Uart0TxData,R24
 384E                   .dbline 1994
 384E           ;                                                       Uart0TxData[1]=0x40;
 384E 80E4              ldi R24,64
 3850 80932200          sts _Uart0TxData+1,R24
 3854                   .dbline 1995
 3854           ;                                                       Uart0TxData[2]=0x89;
 3854 89E8              ldi R24,137
 3856 80932300          sts _Uart0TxData+2,R24
 385A                   .dbline 1996
 385A           ;                                                       Uart0TxData[3]=9;
 385A 89E0              ldi R24,9
 385C 80932400          sts _Uart0TxData+3,R24
 3860                   .dbline 1997
 3860           ;                                                       SendUart0_2(9,50);//流量板直读检测，超时400ms
 3860 22E3              ldi R18,50
 3862 30E0              ldi R19,0
 3864 09E0              ldi R16,9
 3866 0E944E03          xcall _SendUart0_2
 386A                   .dbline 1998
 386A           ;                                                       if(Uart0RxCounter==64)//成功接收到压力、温度、流量数据，先低字节后高字节
 386A 8091E301          lds R24,_Uart0RxCounter
 386E 8034              cpi R24,64
 3870 09F0              breq X368
 3872 10C4              xjmp L584
 3874           X368:
 3874           X313:
 3874                   .dbline 1999
 3874           ;                                                       {
 3874                   .dbline 2000
 3874           ;                                                               T_dat=Uart0RxData[1];
 3874 2090E501          lds R2,_Uart0RxData+1
 3878 3324              clr R3
 387A 3092D001          sts _T_dat+1,R3
 387E 2092CF01          sts _T_dat,R2
 3882                   .dbline 2001
 3882           ;                                                               T_dat<<=8;
 3882 2090CF01          lds R2,_T_dat
 3886 3090D001          lds R3,_T_dat+1
 388A 322C              mov R3,R2
 388C 2224              clr R2
 388E 3092D001          sts _T_dat+1,R3
 3892 2092CF01          sts _T_dat,R2
 3896                   .dbline 2002
 3896           ;                                                               T_dat|=Uart0RxData[0];
 3896 2090E401          lds R2,_Uart0RxData
 389A 3324              clr R3
 389C 4090CF01          lds R4,_T_dat
 38A0 5090D001          lds R5,_T_dat+1
 38A4 4228              or R4,R2
 38A6 5328              or R5,R3
 38A8 5092D001          sts _T_dat+1,R5
 38AC 4092CF01          sts _T_dat,R4
 38B0                   .dbline 2003
 38B0           ;                                                               SendManchester();//压力
 38B0 78D4              xcall _SendManchester
 38B2                   .dbline 2004
 38B2           ;                                                               crc16array[0]=(unsigned char)(T_dat);
 38B2 2090CF01          lds R2,_T_dat
 38B6 3090D001          lds R3,_T_dat+1
 38BA 20920000          sts _crc16array,R2
 38BE                   .dbline 2005
 38BE           ;                                                               crc16array[1]=(unsigned char)(T_dat>>8);
 38BE 232C              mov R2,R3
 38C0 3324              clr R3
 38C2 27FC              sbrc R2,7
 38C4 3094              com R3
 38C6 20920100          sts _crc16array+1,R2
 38CA                   .dbline 2008
 38CA           ; 
 38CA           ; 
 38CA           ;                                                               CheckMotor(30); 
 38CA 0EE1              ldi R16,30
 38CC 10E0              ldi R17,0
 38CE 0E944B07          xcall _CheckMotor
 38D2                   .dbline 2009
 38D2           ;                                                               T_dat=Uart0RxData[3];
 38D2 2090E701          lds R2,_Uart0RxData+3
 38D6 3324              clr R3
 38D8 3092D001          sts _T_dat+1,R3
 38DC 2092CF01          sts _T_dat,R2
 38E0                   .dbline 2010
 38E0           ;                                                               T_dat<<=8;
 38E0 2090CF01          lds R2,_T_dat
 38E4 3090D001          lds R3,_T_dat+1
 38E8 322C              mov R3,R2
 38EA 2224              clr R2
 38EC 3092D001          sts _T_dat+1,R3
 38F0 2092CF01          sts _T_dat,R2
 38F4                   .dbline 2011
 38F4           ;                                                               T_dat|=Uart0RxData[2];
 38F4 2090E601          lds R2,_Uart0RxData+2
 38F8 3324              clr R3
 38FA 4090CF01          lds R4,_T_dat
 38FE 5090D001          lds R5,_T_dat+1
 3902 4228              or R4,R2
 3904 5328              or R5,R3
 3906 5092D001          sts _T_dat+1,R5
 390A 4092CF01          sts _T_dat,R4
 390E                   .dbline 2012
 390E           ;                                                               SendManchester();//温度
 390E 49D4              xcall _SendManchester
 3910                   .dbline 2013
 3910           ;                                                               crc16array[2]=(unsigned char)(T_dat);
 3910 2090CF01          lds R2,_T_dat
 3914 3090D001          lds R3,_T_dat+1
 3918 20920200          sts _crc16array+2,R2
 391C                   .dbline 2014
 391C           ;                                                               crc16array[3]=(unsigned char)(T_dat>>8);
 391C 232C              mov R2,R3
 391E 3324              clr R3
 3920 27FC              sbrc R2,7
 3922 3094              com R3
 3924 20920300          sts _crc16array+3,R2
 3928                   .dbline 2016
 3928           ; 
 3928           ;                                                               CheckMotor(30); 
 3928 0EE1              ldi R16,30
 392A 10E0              ldi R17,0
 392C 0E944B07          xcall _CheckMotor
 3930                   .dbline 2018
 3930           ; 
 3930           ;                                                               lfib=Uart0RxData[5];
 3930 2090E901          lds R2,_Uart0RxData+5
 3934 3324              clr R3
 3936 4424              clr R4
 3938 5524              clr R5
 393A 30921500          sts _lfib+1,R3
 393E 20921400          sts _lfib,R2
 3942 50921700          sts _lfib+2+1,R5
 3946 40921600          sts _lfib+2,R4
 394A                   .dbline 2019
 394A           ;                                                               lfib<<=8;
 394A 88E0              ldi R24,8
 394C 90E0              ldi R25,0
 394E 20911600          lds R18,_lfib+2
 3952 30911700          lds R19,_lfib+2+1
 3956 00911400          lds R16,_lfib
 395A 10911500          lds R17,_lfib+1
 395E 8A93              st -y,R24
 3960 0E940000          xcall lsl32
 3964 10931500          sts _lfib+1,R17
 3968 00931400          sts _lfib,R16
 396C 30931700          sts _lfib+2+1,R19
 3970 20931600          sts _lfib+2,R18
 3974                   .dbline 2020
 3974           ;                                                               lfib|=Uart0RxData[4];
 3974 2090E801          lds R2,_Uart0RxData+4
 3978 3324              clr R3
 397A 4424              clr R4
 397C 5524              clr R5
 397E 3801              movw R6,R16
 3980 4901              movw R8,R18
 3982 6228              or R6,R2
 3984 7328              or R7,R3
 3986 8428              or R8,R4
 3988 9528              or R9,R5
 398A 70921500          sts _lfib+1,R7
 398E 60921400          sts _lfib,R6
 3992 90921700          sts _lfib+2+1,R9
 3996 80921600          sts _lfib+2,R8
 399A                   .dbline 2021
 399A           ;                                                               lfib&=0x0000ffff;
 399A 4FEF              ldi R20,255
 399C 5FEF              ldi R21,255
 399E 60E0              ldi R22,0
 39A0 70E0              ldi R23,0
 39A2 1301              movw R2,R6
 39A4 2401              movw R4,R8
 39A6 2422              and R2,R20
 39A8 3522              and R3,R21
 39AA 4622              and R4,R22
 39AC 5722              and R5,R23
 39AE 30921500          sts _lfib+1,R3
 39B2 20921400          sts _lfib,R2
 39B6 50921700          sts _lfib+2+1,R5
 39BA 40921600          sts _lfib+2,R4
 39BE                   .dbline 2022
 39BE           ;                                                               myFIB.f=(unsigned long)lfib; 
 39BE 8101              movw R16,R2
 39C0 9201              movw R18,R4
 39C2 0E940000          xcall ulong2fp
 39C6 10934102          sts _myFIB+1,R17
 39CA 00934002          sts _myFIB,R16
 39CE 30934302          sts _myFIB+2+1,R19
 39D2 20934202          sts _myFIB+2,R18
 39D6                   .dbline 2024
 39D6           ; 
 39D6           ;                                                               T_dat=myFIB.i[1];
 39D6 20904202          lds R2,_myFIB+2
 39DA 30904302          lds R3,_myFIB+2+1
 39DE 3092D001          sts _T_dat+1,R3
 39E2 2092CF01          sts _T_dat,R2
 39E6                   .dbline 2025
 39E6           ;                                                               SendManchester();//流量-时间1
 39E6 DDD3              xcall _SendManchester
 39E8                   .dbline 2026
 39E8           ;                                                               crc16array[4]=(unsigned char)(T_dat);
 39E8 2090CF01          lds R2,_T_dat
 39EC 3090D001          lds R3,_T_dat+1
 39F0 20920400          sts _crc16array+4,R2
 39F4                   .dbline 2027
 39F4           ;                                                               crc16array[5]=(unsigned char)(T_dat>>8);
 39F4 232C              mov R2,R3
 39F6 3324              clr R3
 39F8 27FC              sbrc R2,7
 39FA 3094              com R3
 39FC 20920500          sts _crc16array+5,R2
 3A00                   .dbline 2029
 3A00           ; 
 3A00           ;                                                               CheckMotor(30); 
 3A00 0EE1              ldi R16,30
 3A02 10E0              ldi R17,0
 3A04 0E944B07          xcall _CheckMotor
 3A08                   .dbline 2030
 3A08           ;                                                               T_dat=myFIB.i[0];
 3A08 20904002          lds R2,_myFIB
 3A0C 30904102          lds R3,_myFIB+1
 3A10 3092D001          sts _T_dat+1,R3
 3A14 2092CF01          sts _T_dat,R2
 3A18                   .dbline 2031
 3A18           ;                                                               SendManchester();//流量-时间2
 3A18 C4D3              xcall _SendManchester
 3A1A                   .dbline 2032
 3A1A           ;                                                               crc16array[6]=(unsigned char)(T_dat);
 3A1A 2090CF01          lds R2,_T_dat
 3A1E 3090D001          lds R3,_T_dat+1
 3A22 20920600          sts _crc16array+6,R2
 3A26                   .dbline 2033
 3A26           ;                                                               crc16array[7]=(unsigned char)(T_dat>>8);
 3A26 232C              mov R2,R3
 3A28 3324              clr R3
 3A2A 27FC              sbrc R2,7
 3A2C 3094              com R3
 3A2E 20920700          sts _crc16array+7,R2
 3A32                   .dbline 2035
 3A32           ; 
 3A32           ;                                                               CheckMotor(30); 
 3A32 0EE1              ldi R16,30
 3A34 10E0              ldi R17,0
 3A36 0E944B07          xcall _CheckMotor
 3A3A                   .dbline 2037
 3A3A           ; 
 3A3A           ;                                                               lfib=Uart0RxData[7];
 3A3A 2090EB01          lds R2,_Uart0RxData+7
 3A3E 3324              clr R3
 3A40 4424              clr R4
 3A42 5524              clr R5
 3A44 30921500          sts _lfib+1,R3
 3A48 20921400          sts _lfib,R2
 3A4C 50921700          sts _lfib+2+1,R5
 3A50 40921600          sts _lfib+2,R4
 3A54                   .dbline 2038
 3A54           ;                                                               lfib<<=8;
 3A54 88E0              ldi R24,8
 3A56 90E0              ldi R25,0
 3A58 20911600          lds R18,_lfib+2
 3A5C 30911700          lds R19,_lfib+2+1
 3A60 00911400          lds R16,_lfib
 3A64 10911500          lds R17,_lfib+1
 3A68 8A93              st -y,R24
 3A6A 0E940000          xcall lsl32
 3A6E 10931500          sts _lfib+1,R17
 3A72 00931400          sts _lfib,R16
 3A76 30931700          sts _lfib+2+1,R19
 3A7A 20931600          sts _lfib+2,R18
 3A7E                   .dbline 2039
 3A7E           ;                                                               lfib|=Uart0RxData[6];
 3A7E 2090EA01          lds R2,_Uart0RxData+6
 3A82 3324              clr R3
 3A84 4424              clr R4
 3A86 5524              clr R5
 3A88 3801              movw R6,R16
 3A8A 4901              movw R8,R18
 3A8C 6228              or R6,R2
 3A8E 7328              or R7,R3
 3A90 8428              or R8,R4
 3A92 9528              or R9,R5
 3A94 70921500          sts _lfib+1,R7
 3A98 60921400          sts _lfib,R6
 3A9C 90921700          sts _lfib+2+1,R9
 3AA0 80921600          sts _lfib+2,R8
 3AA4                   .dbline 2040
 3AA4           ;                                                               lfib&=0x0000ffff;
 3AA4 4FEF              ldi R20,255
 3AA6 5FEF              ldi R21,255
 3AA8 60E0              ldi R22,0
 3AAA 70E0              ldi R23,0
 3AAC 1301              movw R2,R6
 3AAE 2401              movw R4,R8
 3AB0 2422              and R2,R20
 3AB2 3522              and R3,R21
 3AB4 4622              and R4,R22
 3AB6 5722              and R5,R23
 3AB8 30921500          sts _lfib+1,R3
 3ABC 20921400          sts _lfib,R2
 3AC0 50921700          sts _lfib+2+1,R5
 3AC4 40921600          sts _lfib+2,R4
 3AC8                   .dbline 2041
 3AC8           ;                                                               myFIB.f=(unsigned long)lfib; 
 3AC8 8101              movw R16,R2
 3ACA 9201              movw R18,R4
 3ACC 0E940000          xcall ulong2fp
 3AD0 10934102          sts _myFIB+1,R17
 3AD4 00934002          sts _myFIB,R16
 3AD8 30934302          sts _myFIB+2+1,R19
 3ADC 20934202          sts _myFIB+2,R18
 3AE0                   .dbline 2043
 3AE0           ; 
 3AE0           ;                                                               T_dat=myFIB.i[1];
 3AE0 20904202          lds R2,_myFIB+2
 3AE4 30904302          lds R3,_myFIB+2+1
 3AE8 3092D001          sts _T_dat+1,R3
 3AEC 2092CF01          sts _T_dat,R2
 3AF0                   .dbline 2044
 3AF0           ;                                                               SendManchester();//流量-相位1
 3AF0 58D3              xcall _SendManchester
 3AF2                   .dbline 2045
 3AF2           ;                                                               crc16array[8]=(unsigned char)(T_dat);
 3AF2 2090CF01          lds R2,_T_dat
 3AF6 3090D001          lds R3,_T_dat+1
 3AFA 20920800          sts _crc16array+8,R2
 3AFE                   .dbline 2046
 3AFE           ;                                                               crc16array[9]=(unsigned char)(T_dat>>8);
 3AFE 232C              mov R2,R3
 3B00 3324              clr R3
 3B02 27FC              sbrc R2,7
 3B04 3094              com R3
 3B06 20920900          sts _crc16array+9,R2
 3B0A                   .dbline 2048
 3B0A           ; 
 3B0A           ;                                                               CheckMotor(30); 
 3B0A 0EE1              ldi R16,30
 3B0C 10E0              ldi R17,0
 3B0E 0E944B07          xcall _CheckMotor
 3B12                   .dbline 2049
 3B12           ;                                                               T_dat=myFIB.i[0];
 3B12 20904002          lds R2,_myFIB
 3B16 30904102          lds R3,_myFIB+1
 3B1A 3092D001          sts _T_dat+1,R3
 3B1E 2092CF01          sts _T_dat,R2
 3B22                   .dbline 2050
 3B22           ;                                                               SendManchester();//流量-相位2
 3B22 3FD3              xcall _SendManchester
 3B24                   .dbline 2051
 3B24           ;                                                               crc16array[10]=(unsigned char)(T_dat);
 3B24 2090CF01          lds R2,_T_dat
 3B28 3090D001          lds R3,_T_dat+1
 3B2C 20920A00          sts _crc16array+10,R2
 3B30                   .dbline 2052
 3B30           ;                                                               crc16array[11]=(unsigned char)(T_dat>>8);
 3B30 232C              mov R2,R3
 3B32 3324              clr R3
 3B34 27FC              sbrc R2,7
 3B36 3094              com R3
 3B38 20920B00          sts _crc16array+11,R2
 3B3C                   .dbline 2054
 3B3C           ; 
 3B3C           ;                                                               CheckMotor(30);  
 3B3C 0EE1              ldi R16,30
 3B3E 10E0              ldi R17,0
 3B40 0E944B07          xcall _CheckMotor
 3B44                   .dbline 2055
 3B44           ;                                                               T_dat=Motor1Status.i;
 3B44 20903E02          lds R2,_Motor1Status
 3B48 30903F02          lds R3,_Motor1Status+1
 3B4C 3092D001          sts _T_dat+1,R3
 3B50 2092CF01          sts _T_dat,R2
 3B54                   .dbline 2056
 3B54           ;                                                               SendManchester();//收放电机状态
 3B54 26D3              xcall _SendManchester
 3B56                   .dbline 2057
 3B56           ;                                                               crc16array[12]=(unsigned char)(T_dat);
 3B56 2090CF01          lds R2,_T_dat
 3B5A 3090D001          lds R3,_T_dat+1
 3B5E 20920C00          sts _crc16array+12,R2
 3B62                   .dbline 2058
 3B62           ;                                                               crc16array[13]=(unsigned char)(T_dat>>8);
 3B62 232C              mov R2,R3
 3B64 3324              clr R3
 3B66 27FC              sbrc R2,7
 3B68 3094              com R3
 3B6A 20920D00          sts _crc16array+13,R2
 3B6E                   .dbline 2060
 3B6E           ; 
 3B6E           ;                                                               CheckMotor(30);  
 3B6E 0EE1              ldi R16,30
 3B70 10E0              ldi R17,0
 3B72 0E944B07          xcall _CheckMotor
 3B76                   .dbline 2061
 3B76           ;                                                               T_dat=Motor2Status.i;
 3B76 20903C02          lds R2,_Motor2Status
 3B7A 30903D02          lds R3,_Motor2Status+1
 3B7E 3092D001          sts _T_dat+1,R3
 3B82 2092CF01          sts _T_dat,R2
 3B86                   .dbline 2062
 3B86           ;                                                               SendManchester();//调节电机状态
 3B86 0DD3              xcall _SendManchester
 3B88                   .dbline 2063
 3B88           ;                                                               crc16array[14]=(unsigned char)(T_dat);
 3B88 2090CF01          lds R2,_T_dat
 3B8C 3090D001          lds R3,_T_dat+1
 3B90 20920E00          sts _crc16array+14,R2
 3B94                   .dbline 2064
 3B94           ;                                                               crc16array[15]=(unsigned char)(T_dat>>8);
 3B94 232C              mov R2,R3
 3B96 3324              clr R3
 3B98 27FC              sbrc R2,7
 3B9A 3094              com R3
 3B9C 20920F00          sts _crc16array+15,R2
 3BA0                   .dbline 2066
 3BA0           ; 
 3BA0           ;                                                               CheckMotor(30); 
 3BA0 0EE1              ldi R16,30
 3BA2 10E0              ldi R17,0
 3BA4 0E944B07          xcall _CheckMotor
 3BA8                   .dbline 2067
 3BA8           ;                                                               f=SampleADC(4);//Cable CAB-R1
 3BA8 04E0              ldi R16,4
 3BAA 0E94DC06          xcall _SampleADC
 3BAE 1127              clr R17
 3BB0 0E940000          xcall int2fp
 3BB4 0D83              std y+5,R16
 3BB6 1E83              std y+6,R17
 3BB8 2F83              std y+7,R18
 3BBA 3887              std y+8,R19
 3BBC                   .dbline 2068
 3BBC           ;                                                               f=f*2.56;
 3BBC 00E0              ldi R16,<L908
 3BBE 10E0              ldi R17,>L908
 3BC0 0E940000          xcall elpm32
 3BC4 CE01              movw R24,R28
 3BC6 0596              adiw R24,5
 3BC8 9A93              st -y,R25
 3BCA 8A93              st -y,R24
 3BCC 0E940000          xcall fpmule1
 3BD0 0D83              std y+5,R16
 3BD2 1E83              std y+6,R17
 3BD4 2F83              std y+7,R18
 3BD6 3887              std y+8,R19
 3BD8                   .dbline 2069
 3BD8           ;                                                               f=f*101;
 3BD8 00E0              ldi R16,<L909
 3BDA 10E0              ldi R17,>L909
 3BDC 0E940000          xcall elpm32
 3BE0 CE01              movw R24,R28
 3BE2 0596              adiw R24,5
 3BE4 9A93              st -y,R25
 3BE6 8A93              st -y,R24
 3BE8 0E940000          xcall fpmule1
 3BEC 0D83              std y+5,R16
 3BEE 1E83              std y+6,R17
 3BF0 2F83              std y+7,R18
 3BF2 3887              std y+8,R19
 3BF4                   .dbline 2070
 3BF4           ;                                                               f=f/256;
 3BF4 2D80              ldd R2,y+5
 3BF6 3E80              ldd R3,y+6
 3BF8 4F80              ldd R4,y+7
 3BFA 5884              ldd R5,y+8
 3BFC 00E0              ldi R16,<L910
 3BFE 10E0              ldi R17,>L910
 3C00 0E940000          xcall elpm32
 3C04 3A93              st -y,R19
 3C06 2A93              st -y,R18
 3C08 1A93              st -y,R17
 3C0A 0A93              st -y,R16
 3C0C 8101              movw R16,R2
 3C0E 9201              movw R18,R4
 3C10 0E940000          xcall fpdiv2
 3C14 0D83              std y+5,R16
 3C16 1E83              std y+6,R17
 3C18 2F83              std y+7,R18
 3C1A 3887              std y+8,R19
 3C1C                   .dbline 2071
 3C1C           ;                                                               T_dat=f;
 3C1C 0D81              ldd R16,y+5
 3C1E 1E81              ldd R17,y+6
 3C20 2F81              ldd R18,y+7
 3C22 3885              ldd R19,y+8
 3C24 0E940000          xcall fpint
 3C28 1093D001          sts _T_dat+1,R17
 3C2C 0093CF01          sts _T_dat,R16
 3C30                   .dbline 2072
 3C30           ;                                                               CheckMotor(30);
 3C30 0EE1              ldi R16,30
 3C32 10E0              ldi R17,0
 3C34 0E944B07          xcall _CheckMotor
 3C38                   .dbline 2073
 3C38           ;                                                               T_dat<<=8;   
 3C38 2090CF01          lds R2,_T_dat
 3C3C 3090D001          lds R3,_T_dat+1
 3C40 322C              mov R3,R2
 3C42 2224              clr R2
 3C44 3092D001          sts _T_dat+1,R3
 3C48 2092CF01          sts _T_dat,R2
 3C4C                   .dbline 2074
 3C4C           ;                                                               f=SampleADC(5);//VIN / VR CAB-R2
 3C4C 05E0              ldi R16,5
 3C4E 0E94DC06          xcall _SampleADC
 3C52 C02E              mov R12,R16
 3C54 1127              clr R17
 3C56 0E940000          xcall int2fp
 3C5A 0D83              std y+5,R16
 3C5C 1E83              std y+6,R17
 3C5E 2F83              std y+7,R18
 3C60 3887              std y+8,R19
 3C62                   .dbline 2075
 3C62           ;                                                               f=f*2.56;
 3C62 00E0              ldi R16,<L908
 3C64 10E0              ldi R17,>L908
 3C66 0E940000          xcall elpm32
 3C6A CE01              movw R24,R28
 3C6C 0596              adiw R24,5
 3C6E 9A93              st -y,R25
 3C70 8A93              st -y,R24
 3C72 0E940000          xcall fpmule1
 3C76 0D83              std y+5,R16
 3C78 1E83              std y+6,R17
 3C7A 2F83              std y+7,R18
 3C7C 3887              std y+8,R19
 3C7E                   .dbline 2076
 3C7E           ;                                                               f=f*101;
 3C7E 00E0              ldi R16,<L909
 3C80 10E0              ldi R17,>L909
 3C82 0E940000          xcall elpm32
 3C86 CE01              movw R24,R28
 3C88 0596              adiw R24,5
 3C8A 9A93              st -y,R25
 3C8C 8A93              st -y,R24
 3C8E 0E940000          xcall fpmule1
 3C92 0D83              std y+5,R16
 3C94 1E83              std y+6,R17
 3C96 2F83              std y+7,R18
 3C98 3887              std y+8,R19
 3C9A                   .dbline 2077
 3C9A           ;                                                               f=f/256;
 3C9A 2D80              ldd R2,y+5
 3C9C 3E80              ldd R3,y+6
 3C9E 4F80              ldd R4,y+7
 3CA0 5884              ldd R5,y+8
 3CA2 00E0              ldi R16,<L910
 3CA4 10E0              ldi R17,>L910
 3CA6 0E940000          xcall elpm32
 3CAA 3A93              st -y,R19
 3CAC 2A93              st -y,R18
 3CAE 1A93              st -y,R17
 3CB0 0A93              st -y,R16
 3CB2 8101              movw R16,R2
 3CB4 9201              movw R18,R4
 3CB6 0E940000          xcall fpdiv2
 3CBA 0D83              std y+5,R16
 3CBC 1E83              std y+6,R17
 3CBE 2F83              std y+7,R18
 3CC0 3887              std y+8,R19
 3CC2                   .dbline 2078
 3CC2           ;                                                               i=f;
 3CC2 0D81              ldd R16,y+5
 3CC4 1E81              ldd R17,y+6
 3CC6 2F81              ldd R18,y+7
 3CC8 3885              ldd R19,y+8
 3CCA 0E940000          xcall fpint
 3CCE A02E              mov R10,R16
 3CD0                   .dbline 2079
 3CD0           ;                                                               T_dat|=i; 
 3CD0 2A2C              mov R2,R10
 3CD2 3324              clr R3
 3CD4 4090CF01          lds R4,_T_dat
 3CD8 5090D001          lds R5,_T_dat+1
 3CDC 4228              or R4,R2
 3CDE 5328              or R5,R3
 3CE0 5092D001          sts _T_dat+1,R5
 3CE4 4092CF01          sts _T_dat,R4
 3CE8                   .dbline 2080
 3CE8           ;                                                               SendManchester();//2路电缆电压
 3CE8 5CD2              xcall _SendManchester
 3CEA                   .dbline 2081
 3CEA           ;                                                               crc16array[16]=(unsigned char)(T_dat);
 3CEA 2090CF01          lds R2,_T_dat
 3CEE 3090D001          lds R3,_T_dat+1
 3CF2 20921000          sts _crc16array+16,R2
 3CF6                   .dbline 2082
 3CF6           ;                                                               crc16array[17]=(unsigned char)(T_dat>>8);
 3CF6 232C              mov R2,R3
 3CF8 3324              clr R3
 3CFA 27FC              sbrc R2,7
 3CFC 3094              com R3
 3CFE 20921100          sts _crc16array+17,R2
 3D02                   .dbline 2084
 3D02           ; 
 3D02           ;                                                               CheckMotor(30); 
 3D02 0EE1              ldi R16,30
 3D04 10E0              ldi R17,0
 3D06 0E944B07          xcall _CheckMotor
 3D0A                   .dbline 2085
 3D0A           ;                                                               crc16(crc16array,18);//0.75ms
 3D0A 22E1              ldi R18,18
 3D0C 30E0              ldi R19,0
 3D0E 00E0              ldi R16,<_crc16array
 3D10 10E0              ldi R17,>_crc16array
 3D12 59D6              xcall _crc16
 3D14                   .dbline 2086
 3D14           ;                                                               T_dat=crc16hi;
 3D14 20901300          lds R2,_crc16hi
 3D18 3324              clr R3
 3D1A 3092D001          sts _T_dat+1,R3
 3D1E 2092CF01          sts _T_dat,R2
 3D22                   .dbline 2087
 3D22           ;                                                               T_dat<<=8;
 3D22 2090CF01          lds R2,_T_dat
 3D26 3090D001          lds R3,_T_dat+1
 3D2A 322C              mov R3,R2
 3D2C 2224              clr R2
 3D2E 3092D001          sts _T_dat+1,R3
 3D32 2092CF01          sts _T_dat,R2
 3D36                   .dbline 2088
 3D36           ;                                                               T_dat|=crc16lo;   
 3D36 20901200          lds R2,_crc16lo
 3D3A 3324              clr R3
 3D3C 4090CF01          lds R4,_T_dat
 3D40 5090D001          lds R5,_T_dat+1
 3D44 4228              or R4,R2
 3D46 5328              or R5,R3
 3D48 5092D001          sts _T_dat+1,R5
 3D4C 4092CF01          sts _T_dat,R4
 3D50                   .dbline 2089
 3D50           ;                                                               SendManchester();//上传CRC校验共2字节
 3D50 28D2              xcall _SendManchester
 3D52                   .dbline 2090
 3D52           ;                                                       }       
 3D52                   .dbline 2091
 3D52           ;                                               }
 3D52 A0C1              xjmp L584
 3D54           L877:
 3D54                   .dbline 2092
 3D54           ;                                               else  if(R_dat==0xc5) //读仪器信息,共320字节，分5次从流量板中提取，每包64字节
 3D54 8091CD01          lds R24,_R_dat
 3D58 9091CE01          lds R25,_R_dat+1
 3D5C 853C              cpi R24,197
 3D5E E0E0              ldi R30,0
 3D60 9E07              cpc R25,R30
 3D62 09F0              breq X369
 3D64 6AC1              xjmp L913
 3D66           X369:
 3D66           X314:
 3D66                   .dbline 2093
 3D66           ;                                               {
 3D66                   .dbline 2094
 3D66           ;                                                       Uart0TxData[0]=0xE8;
 3D66 88EE              ldi R24,232
 3D68 80932100          sts _Uart0TxData,R24
 3D6C                   .dbline 2095
 3D6C           ;                                                       Uart0TxData[1]=0x40;
 3D6C 80E4              ldi R24,64
 3D6E 80932200          sts _Uart0TxData+1,R24
 3D72                   .dbline 2096
 3D72           ;                                                       Uart0TxData[2]=0x83;
 3D72 83E8              ldi R24,131
 3D74 80932300          sts _Uart0TxData+2,R24
 3D78                   .dbline 2097
 3D78           ;                                                       Uart0TxData[3]=0;//包0
 3D78 2224              clr R2
 3D7A 20922400          sts _Uart0TxData+3,R2
 3D7E                   .dbline 2098
 3D7E           ;                                                       SendUart0_2(9,5);// 超时40ms    
 3D7E 25E0              ldi R18,5
 3D80 30E0              ldi R19,0
 3D82 09E0              ldi R16,9
 3D84 0E944E03          xcall _SendUart0_2
 3D88                   .dbline 2099
 3D88           ;                                                       if(Uart0RxCounter==64) 
 3D88 8091E301          lds R24,_Uart0RxCounter
 3D8C 8034              cpi R24,64
 3D8E 99F5              brne L918
 3D90           X315:
 3D90                   .dbline 2100
 3D90           ;                                                       {
 3D90                   .dbline 2101
 3D90           ;                                                               for(i=0;i<32;i++)
 3D90 AA24              clr R10
 3D92 2EC0              xjmp L923
 3D94           L920:
 3D94                   .dbline 2102
 3D94           ;                                                               {
 3D94                   .dbline 2103
 3D94           ;                                                                       CheckMotor(20);
 3D94 04E1              ldi R16,20
 3D96 10E0              ldi R17,0
 3D98 0E944B07          xcall _CheckMotor
 3D9C                   .dbline 2104
 3D9C           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3D9C 80E0              ldi R24,<_Uart0RxData+1
 3D9E 90E0              ldi R25,>_Uart0RxData+1
 3DA0 EA2D              mov R30,R10
 3DA2 FF27              clr R31
 3DA4 EE0F              lsl R30
 3DA6 FF1F              rol R31
 3DA8 E80F              add R30,R24
 3DAA F91F              adc R31,R25
 3DAC 2080              ldd R2,z+0
 3DAE 3324              clr R3
 3DB0 3092D001          sts _T_dat+1,R3
 3DB4 2092CF01          sts _T_dat,R2
 3DB8                   .dbline 2105
 3DB8           ;                                                                       T_dat<<=8;
 3DB8 322C              mov R3,R2
 3DBA 2224              clr R2
 3DBC 3092D001          sts _T_dat+1,R3
 3DC0 2092CF01          sts _T_dat,R2
 3DC4                   .dbline 2106
 3DC4           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3DC4 80E0              ldi R24,<_Uart0RxData
 3DC6 90E0              ldi R25,>_Uart0RxData
 3DC8 EA2D              mov R30,R10
 3DCA FF27              clr R31
 3DCC EE0F              lsl R30
 3DCE FF1F              rol R31
 3DD0 E80F              add R30,R24
 3DD2 F91F              adc R31,R25
 3DD4 2080              ldd R2,z+0
 3DD6 3324              clr R3
 3DD8 4090CF01          lds R4,_T_dat
 3DDC 5090D001          lds R5,_T_dat+1
 3DE0 4228              or R4,R2
 3DE2 5328              or R5,R3
 3DE4 5092D001          sts _T_dat+1,R5
 3DE8 4092CF01          sts _T_dat,R4
 3DEC                   .dbline 2107
 3DEC           ;                                                                       SendManchester();                
 3DEC DAD1              xcall _SendManchester
 3DEE                   .dbline 2108
 3DEE           ;                                                               }       
 3DEE           L921:
 3DEE                   .dbline 2101
 3DEE A394              inc R10
 3DF0           L923:
 3DF0                   .dbline 2101
 3DF0 8A2D              mov R24,R10
 3DF2 8032              cpi R24,32
 3DF4 78F2              brlo L920
 3DF6           X316:
 3DF6                   .dbline 2109
 3DF6           ;                                                       }       
 3DF6           L918:
 3DF6                   .dbline 2111
 3DF6           ; 
 3DF6           ;                                                       Uart0TxData[0]=0xE8;
 3DF6 88EE              ldi R24,232
 3DF8 80932100          sts _Uart0TxData,R24
 3DFC                   .dbline 2112
 3DFC           ;                                                       Uart0TxData[1]=0x40;
 3DFC 80E4              ldi R24,64
 3DFE 80932200          sts _Uart0TxData+1,R24
 3E02                   .dbline 2113
 3E02           ;                                                       Uart0TxData[2]=0x83;
 3E02 83E8              ldi R24,131
 3E04 80932300          sts _Uart0TxData+2,R24
 3E08                   .dbline 2114
 3E08           ;                                                       Uart0TxData[3]=1;//包1
 3E08 81E0              ldi R24,1
 3E0A 80932400          sts _Uart0TxData+3,R24
 3E0E                   .dbline 2115
 3E0E           ;                                                       SendUart0_2(9,5);// 超时40ms     
 3E0E 25E0              ldi R18,5
 3E10 30E0              ldi R19,0
 3E12 09E0              ldi R16,9
 3E14 0E944E03          xcall _SendUart0_2
 3E18                   .dbline 2116
 3E18           ;                                                       if(Uart0RxCounter==64) 
 3E18 8091E301          lds R24,_Uart0RxCounter
 3E1C 8034              cpi R24,64
 3E1E 99F5              brne L928
 3E20           X317:
 3E20                   .dbline 2117
 3E20           ;                                                       {
 3E20                   .dbline 2118
 3E20           ;                                                               for(i=0;i<32;i++)
 3E20 AA24              clr R10
 3E22 2EC0              xjmp L933
 3E24           L930:
 3E24                   .dbline 2119
 3E24           ;                                                               {
 3E24                   .dbline 2120
 3E24           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3E24 80E0              ldi R24,<_Uart0RxData+1
 3E26 90E0              ldi R25,>_Uart0RxData+1
 3E28 EA2D              mov R30,R10
 3E2A FF27              clr R31
 3E2C EE0F              lsl R30
 3E2E FF1F              rol R31
 3E30 E80F              add R30,R24
 3E32 F91F              adc R31,R25
 3E34 2080              ldd R2,z+0
 3E36 3324              clr R3
 3E38 3092D001          sts _T_dat+1,R3
 3E3C 2092CF01          sts _T_dat,R2
 3E40                   .dbline 2121
 3E40           ;                                                                       T_dat<<=8;
 3E40 322C              mov R3,R2
 3E42 2224              clr R2
 3E44 3092D001          sts _T_dat+1,R3
 3E48 2092CF01          sts _T_dat,R2
 3E4C                   .dbline 2122
 3E4C           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3E4C 80E0              ldi R24,<_Uart0RxData
 3E4E 90E0              ldi R25,>_Uart0RxData
 3E50 EA2D              mov R30,R10
 3E52 FF27              clr R31
 3E54 EE0F              lsl R30
 3E56 FF1F              rol R31
 3E58 E80F              add R30,R24
 3E5A F91F              adc R31,R25
 3E5C 2080              ldd R2,z+0
 3E5E 3324              clr R3
 3E60 4090CF01          lds R4,_T_dat
 3E64 5090D001          lds R5,_T_dat+1
 3E68 4228              or R4,R2
 3E6A 5328              or R5,R3
 3E6C 5092D001          sts _T_dat+1,R5
 3E70 4092CF01          sts _T_dat,R4
 3E74                   .dbline 2123
 3E74           ;                                                                       SendManchester();
 3E74 96D1              xcall _SendManchester
 3E76                   .dbline 2124
 3E76           ;                                                                       CheckMotor(20);
 3E76 04E1              ldi R16,20
 3E78 10E0              ldi R17,0
 3E7A 0E944B07          xcall _CheckMotor
 3E7E                   .dbline 2125
 3E7E           ;                                                               }
 3E7E           L931:
 3E7E                   .dbline 2118
 3E7E A394              inc R10
 3E80           L933:
 3E80                   .dbline 2118
 3E80 8A2D              mov R24,R10
 3E82 8032              cpi R24,32
 3E84 78F2              brlo L930
 3E86           X318:
 3E86                   .dbline 2126
 3E86           ;                                                       }       
 3E86           L928:
 3E86                   .dbline 2128
 3E86           ; 
 3E86           ;                                                       Uart0TxData[0]=0xE8;
 3E86 88EE              ldi R24,232
 3E88 80932100          sts _Uart0TxData,R24
 3E8C                   .dbline 2129
 3E8C           ;                                                       Uart0TxData[1]=0x40;
 3E8C 80E4              ldi R24,64
 3E8E 80932200          sts _Uart0TxData+1,R24
 3E92                   .dbline 2130
 3E92           ;                                                       Uart0TxData[2]=0x83;
 3E92 83E8              ldi R24,131
 3E94 80932300          sts _Uart0TxData+2,R24
 3E98                   .dbline 2131
 3E98           ;                                                       Uart0TxData[3]=2;//包2
 3E98 82E0              ldi R24,2
 3E9A 80932400          sts _Uart0TxData+3,R24
 3E9E                   .dbline 2132
 3E9E           ;                                                       SendUart0_2(9,5);// 超时40ms     
 3E9E 25E0              ldi R18,5
 3EA0 30E0              ldi R19,0
 3EA2 09E0              ldi R16,9
 3EA4 0E944E03          xcall _SendUart0_2
 3EA8                   .dbline 2133
 3EA8           ;                                                       if(Uart0RxCounter==64) 
 3EA8 8091E301          lds R24,_Uart0RxCounter
 3EAC 8034              cpi R24,64
 3EAE 99F5              brne L938
 3EB0           X319:
 3EB0                   .dbline 2134
 3EB0           ;                                                       {
 3EB0                   .dbline 2135
 3EB0           ;                                                               for(i=0;i<32;i++)
 3EB0 AA24              clr R10
 3EB2 2EC0              xjmp L943
 3EB4           L940:
 3EB4                   .dbline 2136
 3EB4           ;                                                               {
 3EB4                   .dbline 2137
 3EB4           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3EB4 80E0              ldi R24,<_Uart0RxData+1
 3EB6 90E0              ldi R25,>_Uart0RxData+1
 3EB8 EA2D              mov R30,R10
 3EBA FF27              clr R31
 3EBC EE0F              lsl R30
 3EBE FF1F              rol R31
 3EC0 E80F              add R30,R24
 3EC2 F91F              adc R31,R25
 3EC4 2080              ldd R2,z+0
 3EC6 3324              clr R3
 3EC8 3092D001          sts _T_dat+1,R3
 3ECC 2092CF01          sts _T_dat,R2
 3ED0                   .dbline 2138
 3ED0           ;                                                                       T_dat<<=8;
 3ED0 322C              mov R3,R2
 3ED2 2224              clr R2
 3ED4 3092D001          sts _T_dat+1,R3
 3ED8 2092CF01          sts _T_dat,R2
 3EDC                   .dbline 2139
 3EDC           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3EDC 80E0              ldi R24,<_Uart0RxData
 3EDE 90E0              ldi R25,>_Uart0RxData
 3EE0 EA2D              mov R30,R10
 3EE2 FF27              clr R31
 3EE4 EE0F              lsl R30
 3EE6 FF1F              rol R31
 3EE8 E80F              add R30,R24
 3EEA F91F              adc R31,R25
 3EEC 2080              ldd R2,z+0
 3EEE 3324              clr R3
 3EF0 4090CF01          lds R4,_T_dat
 3EF4 5090D001          lds R5,_T_dat+1
 3EF8 4228              or R4,R2
 3EFA 5328              or R5,R3
 3EFC 5092D001          sts _T_dat+1,R5
 3F00 4092CF01          sts _T_dat,R4
 3F04                   .dbline 2140
 3F04           ;                                                                       SendManchester();
 3F04 4ED1              xcall _SendManchester
 3F06                   .dbline 2141
 3F06           ;                                                                       CheckMotor(20);
 3F06 04E1              ldi R16,20
 3F08 10E0              ldi R17,0
 3F0A 0E944B07          xcall _CheckMotor
 3F0E                   .dbline 2142
 3F0E           ;                                                               }
 3F0E           L941:
 3F0E                   .dbline 2135
 3F0E A394              inc R10
 3F10           L943:
 3F10                   .dbline 2135
 3F10 8A2D              mov R24,R10
 3F12 8032              cpi R24,32
 3F14 78F2              brlo L940
 3F16           X320:
 3F16                   .dbline 2143
 3F16           ;                                                       }       
 3F16           L938:
 3F16                   .dbline 2145
 3F16           ; 
 3F16           ;                                                       Uart0TxData[0]=0xE8;
 3F16 88EE              ldi R24,232
 3F18 80932100          sts _Uart0TxData,R24
 3F1C                   .dbline 2146
 3F1C           ;                                                       Uart0TxData[1]=0x40;
 3F1C 80E4              ldi R24,64
 3F1E 80932200          sts _Uart0TxData+1,R24
 3F22                   .dbline 2147
 3F22           ;                                                       Uart0TxData[2]=0x83;
 3F22 83E8              ldi R24,131
 3F24 80932300          sts _Uart0TxData+2,R24
 3F28                   .dbline 2148
 3F28           ;                                                       Uart0TxData[3]=3;//包3
 3F28 83E0              ldi R24,3
 3F2A 80932400          sts _Uart0TxData+3,R24
 3F2E                   .dbline 2149
 3F2E           ;                                                       SendUart0_2(9,5);// 超时40ms     
 3F2E 25E0              ldi R18,5
 3F30 30E0              ldi R19,0
 3F32 09E0              ldi R16,9
 3F34 0E944E03          xcall _SendUart0_2
 3F38                   .dbline 2150
 3F38           ;                                                       if(Uart0RxCounter==64) 
 3F38 8091E301          lds R24,_Uart0RxCounter
 3F3C 8034              cpi R24,64
 3F3E 99F5              brne L948
 3F40           X321:
 3F40                   .dbline 2151
 3F40           ;                                                       {
 3F40                   .dbline 2152
 3F40           ;                                                               for(i=0;i<32;i++)
 3F40 AA24              clr R10
 3F42 2EC0              xjmp L953
 3F44           L950:
 3F44                   .dbline 2153
 3F44           ;                                                               {
 3F44                   .dbline 2154
 3F44           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3F44 80E0              ldi R24,<_Uart0RxData+1
 3F46 90E0              ldi R25,>_Uart0RxData+1
 3F48 EA2D              mov R30,R10
 3F4A FF27              clr R31
 3F4C EE0F              lsl R30
 3F4E FF1F              rol R31
 3F50 E80F              add R30,R24
 3F52 F91F              adc R31,R25
 3F54 2080              ldd R2,z+0
 3F56 3324              clr R3
 3F58 3092D001          sts _T_dat+1,R3
 3F5C 2092CF01          sts _T_dat,R2
 3F60                   .dbline 2155
 3F60           ;                                                                       T_dat<<=8;
 3F60 322C              mov R3,R2
 3F62 2224              clr R2
 3F64 3092D001          sts _T_dat+1,R3
 3F68 2092CF01          sts _T_dat,R2
 3F6C                   .dbline 2156
 3F6C           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3F6C 80E0              ldi R24,<_Uart0RxData
 3F6E 90E0              ldi R25,>_Uart0RxData
 3F70 EA2D              mov R30,R10
 3F72 FF27              clr R31
 3F74 EE0F              lsl R30
 3F76 FF1F              rol R31
 3F78 E80F              add R30,R24
 3F7A F91F              adc R31,R25
 3F7C 2080              ldd R2,z+0
 3F7E 3324              clr R3
 3F80 4090CF01          lds R4,_T_dat
 3F84 5090D001          lds R5,_T_dat+1
 3F88 4228              or R4,R2
 3F8A 5328              or R5,R3
 3F8C 5092D001          sts _T_dat+1,R5
 3F90 4092CF01          sts _T_dat,R4
 3F94                   .dbline 2157
 3F94           ;                                                                       SendManchester();
 3F94 06D1              xcall _SendManchester
 3F96                   .dbline 2158
 3F96           ;                                                                       CheckMotor(20);
 3F96 04E1              ldi R16,20
 3F98 10E0              ldi R17,0
 3F9A 0E944B07          xcall _CheckMotor
 3F9E                   .dbline 2159
 3F9E           ;                                                               }
 3F9E           L951:
 3F9E                   .dbline 2152
 3F9E A394              inc R10
 3FA0           L953:
 3FA0                   .dbline 2152
 3FA0 8A2D              mov R24,R10
 3FA2 8032              cpi R24,32
 3FA4 78F2              brlo L950
 3FA6           X322:
 3FA6                   .dbline 2160
 3FA6           ;                                                       }       
 3FA6           L948:
 3FA6                   .dbline 2162
 3FA6           ; 
 3FA6           ;                                                       Uart0TxData[0]=0xE8;
 3FA6 88EE              ldi R24,232
 3FA8 80932100          sts _Uart0TxData,R24
 3FAC                   .dbline 2163
 3FAC           ;                                                       Uart0TxData[1]=0x40;
 3FAC 80E4              ldi R24,64
 3FAE 80932200          sts _Uart0TxData+1,R24
 3FB2                   .dbline 2164
 3FB2           ;                                                       Uart0TxData[2]=0x83;
 3FB2 83E8              ldi R24,131
 3FB4 80932300          sts _Uart0TxData+2,R24
 3FB8                   .dbline 2165
 3FB8           ;                                                       Uart0TxData[3]=4;//包4
 3FB8 84E0              ldi R24,4
 3FBA 80932400          sts _Uart0TxData+3,R24
 3FBE                   .dbline 2166
 3FBE           ;                                                       SendUart0_2(9,5);// 超时40ms     
 3FBE 25E0              ldi R18,5
 3FC0 30E0              ldi R19,0
 3FC2 09E0              ldi R16,9
 3FC4 0E944E03          xcall _SendUart0_2
 3FC8                   .dbline 2167
 3FC8           ;                                                       if(Uart0RxCounter==64) 
 3FC8 8091E301          lds R24,_Uart0RxCounter
 3FCC 8034              cpi R24,64
 3FCE 09F0              breq X370
 3FD0 61C0              xjmp L584
 3FD2           X370:
 3FD2           X323:
 3FD2                   .dbline 2168
 3FD2           ;                                                       {
 3FD2                   .dbline 2169
 3FD2           ;                                                               for(i=0;i<32;i++)
 3FD2 AA24              clr R10
 3FD4 2EC0              xjmp L963
 3FD6           L960:
 3FD6                   .dbline 2170
 3FD6           ;                                                               {
 3FD6                   .dbline 2171
 3FD6           ;                                                                       T_dat=Uart0RxData[i*2+1];//高字节
 3FD6 80E0              ldi R24,<_Uart0RxData+1
 3FD8 90E0              ldi R25,>_Uart0RxData+1
 3FDA EA2D              mov R30,R10
 3FDC FF27              clr R31
 3FDE EE0F              lsl R30
 3FE0 FF1F              rol R31
 3FE2 E80F              add R30,R24
 3FE4 F91F              adc R31,R25
 3FE6 2080              ldd R2,z+0
 3FE8 3324              clr R3
 3FEA 3092D001          sts _T_dat+1,R3
 3FEE 2092CF01          sts _T_dat,R2
 3FF2                   .dbline 2172
 3FF2           ;                                                                       T_dat<<=8;
 3FF2 322C              mov R3,R2
 3FF4 2224              clr R2
 3FF6 3092D001          sts _T_dat+1,R3
 3FFA 2092CF01          sts _T_dat,R2
 3FFE                   .dbline 2173
 3FFE           ;                                                                       T_dat|=Uart0RxData[i*2+0];//低字节
 3FFE 80E0              ldi R24,<_Uart0RxData
 4000 90E0              ldi R25,>_Uart0RxData
 4002 EA2D              mov R30,R10
 4004 FF27              clr R31
 4006 EE0F              lsl R30
 4008 FF1F              rol R31
 400A E80F              add R30,R24
 400C F91F              adc R31,R25
 400E 2080              ldd R2,z+0
 4010 3324              clr R3
 4012 4090CF01          lds R4,_T_dat
 4016 5090D001          lds R5,_T_dat+1
 401A 4228              or R4,R2
 401C 5328              or R5,R3
 401E 5092D001          sts _T_dat+1,R5
 4022 4092CF01          sts _T_dat,R4
 4026                   .dbline 2174
 4026           ;                                                                       SendManchester();
 4026 BDD0              xcall _SendManchester
 4028                   .dbline 2175
 4028           ;                                                                       CheckMotor(20);
 4028 04E1              ldi R16,20
 402A 10E0              ldi R17,0
 402C 0E944B07          xcall _CheckMotor
 4030                   .dbline 2176
 4030           ;                                                               }
 4030           L961:
 4030                   .dbline 2169
 4030 A394              inc R10
 4032           L963:
 4032                   .dbline 2169
 4032 8A2D              mov R24,R10
 4034 8032              cpi R24,32
 4036 78F2              brlo L960
 4038           X324:
 4038                   .dbline 2177
 4038           ;                                                       }       
 4038                   .dbline 2178
 4038           ;                                               }
 4038 2DC0              xjmp L584
 403A           L913:
 403A                   .dbline 2179
 403A           ;                                               else  if(R_dat==0xca) //写仪器信息
 403A 8091CD01          lds R24,_R_dat
 403E 9091CE01          lds R25,_R_dat+1
 4042 8A3C              cpi R24,202
 4044 E0E0              ldi R30,0
 4046 9E07              cpc R25,R30
 4048 29F5              brne L584
 404A           X325:
 404A                   .dbline 2180
 404A           ;                                               {
 404A                   .dbline 2181
 404A           ;                                                       DataFlag=4;
 404A 84E0              ldi R24,4
 404C 90E0              ldi R25,0
 404E 9093B401          sts _DataFlag+1,R25
 4052 8093B301          sts _DataFlag,R24
 4056                   .dbline 2182
 4056           ;                                                       coeff_len=320;
 4056 80E4              ldi R24,320
 4058 91E0              ldi R25,1
 405A 90931F00          sts _coeff_len+1,R25
 405E 80931E00          sts _coeff_len,R24
 4062                   .dbline 2183
 4062           ;                                                       coeff_count=0;
 4062 2224              clr R2
 4064 3324              clr R3
 4066 30921D00          sts _coeff_count+1,R3
 406A 20921C00          sts _coeff_count,R2
 406E                   .dbline 2184
 406E           ;                                                       TimeOutFlag=0;
 406E 2092CB01          sts _TimeOutFlag,R2
 4072                   .dbline 2185
 4072           ;                                                       Timer0Counter=2000;//16s定时
 4072 80ED              ldi R24,2000
 4074 97E0              ldi R25,7
 4076 90932F02          sts _Timer0Counter+1,R25
 407A 80932E02          sts _Timer0Counter,R24
 407E                   .dbline 2186
 407E           ;                                                       TCNT0=0x06; //8ms
 407E 86E0              ldi R24,6
 4080 82BF              out 0x32,R24
 4082                   .dbline 2187
 4082           ;                                                       TCCR0|=0x06;//256分频
 4082 83B7              in R24,0x33
 4084 8660              ori R24,6
 4086 83BF              out 0x33,R24
 4088                   .dbline 2188
 4088           ;                                                       TIFR|=0x01; //清定时器0中断标志
 4088 86B7              in R24,0x36
 408A 8160              ori R24,1
 408C 86BF              out 0x36,R24
 408E                   .dbline 2189
 408E           ;                                                       TIMSK|=0x01;//使能定时器0中断           
 408E 87B7              in R24,0x37
 4090 8160              ori R24,1
 4092 87BF              out 0x37,R24
 4094                   .dbline 2190
 4094           ;                                               }
 4094                   .dbline 2191
 4094           ;                                               break;
 4094                   .dbline 2194
 4094           ;                                               
 4094           ;                                       default: 
 4094           ;                                               break;  
 4094           L584:
 4094                   .dbline 2196
 4094           ;                               }
 4094           ;                       }
 4094           L395:
 4094           L978:
 4094                   .dbline 2199
 4094           ;                       
 4094           ;               RDataEnd:
 4094           ;                       IntFlag=0;
 4094 2224              clr R2
 4096 2092B101          sts _IntFlag,R2
 409A                   .dbline 2200
 409A           ;                       EIFR|=0x01;//清INT0中断标志
 409A 88B7              in R24,0x38
 409C 8160              ori R24,1
 409E 88BF              out 0x38,R24
 40A0                   .dbline 2201
 40A0           ;                       EIMSK|=0x01;//使能INT0中断 
 40A0 89B7              in R24,0x39
 40A2 8160              ori R24,1
 40A4 89BF              out 0x39,R24
 40A6                   .dbline 2202
 40A6           ;               }  
 40A6           L392:
 40A6           L391:
 40A6                   .dbline 2203
 40A6           ;       }
 40A6           L388:
 40A6                   .dbline 928
 40A6 0C94F20A          xjmp L387
 40AA           X326:
 40AA                   .dbline -2
 40AA           L373:
 40AA                   .dbline 0 ; func end
 40AA 2996              adiw R28,9
 40AC 0895              ret
 40AE                   .dbsym l pt 2 i
 40AE                   .dbsym l mk 2 i
 40AE                   .dbsym l at 2 i
 40AE                   .dbsym l add 2 i
 40AE                   .dbsym l f 5 D
 40AE                   .dbsym r TestDataBlockCount 14 i
 40AE                   .dbsym r TestDataBlockIndex 10 i
 40AE                   .dbsym r i 10 c
 40AE                   .dbsym l l 1 l
 40AE                   .dbsym r j 12 i
 40AE                   .dbend
                        .area vector(rom, abs)
                        .org 92
 005C 0C945720          jmp _E_comp
                        .area text(rom, con, rel)
 40AE                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 40AE                   .dbfunc e E_comp _E_comp fV
                        .even
 40AE           _E_comp::
 40AE 1A92              st -y,R1
 40B0 2A92              st -y,R2
 40B2 8A93              st -y,R24
 40B4 9A93              st -y,R25
 40B6 1FB6              IN R1,63
 40B8 1A92              st -y,R1
 40BA                   .dbline -1
 40BA                   .dbline 2208
 40BA           ; }
 40BA           ; 
 40BA           ; #pragma interrupt_handler E_comp:24
 40BA           ; void E_comp(void)  //模拟比较器中断,总线电压被拉低到28.5V后，立即停电机
 40BA           ; {   
 40BA                   .dbline 2209
 40BA           ;   if( (Motor1Run_P) || (Motor1Run_N) )//收放电机欠压堵转
 40BA 89B3              in R24,0x19
 40BC 8270              andi R24,2
 40BE 8695              lsr R24
 40C0 31F4              brne L983
 40C2           X371:
 40C2 89B3              in R24,0x19
 40C4 8470              andi R24,4
 40C6 8695              lsr R24
 40C8 8695              lsr R24
 40CA 8130              cpi R24,1
 40CC 51F0              breq L982
 40CE           X372:
 40CE           L983:
 40CE 89B3              in R24,0x19
 40D0 8270              andi R24,2
 40D2 8695              lsr R24
 40D4 8130              cpi R24,1
 40D6 99F4              brne L980
 40D8           X373:
 40D8 89B3              in R24,0x19
 40DA 8470              andi R24,4
 40DC 8695              lsr R24
 40DE 8695              lsr R24
 40E0 71F4              brne L980
 40E2           X374:
 40E2           L982:
 40E2                   .dbline 2210
 40E2           ;    {
 40E2                   .dbline 2211
 40E2           ;        Motor1Status.s.UnderVoltage=1;
 40E2 80913E02          lds R24,_Motor1Status
 40E6 90913F02          lds R25,_Motor1Status+1
 40EA 8062              ori R24,32
 40EC 90933F02          sts _Motor1Status+1,R25
 40F0 80933E02          sts _Motor1Status,R24
 40F4                   .dbline 2212
 40F4           ;        Motor1Status.s.RUN=0;//停止状态
 40F4 8E7F              andi R24,254
 40F6 90933F02          sts _Motor1Status+1,R25
 40FA 80933E02          sts _Motor1Status,R24
 40FE                   .dbline 2213
 40FE           ;    }
 40FE           L980:
 40FE                   .dbline 2214
 40FE           ;   if( (Motor2Run_P) || (Motor2Run_N) )//调节电机欠压堵转
 40FE 80B1              in R24,0x0
 4100 8470              andi R24,4
 4102 8695              lsr R24
 4104 8695              lsr R24
 4106 21F4              brne L987
 4108           X375:
 4108 80B1              in R24,0x0
 410A 8170              andi R24,1
 410C 8130              cpi R24,1
 410E 41F0              breq L986
 4110           X376:
 4110           L987:
 4110 80B1              in R24,0x0
 4112 8470              andi R24,4
 4114 8695              lsr R24
 4116 8695              lsr R24
 4118 8130              cpi R24,1
 411A 81F4              brne L984
 411C           X377:
 411C 0099              sbic 0x0,0
 411E 0EC0              rjmp L984
 4120           X378:
 4120           L986:
 4120                   .dbline 2215
 4120           ;    { 
 4120                   .dbline 2216
 4120           ;        Motor2Status.s.UnderVoltage=1;
 4120 80913C02          lds R24,_Motor2Status
 4124 90913D02          lds R25,_Motor2Status+1
 4128 8062              ori R24,32
 412A 90933D02          sts _Motor2Status+1,R25
 412E 80933C02          sts _Motor2Status,R24
 4132                   .dbline 2217
 4132           ;        Motor2Status.s.RUN=0;//停止状态
 4132 8E7F              andi R24,254
 4134 90933D02          sts _Motor2Status+1,R25
 4138 80933C02          sts _Motor2Status,R24
 413C                   .dbline 2218
 413C           ;    } 
 413C           L984:
 413C                   .dbline 2219
 413C           ;    MOTORSTOP  //关电机 
 413C                   .dbline 2219
 413C                   .dbline 2219
 413C D09A              sbi 0x1a,0
 413E                   .dbline 2219
 413E D89A              sbi 0x1b,0
 4140                   .dbline 2219
 4140                   .dbline 2219
 4140                   .dbline 2219
 4140                   .dbline 2219
 4140                   .dbline 2219
 4140 80916100          lds R24,97
 4144 8260              ori R24,2
 4146 80936100          sts 97,R24
 414A                   .dbline 2219
 414A 80916200          lds R24,98
 414E 8260              ori R24,2
 4150 80936200          sts 98,R24
 4154                   .dbline 2219
 4154                   .dbline 2219
 4154                   .dbline 2219
 4154                   .dbline 2219
 4154 BF9A              sbi 0x17,7
 4156                   .dbline 2219
 4156 88B3              in R24,0x18
 4158 8F77              andi R24,127
 415A 88BB              out 0x18,R24
 415C                   .dbline 2219
 415C                   .dbline 2219
 415C                   .dbline 2219
 415C                   .dbline 2219
 415C D29A              sbi 0x1a,2
 415E                   .dbline 2219
 415E 8BB3              in R24,0x1b
 4160 8B7F              andi R24,251
 4162 8BBB              out 0x1b,R24
 4164                   .dbline 2219
 4164                   .dbline 2219
 4164                   .dbline 2219
 4164                   .dbline 2219
 4164                   .dbline 2219
 4164 D19A              sbi 0x1a,1
 4166                   .dbline 2219
 4166 8BB3              in R24,0x1b
 4168 8D7F              andi R24,253
 416A 8BBB              out 0x1b,R24
 416C                   .dbline 2219
 416C                   .dbline 2219
 416C                   .dbline 2219
 416C                   .dbline 2219
 416C                   .dbline 2219
 416C 80916100          lds R24,97
 4170 8160              ori R24,1
 4172 80936100          sts 97,R24
 4176                   .dbline 2219
 4176 80916200          lds R24,98
 417A 8E7F              andi R24,254
 417C 80936200          sts 98,R24
 4180                   .dbline 2219
 4180                   .dbline 2219
 4180                   .dbline 2219
 4180                   .dbline 2219
 4180                   .dbline 2219
 4180 80916100          lds R24,97
 4184 8460              ori R24,4
 4186 80936100          sts 97,R24
 418A                   .dbline 2219
 418A 80916200          lds R24,98
 418E 8B7F              andi R24,251
 4190 80936200          sts 98,R24
 4194                   .dbline 2219
 4194                   .dbline 2219
 4194                   .dbline -2
 4194           L979:
 4194                   .dbline 0 ; func end
 4194 1990              ld R1,y+
 4196 1FBE              OUT 63,R1
 4198 9991              ld R25,y+
 419A 8991              ld R24,y+
 419C 2990              ld R2,y+
 419E 1990              ld R1,y+
 41A0 1895              reti
 41A2                   .dbend
 41A2                   .dbfunc e SendManchester _SendManchester fV
 41A2           ;              L -> R20
                        .even
 41A2           _SendManchester::
 41A2 4A93              st -y,R20
 41A4                   .dbline -1
 41A4                   .dbline 2271
 41A4           ; }
 41A4           ; 
 41A4           ; /*
 41A4           ; #pragma interrupt_handler int0_isr:2
 41A4           ; void int0_isr(void)//外部中断0，过流堵转
 41A4           ; {
 41A4           ;   CompCounter++; 
 41A4           ;   if(CompCounter>1000)
 41A4           ;   {
 41A4           ;    MOTORSTOP  //关电机
 41A4           ;   
 41A4           ;    if(Motor1Status.s.ThisRun>0)//收放电机过流堵转
 41A4           ;     {
 41A4           ;        Motor1Status.s.ThisRun=0;
 41A4           ;        Motor1Status.s.CommandStop=0;
 41A4           ;        Motor1Status.s.OverCurrent=1;
 41A4           ;        Motor1Status.s.UnderVoltage=0;
 41A4           ;       }
 41A4           ;    if(Motor2Status.s.ThisRun>0)//调节电机过流堵转
 41A4           ;     {
 41A4           ;         Motor2Status.s.ThisRun=0;
 41A4           ;         Motor2Status.s.CommandStop=0;
 41A4           ;         Motor2Status.s.OverCurrent=1;
 41A4           ;         Motor2Status.s.UnderVoltage=0;
 41A4           ;       }
 41A4           ;   }
 41A4           ; }
 41A4           ; */
 41A4           ; 
 41A4           ; 
 41A4           ; /*
 41A4           ; #pragma interrupt_handler ad_isr:22
 41A4           ; void ad_isr(void)  //ad转换中断
 41A4           ; {
 41A4           ;   ADCData[ADCCn]=ADCH;
 41A4           ;   ADCData[ADCCn]<<=8;
 41A4           ;   ADCData[ADCCn]|=ADCL;//读AD转换结果
 41A4           ;   ADCCn++;
 41A4           ;   ADCData[ADCCn]&=0x03ff;//10位有效转换结果
 41A4           ;   if(ADCCn==129)
 41A4           ;    { 
 41A4           ;    ADCSRA&=0xF7;//关AD中断
 41A4           ;    ADCSRA|=0x10;//清AD中断标志
 41A4           ;    ADCSRA=0;//关ADC
 41A4           ;    }
 41A4           ; }
 41A4           ; */
 41A4           ; 
 41A4           ; 
 41A4           ; 
 41A4           ; void SendManchester(void) //曼码发送程序,总耗时最大约120+560+8400+720=9800us，最小约120+560+5040+720=6440us
 41A4           ; { //每位80us
 41A4                   .dbline 2276
 41A4           ;  //同步：1高6低
 41A4           ;  //1:    1高2低
 41A4           ;  //0：   1高4低  
 41A4           ;   unsigned char L;
 41A4           ;   SREG&=0x7f;//关总中断 
 41A4 8FB7              in R24,0x3f
 41A6 8F77              andi R24,127
 41A8 8FBF              out 0x3f,R24
 41AA                   .dbline 2278
 41AA           ;   
 41AA           ;     M1_H //先给总线放电，耗时约120us
 41AA 949A              sbi 0x12,4
 41AC                   .dbline 2282
 41AC           ;       
 41AC           ;   //模拟同步头数据
 41AC           ;       //4位命令
 41AC           ;       T_dat_buf[21]=(T_com&0x08)>>3;
 41AC 8091CC01          lds R24,_T_com
 41B0 8870              andi R24,8
 41B2 8695              lsr R24
 41B4 8695              lsr R24
 41B6 8695              lsr R24
 41B8 8093CA01          sts _T_dat_buf+21,R24
 41BC                   .dbline 2283
 41BC           ;       T_dat_buf[20]=(T_com&0x04)>>2;
 41BC 8091CC01          lds R24,_T_com
 41C0 8470              andi R24,4
 41C2 8695              lsr R24
 41C4 8695              lsr R24
 41C6 8093C901          sts _T_dat_buf+20,R24
 41CA                   .dbline 2284
 41CA           ;       T_dat_buf[19]=(T_com&0x02)>>1;
 41CA 8091CC01          lds R24,_T_com
 41CE 8270              andi R24,2
 41D0 8695              lsr R24
 41D2 8093C801          sts _T_dat_buf+19,R24
 41D6                   .dbline 2285
 41D6           ;       T_dat_buf[18]=T_com&0x01;
 41D6 8091CC01          lds R24,_T_com
 41DA 8170              andi R24,1
 41DC 8093C701          sts _T_dat_buf+18,R24
 41E0                   .dbline 2287
 41E0           ;       //16位数据
 41E0           ;       T_dat_buf[17]=(T_dat&0x8000)>>15;
 41E0 2FE0              ldi R18,15
 41E2 30E0              ldi R19,0
 41E4 0091CF01          lds R16,_T_dat
 41E8 1091D001          lds R17,_T_dat+1
 41EC 0070              andi R16,0
 41EE 1078              andi R17,128
 41F0 0E940000          xcall lsr16
 41F4 0093C601          sts _T_dat_buf+17,R16
 41F8                   .dbline 2288
 41F8           ;       T_dat_buf[16]=(T_dat&0x4000)>>14;
 41F8 2EE0              ldi R18,14
 41FA 30E0              ldi R19,0
 41FC 0091CF01          lds R16,_T_dat
 4200 1091D001          lds R17,_T_dat+1
 4204 0070              andi R16,0
 4206 1074              andi R17,64
 4208 0E940000          xcall asr16
 420C 0093C501          sts _T_dat_buf+16,R16
 4210                   .dbline 2289
 4210           ;       T_dat_buf[15]=(T_dat&0x2000)>>13;
 4210 2DE0              ldi R18,13
 4212 30E0              ldi R19,0
 4214 0091CF01          lds R16,_T_dat
 4218 1091D001          lds R17,_T_dat+1
 421C 0070              andi R16,0
 421E 1072              andi R17,32
 4220 0E940000          xcall asr16
 4224 0093C401          sts _T_dat_buf+15,R16
 4228                   .dbline 2290
 4228           ;       T_dat_buf[14]=(T_dat&0x1000)>>12;
 4228 2CE0              ldi R18,12
 422A 30E0              ldi R19,0
 422C 0091CF01          lds R16,_T_dat
 4230 1091D001          lds R17,_T_dat+1
 4234 0070              andi R16,0
 4236 1071              andi R17,16
 4238 0E940000          xcall asr16
 423C 0093C301          sts _T_dat_buf+14,R16
 4240                   .dbline 2291
 4240           ;       T_dat_buf[13]=(T_dat&0x0800)>>11;
 4240 2BE0              ldi R18,11
 4242 30E0              ldi R19,0
 4244 0091CF01          lds R16,_T_dat
 4248 1091D001          lds R17,_T_dat+1
 424C 0070              andi R16,0
 424E 1870              andi R17,8
 4250 0E940000          xcall asr16
 4254 0093C201          sts _T_dat_buf+13,R16
 4258                   .dbline 2292
 4258           ;     T_dat_buf[12]=(T_dat&0x0400)>>10;
 4258 2AE0              ldi R18,10
 425A 30E0              ldi R19,0
 425C 0091CF01          lds R16,_T_dat
 4260 1091D001          lds R17,_T_dat+1
 4264 0070              andi R16,0
 4266 1470              andi R17,4
 4268 0E940000          xcall asr16
 426C 0093C101          sts _T_dat_buf+12,R16
 4270                   .dbline 2293
 4270           ;     T_dat_buf[11]=(T_dat&0x0200)>>9;
 4270 29E0              ldi R18,9
 4272 30E0              ldi R19,0
 4274 0091CF01          lds R16,_T_dat
 4278 1091D001          lds R17,_T_dat+1
 427C 0070              andi R16,0
 427E 1270              andi R17,2
 4280 0E940000          xcall asr16
 4284 0093C001          sts _T_dat_buf+11,R16
 4288                   .dbline 2294
 4288           ;       T_dat_buf[10]=(T_dat&0x0100)>>8;
 4288 8091CF01          lds R24,_T_dat
 428C 9091D001          lds R25,_T_dat+1
 4290 8070              andi R24,0
 4292 9170              andi R25,1
 4294 1C01              movw R2,R24
 4296 232C              mov R2,R3
 4298 3324              clr R3
 429A 27FC              sbrc R2,7
 429C 3094              com R3
 429E 2092BF01          sts _T_dat_buf+10,R2
 42A2                   .dbline 2295
 42A2           ;       T_dat_buf[9]=(T_dat&0x0080)>>7;
 42A2 27E0              ldi R18,7
 42A4 30E0              ldi R19,0
 42A6 0091CF01          lds R16,_T_dat
 42AA 1091D001          lds R17,_T_dat+1
 42AE 0078              andi R16,128
 42B0 1070              andi R17,0
 42B2 0E940000          xcall asr16
 42B6 0093BE01          sts _T_dat_buf+9,R16
 42BA                   .dbline 2296
 42BA           ;       T_dat_buf[8]=(T_dat&0x0040)>>6;
 42BA 26E0              ldi R18,6
 42BC 30E0              ldi R19,0
 42BE 0091CF01          lds R16,_T_dat
 42C2 1091D001          lds R17,_T_dat+1
 42C6 0074              andi R16,64
 42C8 1070              andi R17,0
 42CA 0E940000          xcall asr16
 42CE 0093BD01          sts _T_dat_buf+8,R16
 42D2                   .dbline 2297
 42D2           ;       T_dat_buf[7]=(T_dat&0x0020)>>5;
 42D2 25E0              ldi R18,5
 42D4 30E0              ldi R19,0
 42D6 0091CF01          lds R16,_T_dat
 42DA 1091D001          lds R17,_T_dat+1
 42DE 0072              andi R16,32
 42E0 1070              andi R17,0
 42E2 0E940000          xcall asr16
 42E6 0093BC01          sts _T_dat_buf+7,R16
 42EA                   .dbline 2298
 42EA           ;       T_dat_buf[6]=(T_dat&0x0010)>>4;
 42EA 8091CF01          lds R24,_T_dat
 42EE 9091D001          lds R25,_T_dat+1
 42F2 8071              andi R24,16
 42F4 9070              andi R25,0
 42F6 1C01              movw R2,R24
 42F8 3594              asr R3
 42FA 2794              ror R2
 42FC 3594              asr R3
 42FE 2794              ror R2
 4300 3594              asr R3
 4302 2794              ror R2
 4304 3594              asr R3
 4306 2794              ror R2
 4308 2092BB01          sts _T_dat_buf+6,R2
 430C                   .dbline 2299
 430C           ;       T_dat_buf[5]=(T_dat&0x0008)>>3;
 430C 8091CF01          lds R24,_T_dat
 4310 9091D001          lds R25,_T_dat+1
 4314 8870              andi R24,8
 4316 9070              andi R25,0
 4318 1C01              movw R2,R24
 431A 3594              asr R3
 431C 2794              ror R2
 431E 3594              asr R3
 4320 2794              ror R2
 4322 3594              asr R3
 4324 2794              ror R2
 4326 2092BA01          sts _T_dat_buf+5,R2
 432A                   .dbline 2300
 432A           ;       T_dat_buf[4]=(T_dat&0x0004)>>2;
 432A 8091CF01          lds R24,_T_dat
 432E 9091D001          lds R25,_T_dat+1
 4332 8470              andi R24,4
 4334 9070              andi R25,0
 4336 1C01              movw R2,R24
 4338 3594              asr R3
 433A 2794              ror R2
 433C 3594              asr R3
 433E 2794              ror R2
 4340 2092B901          sts _T_dat_buf+4,R2
 4344                   .dbline 2301
 4344           ;       T_dat_buf[3]=(T_dat&0x0002)>>1;
 4344 8091CF01          lds R24,_T_dat
 4348 9091D001          lds R25,_T_dat+1
 434C 8270              andi R24,2
 434E 9070              andi R25,0
 4350 1C01              movw R2,R24
 4352 3594              asr R3
 4354 2794              ror R2
 4356 2092B801          sts _T_dat_buf+3,R2
 435A                   .dbline 2302
 435A           ;       T_dat_buf[2]=T_dat&0x0001;
 435A 8091CF01          lds R24,_T_dat
 435E 9091D001          lds R25,_T_dat+1
 4362 8170              andi R24,1
 4364 9070              andi R25,0
 4366 8093B701          sts _T_dat_buf+2,R24
 436A                   .dbline 2304
 436A           ;       //计算校验位，奇校验
 436A           ;       T_dat_buf[1]=1;
 436A 81E0              ldi R24,1
 436C 8093B601          sts _T_dat_buf+1,R24
 4370                   .dbline 2305
 4370           ;       for(L=2;L<22;L++)
 4370 42E0              ldi R20,2
 4372 0DC0              xjmp L1013
 4374           L1010:
 4374                   .dbline 2306
 4374           ;               {T_dat_buf[1]^=T_dat_buf[L];}
 4374                   .dbline 2306
 4374 80E0              ldi R24,<_T_dat_buf
 4376 90E0              ldi R25,>_T_dat_buf
 4378 E42F              mov R30,R20
 437A FF27              clr R31
 437C E80F              add R30,R24
 437E F91F              adc R31,R25
 4380 2080              ldd R2,z+0
 4382 3090B601          lds R3,_T_dat_buf+1
 4386 3224              eor R3,R2
 4388 3092B601          sts _T_dat_buf+1,R3
 438C                   .dbline 2306
 438C           L1011:
 438C                   .dbline 2305
 438C 4395              inc R20
 438E           L1013:
 438E                   .dbline 2305
 438E 4631              cpi R20,22
 4390 88F3              brlo L1010
 4392           X379:
 4392                   .dbline 2307
 4392           ;     DELAY80
 4392 2224              clr R2
 4394 3324              clr R3
 4396 3092B001          sts _Tt+1,R3
 439A 2092AF01          sts _Tt,R2
 439E 09C0              xjmp L1018
 43A0           L1015:
 43A0                   .dbline 2307
 43A0           L1016:
 43A0                   .dbline 2307
 43A0 8091AF01          lds R24,_Tt
 43A4 9091B001          lds R25,_Tt+1
 43A8 0196              adiw R24,1
 43AA 9093B001          sts _Tt+1,R25
 43AE 8093AF01          sts _Tt,R24
 43B2           L1018:
 43B2                   .dbline 2307
 43B2 8091AF01          lds R24,_Tt
 43B6 9091B001          lds R25,_Tt+1
 43BA 8032              cpi R24,32
 43BC E0E0              ldi R30,0
 43BE 9E07              cpc R25,R30
 43C0 78F3              brlo L1015
 43C2           X380:
 43C2                   .dbline 2308
 43C2           ;     M1_L
 43C2 82B3              in R24,0x12
 43C4 8F7E              andi R24,239
 43C6 82BB              out 0x12,R24
 43C8                   .dbline 2309
 43C8           ;       DELAY40
 43C8 2224              clr R2
 43CA 3324              clr R3
 43CC 3092B001          sts _Tt+1,R3
 43D0 2092AF01          sts _Tt,R2
 43D4 09C0              xjmp L1022
 43D6           L1019:
 43D6                   .dbline 2309
 43D6           L1020:
 43D6                   .dbline 2309
 43D6 8091AF01          lds R24,_Tt
 43DA 9091B001          lds R25,_Tt+1
 43DE 0196              adiw R24,1
 43E0 9093B001          sts _Tt+1,R25
 43E4 8093AF01          sts _Tt,R24
 43E8           L1022:
 43E8                   .dbline 2309
 43E8 8091AF01          lds R24,_Tt
 43EC 9091B001          lds R25,_Tt+1
 43F0 8031              cpi R24,16
 43F2 E0E0              ldi R30,0
 43F4 9E07              cpc R25,R30
 43F6 78F3              brlo L1019
 43F8           X381:
 43F8                   .dbline 2314
 43F8           ;    
 43F8           ;    
 43F8           ;       //同步头,560us
 43F8           ;       //充电开始，高80us       
 43F8           ;       M2_H    
 43F8 959A              sbi 0x12,5
 43FA                   .dbline 2315
 43FA           ;       DELAY80
 43FA 2224              clr R2
 43FC 3324              clr R3
 43FE 3092B001          sts _Tt+1,R3
 4402 2092AF01          sts _Tt,R2
 4406 09C0              xjmp L1026
 4408           L1023:
 4408                   .dbline 2315
 4408           L1024:
 4408                   .dbline 2315
 4408 8091AF01          lds R24,_Tt
 440C 9091B001          lds R25,_Tt+1
 4410 0196              adiw R24,1
 4412 9093B001          sts _Tt+1,R25
 4416 8093AF01          sts _Tt,R24
 441A           L1026:
 441A                   .dbline 2315
 441A 8091AF01          lds R24,_Tt
 441E 9091B001          lds R25,_Tt+1
 4422 8032              cpi R24,32
 4424 E0E0              ldi R30,0
 4426 9E07              cpc R25,R30
 4428 78F3              brlo L1023
 442A           X382:
 442A                   .dbline 2316
 442A           ;       M2_L   //充电结束       
 442A 82B3              in R24,0x12
 442C 8F7D              andi R24,223
 442E 82BB              out 0x12,R24
 4430                   .dbline 2318
 4430           ;       //放电开始，低80*6=480us
 4430           ;       DELAY40
 4430 2224              clr R2
 4432 3324              clr R3
 4434 3092B001          sts _Tt+1,R3
 4438 2092AF01          sts _Tt,R2
 443C 09C0              xjmp L1030
 443E           L1027:
 443E                   .dbline 2318
 443E           L1028:
 443E                   .dbline 2318
 443E 8091AF01          lds R24,_Tt
 4442 9091B001          lds R25,_Tt+1
 4446 0196              adiw R24,1
 4448 9093B001          sts _Tt+1,R25
 444C 8093AF01          sts _Tt,R24
 4450           L1030:
 4450                   .dbline 2318
 4450 8091AF01          lds R24,_Tt
 4454 9091B001          lds R25,_Tt+1
 4458 8031              cpi R24,16
 445A E0E0              ldi R30,0
 445C 9E07              cpc R25,R30
 445E 78F3              brlo L1027
 4460           X383:
 4460                   .dbline 2319
 4460           ;       M1_H    
 4460 949A              sbi 0x12,4
 4462                   .dbline 2320
 4462           ;     DELAY80
 4462 2224              clr R2
 4464 3324              clr R3
 4466 3092B001          sts _Tt+1,R3
 446A 2092AF01          sts _Tt,R2
 446E 09C0              xjmp L1034
 4470           L1031:
 4470                   .dbline 2320
 4470           L1032:
 4470                   .dbline 2320
 4470 8091AF01          lds R24,_Tt
 4474 9091B001          lds R25,_Tt+1
 4478 0196              adiw R24,1
 447A 9093B001          sts _Tt+1,R25
 447E 8093AF01          sts _Tt,R24
 4482           L1034:
 4482                   .dbline 2320
 4482 8091AF01          lds R24,_Tt
 4486 9091B001          lds R25,_Tt+1
 448A 8032              cpi R24,32
 448C E0E0              ldi R30,0
 448E 9E07              cpc R25,R30
 4490 78F3              brlo L1031
 4492           X384:
 4492                   .dbline 2321
 4492           ;       DELAY80
 4492 2224              clr R2
 4494 3324              clr R3
 4496 3092B001          sts _Tt+1,R3
 449A 2092AF01          sts _Tt,R2
 449E 09C0              xjmp L1038
 44A0           L1035:
 44A0                   .dbline 2321
 44A0           L1036:
 44A0                   .dbline 2321
 44A0 8091AF01          lds R24,_Tt
 44A4 9091B001          lds R25,_Tt+1
 44A8 0196              adiw R24,1
 44AA 9093B001          sts _Tt+1,R25
 44AE 8093AF01          sts _Tt,R24
 44B2           L1038:
 44B2                   .dbline 2321
 44B2 8091AF01          lds R24,_Tt
 44B6 9091B001          lds R25,_Tt+1
 44BA 8032              cpi R24,32
 44BC E0E0              ldi R30,0
 44BE 9E07              cpc R25,R30
 44C0 78F3              brlo L1035
 44C2           X385:
 44C2                   .dbline 2322
 44C2           ;       DELAY80
 44C2 2224              clr R2
 44C4 3324              clr R3
 44C6 3092B001          sts _Tt+1,R3
 44CA 2092AF01          sts _Tt,R2
 44CE 09C0              xjmp L1042
 44D0           L1039:
 44D0                   .dbline 2322
 44D0           L1040:
 44D0                   .dbline 2322
 44D0 8091AF01          lds R24,_Tt
 44D4 9091B001          lds R25,_Tt+1
 44D8 0196              adiw R24,1
 44DA 9093B001          sts _Tt+1,R25
 44DE 8093AF01          sts _Tt,R24
 44E2           L1042:
 44E2                   .dbline 2322
 44E2 8091AF01          lds R24,_Tt
 44E6 9091B001          lds R25,_Tt+1
 44EA 8032              cpi R24,32
 44EC E0E0              ldi R30,0
 44EE 9E07              cpc R25,R30
 44F0 78F3              brlo L1039
 44F2           X386:
 44F2                   .dbline 2323
 44F2           ;       DELAY80
 44F2 2224              clr R2
 44F4 3324              clr R3
 44F6 3092B001          sts _Tt+1,R3
 44FA 2092AF01          sts _Tt,R2
 44FE 09C0              xjmp L1046
 4500           L1043:
 4500                   .dbline 2323
 4500           L1044:
 4500                   .dbline 2323
 4500 8091AF01          lds R24,_Tt
 4504 9091B001          lds R25,_Tt+1
 4508 0196              adiw R24,1
 450A 9093B001          sts _Tt+1,R25
 450E 8093AF01          sts _Tt,R24
 4512           L1046:
 4512                   .dbline 2323
 4512 8091AF01          lds R24,_Tt
 4516 9091B001          lds R25,_Tt+1
 451A 8032              cpi R24,32
 451C E0E0              ldi R30,0
 451E 9E07              cpc R25,R30
 4520 78F3              brlo L1043
 4522           X387:
 4522                   .dbline 2324
 4522           ;       DELAY80
 4522 2224              clr R2
 4524 3324              clr R3
 4526 3092B001          sts _Tt+1,R3
 452A 2092AF01          sts _Tt,R2
 452E 09C0              xjmp L1050
 4530           L1047:
 4530                   .dbline 2324
 4530           L1048:
 4530                   .dbline 2324
 4530 8091AF01          lds R24,_Tt
 4534 9091B001          lds R25,_Tt+1
 4538 0196              adiw R24,1
 453A 9093B001          sts _Tt+1,R25
 453E 8093AF01          sts _Tt,R24
 4542           L1050:
 4542                   .dbline 2324
 4542 8091AF01          lds R24,_Tt
 4546 9091B001          lds R25,_Tt+1
 454A 8032              cpi R24,32
 454C E0E0              ldi R30,0
 454E 9E07              cpc R25,R30
 4550 78F3              brlo L1047
 4552           X388:
 4552                   .dbline 2325
 4552           ;       M1_L    
 4552 82B3              in R24,0x12
 4554 8F7E              andi R24,239
 4556 82BB              out 0x12,R24
 4558                   .dbline 2326
 4558           ;       DELAY40  //放电结束
 4558 2224              clr R2
 455A 3324              clr R3
 455C 3092B001          sts _Tt+1,R3
 4560 2092AF01          sts _Tt,R2
 4564 09C0              xjmp L1054
 4566           L1051:
 4566                   .dbline 2326
 4566           L1052:
 4566                   .dbline 2326
 4566 8091AF01          lds R24,_Tt
 456A 9091B001          lds R25,_Tt+1
 456E 0196              adiw R24,1
 4570 9093B001          sts _Tt+1,R25
 4574 8093AF01          sts _Tt,R24
 4578           L1054:
 4578                   .dbline 2326
 4578 8091AF01          lds R24,_Tt
 457C 9091B001          lds R25,_Tt+1
 4580 8031              cpi R24,16
 4582 E0E0              ldi R30,0
 4584 9E07              cpc R25,R30
 4586 78F3              brlo L1051
 4588           X389:
 4588                   .dbline 2329
 4588           ;       
 4588           ;      //连续发送 ,全0时每位400us，共8400us，全1时每位240us，共5040us
 4588           ;       for(L=21;L>0;L--)
 4588 45E1              ldi R20,21
 458A 0CC1              xjmp L1058
 458C           L1055:
 458C                   .dbline 2330
 458C           ;       {   
 458C                   .dbline 2331
 458C           ;         if(T_dat_buf[L])//1，一高二低
 458C 80E0              ldi R24,<_T_dat_buf
 458E 90E0              ldi R25,>_T_dat_buf
 4590 E42F              mov R30,R20
 4592 FF27              clr R31
 4594 E80F              add R30,R24
 4596 F91F              adc R31,R25
 4598 2080              ldd R2,z+0
 459A 2220              tst R2
 459C 09F4              brne X412
 459E 69C0              xjmp L1059
 45A0           X412:
 45A0           X390:
 45A0                   .dbline 2332
 45A0           ;         {                             
 45A0                   .dbline 2333
 45A0           ;               M2_H 
 45A0 959A              sbi 0x12,5
 45A2                   .dbline 2334
 45A2           ;               DELAY80
 45A2 2224              clr R2
 45A4 3324              clr R3
 45A6 3092B001          sts _Tt+1,R3
 45AA 2092AF01          sts _Tt,R2
 45AE 09C0              xjmp L1064
 45B0           L1061:
 45B0                   .dbline 2334
 45B0           L1062:
 45B0                   .dbline 2334
 45B0 8091AF01          lds R24,_Tt
 45B4 9091B001          lds R25,_Tt+1
 45B8 0196              adiw R24,1
 45BA 9093B001          sts _Tt+1,R25
 45BE 8093AF01          sts _Tt,R24
 45C2           L1064:
 45C2                   .dbline 2334
 45C2 8091AF01          lds R24,_Tt
 45C6 9091B001          lds R25,_Tt+1
 45CA 8032              cpi R24,32
 45CC E0E0              ldi R30,0
 45CE 9E07              cpc R25,R30
 45D0 78F3              brlo L1061
 45D2           X391:
 45D2                   .dbline 2335
 45D2           ;               M2_L
 45D2 82B3              in R24,0x12
 45D4 8F7D              andi R24,223
 45D6 82BB              out 0x12,R24
 45D8                   .dbline 2336
 45D8           ;                       DELAY40
 45D8 2224              clr R2
 45DA 3324              clr R3
 45DC 3092B001          sts _Tt+1,R3
 45E0 2092AF01          sts _Tt,R2
 45E4 09C0              xjmp L1068
 45E6           L1065:
 45E6                   .dbline 2336
 45E6           L1066:
 45E6                   .dbline 2336
 45E6 8091AF01          lds R24,_Tt
 45EA 9091B001          lds R25,_Tt+1
 45EE 0196              adiw R24,1
 45F0 9093B001          sts _Tt+1,R25
 45F4 8093AF01          sts _Tt,R24
 45F8           L1068:
 45F8                   .dbline 2336
 45F8 8091AF01          lds R24,_Tt
 45FC 9091B001          lds R25,_Tt+1
 4600 8031              cpi R24,16
 4602 E0E0              ldi R30,0
 4604 9E07              cpc R25,R30
 4606 78F3              brlo L1065
 4608           X392:
 4608                   .dbline 2337
 4608           ;               M1_H       
 4608 949A              sbi 0x12,4
 460A                   .dbline 2338
 460A           ;               DELAY80
 460A 2224              clr R2
 460C 3324              clr R3
 460E 3092B001          sts _Tt+1,R3
 4612 2092AF01          sts _Tt,R2
 4616 09C0              xjmp L1072
 4618           L1069:
 4618                   .dbline 2338
 4618           L1070:
 4618                   .dbline 2338
 4618 8091AF01          lds R24,_Tt
 461C 9091B001          lds R25,_Tt+1
 4620 0196              adiw R24,1
 4622 9093B001          sts _Tt+1,R25
 4626 8093AF01          sts _Tt,R24
 462A           L1072:
 462A                   .dbline 2338
 462A 8091AF01          lds R24,_Tt
 462E 9091B001          lds R25,_Tt+1
 4632 8032              cpi R24,32
 4634 E0E0              ldi R30,0
 4636 9E07              cpc R25,R30
 4638 78F3              brlo L1069
 463A           X393:
 463A                   .dbline 2339
 463A           ;                       M1_L
 463A 82B3              in R24,0x12
 463C 8F7E              andi R24,239
 463E 82BB              out 0x12,R24
 4640                   .dbline 2340
 4640           ;                       DELAY40
 4640 2224              clr R2
 4642 3324              clr R3
 4644 3092B001          sts _Tt+1,R3
 4648 2092AF01          sts _Tt,R2
 464C 09C0              xjmp L1076
 464E           L1073:
 464E                   .dbline 2340
 464E           L1074:
 464E                   .dbline 2340
 464E 8091AF01          lds R24,_Tt
 4652 9091B001          lds R25,_Tt+1
 4656 0196              adiw R24,1
 4658 9093B001          sts _Tt+1,R25
 465C 8093AF01          sts _Tt,R24
 4660           L1076:
 4660                   .dbline 2340
 4660 8091AF01          lds R24,_Tt
 4664 9091B001          lds R25,_Tt+1
 4668 8031              cpi R24,16
 466A E0E0              ldi R30,0
 466C 9E07              cpc R25,R30
 466E 78F3              brlo L1073
 4670           X394:
 4670                   .dbline 2341
 4670           ;               } 
 4670 98C0              xjmp L1060
 4672           L1059:
 4672                   .dbline 2343
 4672           ;        else           //0，一高四低                                           
 4672           ;         {
 4672                   .dbline 2344
 4672           ;                       M2_H 
 4672 959A              sbi 0x12,5
 4674                   .dbline 2345
 4674           ;               DELAY80
 4674 2224              clr R2
 4676 3324              clr R3
 4678 3092B001          sts _Tt+1,R3
 467C 2092AF01          sts _Tt,R2
 4680 09C0              xjmp L1080
 4682           L1077:
 4682                   .dbline 2345
 4682           L1078:
 4682                   .dbline 2345
 4682 8091AF01          lds R24,_Tt
 4686 9091B001          lds R25,_Tt+1
 468A 0196              adiw R24,1
 468C 9093B001          sts _Tt+1,R25
 4690 8093AF01          sts _Tt,R24
 4694           L1080:
 4694                   .dbline 2345
 4694 8091AF01          lds R24,_Tt
 4698 9091B001          lds R25,_Tt+1
 469C 8032              cpi R24,32
 469E E0E0              ldi R30,0
 46A0 9E07              cpc R25,R30
 46A2 78F3              brlo L1077
 46A4           X395:
 46A4                   .dbline 2346
 46A4           ;               M2_L
 46A4 82B3              in R24,0x12
 46A6 8F7D              andi R24,223
 46A8 82BB              out 0x12,R24
 46AA                   .dbline 2347
 46AA           ;                       DELAY40
 46AA 2224              clr R2
 46AC 3324              clr R3
 46AE 3092B001          sts _Tt+1,R3
 46B2 2092AF01          sts _Tt,R2
 46B6 09C0              xjmp L1084
 46B8           L1081:
 46B8                   .dbline 2347
 46B8           L1082:
 46B8                   .dbline 2347
 46B8 8091AF01          lds R24,_Tt
 46BC 9091B001          lds R25,_Tt+1
 46C0 0196              adiw R24,1
 46C2 9093B001          sts _Tt+1,R25
 46C6 8093AF01          sts _Tt,R24
 46CA           L1084:
 46CA                   .dbline 2347
 46CA 8091AF01          lds R24,_Tt
 46CE 9091B001          lds R25,_Tt+1
 46D2 8031              cpi R24,16
 46D4 E0E0              ldi R30,0
 46D6 9E07              cpc R25,R30
 46D8 78F3              brlo L1081
 46DA           X396:
 46DA                   .dbline 2348
 46DA           ;               M1_H       
 46DA 949A              sbi 0x12,4
 46DC                   .dbline 2349
 46DC           ;               DELAY80
 46DC 2224              clr R2
 46DE 3324              clr R3
 46E0 3092B001          sts _Tt+1,R3
 46E4 2092AF01          sts _Tt,R2
 46E8 09C0              xjmp L1088
 46EA           L1085:
 46EA                   .dbline 2349
 46EA           L1086:
 46EA                   .dbline 2349
 46EA 8091AF01          lds R24,_Tt
 46EE 9091B001          lds R25,_Tt+1
 46F2 0196              adiw R24,1
 46F4 9093B001          sts _Tt+1,R25
 46F8 8093AF01          sts _Tt,R24
 46FC           L1088:
 46FC                   .dbline 2349
 46FC 8091AF01          lds R24,_Tt
 4700 9091B001          lds R25,_Tt+1
 4704 8032              cpi R24,32
 4706 E0E0              ldi R30,0
 4708 9E07              cpc R25,R30
 470A 78F3              brlo L1085
 470C           X397:
 470C                   .dbline 2350
 470C           ;                       DELAY80
 470C 2224              clr R2
 470E 3324              clr R3
 4710 3092B001          sts _Tt+1,R3
 4714 2092AF01          sts _Tt,R2
 4718 09C0              xjmp L1092
 471A           L1089:
 471A                   .dbline 2350
 471A           L1090:
 471A                   .dbline 2350
 471A 8091AF01          lds R24,_Tt
 471E 9091B001          lds R25,_Tt+1
 4722 0196              adiw R24,1
 4724 9093B001          sts _Tt+1,R25
 4728 8093AF01          sts _Tt,R24
 472C           L1092:
 472C                   .dbline 2350
 472C 8091AF01          lds R24,_Tt
 4730 9091B001          lds R25,_Tt+1
 4734 8032              cpi R24,32
 4736 E0E0              ldi R30,0
 4738 9E07              cpc R25,R30
 473A 78F3              brlo L1089
 473C           X398:
 473C                   .dbline 2351
 473C           ;                       DELAY80
 473C 2224              clr R2
 473E 3324              clr R3
 4740 3092B001          sts _Tt+1,R3
 4744 2092AF01          sts _Tt,R2
 4748 09C0              xjmp L1096
 474A           L1093:
 474A                   .dbline 2351
 474A           L1094:
 474A                   .dbline 2351
 474A 8091AF01          lds R24,_Tt
 474E 9091B001          lds R25,_Tt+1
 4752 0196              adiw R24,1
 4754 9093B001          sts _Tt+1,R25
 4758 8093AF01          sts _Tt,R24
 475C           L1096:
 475C                   .dbline 2351
 475C 8091AF01          lds R24,_Tt
 4760 9091B001          lds R25,_Tt+1
 4764 8032              cpi R24,32
 4766 E0E0              ldi R30,0
 4768 9E07              cpc R25,R30
 476A 78F3              brlo L1093
 476C           X399:
 476C                   .dbline 2352
 476C           ;                       M1_L
 476C 82B3              in R24,0x12
 476E 8F7E              andi R24,239
 4770 82BB              out 0x12,R24
 4772                   .dbline 2353
 4772           ;                       DELAY40
 4772 2224              clr R2
 4774 3324              clr R3
 4776 3092B001          sts _Tt+1,R3
 477A 2092AF01          sts _Tt,R2
 477E 09C0              xjmp L1100
 4780           L1097:
 4780                   .dbline 2353
 4780           L1098:
 4780                   .dbline 2353
 4780 8091AF01          lds R24,_Tt
 4784 9091B001          lds R25,_Tt+1
 4788 0196              adiw R24,1
 478A 9093B001          sts _Tt+1,R25
 478E 8093AF01          sts _Tt,R24
 4792           L1100:
 4792                   .dbline 2353
 4792 8091AF01          lds R24,_Tt
 4796 9091B001          lds R25,_Tt+1
 479A 8031              cpi R24,16
 479C E0E0              ldi R30,0
 479E 9E07              cpc R25,R30
 47A0 78F3              brlo L1097
 47A2           X400:
 47A2                   .dbline 2354
 47A2           ;               }
 47A2           L1060:
 47A2                   .dbline 2355
 47A2           ;     }            
 47A2           L1056:
 47A2                   .dbline 2329
 47A2 4A95              dec R20
 47A4           L1058:
 47A4                   .dbline 2329
 47A4 80E0              ldi R24,0
 47A6 8417              cp R24,R20
 47A8 08F4              brsh X413
 47AA F0CE              xjmp L1055
 47AC           X413:
 47AC           X401:
 47AC                   .dbline 2357
 47AC           ;                  //结束位，一高八低，720us
 47AC           ;                   M2_H 
 47AC 959A              sbi 0x12,5
 47AE                   .dbline 2358
 47AE           ;                   DELAY80
 47AE 2224              clr R2
 47B0 3324              clr R3
 47B2 3092B001          sts _Tt+1,R3
 47B6 2092AF01          sts _Tt,R2
 47BA 09C0              xjmp L1104
 47BC           L1101:
 47BC                   .dbline 2358
 47BC           L1102:
 47BC                   .dbline 2358
 47BC 8091AF01          lds R24,_Tt
 47C0 9091B001          lds R25,_Tt+1
 47C4 0196              adiw R24,1
 47C6 9093B001          sts _Tt+1,R25
 47CA 8093AF01          sts _Tt,R24
 47CE           L1104:
 47CE                   .dbline 2358
 47CE 8091AF01          lds R24,_Tt
 47D2 9091B001          lds R25,_Tt+1
 47D6 8032              cpi R24,32
 47D8 E0E0              ldi R30,0
 47DA 9E07              cpc R25,R30
 47DC 78F3              brlo L1101
 47DE           X402:
 47DE                   .dbline 2359
 47DE           ;               M2_L
 47DE 82B3              in R24,0x12
 47E0 8F7D              andi R24,223
 47E2 82BB              out 0x12,R24
 47E4                   .dbline 2360
 47E4           ;                       DELAY40
 47E4 2224              clr R2
 47E6 3324              clr R3
 47E8 3092B001          sts _Tt+1,R3
 47EC 2092AF01          sts _Tt,R2
 47F0 09C0              xjmp L1108
 47F2           L1105:
 47F2                   .dbline 2360
 47F2           L1106:
 47F2                   .dbline 2360
 47F2 8091AF01          lds R24,_Tt
 47F6 9091B001          lds R25,_Tt+1
 47FA 0196              adiw R24,1
 47FC 9093B001          sts _Tt+1,R25
 4800 8093AF01          sts _Tt,R24
 4804           L1108:
 4804                   .dbline 2360
 4804 8091AF01          lds R24,_Tt
 4808 9091B001          lds R25,_Tt+1
 480C 8031              cpi R24,16
 480E E0E0              ldi R30,0
 4810 9E07              cpc R25,R30
 4812 78F3              brlo L1105
 4814           X403:
 4814                   .dbline 2361
 4814           ;               M1_H       
 4814 949A              sbi 0x12,4
 4816                   .dbline 2362
 4816           ;               DELAY80
 4816 2224              clr R2
 4818 3324              clr R3
 481A 3092B001          sts _Tt+1,R3
 481E 2092AF01          sts _Tt,R2
 4822 09C0              xjmp L1112
 4824           L1109:
 4824                   .dbline 2362
 4824           L1110:
 4824                   .dbline 2362
 4824 8091AF01          lds R24,_Tt
 4828 9091B001          lds R25,_Tt+1
 482C 0196              adiw R24,1
 482E 9093B001          sts _Tt+1,R25
 4832 8093AF01          sts _Tt,R24
 4836           L1112:
 4836                   .dbline 2362
 4836 8091AF01          lds R24,_Tt
 483A 9091B001          lds R25,_Tt+1
 483E 8032              cpi R24,32
 4840 E0E0              ldi R30,0
 4842 9E07              cpc R25,R30
 4844 78F3              brlo L1109
 4846           X404:
 4846                   .dbline 2363
 4846           ;                       DELAY80
 4846 2224              clr R2
 4848 3324              clr R3
 484A 3092B001          sts _Tt+1,R3
 484E 2092AF01          sts _Tt,R2
 4852 09C0              xjmp L1116
 4854           L1113:
 4854                   .dbline 2363
 4854           L1114:
 4854                   .dbline 2363
 4854 8091AF01          lds R24,_Tt
 4858 9091B001          lds R25,_Tt+1
 485C 0196              adiw R24,1
 485E 9093B001          sts _Tt+1,R25
 4862 8093AF01          sts _Tt,R24
 4866           L1116:
 4866                   .dbline 2363
 4866 8091AF01          lds R24,_Tt
 486A 9091B001          lds R25,_Tt+1
 486E 8032              cpi R24,32
 4870 E0E0              ldi R30,0
 4872 9E07              cpc R25,R30
 4874 78F3              brlo L1113
 4876           X405:
 4876                   .dbline 2364
 4876           ;                       DELAY80
 4876 2224              clr R2
 4878 3324              clr R3
 487A 3092B001          sts _Tt+1,R3
 487E 2092AF01          sts _Tt,R2
 4882 09C0              xjmp L1120
 4884           L1117:
 4884                   .dbline 2364
 4884           L1118:
 4884                   .dbline 2364
 4884 8091AF01          lds R24,_Tt
 4888 9091B001          lds R25,_Tt+1
 488C 0196              adiw R24,1
 488E 9093B001          sts _Tt+1,R25
 4892 8093AF01          sts _Tt,R24
 4896           L1120:
 4896                   .dbline 2364
 4896 8091AF01          lds R24,_Tt
 489A 9091B001          lds R25,_Tt+1
 489E 8032              cpi R24,32
 48A0 E0E0              ldi R30,0
 48A2 9E07              cpc R25,R30
 48A4 78F3              brlo L1117
 48A6           X406:
 48A6                   .dbline 2365
 48A6           ;                       DELAY80
 48A6 2224              clr R2
 48A8 3324              clr R3
 48AA 3092B001          sts _Tt+1,R3
 48AE 2092AF01          sts _Tt,R2
 48B2 09C0              xjmp L1124
 48B4           L1121:
 48B4                   .dbline 2365
 48B4           L1122:
 48B4                   .dbline 2365
 48B4 8091AF01          lds R24,_Tt
 48B8 9091B001          lds R25,_Tt+1
 48BC 0196              adiw R24,1
 48BE 9093B001          sts _Tt+1,R25
 48C2 8093AF01          sts _Tt,R24
 48C6           L1124:
 48C6                   .dbline 2365
 48C6 8091AF01          lds R24,_Tt
 48CA 9091B001          lds R25,_Tt+1
 48CE 8032              cpi R24,32
 48D0 E0E0              ldi R30,0
 48D2 9E07              cpc R25,R30
 48D4 78F3              brlo L1121
 48D6           X407:
 48D6                   .dbline 2366
 48D6           ;                       DELAY80
 48D6 2224              clr R2
 48D8 3324              clr R3
 48DA 3092B001          sts _Tt+1,R3
 48DE 2092AF01          sts _Tt,R2
 48E2 09C0              xjmp L1128
 48E4           L1125:
 48E4                   .dbline 2366
 48E4           L1126:
 48E4                   .dbline 2366
 48E4 8091AF01          lds R24,_Tt
 48E8 9091B001          lds R25,_Tt+1
 48EC 0196              adiw R24,1
 48EE 9093B001          sts _Tt+1,R25
 48F2 8093AF01          sts _Tt,R24
 48F6           L1128:
 48F6                   .dbline 2366
 48F6 8091AF01          lds R24,_Tt
 48FA 9091B001          lds R25,_Tt+1
 48FE 8032              cpi R24,32
 4900 E0E0              ldi R30,0
 4902 9E07              cpc R25,R30
 4904 78F3              brlo L1125
 4906           X408:
 4906                   .dbline 2367
 4906           ;                       DELAY80
 4906 2224              clr R2
 4908 3324              clr R3
 490A 3092B001          sts _Tt+1,R3
 490E 2092AF01          sts _Tt,R2
 4912 09C0              xjmp L1132
 4914           L1129:
 4914                   .dbline 2367
 4914           L1130:
 4914                   .dbline 2367
 4914 8091AF01          lds R24,_Tt
 4918 9091B001          lds R25,_Tt+1
 491C 0196              adiw R24,1
 491E 9093B001          sts _Tt+1,R25
 4922 8093AF01          sts _Tt,R24
 4926           L1132:
 4926                   .dbline 2367
 4926 8091AF01          lds R24,_Tt
 492A 9091B001          lds R25,_Tt+1
 492E 8032              cpi R24,32
 4930 E0E0              ldi R30,0
 4932 9E07              cpc R25,R30
 4934 78F3              brlo L1129
 4936           X409:
 4936                   .dbline 2368
 4936           ;                       DELAY80
 4936 2224              clr R2
 4938 3324              clr R3
 493A 3092B001          sts _Tt+1,R3
 493E 2092AF01          sts _Tt,R2
 4942 09C0              xjmp L1136
 4944           L1133:
 4944                   .dbline 2368
 4944           L1134:
 4944                   .dbline 2368
 4944 8091AF01          lds R24,_Tt
 4948 9091B001          lds R25,_Tt+1
 494C 0196              adiw R24,1
 494E 9093B001          sts _Tt+1,R25
 4952 8093AF01          sts _Tt,R24
 4956           L1136:
 4956                   .dbline 2368
 4956 8091AF01          lds R24,_Tt
 495A 9091B001          lds R25,_Tt+1
 495E 8032              cpi R24,32
 4960 E0E0              ldi R30,0
 4962 9E07              cpc R25,R30
 4964 78F3              brlo L1133
 4966           X410:
 4966                   .dbline 2369
 4966           ;                       M1_L
 4966 82B3              in R24,0x12
 4968 8F7E              andi R24,239
 496A 82BB              out 0x12,R24
 496C                   .dbline 2370
 496C           ;                       DELAY40
 496C 2224              clr R2
 496E 3324              clr R3
 4970 3092B001          sts _Tt+1,R3
 4974 2092AF01          sts _Tt,R2
 4978 09C0              xjmp L1140
 497A           L1137:
 497A                   .dbline 2370
 497A           L1138:
 497A                   .dbline 2370
 497A 8091AF01          lds R24,_Tt
 497E 9091B001          lds R25,_Tt+1
 4982 0196              adiw R24,1
 4984 9093B001          sts _Tt+1,R25
 4988 8093AF01          sts _Tt,R24
 498C           L1140:
 498C                   .dbline 2370
 498C 8091AF01          lds R24,_Tt
 4990 9091B001          lds R25,_Tt+1
 4994 8031              cpi R24,16
 4996 E0E0              ldi R30,0
 4998 9E07              cpc R25,R30
 499A 78F3              brlo L1137
 499C           X411:
 499C                   .dbline 2372
 499C           ;       
 499C           ;       EIFR|=0x08;//清INT3中断标志 
 499C 88B7              in R24,0x38
 499E 8860              ori R24,8
 49A0 88BF              out 0x38,R24
 49A2                   .dbline 2373
 49A2           ;       SREG|=0x80; //开总中断
 49A2 7894              bset 7
 49A4                   .dbline -2
 49A4           L988:
 49A4                   .dbline 0 ; func end
 49A4 4991              ld R20,y+
 49A6 0895              ret
 49A8                   .dbsym r L 20 c
 49A8                   .dbend
 49A8                   .dbfunc e EEPROM_write _EEPROM_write fV
 49A8           ;           Data -> R18
 49A8           ;        Address -> R16,R17
                        .even
 49A8           _EEPROM_write::
 49A8                   .dbline -1
 49A8                   .dbline 2379
 49A8           ; }
 49A8           ; 
 49A8           ; 
 49A8           ; 
 49A8           ; void EEPROM_write(unsigned int Address,unsigned char Data)    //内部EEPROM写
 49A8           ; {//时钟频率为1MHz，典型的EEPROM字节写耗时约8.5ms
 49A8           L1142:
 49A8                   .dbline 2380
 49A8           ;     while(EECR&0x02);                   // 等待上一次写操作结束
 49A8           L1143:
 49A8                   .dbline 2380
 49A8 E199              sbic 0x1c,1
 49AA FECF              rjmp L1142
 49AC           X414:
 49AC                   .dbline 2381
 49AC           ;     EEAR=Address;
 49AC 1FBB              out 0x1f,R17
 49AE 0EBB              out 0x1e,R16
 49B0                   .dbline 2382
 49B0           ;     EEDR=Data;                                // 设置地址和数据寄存器
 49B0 2DBB              out 0x1d,R18
 49B2                   .dbline 2383
 49B2           ;     EECR|=0x04;                         //置位EEMWE
 49B2 E29A              sbi 0x1c,2
 49B4                   .dbline 2384
 49B4           ;     EECR|=0x02;                         //置位EEWE 以启动写操作
 49B4 E19A              sbi 0x1c,1
 49B6                   .dbline -2
 49B6           L1141:
 49B6                   .dbline 0 ; func end
 49B6 0895              ret
 49B8                   .dbsym r Data 18 c
 49B8                   .dbsym r Address 16 i
 49B8                   .dbend
 49B8                   .dbfunc e EEPROM_read _EEPROM_read fc
 49B8           ;        Address -> R16,R17
                        .even
 49B8           _EEPROM_read::
 49B8                   .dbline -1
 49B8                   .dbline 2388
 49B8           ; }
 49B8           ; 
 49B8           ; unsigned char EEPROM_read(unsigned int Address)                               //内部EEPROM读
 49B8           ; {
 49B8           L1146:
 49B8                   .dbline 2389
 49B8           ;     while(EECR&0x02);                                 //等待上一次操作结束
 49B8           L1147:
 49B8                   .dbline 2389
 49B8 E199              sbic 0x1c,1
 49BA FECF              rjmp L1146
 49BC           X415:
 49BC                   .dbline 2390
 49BC           ;     EEAR = Address;                     //设置地址寄存器                                              
 49BC 1FBB              out 0x1f,R17
 49BE 0EBB              out 0x1e,R16
 49C0                   .dbline 2391
 49C0           ;       EECR|=0x01;                                     //设置EERE 以启动读操作
 49C0 E09A              sbi 0x1c,0
 49C2                   .dbline 2392
 49C2           ;     return EEDR;                              //自数据寄存器返回数据
 49C2 0DB3              in R16,0x1d
 49C4                   .dbline -2
 49C4           L1145:
 49C4                   .dbline 0 ; func end
 49C4 0895              ret
 49C6                   .dbsym r Address 16 i
 49C6                   .dbend
 49C6                   .dbfunc e crc16 _crc16 fV
 49C6           ;             ii -> R20,R21
 49C6           ;             ch -> R10
 49C6           ;             cl -> R22
 49C6           ;         savelo -> R14
 49C6           ;         savehi -> y+0
 49C6           ;           flag -> R12,R13
 49C6           ;         length -> R18,R19
 49C6           ;         r_data -> y+11
                        .even
 49C6           _crc16::
 49C6 0E940000          xcall push_arg4
 49CA 0E940000          xcall push_xgsetF0FC
 49CE 2197              sbiw R28,1
 49D0                   .dbline -1
 49D0                   .dbline 2396
 49D0           ; }    
 49D0           ; 
 49D0           ; void crc16(unsigned char r_data[],unsigned int length)
 49D0           ; {
 49D0                   .dbline 2400
 49D0           ;         unsigned char cl,ch;
 49D0           ;         unsigned char savehi,savelo;
 49D0           ;         int ii,flag;
 49D0           ;         crc16hi=0xFF;
 49D0 8FEF              ldi R24,255
 49D2 80931300          sts _crc16hi,R24
 49D6                   .dbline 2401
 49D6           ;         crc16lo=0xFF;
 49D6 80931200          sts _crc16lo,R24
 49DA                   .dbline 2402
 49DA           ;         cl=0x1;
 49DA 61E0              ldi R22,1
 49DC                   .dbline 2403
 49DC           ;         ch=0xA0;
 49DC 80EA              ldi R24,160
 49DE A82E              mov R10,R24
 49E0                   .dbline 2404
 49E0           ;         for (ii=0;ii<length-2;ii++)
 49E0 4427              clr R20
 49E2 5527              clr R21
 49E4 38C0              xjmp L1153
 49E6           L1150:
 49E6                   .dbline 2405
 49E6           ;         {
 49E6                   .dbline 2406
 49E6           ;             crc16lo=(crc16lo ^ r_data[ii]);
 49E6 FA01              movw R30,R20
 49E8 0B84              ldd R0,y+11
 49EA 1C84              ldd R1,y+12
 49EC E00D              add R30,R0
 49EE F11D              adc R31,R1
 49F0 2080              ldd R2,z+0
 49F2 30901200          lds R3,_crc16lo
 49F6 3224              eor R3,R2
 49F8 30921200          sts _crc16lo,R3
 49FC                   .dbline 2407
 49FC           ;                 for (flag=0;flag<8;flag++)
 49FC CC24              clr R12
 49FE DD24              clr R13
 4A00           L1154:
 4A00                   .dbline 2408
 4A00           ;                 {
 4A00                   .dbline 2409
 4A00           ;                        savehi=crc16hi;
 4A00 20901300          lds R2,_crc16hi
 4A04 2882              std y+0,R2
 4A06                   .dbline 2410
 4A06           ;                         savelo=crc16lo;
 4A06 E0901200          lds R14,_crc16lo
 4A0A                   .dbline 2411
 4A0A           ;                        crc16hi=(crc16hi>>1);
 4A0A 2694              lsr R2
 4A0C 20921300          sts _crc16hi,R2
 4A10                   .dbline 2412
 4A10           ;                        crc16lo=(crc16lo>>1);
 4A10 2E2C              mov R2,R14
 4A12 2694              lsr R2
 4A14 20921200          sts _crc16lo,R2
 4A18                   .dbline 2413
 4A18           ;                         if ((savehi & 0x01)==0x01)
 4A18 8881              ldd R24,y+0
 4A1A 8170              andi R24,1
 4A1C 8130              cpi R24,1
 4A1E 21F4              brne L1158
 4A20           X416:
 4A20                   .dbline 2414
 4A20           ;                                 crc16lo=(crc16lo | 0x80);
 4A20 822D              mov R24,R2
 4A22 8068              ori R24,128
 4A24 80931200          sts _crc16lo,R24
 4A28           L1158:
 4A28                   .dbline 2415
 4A28           ;                         if        ((savelo & 0x01)==0x01)
 4A28 8E2D              mov R24,R14
 4A2A 8170              andi R24,1
 4A2C 8130              cpi R24,1
 4A2E 51F4              brne L1160
 4A30           X417:
 4A30                   .dbline 2416
 4A30           ;                         {
 4A30                   .dbline 2417
 4A30           ;                                 crc16hi = (crc16hi ^ ch);
 4A30 20901300          lds R2,_crc16hi
 4A34 2A24              eor R2,R10
 4A36 20921300          sts _crc16hi,R2
 4A3A                   .dbline 2418
 4A3A           ;                                                               crc16lo = (crc16lo ^ cl);
 4A3A 20901200          lds R2,_crc16lo
 4A3E 2626              eor R2,R22
 4A40 20921200          sts _crc16lo,R2
 4A44                   .dbline 2419
 4A44           ;                         }        
 4A44           L1160:
 4A44                   .dbline 2420
 4A44           ;                 }
 4A44           L1155:
 4A44                   .dbline 2407
 4A44 C601              movw R24,R12
 4A46 0196              adiw R24,1
 4A48 6C01              movw R12,R24
 4A4A                   .dbline 2407
 4A4A 8830              cpi R24,8
 4A4C E0E0              ldi R30,0
 4A4E 9E07              cpc R25,R30
 4A50 BCF2              brlt L1154
 4A52           X418:
 4A52                   .dbline 2421
 4A52           ;         }
 4A52           L1151:
 4A52                   .dbline 2404
 4A52 4F5F              subi R20,255  ; offset = 1
 4A54 5F4F              sbci R21,255
 4A56           L1153:
 4A56                   .dbline 2404
 4A56 C901              movw R24,R18
 4A58 0297              sbiw R24,2
 4A5A 4817              cp R20,R24
 4A5C 5907              cpc R21,R25
 4A5E 08F4              brsh X420
 4A60 C2CF              xjmp L1150
 4A62           X420:
 4A62           X419:
 4A62                   .dbline -2
 4A62           L1149:
 4A62                   .dbline 0 ; func end
 4A62 2196              adiw R28,1
 4A64 0E940000          xcall pop_xgsetF0FC
 4A68 2496              adiw R28,4
 4A6A 0895              ret
 4A6C                   .dbsym r ii 20 I
 4A6C                   .dbsym r ch 10 c
 4A6C                   .dbsym r cl 22 c
 4A6C                   .dbsym r savelo 14 c
 4A6C                   .dbsym l savehi 0 c
 4A6C                   .dbsym r flag 12 I
 4A6C                   .dbsym r length 18 i
 4A6C                   .dbsym l r_data 11 pc
 4A6C                   .dbend
                        .area bss(ram, con, rel)
 0000                   .dbfile D:\chen\Core\FirmWare_CT\CT_MAIN_new\main.c
 0000           _crc16array::
 0000                   .blkb 18
 0012                   .dbsym e crc16array _crc16array A[18:18]c
 0012           _crc16lo::
 0012                   .blkb 1
 0013                   .dbsym e crc16lo _crc16lo c
 0013           _crc16hi::
 0013                   .blkb 1
 0014                   .dbsym e crc16hi _crc16hi c
 0014           _lfib::
 0014                   .blkb 4
 0018                   .dbsym e lfib _lfib l
 0018           _bf::
 0018                   .blkb 2
 001A                   .dbsym e bf _bf i
 001A           _CompCounter::
 001A                   .blkb 2
 001C                   .dbsym e CompCounter _CompCounter i
 001C           _coeff_count::
 001C                   .blkb 2
 001E                   .dbsym e coeff_count _coeff_count i
 001E           _coeff_len::
 001E                   .blkb 2
 0020                   .dbsym e coeff_len _coeff_len i
 0020           _EEPAdd::
 0020                   .blkb 1
 0021                   .dbsym e EEPAdd _EEPAdd c
 0021           _Uart0TxData::
 0021                   .blkb 74
 006B                   .dbsym e Uart0TxData _Uart0TxData A[74:74]c
 006B           _coeffdata::
 006B                   .blkb 320
 01AB                   .dbsym e coeffdata _coeffdata A[320:320]c
 01AB           _T2cn::
 01AB                   .blkb 2
 01AD                   .dbsym e T2cn _T2cn i
 01AD           _k::
 01AD                   .blkb 2
 01AF                   .dbsym e k _k i
 01AF           _Tt::
 01AF                   .blkb 2
 01B1                   .dbsym e Tt _Tt i
 01B1           _IntFlag::
 01B1                   .blkb 1
 01B2                   .dbsym e IntFlag _IntFlag c
 01B2           _Int_count::
 01B2                   .blkb 1
 01B3                   .dbsym e Int_count _Int_count c
 01B3           _DataFlag::
 01B3                   .blkb 2
 01B5                   .dbsym e DataFlag _DataFlag i
 01B5           _T_dat_buf::
 01B5                   .blkb 22
 01CB                   .dbsym e T_dat_buf _T_dat_buf A[22:22]c
 01CB           _TimeOutFlag::
 01CB                   .blkb 1
 01CC                   .dbsym e TimeOutFlag _TimeOutFlag c
 01CC           _T_com::
 01CC                   .blkb 1
 01CD                   .dbsym e T_com _T_com c
 01CD           _R_dat::
 01CD                   .blkb 2
 01CF                   .dbsym e R_dat _R_dat I
 01CF           _T_dat::
 01CF                   .blkb 2
 01D1                   .dbsym e T_dat _T_dat I
 01D1           _Rx::
 01D1                   .blkb 18
 01E3                   .dbsym e Rx _Rx A[18:18]c
 01E3           _Uart0RxCounter::
 01E3                   .blkb 1
 01E4                   .dbsym e Uart0RxCounter _Uart0RxCounter c
 01E4           _Uart0RxData::
 01E4                   .blkb 74
 022E                   .dbsym e Uart0RxData _Uart0RxData A[74:74]c
 022E           _Timer0Counter::
 022E                   .blkb 2
 0230                   .dbsym e Timer0Counter _Timer0Counter i
 0230           _T_Flag::
 0230                   .blkb 1
 0231                   .dbsym e T_Flag _T_Flag c
 0231           _TPSBuf::
 0231                   .blkb 4
 0235                   .dbsym e TPSBuf _TPSBuf A[4:4]c
 0235           _TPSCn::
 0235                   .blkb 1
 0236                   .dbsym e TPSCn _TPSCn c
 0236           _MotorIdelCur::
 0236                   .blkb 1
 0237                   .dbsym e MotorIdelCur _MotorIdelCur c
 0237           _MotorIdelGear::
 0237                   .blkb 1
 0238                   .dbsym e MotorIdelGear _MotorIdelGear c
 0238           _Motor2Thr::
 0238                   .blkb 1
 0239                   .dbsym e Motor2Thr _Motor2Thr c
 0239           _Motor1Thr::
 0239                   .blkb 1
 023A                   .dbsym e Motor1Thr _Motor1Thr c
 023A           _Motor2Gear::
 023A                   .blkb 1
 023B                   .dbsym e Motor2Gear _Motor2Gear c
 023B           _Motor1Gear::
 023B                   .blkb 1
 023C                   .dbsym e Motor1Gear _Motor1Gear c
 023C           _Motor2Status::
 023C                   .blkb 2
 023E                   .dbstruct 0 2 .1
 023E                   .dbfield 0 RUN F[0:1]
 023E                   .dbfield 0 DIR F[1:1]
 023E                   .dbfield 0 BrokenStop F[2:1]
 023E                   .dbfield 0 CommandStop F[3:1]
 023E                   .dbfield 0 OverCurrent F[4:1]
 023E                   .dbfield 0 UnderVoltage F[5:1]
 023E                   .dbfield 0 StartResult F[6:2]
 023E                   .dbfield 0 ThisCurrent F[8:8]
 023E                   .dbend
 023E                   .dbunion 0 2 MotorStatus
 023E                   .dbfield 0 i i
 023E                   .dbfield 0 s S[.1]
 023E                   .dbend
 023E                   .dbsym e Motor2Status _Motor2Status S[MotorStatus]
 023E           _Motor1Status::
 023E                   .blkb 2
 0240                   .dbsym e Motor1Status _Motor1Status S[MotorStatus]
 0240           _myFIB::
 0240                   .blkb 4
 0244                   .dbunion 0 4 FIB
 0244                   .dbfield 0 f D
 0244                   .dbfield 0 i A[4:2]i
 0244                   .dbfield 0 b A[4:4]c
 0244                   .dbend
 0244                   .dbsym e myFIB _myFIB S[FIB]
                        .area lit(rom, con, rel)
 0000           L910:
 0000 00008043          .word 0x0,0x4380
 0004           L909:
 0004 0000CA42          .word 0x0,0x42ca
 0008           L908:
 0008 0AD72340          .word 0xd70a,0x4023
 000C           L348:
 000C 4260853F          .word 0x6042,0x3f85
 0010           L336:
 0010 0000FA40          .word 0x0,0x40fa
 0014           ; }
